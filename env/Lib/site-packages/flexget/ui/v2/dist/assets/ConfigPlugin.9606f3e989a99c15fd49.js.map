{"version":3,"sources":["webpack:///./node_modules/react-monaco-editor/lib/utils.js","webpack:///./node_modules/react-monaco-editor/lib/index.js","webpack:///./node_modules/react-monaco-editor/lib/editor.js","webpack:///./node_modules/react-monaco-editor/lib/diff.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/editor.worker.js","webpack:///./node_modules/monaco-yaml/esm/yaml.worker.js","webpack:///./node_modules/@material-ui/lab/esm/internal/svg-icons/SuccessOutlined.js","webpack:///./node_modules/@material-ui/lab/esm/internal/svg-icons/ReportProblemOutlined.js","webpack:///./node_modules/@material-ui/lab/esm/internal/svg-icons/ErrorOutline.js","webpack:///./node_modules/@material-ui/lab/esm/internal/svg-icons/InfoOutlined.js","webpack:///./node_modules/@material-ui/lab/esm/Alert/Alert.js","webpack:///./src/utils/encoding.ts","webpack:///./src/plugins/config/hooks.ts","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/bracketMatching/bracketMatching.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/clipboard/clipboard.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/find/findDecorations.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/find/replaceAllCommand.js","webpack:///./node_modules/monaco-editor/esm/vs/base/common/search.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/find/replacePattern.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/find/findModel.js","webpack:///./node_modules/monaco-editor/esm/vs/base/browser/ui/checkbox/checkbox.js","webpack:///./node_modules/monaco-editor/esm/vs/base/browser/ui/findinput/findInputCheckboxes.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/find/findOptionsWidget.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/find/findState.js","webpack:///./node_modules/monaco-editor/esm/vs/base/browser/formattedTextRenderer.js","webpack:///./node_modules/monaco-editor/esm/vs/base/common/history.js","webpack:///./node_modules/monaco-editor/esm/vs/base/browser/ui/inputbox/inputBox.js","webpack:///./node_modules/monaco-editor/esm/vs/base/browser/ui/findinput/findInput.js","webpack:///./node_modules/monaco-editor/esm/vs/base/browser/ui/findinput/replaceInput.js","webpack:///./node_modules/monaco-editor/esm/vs/platform/browser/contextScopedHistoryWidget.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/find/findWidget.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/find/findController.js","webpack:///./node_modules/monaco-editor/esm/vs/base/common/htmlContent.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/color.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/colorDetector.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/colorPickerModel.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/colorPickerWidget.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/hover/getHover.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/hover/hoverOperation.js","webpack:///./node_modules/monaco-editor/esm/vs/base/common/marked/marked.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/hover/hoverWidgets.js","webpack:///./node_modules/monaco-editor/esm/vs/base/common/idGenerator.js","webpack:///./node_modules/monaco-editor/esm/vs/base/common/insane/insane.js","webpack:///./node_modules/monaco-editor/esm/vs/base/browser/markdownRenderer.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/markdown/markdownRenderer.js","webpack:///./node_modules/monaco-editor/esm/vs/base/common/labels.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/peekView/peekView.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/browser/widget/embeddedCodeEditorWidget.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/zoneWidget/zoneWidget.js","webpack:///./node_modules/monaco-editor/esm/vs/platform/severityIcon/common/severityIcon.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/gotoError/gotoErrorWidget.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/gotoError/gotoError.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/types.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/codeAction.js","webpack:///./node_modules/monaco-editor/esm/vs/base/common/lazy.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/message/messageController.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/codeActionMenu.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/lightBulbWidget.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/codeActionUi.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/codeActionModel.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/codeActionCommands.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/hover/modesContentHover.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/hover/modesGlyphHover.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/goToSymbol.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/referencesModel.js","webpack:///./node_modules/monaco-editor/esm/vs/base/browser/ui/codiconLabel/codiconLabel.js","webpack:///./node_modules/monaco-editor/esm/vs/base/browser/ui/highlightedlabel/highlightedLabel.js","webpack:///./node_modules/monaco-editor/esm/vs/base/browser/ui/iconLabel/iconLabel.js","webpack:///./node_modules/monaco-editor/esm/vs/base/browser/ui/splitview/splitview.js","webpack:///./node_modules/monaco-editor/esm/vs/base/browser/ui/countBadge/countBadge.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/peek/referencesTree.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/peek/referencesWidget.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/peek/referencesController.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/symbolNavigation.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/goToCommands.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/link/clickLinkGesture.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/link/goToDefinitionAtPosition.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/hover/hover.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/provideSignatureHelp.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/parameterHintsModel.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/parameterHintsWidget.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/parameterHints.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/wordSelections.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/bracketSelections.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/smartSelect.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggest.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/snippet/snippetParser.js","webpack:///./node_modules/monaco-editor/esm/vs/platform/workspaces/common/workspaces.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/snippet/snippetVariables.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/snippet/snippetSession.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/snippet/snippetController2.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggestMemory.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggestAlternatives.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/completionModel.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/wordDistance.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggestModel.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/documentSymbols/outlineTree.js","webpack:///./node_modules/monaco-editor/esm/vs/platform/files/common/files.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/common/services/getIconClasses.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggestWidget.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/wordContextKey.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggestCommitCharacters.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggestRangeHighlighter.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/contrib/suggest/suggestController.js","webpack:///./node_modules/monaco-editor/esm/vs/editor/standalone/browser/iPadShowKeyboard/iPadShowKeyboard.js","webpack:///./node_modules/monaco-editor/esm/vs/basic-languages/_.contribution.js","webpack:///./node_modules/monaco-editor/esm/vs/basic-languages/yaml/yaml.contribution.js","webpack:///./src/plugins/config/Editor.tsx","webpack:///./src/plugins/config/SubmitButton.tsx","webpack:///./src/plugins/config/ResetForm.tsx","webpack:///./src/plugins/config/Config.tsx","webpack:///./node_modules/monaco-yaml/esm/_deps/vscode-languageserver-types/main.js","webpack:///./node_modules/monaco-yaml/esm/languageFeatures.js","webpack:///./node_modules/monaco-yaml/esm/workerManager.js","webpack:///./node_modules/monaco-yaml/esm/yamlMode.js","webpack:///./node_modules/monaco-yaml/esm/monaco.contribution.js","webpack:///./node_modules/@material-ui/lab/esm/internal/svg-icons/Close.js"],"names":["Object","defineProperty","exports","value","processSize","size","test","concat","noop","enumerable","get","_editor","_diff","_interopRequireDefault","obj","__esModule","monaco","newObj","key","prototype","hasOwnProperty","call","desc","getOwnPropertyDescriptor","set","_interopRequireWildcard","_propTypes","_react","_utils","_typeof","Symbol","iterator","constructor","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","push","apply","_defineProperties","target","props","i","length","descriptor","configurable","writable","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_assertThisInitialized","self","ReferenceError","_setPrototypeOf","p","_defineProperty","MonacoEditor","_React$Component","_this","instance","Constructor","TypeError","_classCallCheck","this","_possibleConstructorReturn","component","containerElement","undefined","protoProps","staticProps","subClass","superClass","create","_inherits","initMonaco","prevProps","_this$props","language","theme","height","options","width","editor","model","getModel","getValue","__prevent_trigger_change_event","pushUndoStop","pushEditOperations","range","getFullModelRange","text","setModelLanguage","setTheme","layout","updateOptions","destroyMonaco","dispose","_subscription","defaultValue","_this$props2","overrideServices","assign","editorWillMount","arguments","source","forEach","getOwnPropertyDescriptors","defineProperties","_objectSpread","editorDidMount","_this2","onDidChangeModelContent","event","onChange","_this$props3","style","createElement","ref","assignRef","className","Component","propTypes","oneOfType","string","number","func","defaultProps","_default","MonacoDiffEditor","_this$editor$getModel","original","modified","setValue","modifiedEditor","onDidChangeContent","originalModel","createModel","modifiedModel","setModel","createDiffEditor","initModels","_this$editor$getModel2","module","Worker","createSvgIcon","d","defaultIconMapping","success","SuccessOutlined","fontSize","warning","ReportProblemOutlined","error","ErrorOutline","info","InfoOutlined","Close","forwardRef","action","children","classes","_props$closeText","closeText","color","icon","_props$iconMapping","iconMapping","onClose","_props$role","role","_props$severity","severity","_props$variant","variant","other","Paper","square","elevation","root","capitalize","message","IconButton","title","onClick","withStyles","typography","body2","borderRadius","shape","backgroundColor","display","padding","standardSuccess","palette","main","standardInfo","standardWarning","standardError","outlinedSuccess","type","border","outlinedInfo","outlinedWarning","outlinedError","filledSuccess","fontWeight","fontWeightMedium","filledInfo","filledWarning","filledError","marginRight","opacity","flexDirection","justifyContent","alignItems","marginLeft","paddingLeft","name","uint6ToB64","nUint6","btoaUTF16","sString","aBytes","nMod3","eqLen","sB64Enc","nLen","nUint24","nIdx","String","fromCharCode","substring","base64EncArr","sDOMStr","nStrLen","nArrLen","nMapIdx","nChr","charCodeAt","Uint8Array","nChrIdx","strToUTF8Arr","atobUTF16","sBase64","nPart","sView","UTF8ArrToStr","nBlockSize","nMod4","replace","nInLen","nOutLen","Math","ceil","nOutIdx","nInIdx","base64DecToArr","extendStatics","useGetSchema","useFlexgetAPI","Method","Get","state","getRequest","useState","schemas","setSchemas","useEffect","resp","ok","data","map","schema","uri","id","fileMatch","document","baseURI","fn","__extends","b","Array","__","overviewRulerBracketMatchForeground","dark","light","hc","nls","_super","JumpToBracketAction","label","alias","precondition","kbOpts","kbExpr","editorTextFocus","primary","weight","run","accessor","controller","jumpToBracket","SelectToBracketAction","description","args","properties","default","selectBrackets","selectToBracket","BracketsData","position","brackets","BracketMatchingController","_lastBracketsData","_lastVersionId","_decorations","_updateBracketsSoon","_register","_updateBrackets","_matchBrackets","getOption","schedule","onDidChangeCursorPosition","e","onDidChangeModel","onDidChangeModelLanguageConfiguration","onDidChangeConfiguration","hasChanged","deltaDecorations","getContribution","ID","hasModel","newSelections","getSelections","selection","getStartPosition","matchBracket","newCursorPosition","containsPosition","enclosingBrackets","findEnclosingBrackets","nextBracket","findNextBracket","lineNumber","column","setSelections","revealRange","selectFrom","selectTo","sort","compareRangesUsingStarts","open_1","close_1","getEndPosition","_recomputeBrackets","newDecorations","newDecorationsLen","_i","_a","bracketData","selections","versionId","getVersionId","previousData","positions","positionsLen","len","isEmpty","compare","newData","newDataLen","previousIndex","previousLen","isBefore","equals","_DECORATION_OPTIONS_WITH_OVERVIEW_RULER","_DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER","register","stickiness","overviewRuler","Center","collector","bracketMatchBackground","getColor","addRule","bracketMatchBorder","appendMenuItem","group","command","comment","order","supportsCut","platform","queryCommandSupported","supportsCopy","supportsCopyWithSyntaxHighlighting","supportsPaste","ExecCommandAction","browserCommand","opts","runCommand","focusedEditor","getFocusedCodeEditor","hasTextFocus","trigger","execCommand","focus","ExecCommandCutAction","textInputFocus","win","secondary","contextMenuOpts","menuOpts","menuId","getSelection","ExecCommandCopyAction","ExecCommandPasteAction","ExecCommandCopyWithSyntaxHighlightingAction","forceCopyWithSyntaxHighlighting","FindDecorations","_overviewRulerApproximateDecorations","_findScopeDecorationId","_rangeHighlightDecorationId","_highlightedDecorationId","_startPosition","getPosition","_allDecorations","reset","getCount","getFindScope","getDecorationRange","setStartPosition","newStartPosition","setCurrentFindMatch","_getDecorationIndex","decorationId","index","indexOf","getCurrentMatchesPosition","desiredRange","candidates_1","getDecorationsInRange","candidate","candidateOpts","_FIND_MATCH_DECORATION","_CURRENT_FIND_MATCH_DECORATION","nextMatch","newCurrentDecorationId","matchPosition","equalsRange","changeDecorations","changeAccessor","changeDecorationOptions","removeDecoration","rng","startLineNumber","endLineNumber","endColumn","lineBeforeEnd","lineBeforeEndMaxColumn","getLineMaxColumn","startColumn","addDecoration","_RANGE_HIGHLIGHT_DECORATION","findMatches","findScope","findMatchesOptions","newOverviewRulerApproximateDecorations","_FIND_MATCH_NO_OVERVIEW_DECORATION","lineCount","getLineCount","approxPixelsPerLine","getLayoutInfo","mergeLinesDelta","max","prevStartLineNumber","prevEndLineNumber","_FIND_MATCH_ONLY_OVERVIEW_DECORATION","newFindMatchesDecorations","_FIND_SCOPE_DECORATION","matchBeforePosition","r","matchAfterPosition","result","zIndex","showIfCollapsed","minimap","Inline","isWholeLine","ReplaceAllCommand","editorSelection","ranges","replaceStrings","_editorSelection","_ranges","_replaceStrings","_trackedEditorSelectionId","getEditOperations","builder","ops","o1","o2","resultOps","previousOp","plusRange","resultOps_1","op","addEditOperation","trackSelection","computeCursorState","helper","getTrackedSelection","buildReplaceStringWithCasePreserved","matches","pattern","containsHyphens","validateSpecificSpecialCharacter","containsUnderscores","buildReplaceStringForSpecificSpecialCharacter","toUpperCase","toLowerCase","strings","substr","specialCharacter","split","splitPatternAtSpecialCharacter","splitMatchAtSpecialCharacter","replaceString","splitValue","slice","StaticValueReplacePattern","staticValue","kind","DynamicPiecesReplacePattern","pieces","ReplacePattern","_state","fromStaticValue","ReplacePiece","buildReplaceString","preserveCase","piece","_substitute","matchIndex","remainder","floor","ReplacePieceBuilder","_source","_lastCharIndex","_result","_resultLen","_currentStaticPiece","emitUnchanged","toCharIndex","_emitStatic","emitStatic","emitMatchIndex","finalize","CONTEXT_FIND_WIDGET_VISIBLE","CONTEXT_FIND_INPUT_FOCUSED","CONTEXT_REPLACE_INPUT_FOCUSED","ToggleCaseSensitiveKeybinding","mac","ToggleWholeWordKeybinding","ToggleRegexKeybinding","ToggleSearchScopeKeybinding","FIND_IDS","FindModelBoundToEditorModel","_toDispose","_isDisposed","_startSearchingTimer","add","_updateDecorationsScheduler","research","reason","_ignoreModelContentChanged","isFlush","onFindReplaceStateChange","_onStateChanged","searchScope","searchString","isReplaceRevealed","isRegex","wholeWord","matchCase","isTooLargeForSyncing","cancel","setIfNotSet","moveCursor","_getSearchRange","newFindScope","_findMatches","changeMatchInfo","_moveToNextMatch","_hasMatches","matchesCount","_cannotFind","revealRangeInCenterIfOutsideViewport","_setCurrentFindMatch","match","matchesPosition","setSelection","_prevSearchPosition","before","isUsingLineStops","_moveToPrevMatch","isRecursed","prevMatchRange","searchRange","prevMatch","findPreviousMatch","containsRange","moveToPrevMatch","_nextSearchPosition","after","nextMatchRange","_getNextMatch","captureMatches","forceMove","findNextMatch","moveToNextMatch","_getReplacePattern","chCode","nextChCode","nextNextChCode","parseReplaceString","replacePattern","_executeEditorCommand","limitResultCount","replaceAll","_largeReplaceAll","_regularReplaceAll","searchData","parseSearchRequest","searchRegex","regex","multiline","mod","ignoreCase","global","RegExp","resultText","modelText","fullModelRange","hasReplacementPatterns","m","selectAllMatches","executeCommand","defaultOpts","inputActiveOptionBorder","fromHex","inputActiveOptionBackground","Checkbox","_onChange","_onKeyDown","onKeyDown","_opts","objects","_checked","isChecked","domNode","actionClassName","tabIndex","setAttribute","applyStyles","onclick","ev","checked","fire","preventDefault","ignoreGesture","onkeydown","keyboardEvent","keyCode","getAttribute","newIsChecked","classList","remove","styles","borderColor","toString","enable","disable","NLS_CASE_SENSITIVE_CHECKBOX_LABEL","NLS_WHOLE_WORD_CHECKBOX_LABEL","NLS_REGEX_CHECKBOX_LABEL","CaseSensitiveCheckbox","appendTitle","WholeWordsCheckbox","RegexCheckbox","FindOptionsWidget","keybindingService","themeService","_hideSoon","_hide","_isVisible","_keybindingService","_domNode","top","inputActiveOptionBorderColor","getTheme","inputActiveOptionBackgroundColor","caseSensitive","_keybindingLabelFor","appendChild","change","wholeWords","addOverlayWidget","somethingChanged","isRevealed","_revealTemporarily","dom","_onMouseOut","_onMouseOver","_applyTheme","onThemeChange","bind","actionId","kb","lookupKeybinding","getLabel","removeOverlayWidget","getId","getDomNode","preference","highlightFindOptions","_show","inputStyles","widgetBackground","widgetForeground","widgetShadowColor","hcBorder","effectiveOptionValue","override","FindReplaceState","_onFindReplaceStateChange","_searchString","_replaceString","_isRevealed","_isReplaceRevealed","_isRegex","_isRegexOverride","_wholeWord","_wholeWordOverride","_matchCase","_matchCaseOverride","_preserveCase","_preserveCaseOverride","_searchScope","_matchesPosition","_matchesCount","_currentMatch","currentMatch","changeEvent","updateHistory","newState","oldEffectiveIsRegex","oldEffectiveWholeWords","oldEffectiveMatchCase","oldEffectivePreserveCase","isRegexOverride","wholeWordOverride","matchCaseOverride","preserveCaseOverride","renderFormattedText","formattedText","element","_renderFormattedText","treeNode","actionHandler","child","createTextNode","content","a","href","disposeables","callback","isArray","nodeChild","actionViewItemIndex","current","stack","stream","StringStream","eos","next","isEscapedFormatType","formatTagType","peek","pop","textCurrent","advance","newCurrent","parseFormattedText","tagName","inline","char","HistoryNavigator","history","limit","_initialize","_limit","t","_history","delete","_navigator","previous","parent","first","last","has","_reduceToLimit","elements","_elements","Set","history_1","entry","$","inputBackground","inputForeground","inputValidationInfoBorder","inputValidationInfoBackground","inputValidationWarningBorder","inputValidationWarningBackground","inputValidationErrorBorder","inputValidationErrorBackground","HistoryInputBox","container","contextViewProvider","addToHistory","getCurrentValue","showNextValue","getNextValue","aria","showPreviousValue","getPreviousValue","currentValue","InputBox","maxHeight","Number","POSITIVE_INFINITY","_onDidChange","onDidChange","_onDidHeightChange","onDidHeightChange","placeholder","ariaLabel","inputBorder","inputValidationInfoForeground","inputValidationWarningForeground","inputValidationErrorForeground","validationOptions","validation","flexibleHeight","wrapper","input","onfocus","onblur","flexibleMaxHeight","mirror","innerHTML","scrollableElement","vertical","flexibleWidth","whiteSpace","wordWrap","onScroll","scrollTop","onSelectionChange","anchorNode","updateScrollDimensions","setPlaceHolder","oninput","onValueChange","onBlur","onFocus","stop","setTimeout","updateMirror","actions","actionbar","_hideMessage","_showMessage","placeHolder","setAriaLabel","removeAttribute","newValue","cachedHeight","blur","hasFocus","activeElement","select","setSelectionRange","start","end","disabled","horizontalPadding","parseFloat","paddingRight","cachedContentHeight","scrollHeight","setScrollDimensions","setScrollPosition","showMessage","force","classForType","alertText","stylesForType","hideMessage","validate","errorMsg","inputElement","hasAttribute","background","foreground","div","showContextView","getAnchor","anchorAlignment","render","renderOptions","spanElement","formatContent","textContent","renderText","onHide","hideContextView","suffix","borderWidth","borderStyle","previousHeight","min","insertAtCursor","selectionStart","selectionEnd","NLS_DEFAULT_LABEL","FindInput","_showOptionButtons","fixFocusOnOptionClickEnabled","_onDidOptionChange","onDidOptionChange","_onMouseDown","onMouseDown","_onInput","_onKeyUp","_onCaseSensitiveKeyDown","onCaseSensitiveKeyDown","_onRegexKeyDown","onRegexKeyDown","_lastHighlightFindOptions","appendCaseSensitiveLabel","appendWholeWordsLabel","appendRegexLabel","inputBox","viaKeyboard","indexes","newIndex","controls","onkeyup","onmousedown","setFocusInputOnOptionClick","setEnabled","enabled","checkBoxStyles","inputBoxStyles","getCaseSensitive","setCaseSensitive","getWholeWords","setWholeWords","getRegex","setRegex","focusOnCaseSensitive","clearMessage","NLS_PRESERVE_CASE_LABEL","PreserveCaseCheckbox","ReplaceInput","cachedOptionsWidth","_onPreserveCaseKeyDown","onPreserveCaseKeyDown","getPreserveCase","setPreserveCase","focusOnPreserve","newWidth","__decorate","decorators","c","Reflect","decorate","__param","paramIndex","decorator","getContextScopedWidget","contextKeyService","contextKey","getContext","createAndBindHistoryNavigationWidgetScopedContextKeyService","widget","scopedContextKeyService","createScoped","createWidgetScopedContextKeyService","bindTo","bindContextScopedWidget","historyNavigationEnablement","ContextScopedFindInput","showFindOptions","historyNavigator","ContextScopedReplaceInput","showReplaceOptions","registerCommandAndKeybindingRule","when","and","handler","arg2","NLS_FIND_INPUT_LABEL","NLS_FIND_INPUT_PLACEHOLDER","NLS_PREVIOUS_MATCH_BTN_LABEL","NLS_NEXT_MATCH_BTN_LABEL","NLS_TOGGLE_SELECTION_FIND_TITLE","NLS_CLOSE_BTN_LABEL","NLS_REPLACE_INPUT_LABEL","NLS_REPLACE_INPUT_PLACEHOLDER","NLS_REPLACE_BTN_LABEL","NLS_REPLACE_ALL_BTN_LABEL","NLS_TOGGLE_REPLACE_MODE_BTN_LABEL","NLS_MATCHES_COUNT_LIMIT_TITLE","NLS_MATCHES_LOCATION","NLS_NO_RESULTS","MAX_MATCHES_COUNT_WIDTH","ctrlKeyMod","FindWidgetViewZone","afterLineNumber","heightInPx","suppressMouseDown","stopPropagationForMultiLineUpwards","textarea","isMultiline","stopPropagation","stopPropagationForMultiLineDownwards","FindWidget","codeEditor","storageService","notificationService","_cachedHeight","_codeEditor","_controller","_contextViewProvider","_contextKeyService","_storageService","_notificationService","_ctrlEnterReplaceAllWarningPrompted","getBoolean","_isReplaceVisible","_ignoreChangeEvent","_updateHistoryDelayer","_buildDomNode","_updateButtons","_tryUpdateWidgetWidth","_findInput","updateAccessibilitySupport","addExtraSpaceOnTop","_viewZone","_showViewZone","_removeViewZone","onDidChangeCursorSelection","_updateToggleSelectionFindButton","onDidFocusEditorWidget","globalBufferTerm","getGlobalBufferTerm","_findInputFocused","_findFocusTracker","onDidFocus","_updateSearchScope","onDidBlur","_replaceInputFocused","_replaceFocusTracker","_replaceInput","_viewZoneId","onDidScrollChange","scrollTopChanged","_layoutViewZone","_reveal","_tryUpdateHeight","_toggleSelectionFind","showRedOutline","_updateMatchesCount","_delayedUpdateHistory","_updateHistory","minWidth","firstChild","removeChild","_getAriaLabel","clientWidth","isSelection","_closeBtn","findInputIsNonEmpty","_prevBtn","_nextBtn","_replaceBtn","_replaceAllBtn","_toggleReplaceBtn","toggleClass","setExpanded","canReplace","autoFindInSelection","isSelectionMultipleLine","layoutOverlayWidget","adjustEditorScrollTop","seedSearchStringFromSelection","editorCoords","startCoords","getScrolledVisiblePosition","startLeft","left","startTop","leftOfFindWidget","endCoords","focusTheEditor","viewZone","changeViewZones","_getHeight","addZone","setScrollTop","getScrollTop","adjustScroll","newHeight","scrollAdjustment","layoutZone","removeZone","layoutInfo","contentWidth","editorWidth","minimapWidth","collapsedFindWidget","reducedFindWidget","narrowFindWidget","_resized","maxWidth","FIND_WIDGET_INITIAL_WIDTH","findInputWidth","totalheight","totalHeight","focusFindInput","focusReplaceInput","setEndPosition","_onFindInputMouseDown","middleButton","_onFindInputKeyDown","querySelector","_onReplaceInputKeyDown","store","getHorizontalSashTop","_sash","getHorizontalSashLeft","getHorizontalSashWidth","PART_WIDTH","onTrigger","getAction","then","findPart","actionsContainer","isEnabled","replacePart","replaceActionsContainer","_resizeSash","orientation","originalWidth","onDidStart","evt","startX","currentX","onDidReset","currentWidth","SimpleButton","expanded","shouldHaveIt","addBackgroundColorRule","selector","findMatchHighlightBorder","findMatchBorder","findRangeHighlightBorder","resizeBorderBackground","focusOutline","getSelectionSearchString","wordAtPosition","getWordAtPosition","word","getValueLengthInRange","getValueInRange","CommonFindController","clipboardService","_findWidgetVisible","_clipboardService","loadQueryState","_model","shouldRestartFind","disposeModel","_start","forceRevealReplace","seedSearchStringFromGlobalClipboard","shouldFocus","shouldAnimate","updateSearchScope","saveQueryState","setGlobalBufferTerm","actualIsRegex","actualWholeWord","actualMatchCase","actualPreserveCase","isFindInputFocused","getState","closeFindWidget","toggleCaseSensitive","toggleWholeWords","toggleRegex","toggleSearchScope","setSearchString","selectionSearchString","stateChanges","currentSelection","globalFindClipboard","readFindText","writeFindText","FindController","_contextViewService","_themeService","_widget","_findOptionsWidget","_createFindWidget","StartFindAction","StartFindWithSelectionAction","MatchFindAction","_run","NextMatchFindAction","NextMatchFindAction2","PreviousMatchFindAction","PreviousMatchFindAction2","SelectionMatchFindAction","NextSelectionMatchFindAction","PreviousSelectionMatchFindAction","StartFindReplaceAction","findInputFocused","FindCommand","bindToContribution","x","linux","MarkdownString","isTrusted","_value","_isTrusted","appendText","appendMarkdown","appendCodeblock","langId","code","isEmptyMarkdownString","oneOrMany","isMarkdownString","every","thing","markdownStringEqual","removeMarkdownEscapes","getColorPresentations","colorInfo","provider","token","Promise","resolve","provideColorPresentations","resource","rawCIs","promises","ordered","reverse","provideDocumentColors","None","result_2","ci","red","green","blue","alpha","all","isIRange","presentations","ColorDetector","_codeEditorService","_configurationService","_localToDispose","_decorationsIds","_colorDatas","Map","_colorDecoratorIds","_decorationsTypes","_isEnabled","onModelChanged","onDidChangeModelLanguage","prevIsEnabled","removeAllDecorations","_timeoutTimer","_computePromise","languageId","getLanguageIdentifier","deprecatedConfig","colorDecorators","cancelAndSet","beginCompute","RECOMPUTE_TIME","colors","result_1","getColors","colorInfos","updateDecorations","updateColorDecorators","clear","colorDatas","decorations","EMPTY","colorData","newDecorationsTypes","rgba","round","subKey","hash","g","registerDecorationType","contentText","margin","resolveDecorationOptions","subType","removeDecorationType","getColorData","fromPositions","ColorPickerModel","availableColorPresentations","presentationIndex","_onColorFlushed","onColorFlushed","_onDidChangeColor","onDidChangeColor","_onDidChangePresentation","onDidChangePresentation","originalColor","_color","_colorPresentations","colorPresentations","presentation","selectNextColorPresentation","flushColor","guessColorPresentation","originalText","ColorPickerHeader","pickedColorNode","colorBox","Format","CSS","format","white","CLICK","isLighter","ColorPickerBody","pixelRatio","saturationBox","onDidSaturationValueChange","opacityStrip","onDidOpacityChange","hueStrip","onDidHueChange","s","v","hsva","h","SaturationBox","canvas","monitor","origin","onDidChangePosition","offsetX","offsetY","startMonitoring","posx","posy","mouseUpListener","stopMonitoring","paintSelection","offsetWidth","offsetHeight","paint","saturatedColor","ctx","whiteGradient","createLinearGradient","addColorStop","blackGradient","rect","fillStyle","fill","isMonitoring","Strip","overlay","slider","updateSliderPosition","onDidChangeTop","OpacityStrip","opaque","transparent","HueStrip","ColorPickerWidget","header","body","getHover","support","provideHover","hover","hasRange","hasHtmlContent","contents","err","__marked_exports","HoverOperation","computer","progress","hoverTime","_computer","_hoverTime","_firstWaitScheduler","_triggerAsyncComputation","_secondWaitScheduler","_triggerSyncComputation","_loadingMessageScheduler","_showLoadingMessage","_asyncComputationPromise","_asyncComputationPromiseDone","_completeCallback","_errorCallback","_progressCallback","setHoverTime","_firstWaitTime","_secondWaitTime","_loadingMessageTime","computeAsync","asyncResult","_withAsyncResult","_onError","computeSync","onResult","_onComplete","getResult","_onProgress","getResultWithLoadingMessage","mode","__spreadArrays","il","k","j","jl","ContentHoverWidget","allowEditorOverflow","_id","_stoleFocus","_containerDomNode","scrollbar","hide","updateFont","onDidLayoutChange","addContentWidget","_showAtPosition","_showAtRange","showAt","isVisible","layoutContentWidget","removeContentWidget","getElementsByClassName","node","applyFontInfo","updateContents","onContentsChange","scanDomNode","lineHeight","GlyphHoverWidget","_showAtLineNumber","editorLayout","topForLineNumber","getTopForLineNumber","editorScrollTop","clientHeight","glyphMarginLeft","glyphMarginWidth","codeTags","getElementsByTagName","codeClasses","IdGenerator","prefix","_prefix","_lastId","nextId","defaultGenerator","block","newline","fences","hr","heading","nptable","blockquote","list","html","def","table","lheading","paragraph","Lexer","tokens","links","marked","defaults","rules","normal","pedantic","gfm","tables","_label","_title","edit","bullet","item","_tag","_comment","merge","lex","src","loose","cap","bull","listStart","listItems","space","tag","l","isordered","istask","ischecked","exec","rtrim","lang","trim","depth","splitCells","align","cells","smartLists","join","charAt","task","sanitize","pre","sanitizer","Error","escape","autolink","url","link","reflink","nolink","strong","em","br","del","InlineLexer","renderer","Renderer","breaks","TextRenderer","Parser","slugger","Slugger","seen","encode","escapeTest","escapeReplace","ch","replacements","escapeTestNoEncode","escapeReplaceNoEncode","unescape","_","n","parseInt","opt","val","cleanUrl","base","prot","decodeURIComponent","originIndependentUrl","baseUrls","resolveUrl","encodeURI","_punctuation","_escapes","_scheme","_email","_attribute","_href","_extended_email","_backpedal","output","prevCapZero","out","inLink","inRawBlock","lastParenIndex","findClosingBracket","linkLen","outputLink","escapes","codespan","mangle","smartypants","image","random","infostring","escaped","highlight","langPrefix","quote","level","raw","headerIds","headerPrefix","slug","xhtml","listitem","checkbox","tablerow","tablecell","flags","baseUrl","parse","inlineText","tok","parseText","row","cell","errMsg","silent","console","log","originalSlug","tableRow","count","offset","str","curr","splice","invert","suffLen","currChar","pending","done","setOptions","getDefaults","parser","lexer","inlineLexer","__insane_func","f","u","1","require","toMap","uris","2","allowedAttributes","iframe","img","allowedClasses","allowedSchemes","allowedTags","3","voids","4","insane","strict","buffer","configuration","5","6","assignment","shift","7","he","lowercase","rstart","rend","rattrs","rtag","rtagend","chars","lastItem","createStack","parsePart","parseEdge","parseEndTag","parseStartTag","parseTagDecode","parseTag","same","rest","unary","attrs","low","doubleQuotedValue","singleQuotedValue","unquotedValue","decode","pos","8","attributes","context","ignoring","ignore","classesOk","attrsOk","lkey","colon","questionmark","some","scheme","testUrl","unignore","transformText","9","unescapes","rescaped","runescaped","escapeHtmlChar","unescapeHtmlChar","escapeHtml","unescapeHtml","version","10","asKey","accumulator","reduce","renderMarkdown","markdown","signalInnerHTML","_uriMassage","part","revive","encodeURIComponent","JSON","stringify","isDomUri","query","with","withInnerHTML","dimensions","splitted","parameters","heightFromParams","widthFromParams","widthIsFinite","isFinite","heightIsFinite","parseHrefAndDimensions","codeBlockRenderer","promise","values","strValue","span","catch","codeBlockRenderCallback","parentElement","dataset","markedOptions","http","https","mailto","file","vscodeRemote","vscodeRemoteResource","renderedMarkdown","MarkdownRenderer","_modeService","_openerService","_onDidRenderCodeBlock","onDidRenderCodeBlock","getOptions","languageAlias","modeId","getModeIdForLanguageName","triggerMode","getPromise","fontFamily","open","fromUserGesture","getPathLabel","userHomeProvider","rootProvider","baseResource","getWorkspaceFolder","hasMultipleRoots","getWorkspace","folders","pathLabel","rootName","untitled","fragment","hasDriveLetter","fsPath","normalizeDriveLetter","res","path","userHome","normalizedUserHome","normalizedUserHomeCached","normalized","sep","tildify","getBaseLabel","PeekContext","EmbeddedCodeEditorWidget","domElement","parentEditor","instantiationService","codeEditorService","commandService","accessibilityService","getRawOptions","_parentEditor","_overwriteOptions","_onParentConfigurationChanged","getParentEditor","newOptions","defaultColor","defaultOptions","showArrow","showFrame","frameColor","arrowColor","keepEditorSelection","ViewZoneDelegate","afterColumn","heightInLines","onDomNodeTop","onComputedHeight","_onDomNodeTop","_onComputedHeight","OverlayWidgetDelegate","Arrow","_ruleName","_IdGenerator","_height","_updateStyle","show","where","ZoneWidget","_arrow","_overlayWidget","_positionMarkerId","_disposables","_isShowing","isAccessible","_getWidth","_getLeft","_onWidth","_fillContainer","_initSash","_applyStyles","borderTopColor","borderBottomColor","verticalScrollbarWidth","minimapLeft","_onViewZoneTop","_onViewZoneHeight","containerHeight","_decoratingElementsHeight","_doLayout","rangeOrPos","lift","_showImpl","viewZoneDomNode","overflow","maxHeightInLines","arrowHeight","frameThickness","width_1","frameWidth","borderTopWidth","borderBottomWidth","revealLine","isLastLine","revealLineInCenter","setCssClass","classToReplace","widthInPixel","heightInPixel","_relayout","newHeightInLines","isResizeable","startY","onDidEnd","lineDelta","currentY","roundedLineDelta","IPeekViewService","class_1","_widgets","addExclusiveWidget","existing","listener","onDidClose","inPeekEditor","notInPeekEditor","toNegated","PeekContextController","headerBackgroundColor","primaryHeadingColor","secondaryHeadingColor","PeekViewWidget","_onDidClose","_headElement","_primaryHeading","_secondaryHeading","_bodyElement","_fillHead","_fillBody","titleElement","_onTitleClick","_fillTitleIcon","_metaHeading","actionBarOptions","_getActionBarOptions","_actionbarWidget","setTitle","primaryHeading","secondaryHeading","setMetaTitle","headHeight","bodyHeight","_doLayoutHead","_doLayoutBody","peekViewTitleBackground","peekViewTitleForeground","peekViewTitleInfoForeground","peekViewBorder","peekViewResultsBackground","black","peekViewResultsMatchForeground","peekViewResultsFileForeground","peekViewResultsSelectionBackground","peekViewResultsSelectionForeground","peekViewEditorBackground","peekViewEditorGutterBackground","peekViewResultsMatchHighlight","peekViewEditorMatchHighlight","peekViewEditorMatchHighlightBorder","Ignore","Info","Warning","errorIconForeground","warningIconForeground","infoIconForeground","MessageWidget","onRelatedInformation","_lines","_longestLineLength","_relatedDiagnostics","WeakMap","_messageBlock","_relatedBlock","related","_scrollable","horizontal","useShadows","horizontalScrollbarSize","verticalScrollbarSize","scrollLeft","update","relatedInformation","lines","lines_1","line","lastLineElement","_b","lines_2","innerText","detailsElement","sourceElement","codeElement","relatedInformationNode","paddingTop","_c","relatedInformation_1","relatedResource","relatedMessage","fontInfo","scrollWidth","typicalFullwidthCharacterWidth","getHeightInLines","MarkerNavigationWidget","_callOnDispose","_onDidSelectRelatedInformation","onDidSelectRelatedInformation","_severity","_backgroundColor","editorMarkerNavigationBackground","colorId","editorMarkerNavigationError","editorMarkerNavigationWarning","editorMarkerNavigationInfo","_parentContainer","_icon","_container","_message","showAtMarker","marker","markerIdx","markerCount","editorPosition","computeRequiredHeight","detail","toSeverity","revealPositionInCenter","updateMarker","showStale","_heightInPixel","errorDefault","warningDefault","infoDefault","__awaiter","thisArg","_arguments","P","generator","reject","fulfilled","step","rejected","__generator","y","sent","trys","verb","MarkerModel","markers","_toUnbind","_markers","_nextIdx","_ignoreSelectionChange","_onCurrentMarkerChanged","_onMarkerSetChanged","setMarkers","onDidDispose","currentMarker","oldMarker","compareMarker","withoutWatchingEditorPosition","_initIdx","fwd","found","isBeforeOrEqual","canNavigate","idx","move","inCircles","oldIdx","atEdge","findMarkerAtPosition","MarkerController","_markerService","_editorService","_disposeOnClose","_widgetVisible","CONTEXT_MARKERS_NAVIGATION_VISIBLE","_cleanUp","getOrCreateModel","_getMarkers","onMarkerChanged","_onMarkerChanged","prevMarkerKeybinding","nextMarkerKeybinding","LABEL","closeMarkersNavigation","actions_1","openCodeEditor","pinned","revealIfOpened","collapseToStart","onCurrentMarkerChanged","total","onMarkerSetChanged","focusEditor","changedResources","editorModel","read","severities","MarkerNavigationAction","multiFile","_isNext","_multiFile","markerService","editorService","newMarker","revealInCenterIfOutsideViewport","NextMarkerAction","PrevMarkerAction","NextMarkerInFilesAction","PrevMarkerInFilesAction","MarkerCommand","CodeActionKind","contains","intersects","append","Empty","QuickFix","Refactor","Source","SourceOrganizeImports","SourceFixAll","CodeActionCommandArgs","preferred","fromUser","arg","getKindFromUser","getApplyFromUser","getPreferredUser","defaultAutoApply","defaultKind","ManagedCodeActionSet","disposables","allActions","codeActionsComparator","validActions","diagnostics","localeCompare","fix","isPreferred","getCodeActions","rangeOrSelection","codeActionContext","only","include","cts","providers","providedCodeActionKinds","providedKind","includeSourceActions","mayIncludeActionsOfKind","getCodeActionProviders","providedCodeActions","err_1","provideCodeActions","isCancellationRequested","actionKind","excludes","exclude","onlyIncludePreferredActions","filtersAction","newProviders","finally","validatedRangeOrSelection","codeActionSet","isISelection","liftSelection","validateRange","Lazy","executor","_didRun","_error","MessageController","closeTimeout","_messageWidget","_messageListeners","_visible","MESSAGE_VISIBLE","onDidAttemptReadOnlyEdit","_onDidAttemptReadOnlyEdit","bounds","onDidBlurEditorText","closeMessage","onMouseMove","fadeOut","MessageCommand","revealLinesInCenterIfOutsideViewport","_position","anchor","messageWidget","handle","clearTimeout","removeEventListener","addEventListener","LightBulbState","__assign","CodeActionAction","CodeActionMenu","_delegate","_contextMenuService","_showingActions","_keybindingResolver","getKeybindings","codeActions","at","actionsToShow","menuActions","resolver","includeDisabledActions","onSelectCodeAction","isIPosition","_toCoords","getResolver","showContextMenu","getActions","autoSelectFirstItem","getKeyBinding","revealPosition","cursorCoords","CodeActionKeybindingResolver","_keybindingProvider","allCodeActionBindings","codeActionCommands","resolvedKeybinding","commandArgs","bestKeybindingForCodeAction","candidates","reduceRight","currentBest","Hidden","Showing","widgetPosition","LightBulbWidget","_quickFixActionId","_preferredFixActionId","_onClick","ignoreTarget","pad","buttons","_updateLightBulbTitle","onDidUpdateKeybindings","atPosition","tabSize","lineContent","getLineContent","indent","computeIndentLevel","isFolded","effectiveLineNumber","spaceWidth","_posPref","hasAutoFix","preferredKb","editorLightBulbForegroundColor","editorLightBulbAutoFixForegroundColor","CodeActionsState","CodeActionUi","quickFixActionId","preferredFixActionId","delegate","_activeCodeActions","_codeActionWidget","createInstance","applyCodeAction","_lightBulbWidget","showCodeActionList","e_1","validActionToApply","invalidAction","_d","rawValue","tryGetValidActionToApply","getInvalidActionThatWouldHaveBeenApplied","notAvailableMessage","autoApply","SUPPORTED_CODE_ACTIONS","CodeActionOracle","_signalChange","_delay","_autoTriggerTimer","_onMarkerChanges","_onCursorChange","_getRangeOfSelectionUnlessWhitespaceEnclosed","_createEventAndSignalChange","resources","_getRangeOfMarker","markerRange","intersectRanges","Triggered","CodeActionModel","_progressService","_codeActionOracle","_onDidChangeState","onDidChangeState","_supportedCodeActions","_update","setState","supportedActions","showWhile","skipNotify","contextKeyForSupportedActions","argsSchema","required","defaultSnippets","enum","enumDescriptions","QuickFixController","progressService","contextMenuService","_commandService","_bulkEditService","_instantiationService","_ui","Id","retrigger","_applyCodeAction","_trigger","showCodeActions","manualTriggerAtCurrentPosition","triggerPosition","invokeFunction","bulkEditService","triggerCodeActionsForEditorSelection","QuickFixAction","hasCodeActionsProvider","_accessor","CodeActionCommand","runEditorCommand","userArgs","RefactorAction","SourceAction","OrganizeImportsAction","FixAllAction","AutoFixAction","ColorHover","MarkerHover","ModesContentComputer","_markerDecorationsService","setRange","_range","clearResult","colorDetector","maxColumn","lineDecorations","getLineDecorations","didFindColor","hoverRange","getMarker","range_1","hoverMessage","isFromSynchronousComputation","_getLoadingMessage","ModesContentHoverWidget","markerDecorationsService","renderDisposable","_messages","_lastRange","_highlightDecorations","_isChangingDecorations","_shouldFocus","_colorPicker","_hoverOperation","_withResult","delay","FOCUS","BLUR","_renderMessages","onModelDecorationsChanged","startShowingAt","filteredMessages","msg","second","firstElement","secondElement","makeKey","hoverContentsEquals","isColorPickerVisible","complete","renderRange","messages","renderColumn","highlightRange","createDocumentFragment","isEmptyHoverContent","containColorPicker","markdownDisposeables","markerMessages","color_1","editorModel_1","range_2","model_1","widget_1","updateEditorModel","textEdits","newRange","textEdit","identifier","forceMoveMarkers","executeEdits","additionalTextEdits","updateColorPresentations","colorListener","colorChangeListener","markdownHoverElement","hoverContentsElement","renderedContents","renderMarkerHover","markerHoverForStatusbar","renderMarkerStatusbar","_DECORATION_OPTIONS","markerHover","hoverElement","markerElement","messageElement","_loop_1","message_1","relatedInfoContainer","marginTop","cursor","messageElement_1","this_1","actionsElement","renderAction","commandId","quickfixPlaceholderElement","transition","codeActionsPromise","showing","elementPosition","cancellationToken","actionOptions","actionContainer","iconClass","keybinding","MarginComputer","_lineNumber","setLineNumber","toHoverMessage","lineDecorations_1","glyphMarginClassName","glyphMarginHoverMessage","ModesGlyphHoverWidget","modeService","openerService","_renderDisposeables","_lastLineNumber","_markdownRenderer","messages_1","getLocationLinks","registry","provide","getDefinitionsAtPosition","provideDefinition","getDeclarationsAtPosition","provideDeclaration","getImplementationsAtPosition","provideImplementation","getTypeDefinitionsAtPosition","provideTypeDefinition","getReferencesAtPosition","compact","resultWithoutDeclaration","provideReferences","includeDeclaration","OneReference","isProviderFirst","_rangeCallback","FilePreview","_modelReference","preview","textEditorModel","getWordUntilPosition","beforeRange","afterRange","inside","FileReferences","_preview","_loadFailure","textModelResolverService","_resolved","createModelReference","modelReference","ReferencesModel","groups","references","_onDidChangeReferenceRange","onDidChangeReferenceRange","_links","providersFirst","_compareReferences","links_1","oneRef","targetSelectionRange","clone","nextOrPreviousReference","reference","childCount","groupCount","nearestReference","nearest","prefixLen","offsetDist","abs","referenceAt","firstReference","renderCodicons","_match","_g1","_g3","animation","HighlightedLabel","supportCodicons","highlights","didEverRender","escapeNewLines","htmlContent","substring_1","extra","highlights_1","FastLabelNode","_element","disposed","_textContent","_className","empty","_empty","IconLabel","labelContainer","nameContainer","descriptionContainer","supportHighlights","nameNode","supportDescriptionHighlights","descriptionNodeFactory","setLabel","extraClasses","italic","descriptionNode","descriptionMatches","descriptionTitle","Label","singleLabel","domId","separator","State","Sizing","LabelWithHighlights","_e","_f","_g","_h","_j","_k","labelEscapeNewLines","labels","labelStart","labelRange","intersect","splitMatches","name_1","badgeBackground","badgeForeground","CountBadge","badgeBorder","countFormat","titleFormat","setCount","setTitleFormat","DataSource","_resolverService","hasChildren","failure","getChildren","Delegate","getHeight","getTemplateId","OneReferenceRenderer","StringRepresentationProvider","getKeyboardNavigationLabel","parts","IdentityProvider","FileReferencesTemplate","_uriLabel","badge","getUriLabel","relative","FileReferencesRenderer","templateId","renderTemplate","renderElement","template","filterData","disposeTemplate","templateData","OneReferenceTemplate","score","filePreview","isDefault","AriaProvider","getAriaLabel","ariaMessage","defaultStyles","separatorBorder","ViewItem","view","disposable","_cachedVisibleSize","_size","cachedVisibleSize","setVisible","visible","viewMinimumSize","viewMaximumSize","minimumSize","maximumSize","priority","snap","pointerEvents","layoutContext","layoutContainer","VerticalViewItem","HorizontalViewItem","Distribute","Split","Invisible","SplitView","contentSize","proportions","viewItems","sashItems","Idle","_onDidSashChange","onDidSashChange","_onDidSashReset","_startSnappingEnabled","_endSnappingEnabled","types","inverseAltBehavior","proportionalLayout","el","sashContainer","viewContainer","views","viewDescriptor","sizing","doAddView","saveProportions","_orthogonalStartSash","sash","orthogonalStartSash","_orthogonalEndSash","orthogonalEndSash","startSnappingEnabled","updateSashEnablement","endSnappingEnabled","isTransparent","removeProperty","setProperty","addView","previousSize","lowPriorityIndexes","highPriorityIndexes","resize","distributeEmptySpace","layoutViews","onSashStart","alt","resetSashDragState","sashDragState","altKey","snapBefore","snapAfter","sizes","minDelta","NEGATIVE_INFINITY","maxDelta","viewItem","upIndexes","downIndexes","minDeltaUp","maxDeltaUp","maxDeltaDown","minDeltaDown","minDelta_1","maxDelta_1","snapBeforeIndex","findFirstSnapIndex","snapAfterIndex","halfSize","limitDelta","onSashChange","delta","newDelta","isLastSash","newSizes","viewItemIndex","newMinDelta","newMaxDelta","resizeIndex","onSashEnd","onViewChange","relayout","resizeView","Busy","distributeViewSizes","flexibleViewItems","flexibleSize","flexibleViewItems_1","getViewSize","skipLayout","insertBefore","viewSize","onChangeDisposable","containerDisposable","orientation_1","layoutProvider","getSashPosition","getVerticalSashLeft","sash_1","sashEventMapper","onStartDisposable","onStart","onChangeDisposable_1","onEndDisposable","onEnd","onDidResetDisposable","disposable_1","sashItem","overloadMinDelta","overloadMaxDelta","highPriorityIndexes_1","index_1","lowPriorityIndexes_1","index_2","upItems","upSizes","downItems","downSizes","snapped","snapView","deltaUp","deltaDown","lowPriorityIndex","emptyDelta","highPriorityIndexes_2","lowPriorityIndexes_2","collapsesDown","expandsDown","reverseViews","collapsesUp","expandsUp","snappedBefore","snappedAfter","indexes_1","indexes_2","DecorationsManager","_decorationIgnoreSet","_callOnModelChange","_onModelChanged","removeDecorations","_addDecorations","onDidChangeDecorations","_onDecorationChanged","newDecorationsActualIndex","oneReference","DecorationOptions","toRemove","spansMultipleLines","LayoutData","ratio","fromJSON","ReferenceWidget","_defaultTreeKeyboardSupport","layoutData","_textModelResolverService","_peekViewService","_disposeOnNewModel","_onDidSelectReference","onDidSelectReference","_dim","_previewNotAvailableMessage","_tree","_previewModelReference","_splitView","domFocus","_getFocusedReference","ctrlKey","metaKey","_messageContainer","_previewContainer","scrollBeyondLastLine","verticalHasArrows","horizontalHasArrows","alwaysConsumeMouseWheel","overviewRulerLanes","fixedOverflowWidgets","createFromString","_treeContainer","treeOptions","keyboardSupport","accessibilityProvider","keyboardNavigationLabelProvider","identityProvider","overrideStyles","listBackground","MAX_VALUE","onEvent","_revealReference","onDidChangeFocus","onDidOpen","browserEvent","MouseEvent","KeyboardEvent","tapCount","setFocus","newModel","_onNewModel","_decorationsManager","rerender","setInput","getFocus","revealParent","scrollType","sel","_revealedReference","inMemory","getInput","reveal","expand","revealRangeInCenter","findMatchHighlightColor","referenceHighlightColor","referenceHighlightBorder","hcOutline","resultsBackground","resultsMatchForeground","resultsFileForeground","resultsSelectedBackground","resultsSelectedForeground","editorBackground","editorGutterBackground","ctxReferenceSearchVisible","ReferencesController","_requestIdPool","_ignoreModelChangeEvent","_referenceSearchVisible","toggleWidget","modelPromise","peekMode","closeWidget","_peekMode","openReference","_gotoReference","requestId","goToNextOrPreviousReference","currentPosition","editorFocus","openedEditor","sideBySide","withController","outerEditor","getOuterEditor","not","lastFocusedList","ctxHasSymbols","ISymbolNavigationService","SymbolNavigationService","_currentModel","_currentIdx","_ignoreEditorChange","_ctxHasSymbols","_currentState","_currentMessage","put","refModel","editorState","getActiveCodeEditor","seenUri","seenPosition","revealNext","status","EditorState","_listener","onCodeEditorRemove","_onDidRemoveEditor","onCodeEditorAdd","_onDidAddEditor","listCodeEditors","submenu","SymbolNavigationAction","_configuration","symbolNavService","_getLocationModel","altAction","altActionId","referenceCount","_getAlternativeCommand","muteMessage","_getNoResultFoundMessage","_onResult","gotoLocation","targetEditor","_getGoToPreference","openInPeek","_openInPeek","_openReference","openToSide","modelNow_1","ids_1","DefinitionAction","alternativeDefinitionCommand","multipleDefinitions","goToDefinitionKb","GoToDefinitionAction","hasDefinitionProvider","isInEmbeddedEditor","registerCommandAlias","OpenDefinitionToSideAction","PeekDefinitionAction","DeclarationAction","alternativeDeclarationCommand","multipleDeclarations","GoToDeclarationAction","hasDeclarationProvider","PeekDeclarationAction","TypeDefinitionAction","alternativeTypeDefinitionCommand","multipleTypeDefinitions","GoToTypeDefinitionAction","hasTypeDefinitionProvider","PeekTypeDefinitionAction","ImplementationAction","alternativeImplementationCommand","multipleImplementations","GoToImplementationAction","hasImplementationProvider","PeekImplementationAction","ReferencesAction","alternativeReferenceCommand","multipleReferences","GoToReferencesAction","hasReferenceProvider","PeekReferencesAction","GenericGoToLocationAction","_references","_gotoMultipleBehaviour","_token","registerCommand","constraint","multiple","isUri","setPosition","revealPositionInCenterIfOutsideViewport","invokeWithinContext","control","hasModifier","modifier","hasTriggerModifier","triggerModifier","hasSideBySideModifier","triggerSideBySideModifier","isNoneOrSingleMouseDown","ClickLinkKeyboardEvent","keyCodeIsTriggerKey","triggerKey","keyCodeIsSideBySideKey","triggerSideBySideKey","ClickLinkOptions","createOptions","multiCursorModifier","ClickLinkGesture","_onMouseMoveOrRelevantKeyDown","onMouseMoveOrRelevantKeyDown","_onExecute","onExecute","_onCancel","onCancel","lastMouseMoveEvent","hasTriggerKeyOnMouseDown","newOpts","onEditorMouseMove","onEditorMouseDown","onMouseUp","onEditorMouseUp","onEditorKeyDown","onKeyUp","onEditorKeyUp","onMouseDrag","resetHandler","scrollLeftChanged","mouseEvent","GotoDefinitionAtPositionEditorContribution","toUnhook","toUnhookForKeyboard","linkDecorations","currentWordAtPosition","previousPromise","linkGesture","startFindDefinitionFromMouse","gotoDefinition","removeLinkDecorations","startFindDefinitionFromCursor","startFindDefinition","withKey","findDefinition","results","wordRange","previewValue","getPreviewValue","originSelectionRange","getModeIdByFilepathOrFirstLine","rangeToUse","getPreviewRangeBasedOnBrackets","MAX_SOURCE_PREVIEW_LINES","getPreviewRangeBasedOnIndentation","stripIndentationFromPreviewRange","previewRange","minIndent","getLineFirstNonWhitespaceColumn","endIndent","startIndent","maxLineNumber","ignoreFirstEmpty","currentBracket","lastBracket","isOpen","nextLineNumber","nextColumn","inlineClassName","activeLinkForeground","ModesHoverController","_toUnhook","_contentWidget","_glyphWidget","_isMouseDown","_hoverClicked","_hookEvents","_didChangeConfigurationHandler","_hideWidgets","_unhookEvents","_createHoverWidgets","hideWidgetsEventHandler","hoverOpts","_isHoverEnabled","_isHoverSticky","sticky","_onEditorMouseDown","_onEditorMouseUp","_onEditorMouseMove","onDidChangeModelDecorations","_onModelDecorationsChanged","onMouseLeave","_onEditorScrollChanged","contentWidget","glyphWidget","targetType","epsilon","typicalHalfwidthCharacterWidth","isAfterLines","horizontalDistanceToText","showContentHover","ShowHoverAction","ShowDefinitionPreviewHoverAction","editorHoverHighlightColor","hoverBackground","hoverBorder","hoverForeground","actionsBackground","codeBackground","Context","Visible","MultipleSignatures","provideSignatureHelp","supports","modes","triggerKind","Invoke","isRetrigger","triggerCharacter","ParameterHintState","Default","Pending","request","Active","hints","ParameterHintsModel","DEFAULT_DELAY","_onChangedHints","onChangedHints","triggerOnType","_pendingTriggers","_lastSignatureHelpResult","triggerChars","retriggerChars","triggerId","throttledDelayer","onEditorConfigurationChange","onCursorChange","onModelContentChange","onDidType","doTrigger","signatures","activeSignature","cycle","updateActiveSignature","activeSignatureHelp","triggerContext","error_1","mergeTriggerContexts","isTriggered","signatureHelpTriggerCharacters","signatureHelpRetriggerCharacters","lastCharIndex","triggerCharCode","TriggerCharacter","ContentChange","ParameterHintsWidget","renderDisposeables","announcedLabel","markdownRenderer","keyVisible","keyMultipleSignatures","newParameterHints","createParamaterHintDOMNodes","overloads","onPreviousClick","onNextClick","signature","docs","userSelect","domNodes","chain","on","updateMaxHeight","hasParameters","renderParameters","activeParameter","documentation","hasDocs","labelToAnnounce","getParameterLabel","currentParameter","getParameterLabelOffsets","beforeSpan","paramSpan","afterSpan","paramIdx","param","lastIndexOf","ParameterHintsController","TriggerParameterHintsAction","hasSignatureHelpProvider","ParameterHintsCommand","WordSelectionRangeProvider","provideSelectionRanges","positions_1","bucket","_addInWordRanges","_addWordRanges","_addWhitespaceLine","lastCh","getLineLength","getLineLastNonWhitespaceColumn","BracketSelectionRangeProvider","_bracketsRightYield","_bracketsLeftYield","counts","t1","Date","now","_maxRounds","bracket","_maxDuration","close","findPrevBracket","closing","innerBracket","outerBracket","_addBracketLeading","startLine","aboveLine","column_1","SelectionRanges","mov","SmartSelectController","_ignoreSelection","_selectionListener","forward","arrays","equalsSelection","unshift","AbstractSmartSelect","_forward","GrowSelectionAction","ShrinkSelectionAction","work","allRawRanges","providers_1","allProviderRanges","oneProviderRanges","oneRawRanges","oneRanges","oneRawRanges_1","oneRangesWithTrivia","prev","cur","rangeNoWhitespace","rangeFull","MultipleSuggestions","MakesTextEdit","AcceptSuggestionsOnEnter","completion","distance","labelLow","sortTextLow","sortText","filterTextLow","filterText","editStart","editInsertEnd","editReplaceEnd","insert","cached_1","resolveCompletionItem","isDone_1","onCancellationRequested","CompletionOptions","snippetSortOrder","kindFilter","providerFilter","provideSuggestionItems","defaultReplaceRange","defaultInsertRange","orderedGroups","allSuggestions","hasResult","factory","provideCompletionItems","suggestions","suggestion","_snippetSuggestSupport","getSuggestionComparator","defaultComparator","_snippetComparators","snippetConfig","resolving","maxItemsToResolve","items","items_1","incomplete","_provider","onlyOnceSuggestions","Scanner","isDigitCharacter","isVariableCharacter","tokenText","_table","isNaN","Marker","_children","Text","others","newChildren","_fixParent","children_1","child_1","TextmateSnippet","_this_1","TransformableMarker","Placeholder","compareByIndex","isFinalTabstop","Choice","ret","transform","Transform","regexp","didMatch","_replace","FormatString","Boolean","elseValue","shorthandName","ifValue","toLocaleUpperCase","toLocaleLowerCase","_toPascalCase","Variable","walk","visitor","marker_1","_placeholders","last_1","all_1","placeholderInfo","fullLen","enclosingPlaceholders","resolveVariables","SnippetParser","_scanner","insertFinalTabstop","enforceFinalTabstop","snippet","_parse","placeholderDefaultValues","incompletePlaceholders","placeholderCount","incompletePlaceholders_1","defaultValues","defaultValues_1","_accept","_backTo","_until","nextToken","_parseEscaped","_parseTabstopOrVariableName","_parseComplexPlaceholder","_parseComplexVariable","_parseAnything","_parseTransform","choice","_parseChoiceElement","variable","regexValue","regexOptions","_parseFormatString","complex","shorthand","isSingleFolderWorkspaceIdentifier","CompositeSnippetVariableResolver","_delegates","SelectionBasedVariableResolver","_selection","lineLeadingWhitespace","varLeadingWhitespace_1","whitespaceCommonLength_1","positionLineNumber","positionColumn","ModelBasedVariableResolver","_labelService","ClipboardBasedVariableResolver","_readClipboardText","_selectionIdx","_selectionCount","_spread","clipboardText","CommentBasedVariableResolver","config","getComments","lineCommentToken","blockCommentStartToken","blockCommentEndToken","TimeBasedVariableResolver","getFullYear","getMonth","valueOf","getDate","getHours","getMinutes","getSeconds","dayNames","getDay","dayNamesShort","monthNames","monthNamesShort","WorkspaceBasedVariableResolver","_workspaceService","workspaceIdentifier","workspace","configPath","toWorkspaceIdentifier","_resolveWorkspaceName","_resoveWorkspacePath","filename","folderpath","RandomBasedVariableResolver","getColorGraceful","OneSnippet","_nestingLevel","_snippet","_offset","_placeholderGroups","placeholders","_placeholderGroupsIdx","_placeholderDecorations","toRemove_1","_initDecorations","placeholderOffset","placeholderLen","getPositionAt","_decor","inactiveFinal","inactive","operations","replaceMove","couldSkipThisPlaceholder","activePlaceholders","_hasPlaceholderBeenCollapsed","activeFinal","active","enclosingPlaceholder","id_1","computePossibleSelections","placeholdersWithEqualIndex_1","nested","assert","indexLastPlaceholder","nestedPlaceholder","placeholder_1","_defaultOptions","overwriteBefore","overwriteAfter","adjustWhitespace","SnippetSession","_templateMerges","_snippets","_template","_options","adjustIndentation","adjustNewlines","templateLeadingWhitespace","normalizeIndentation","getEOL","adjustSelection","positionColumnBefore","positionColumnAfter","createWithDirection","getDirection","createEditsAndSnippets","edits","snippets","workspaceService","modelBasedVariableResolver","readClipboardText","readTextSync","firstBeforeText","firstAfterText","firstLineFirstNonWhitespace","indexedSelections","indexedSelections_1","extensionBefore","extensionAfter","snippetSelection","getOffsetAt","_logInfo","undoEdits","hasPlaceholder","_move","oneSelection","isAtFirstPlaceholder","isAtLastPlaceholder","isSelectionWithinPlaceholders","allPossibleSelections","possibleSelections","selections_1","array","state_1","undoStopBefore","undoStopAfter","SnippetController2","_logService","_snippetListener","_modelVersionId","_inSnippet","InSnippetMode","_hasNextTabstop","HasNextTabstop","_hasPrevTabstop","HasPrevTabstop","_session","_doInsert","pushStackElement","getAlternativeVersionId","_updateState","_handleChoice","_currentChoice","first_1","option","insertText","triggerSuggest","finish","resetSelection","isInSnippet","CommandCtor","ctrl","Memory","topScore","preselect","NoMemory","memorize","toJSON","LRUMemory","_cache","_seq","touch","lineSuffix","indexPreselect","indexRecency","seq","data_1","PrefixMemory","_trie","forStrings","findSubstr","entries","data_2","SuggestMemoryService","_configService","_storagePrefix","share","_persistSoon","_saveState","onWillSaveState","SHUTDOWN","affectsConfiguration","onDidChangeStorage","scope","_mode","_shareMem","shareMem","_strategy","ISuggestMemoryService","SuggestAlternatives","_index","_ckOtherSuggestions","OtherSuggestions","_acceptNext","_ignore","acceptNext","_moveIndex","CompletionModel","lineContext","wordDistance","snippetSuggestions","_snippetCompareFn","_compareCompletionItems","_items","_column","_wordDistance","_refilterKind","_lineContext","_compareCompletionItemsSnippetsUp","_compareCompletionItemsSnippetsDown","leadingLineContent","characterCountDelta","_filteredItems","_ensureCachedState","_isIncomplete","adopt","except","_stats","_createCachedState","suggestionCount","snippetCount","textCount","wordLow","scoreFn","filterGraceful","wordLen","wordPos","WordDistance","service","wordRanges","localityBonus","canComputeWordRanges","computeWordRanges","wordLines","bestWordRange","blockDistance","class_2","LineContext","auto","shy","leadingWord","shouldAutoTrigger","tokenizeIfCheap","SuggestModel","_editorWorker","_quickSuggestDelay","_triggerQuickSuggest","_completionDisposables","_onDidCancel","_onDidTrigger","_onDidSuggest","onDidCancel","onDidTrigger","onDidSuggest","_currentSelection","_updateTriggerCharacters","_updateQuickSuggest","_updateActiveSuggestSession","editorIsComposing","onCompositionStart","onCompositionEnd","_refilterCompletionItems","_triggerCharacterListener","supportsByTriggerCharacter","triggerCharacters","getSnippetSuggestSupport","lastChar","_completionModel","_requestToken","_context","prevSelection","snippetsPreventQuickSuggestions","quickSuggestions","lineTokens","getLineTokens","tokenType","getStandardTokenType","findTokenIndexAtOffset","comments","_onNewContext","onlyFrom","existingItems","suggestCtx","itemKindFilter","_createItemKindFilter","cmpFn","suggestOptions","showMethods","showFunctions","showConstructors","showFields","showVariables","showClasses","showStructs","showInterfaces","showModules","showProperties","showEvents","showOperators","showUnits","showValues","showConstants","showEnums","showEnumMembers","showKeywords","showWords","showColors","showFiles","showReferences","showFolders","showTypeParameters","showSnippets","adopted","oldLineContext","isFrozen","completionModel","SYMBOL_ICON_ARRAY_FOREGROUND","SYMBOL_ICON_BOOLEAN_FOREGROUND","SYMBOL_ICON_CLASS_FOREGROUND","SYMBOL_ICON_COLOR_FOREGROUND","SYMBOL_ICON_CONSTANT_FOREGROUND","SYMBOL_ICON_CONSTRUCTOR_FOREGROUND","SYMBOL_ICON_ENUMERATOR_FOREGROUND","SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND","SYMBOL_ICON_EVENT_FOREGROUND","SYMBOL_ICON_FIELD_FOREGROUND","SYMBOL_ICON_FILE_FOREGROUND","SYMBOL_ICON_FOLDER_FOREGROUND","SYMBOL_ICON_FUNCTION_FOREGROUND","SYMBOL_ICON_INTERFACE_FOREGROUND","SYMBOL_ICON_KEY_FOREGROUND","SYMBOL_ICON_KEYWORD_FOREGROUND","SYMBOL_ICON_METHOD_FOREGROUND","SYMBOL_ICON_MODULE_FOREGROUND","SYMBOL_ICON_NAMESPACE_FOREGROUND","SYMBOL_ICON_NULL_FOREGROUND","SYMBOL_ICON_NUMBER_FOREGROUND","SYMBOL_ICON_OBJECT_FOREGROUND","SYMBOL_ICON_OPERATOR_FOREGROUND","SYMBOL_ICON_PACKAGE_FOREGROUND","SYMBOL_ICON_PROPERTY_FOREGROUND","SYMBOL_ICON_REFERENCE_FOREGROUND","SYMBOL_ICON_SNIPPET_FOREGROUND","SYMBOL_ICON_STRING_FOREGROUND","SYMBOL_ICON_STRUCT_FOREGROUND","SYMBOL_ICON_TEXT_FOREGROUND","SYMBOL_ICON_TYPEPARAMETER_FOREGROUND","SYMBOL_ICON_UNIT_FOREGROUND","SYMBOL_ICON_VARIABLE_FOREGROUND","symbolIconArrayColor","symbolIconBooleanColor","symbolIconClassColor","symbolIconMethodColor","symbolIconColorColor","symbolIconConstantColor","symbolIconConstructorColor","symbolIconEnumeratorColor","symbolIconEnumeratorMemberColor","symbolIconEventColor","symbolIconFieldColor","symbolIconFileColor","symbolIconFolderColor","symbolIconFunctionColor","symbolIconInterfaceColor","symbolIconKeyColor","symbolIconKeywordColor","symbolIconModuleColor","outlineNamespaceColor","symbolIconNullColor","symbolIconNumberColor","symbolIconObjectColor","symbolIconOperatorColor","symbolIconPackageColor","symbolIconPropertyColor","symbolIconReferenceColor","symbolIconSnippetColor","symbolIconStringColor","symbolIconStructColor","symbolIconTextColor","symbolIconTypeParameterColor","symbolIconUnitColor","symbolIconVariableColor","FileKind","getIconClasses","modelService","fileKind","ROOT_FOLDER","FOLDER","parseMetaData","META_DATA_LABEL","cssEscape","dotSegments","detectedModeId","mime","META_DATA_MIME","getModeId","detectModeId","editorSuggestWidgetBackground","editorSuggestWidgetBorder","editorSuggestWidgetForeground","editorSuggestWidgetSelectedBackground","editorSuggestWidgetHighlightForeground","colorRegExp","canExpandCompletionItem","triggerKeybindingLabel","_modelService","colorspan","iconContainer","iconLabel","typeLabel","readMore","configureFont","fontSizePx","lineHeightPx","labelOptions","getIconTheme","hasFileIcons","labelClasses","from","FILE","detailClasses","hasFolderIcons","tags","toggleDetails","SuggestionDetails","renderLoading","renderItem","explainMode","renderDisposeable","md","_debugDisplayName","scrollDown","much","scrollUp","scrollBottom","pageDown","pageUp","setBorderWidth","SuggestWidget","telemetryService","isAuto","loadingTimeout","currentSuggestionDetails","ignoreFocusEvents","showTimeout","toDispose","onDidSelectEmitter","onDidFocusEmitter","onDidHideEmitter","onDidShowEmitter","onDidSelect","onDidHide","onDidShow","maxWidgetWidth","listWidth","firstFocusInCurrentList","preferDocPositionTop","docsPositionPreviousWidgetY","_onDetailsKeydown","onDetailsKeyDown","_lastAriaAlertLabel","focusedItem","hideWidget","listElement","details","applyIconStyle","showIcons","openController","shouldOpen","mouseSupport","listInactiveFocusBackground","listInactiveFocusOutline","onEditorLayoutChange","onListMouseDownOrTap","onTap","onListSelection","onFocusChange","onListFocus","onCursorSelectionChanged","suggestWidgetVisible","suggestWidgetMultipleSuggestions","expandDocsSettingFromStorage","expandSideOrBelow","_getSuggestionAriaAlertLabel","_ariaAlert","newAriaAlertLabel","detailsBorderColor","focusBorderColor","detailsFocusBorderColor","loading","showDetails","stateChanged","listHeight","LOADING_MESSAGE","NO_SUGGESTIONS_MESSAGE","showTriggered","showSuggestions","selectionIndex","visibleCount","stats","publicLog","selectNextPage","focusNextPage","selectNext","focusNext","selectLast","focusLast","selectPreviousPage","focusPreviousPage","selectPrevious","focusPrevious","selectFirst","focusFirst","getFocusedItem","getFocusedElements","toggleDetailsFocus","publicLog2","updateExpandDocsSetting","maxWidgetHeight","adjustDocsPosition","toggleExplainMode","updateListHeight","unfocusedHeight","contentHeight","maxVisibleSuggestions","cursorX","cursorY","widgetCoords","widgetX","widgetY","matchHighlight","WordContextKey","_enabled","_ckAtEnd","AtEnd","checkForWordEnd","CommitCharacterController","accept","_onItem","onWillType","_active","acceptCharacters","selected","commitCharacters","SuggestRangeHighlighter","focused","_highlight","_widgetListener","_reset","_shiftKeyListener","_currentItem","newDeco","insertHighlight","shiftKey","getOverwriteInfo","isPressed","insertMode","wordInfo","ShiftKey","_subscriptions","_isPressed","LineSuffix","_marker","isDisposed","SuggestController","editorWorker","_memoryService","_lineSuffix","_insertSuggestion","commitCharacterController","makesTextEdit","insertTextRules","_alternatives","onDidBlurEditorWidget","toKeybinding","isModifierKey","acceptSuggestionsOnEnter","updateFromConfig","acceptSuggestionOnEnter","modelVersionNow","canUndo","undo","_alertCompletionItem","toggleMode","triggerSuggestAndAcceptBest","positionNow","fallback","once","any","acceptSelectedSuggestion","keepAlternativeSuggestions","alternativeOverwriteConfig","acceptNextSuggestion","acceptPrevSuggestion","cancelSuggestWidget","selectNextSuggestion","selectNextPageSuggestion","selectLastSuggestion","selectPrevSuggestion","selectPrevPageSuggestion","selectFirstSuggestion","toggleSuggestionDetails","toggleSuggestionFocus","TriggerSuggestAction","hasCompletionItemProvider","SuggestCommand","alternative","registerKeybindingRule","IPadShowKeyboard","shouldHaveWidget","ShowKeyboardWidget","_monaco","languageDefinitions","lazyLanguageLoaders","LazyLanguageLoader","_languageId","_loadingTriggered","_lazyLoadPromise","_lazyLoadPromiseResolve","_lazyLoadPromiseReject","getOrCreate","whenLoaded","load","loader","languages","lazyLanguageLoader","setMonarchTokensProvider","onLanguage","setLanguageConfiguration","conf","registerLanguage","extensions","aliases","mimetypes","window","MonacoEnvironment","getWorker","YamlWorker","EditorWorker","yaml","Editor","useTheme","useField","yamlDefaults","setDiagnosticsOptions","enableSchemaRequest","handleChange","useCallback","selectOnLineNumbers","SubmitButton","useFormikContext","submitForm","isSubmitting","setSubmitting","Button","ResetForm","initialValues","resetForm","toolbar","css","pxToRem","spacing","varDescription","button","alert","Config","useInjectPageTitle","setMode","Post","post","postRequest","setConfig","refresh","useContainer","TaskContainer","pushInfo","useGlobalInfo","rawConfig","useGetConfig","configState","saveConfig","Put","variables","setVariables","YAML","useGetVariables","variablesState","saveVariables","loadText","submitText","save","saveState","useGlobalStatus","useMemo","handleSubmit","schemaValues","onSubmit","Link","Position","Range","Location","Color","ColorInformation","ColorPresentation","FoldingRangeKind","FoldingRange","DiagnosticRelatedInformation","DiagnosticSeverity","Diagnostic","Command","TextEdit","TextDocumentEdit","WorkspaceEdit","character","is","Is","objectLiteral","one","two","three","four","defined","typedArray","endLine","startCharacter","endCharacter","location","Information","Hint","newText","textDocument","VersionedTextDocumentIdentifier","changes","documentChanges","TextDocumentIdentifier","TextDocumentItem","MarkupKind","MarkupContent","CompletionItemKind","InsertTextFormat","CompletionItem","CompletionList","MarkedString","Hover","ParameterInformation","SignatureInformation","DocumentHighlightKind","DocumentHighlight","SymbolKind","SymbolInformation","TextEditChangeImpl","WorkspaceChange","workspaceEdit","_textEditChanges","_workspaceEdit","textDocumentEdit","textEditChange","getTextEditChange","PlainText","Markdown","Function","Field","Class","Interface","Module","Property","Unit","Value","Enum","Keyword","Snippet","File","Reference","Folder","EnumMember","Constant","Struct","Event","Operator","TypeParameter","isIncomplete","fromPlainText","plainText","Read","Write","Namespace","Package","Key","Null","containerName","CodeActionContext","CodeAction","CodeLens","FormattingOptions","DocumentSymbol","selectionRange","deprecated","boolean","RefactorExtract","RefactorInline","RefactorRewrite","commandOrEdit","insertSpaces","DocumentLink","TextDocument","TextDocumentSaveReason","FullTextDocument","getText","positionAt","offsetAt","applyEdits","sortedEdits","mergeSort","right","leftIdx","rightIdx","diff","lastModifiedOffset","startOffset","endOffset","Manual","AfterDelay","FocusOut","_uri","_version","_content","_lineOffsets","getLineOffsets","lineOffsets","isLineStart","high","mid","lineOffset","nextLineOffset","check","DiagnosticsAdapter","_worker","onModelAdd","_doValidate","onModelRemoved","setModelMarkers","uriStr","onDidCreateModel","onWillDisposeModel","_resetSchema","getModels","worker","resetSchema","doValidation","diag","lsSeverity","MarkerSeverity","fromPosition","toRange","toCompletionItemKind","mItemKind","toTextEdit","CompletionAdapter","doComplete","insertTextFormat","CompletionItemInsertTextRule","InsertAsSnippet","toMarkdownString","toMarkedStringArray","HoverAdapter","doHover","toSymbolKind","mKind","DocumentSymbolAdapter","provideDocumentSymbols","findDocumentSymbols","toDocumentSymbol","fromFormattingOptions","DocumentFormattingEditProvider","provideDocumentFormattingEdits","DocumentRangeFormattingEditProvider","provideDocumentRangeFormattingEdits","fromRange","WorkerManager","_defaults","_idleCheckInterval","setInterval","_checkIfIdle","_lastUsedTime","_configChangeListener","_stopWorker","clearInterval","getLanguageServiceWorker","_client","_getClient","client","withSyncedResources","createWebWorker","moduleId","createData","languageSettings","diagnosticsOptions","isKubernetes","getProxy","__read","ar","__spread","richEditConfiguration","lineComment","autoClosingPairs","surroundingPairs","onEnterRules","beforeText","indentAction","IndentAction","Indent","Emitter","LanguageServiceDefaultsImpl","_diagnosticsOptions","registerCompletionItemProvider","registerHoverProvider","registerDocumentSymbolProvider","registerDocumentFormattingEditProvider","registerDocumentRangeFormattingEditProvider","setupMode"],"mappings":"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","file":"ConfigPlugin.9606f3e989a99c15fd49.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.processSize = processSize;\nexports.noop = noop;\n\nfunction processSize(size) {\n  return !/^\\d+$/.test(size) ? size : \"\".concat(size, \"px\");\n}\n\nfunction noop() {}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"default\", {\n  enumerable: true,\n  get: function get() {\n    return _editor[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"MonacoDiffEditor\", {\n  enumerable: true,\n  get: function get() {\n    return _diff[\"default\"];\n  }\n});\n\nvar _editor = _interopRequireDefault(require(\"./editor\"));\n\nvar _diff = _interopRequireDefault(require(\"./diff\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar monaco = _interopRequireWildcard(require(\"monaco-editor/esm/vs/editor/editor.api\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _utils = require(\"./utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj[\"default\"] = obj; return newObj; } }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar MonacoEditor =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(MonacoEditor, _React$Component);\n\n  function MonacoEditor(props) {\n    var _this;\n\n    _classCallCheck(this, MonacoEditor);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MonacoEditor).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"assignRef\", function (component) {\n      _this.containerElement = component;\n    });\n\n    _this.containerElement = undefined;\n    return _this;\n  }\n\n  _createClass(MonacoEditor, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.initMonaco();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props = this.props,\n          value = _this$props.value,\n          language = _this$props.language,\n          theme = _this$props.theme,\n          height = _this$props.height,\n          options = _this$props.options,\n          width = _this$props.width;\n      var editor = this.editor;\n      var model = editor.getModel();\n\n      if (this.props.value != null && this.props.value !== model.getValue()) {\n        this.__prevent_trigger_change_event = true;\n        this.editor.pushUndoStop();\n        model.pushEditOperations([], [{\n          range: model.getFullModelRange(),\n          text: value\n        }]);\n        this.editor.pushUndoStop();\n        this.__prevent_trigger_change_event = false;\n      }\n\n      if (prevProps.language !== language) {\n        monaco.editor.setModelLanguage(model, language);\n      }\n\n      if (prevProps.theme !== theme) {\n        monaco.editor.setTheme(theme);\n      }\n\n      if (editor && (width !== prevProps.width || height !== prevProps.height)) {\n        editor.layout();\n      }\n\n      if (prevProps.options !== options) {\n        editor.updateOptions(options);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.destroyMonaco();\n    }\n  }, {\n    key: \"destroyMonaco\",\n    value: function destroyMonaco() {\n      if (this.editor) {\n        this.editor.dispose();\n        var model = this.editor.getModel();\n\n        if (model) {\n          model.dispose();\n        }\n      }\n\n      if (this._subscription) {\n        this._subscription.dispose();\n      }\n    }\n  }, {\n    key: \"initMonaco\",\n    value: function initMonaco() {\n      var value = this.props.value != null ? this.props.value : this.props.defaultValue;\n      var _this$props2 = this.props,\n          language = _this$props2.language,\n          theme = _this$props2.theme,\n          options = _this$props2.options,\n          overrideServices = _this$props2.overrideServices;\n\n      if (this.containerElement) {\n        // Before initializing monaco editor\n        Object.assign(options, this.editorWillMount());\n        this.editor = monaco.editor.create(this.containerElement, _objectSpread({\n          value: value,\n          language: language\n        }, options, {}, theme ? {\n          theme: theme\n        } : {}), overrideServices); // After initializing monaco editor\n\n        this.editorDidMount(this.editor);\n      }\n    }\n  }, {\n    key: \"editorWillMount\",\n    value: function editorWillMount() {\n      var editorWillMount = this.props.editorWillMount;\n      var options = editorWillMount(monaco);\n      return options || {};\n    }\n  }, {\n    key: \"editorDidMount\",\n    value: function editorDidMount(editor) {\n      var _this2 = this;\n\n      this.props.editorDidMount(editor, monaco);\n      this._subscription = editor.onDidChangeModelContent(function (event) {\n        if (!_this2.__prevent_trigger_change_event) {\n          _this2.props.onChange(editor.getValue(), event);\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props3 = this.props,\n          width = _this$props3.width,\n          height = _this$props3.height;\n      var fixedWidth = (0, _utils.processSize)(width);\n      var fixedHeight = (0, _utils.processSize)(height);\n      var style = {\n        width: fixedWidth,\n        height: fixedHeight\n      };\n      return _react[\"default\"].createElement(\"div\", {\n        ref: this.assignRef,\n        style: style,\n        className: \"react-monaco-editor-container\"\n      });\n    }\n  }]);\n\n  return MonacoEditor;\n}(_react[\"default\"].Component);\n\nMonacoEditor.propTypes = {\n  width: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].number]),\n  height: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].number]),\n  value: _propTypes[\"default\"].string,\n  defaultValue: _propTypes[\"default\"].string,\n  language: _propTypes[\"default\"].string,\n  theme: _propTypes[\"default\"].string,\n  options: _propTypes[\"default\"].object,\n  overrideServices: _propTypes[\"default\"].object,\n  editorDidMount: _propTypes[\"default\"].func,\n  editorWillMount: _propTypes[\"default\"].func,\n  onChange: _propTypes[\"default\"].func\n};\nMonacoEditor.defaultProps = {\n  width: \"100%\",\n  height: \"100%\",\n  value: null,\n  defaultValue: \"\",\n  language: \"javascript\",\n  theme: null,\n  options: {},\n  overrideServices: {},\n  editorDidMount: _utils.noop,\n  editorWillMount: _utils.noop,\n  onChange: _utils.noop\n};\nvar _default = MonacoEditor;\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar monaco = _interopRequireWildcard(require(\"monaco-editor/esm/vs/editor/editor.api\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _utils = require(\"./utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj[\"default\"] = obj; return newObj; } }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar MonacoDiffEditor =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(MonacoDiffEditor, _React$Component);\n\n  function MonacoDiffEditor(props) {\n    var _this;\n\n    _classCallCheck(this, MonacoDiffEditor);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MonacoDiffEditor).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"assignRef\", function (component) {\n      _this.containerElement = component;\n    });\n\n    _this.containerElement = undefined;\n    return _this;\n  }\n\n  _createClass(MonacoDiffEditor, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.initMonaco();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props = this.props,\n          language = _this$props.language,\n          theme = _this$props.theme,\n          height = _this$props.height,\n          options = _this$props.options,\n          width = _this$props.width;\n\n      var _this$editor$getModel = this.editor.getModel(),\n          original = _this$editor$getModel.original,\n          modified = _this$editor$getModel.modified;\n\n      if (this.props.original !== original.getValue()) {\n        original.setValue(this.props.original);\n      }\n\n      if (this.props.value != null && this.props.value !== modified.getValue()) {\n        this.__prevent_trigger_change_event = true;\n        this.editor.modifiedEditor.pushUndoStop();\n        modified.pushEditOperations([], [{\n          range: modified.getFullModelRange(),\n          text: this.props.value\n        }]);\n        this.editor.modifiedEditor.pushUndoStop();\n        this.__prevent_trigger_change_event = false;\n      }\n\n      if (prevProps.language !== language) {\n        monaco.editor.setModelLanguage(original, language);\n        monaco.editor.setModelLanguage(modified, language);\n      }\n\n      if (prevProps.theme !== theme) {\n        monaco.editor.setTheme(theme);\n      }\n\n      if (this.editor && (width !== prevProps.width || height !== prevProps.height)) {\n        this.editor.layout();\n      }\n\n      if (prevProps.options !== options) {\n        this.editor.updateOptions(options);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.destroyMonaco();\n    }\n  }, {\n    key: \"editorWillMount\",\n    value: function editorWillMount() {\n      var editorWillMount = this.props.editorWillMount;\n      var options = editorWillMount(monaco);\n      return options || {};\n    }\n  }, {\n    key: \"editorDidMount\",\n    value: function editorDidMount(editor) {\n      var _this2 = this;\n\n      this.props.editorDidMount(editor, monaco);\n\n      var _editor$getModel = editor.getModel(),\n          modified = _editor$getModel.modified;\n\n      this._subscription = modified.onDidChangeContent(function (event) {\n        if (!_this2.__prevent_trigger_change_event) {\n          _this2.props.onChange(modified.getValue(), event);\n        }\n      });\n    }\n  }, {\n    key: \"initModels\",\n    value: function initModels(value, original) {\n      var language = this.props.language;\n      var originalModel = monaco.editor.createModel(original, language);\n      var modifiedModel = monaco.editor.createModel(value, language);\n      this.editor.setModel({\n        original: originalModel,\n        modified: modifiedModel\n      });\n    }\n  }, {\n    key: \"initMonaco\",\n    value: function initMonaco() {\n      var value = this.props.value != null ? this.props.value : this.props.defaultValue;\n      var _this$props2 = this.props,\n          original = _this$props2.original,\n          theme = _this$props2.theme,\n          options = _this$props2.options,\n          overrideServices = _this$props2.overrideServices;\n\n      if (this.containerElement) {\n        // Before initializing monaco editor\n        this.editorWillMount();\n        this.editor = monaco.editor.createDiffEditor(this.containerElement, _objectSpread({}, options, {}, theme ? {\n          theme: theme\n        } : {}), overrideServices); // After initializing monaco editor\n\n        this.initModels(value, original);\n        this.editorDidMount(this.editor);\n      }\n    }\n  }, {\n    key: \"destroyMonaco\",\n    value: function destroyMonaco() {\n      if (this.editor) {\n        this.editor.dispose();\n\n        var _this$editor$getModel2 = this.editor.getModel(),\n            original = _this$editor$getModel2.original,\n            modified = _this$editor$getModel2.modified;\n\n        if (original) {\n          original.dispose();\n        }\n\n        if (modified) {\n          modified.dispose();\n        }\n      }\n\n      if (this._subscription) {\n        this._subscription.dispose();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props3 = this.props,\n          width = _this$props3.width,\n          height = _this$props3.height;\n      var fixedWidth = (0, _utils.processSize)(width);\n      var fixedHeight = (0, _utils.processSize)(height);\n      var style = {\n        width: fixedWidth,\n        height: fixedHeight\n      };\n      return _react[\"default\"].createElement(\"div\", {\n        ref: this.assignRef,\n        style: style,\n        className: \"react-monaco-editor-container\"\n      });\n    }\n  }]);\n\n  return MonacoDiffEditor;\n}(_react[\"default\"].Component);\n\nMonacoDiffEditor.propTypes = {\n  width: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].number]),\n  height: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].number]),\n  original: _propTypes[\"default\"].string,\n  value: _propTypes[\"default\"].string,\n  defaultValue: _propTypes[\"default\"].string,\n  language: _propTypes[\"default\"].string,\n  theme: _propTypes[\"default\"].string,\n  options: _propTypes[\"default\"].object,\n  overrideServices: _propTypes[\"default\"].object,\n  editorDidMount: _propTypes[\"default\"].func,\n  editorWillMount: _propTypes[\"default\"].func,\n  onChange: _propTypes[\"default\"].func\n};\nMonacoDiffEditor.defaultProps = {\n  width: \"100%\",\n  height: \"100%\",\n  original: null,\n  value: null,\n  defaultValue: \"\",\n  language: \"javascript\",\n  theme: null,\n  options: {},\n  overrideServices: {},\n  editorDidMount: _utils.noop,\n  editorWillMount: _utils.noop,\n  onChange: _utils.noop\n};\nvar _default = MonacoDiffEditor;\nexports[\"default\"] = _default;","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"68c852c85ea688dfa942.worker.js\");\n};","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"53d12c0e91af96155a37.worker.js\");\n};","import React from 'react';\nimport createSvgIcon from './createSvgIcon';\n/**\n * @ignore - internal component.\n */\n\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z\"\n}), 'SuccessOutlined');","import React from 'react';\nimport createSvgIcon from './createSvgIcon';\n/**\n * @ignore - internal component.\n */\n\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z\"\n}), 'ReportProblemOutlined');","import React from 'react';\nimport createSvgIcon from './createSvgIcon';\n/**\n * @ignore - internal component.\n */\n\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"\n}), 'ErrorOutline');","import React from 'react';\nimport createSvgIcon from './createSvgIcon';\n/**\n * @ignore - internal component.\n */\n\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z\"\n}), 'InfoOutlined');","import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { withStyles, lighten, darken } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport SuccessOutlinedIcon from '../internal/svg-icons/SuccessOutlined';\nimport ReportProblemOutlinedIcon from '../internal/svg-icons/ReportProblemOutlined';\nimport ErrorOutlineIcon from '../internal/svg-icons/ErrorOutline';\nimport InfoOutlinedIcon from '../internal/svg-icons/InfoOutlined';\nimport CloseIcon from '../internal/svg-icons/Close';\nimport IconButton from '@material-ui/core/IconButton';\nimport { capitalize } from '@material-ui/core/utils';\nexport var styles = function styles(theme) {\n  return {\n    /* Styles applied to the root element. */\n    root: _extends({}, theme.typography.body2, {\n      borderRadius: theme.shape.borderRadius,\n      backgroundColor: 'transparent',\n      display: 'flex',\n      padding: '6px 16px'\n    }),\n\n    /* Styles applied to the root element if `variant=\"standard\"` and `color=\"success\"`. */\n    standardSuccess: {\n      color: darken(theme.palette.success.main, 0.6),\n      backgroundColor: lighten(theme.palette.success.main, 0.9),\n      '& $icon': {\n        color: theme.palette.success.main\n      }\n    },\n\n    /* Styles applied to the root element if `variant=\"standard\"` and `color=\"info\"`. */\n    standardInfo: {\n      color: darken(theme.palette.info.main, 0.6),\n      backgroundColor: lighten(theme.palette.info.main, 0.9),\n      '& $icon': {\n        color: theme.palette.info.main\n      }\n    },\n\n    /* Styles applied to the root element if `variant=\"standard\"` and `color=\"warning\"`. */\n    standardWarning: {\n      color: darken(theme.palette.warning.main, 0.6),\n      backgroundColor: lighten(theme.palette.warning.main, 0.9),\n      '& $icon': {\n        color: theme.palette.warning.main\n      }\n    },\n\n    /* Styles applied to the root element if `variant=\"standard\"` and `color=\"error\"`. */\n    standardError: {\n      color: darken(theme.palette.error.main, 0.6),\n      backgroundColor: lighten(theme.palette.error.main, 0.9),\n      '& $icon': {\n        color: theme.palette.error.main\n      }\n    },\n\n    /* Styles applied to the root element if `variant=\"outlined\"` and `color=\"success\"`. */\n    outlinedSuccess: {\n      color: theme.palette.type === 'light' ? darken(theme.palette.success.main, 0.6) : lighten(theme.palette.success.main, 0.6),\n      border: \"1px solid \".concat(theme.palette.success.main),\n      '& $icon': {\n        color: theme.palette.success.main\n      }\n    },\n\n    /* Styles applied to the root element if `variant=\"outlined\"` and `color=\"info\"`. */\n    outlinedInfo: {\n      color: theme.palette.type === 'light' ? darken(theme.palette.info.main, 0.6) : lighten(theme.palette.info.main, 0.6),\n      border: \"1px solid \".concat(theme.palette.info.main),\n      '& $icon': {\n        color: theme.palette.info.main\n      }\n    },\n\n    /* Styles applied to the root element if `variant=\"outlined\"` and `color=\"warning\"`. */\n    outlinedWarning: {\n      color: theme.palette.type === 'light' ? darken(theme.palette.warning.main, 0.6) : lighten(theme.palette.warning.main, 0.6),\n      border: \"1px solid \".concat(theme.palette.warning.main),\n      '& $icon': {\n        color: theme.palette.warning.main\n      }\n    },\n\n    /* Styles applied to the root element if `variant=\"outlined\"` and `color=\"error\"`. */\n    outlinedError: {\n      color: theme.palette.type === 'light' ? darken(theme.palette.error.main, 0.6) : lighten(theme.palette.error.main, 0.6),\n      border: \"1px solid \".concat(theme.palette.error.main),\n      '& $icon': {\n        color: theme.palette.error.main\n      }\n    },\n\n    /* Styles applied to the root element if `variant=\"filled\"` and `color=\"success\"`. */\n    filledSuccess: {\n      color: '#fff',\n      fontWeight: theme.typography.fontWeightMedium,\n      backgroundColor: theme.palette.success.main\n    },\n\n    /* Styles applied to the root element if `variant=\"filled\"` and `color=\"info\"`. */\n    filledInfo: {\n      color: '#fff',\n      fontWeight: theme.typography.fontWeightMedium,\n      backgroundColor: theme.palette.info.main\n    },\n\n    /* Styles applied to the root element if `variant=\"filled\"` and `color=\"warning\"`. */\n    filledWarning: {\n      color: '#fff',\n      fontWeight: theme.typography.fontWeightMedium,\n      backgroundColor: theme.palette.warning.main\n    },\n\n    /* Styles applied to the root element if `variant=\"filled\"` and `color=\"error\"`. */\n    filledError: {\n      color: '#fff',\n      fontWeight: theme.typography.fontWeightMedium,\n      backgroundColor: theme.palette.error.main\n    },\n\n    /* Styles applied to the icon wrapper element. */\n    icon: {\n      marginRight: 12,\n      padding: '7px 0',\n      display: 'flex',\n      fontSize: 22,\n      opacity: 0.9\n    },\n\n    /* Styles applied to the message wrapper element. */\n    message: {\n      padding: '8px 0',\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'center'\n    },\n\n    /* Styles applied to the action wrapper element if `action` is provided. */\n    action: {\n      display: 'flex',\n      alignItems: 'center',\n      marginLeft: 'auto',\n      paddingLeft: 16,\n      marginRight: -8\n    }\n  };\n};\nvar defaultIconMapping = {\n  success: React.createElement(SuccessOutlinedIcon, {\n    fontSize: \"inherit\"\n  }),\n  warning: React.createElement(ReportProblemOutlinedIcon, {\n    fontSize: \"inherit\"\n  }),\n  error: React.createElement(ErrorOutlineIcon, {\n    fontSize: \"inherit\"\n  }),\n  info: React.createElement(InfoOutlinedIcon, {\n    fontSize: \"inherit\"\n  })\n};\n\nvar _ref = React.createElement(CloseIcon, {\n  fontSize: \"small\"\n});\n\nvar Alert = React.forwardRef(function Alert(props, ref) {\n  var action = props.action,\n      children = props.children,\n      classes = props.classes,\n      className = props.className,\n      _props$closeText = props.closeText,\n      closeText = _props$closeText === void 0 ? 'Close' : _props$closeText,\n      color = props.color,\n      icon = props.icon,\n      _props$iconMapping = props.iconMapping,\n      iconMapping = _props$iconMapping === void 0 ? defaultIconMapping : _props$iconMapping,\n      onClose = props.onClose,\n      _props$role = props.role,\n      role = _props$role === void 0 ? 'alert' : _props$role,\n      _props$severity = props.severity,\n      severity = _props$severity === void 0 ? 'success' : _props$severity,\n      _props$variant = props.variant,\n      variant = _props$variant === void 0 ? 'standard' : _props$variant,\n      other = _objectWithoutProperties(props, [\"action\", \"children\", \"classes\", \"className\", \"closeText\", \"color\", \"icon\", \"iconMapping\", \"onClose\", \"role\", \"severity\", \"variant\"]);\n\n  return React.createElement(Paper, _extends({\n    role: role,\n    square: true,\n    elevation: 0,\n    className: clsx(classes.root, classes[\"\".concat(variant).concat(capitalize(color || severity))], className),\n    ref: ref\n  }, other), icon !== false ? React.createElement(\"div\", {\n    className: classes.icon\n  }, icon || iconMapping[severity] || defaultIconMapping[severity]) : null, React.createElement(\"div\", {\n    className: classes.message\n  }, children), action != null ? React.createElement(\"div\", {\n    className: classes.action\n  }, action) : null, action == null && onClose ? React.createElement(\"div\", {\n    className: classes.action\n  }, React.createElement(IconButton, {\n    size: \"small\",\n    \"aria-label\": closeText,\n    title: closeText,\n    color: \"inherit\",\n    onClick: onClose\n  }, _ref)) : null);\n});\nprocess.env.NODE_ENV !== \"production\" ? Alert.propTypes = {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * The action to display. It renders after the message, at the end of the alert.\n   */\n  action: PropTypes.node,\n\n  /**\n   * The content of the component.\n   */\n  children: PropTypes.node,\n\n  /**\n   * Override or extend the styles applied to the component.\n   * See [CSS API](#css) below for more details.\n   */\n  classes: PropTypes.object,\n\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n\n  /**\n   * Override the default label for the *close popup* icon button.\n   *\n   * For localization purposes, you can use the provided [translations](/guides/localization/).\n   */\n  closeText: PropTypes.string,\n\n  /**\n   * The main color for the alert. Unless provided, the value is taken from the `severity` prop.\n   */\n  color: PropTypes.oneOf(['error', 'info', 'success', 'warning']),\n\n  /**\n   * Override the icon displayed before the children.\n   * Unless provided, the icon is mapped to the value of the `severity` prop.\n   */\n  icon: PropTypes.node,\n\n  /**\n   * The component maps the `severity` prop to a range of different icons,\n   * for instance success to `<SuccessOutlined>`.\n   * If you wish to change this mapping, you can provide your own.\n   * Alternatively, you can use the `icon` prop to override the icon displayed.\n   */\n  iconMapping: PropTypes.shape({\n    error: PropTypes.node,\n    info: PropTypes.node,\n    success: PropTypes.node,\n    warning: PropTypes.node\n  }),\n\n  /**\n   * Callback fired when the component requests to be closed.\n   * When provided and no `action` prop is set, a close icon button is displayed that triggers the callback when clicked.\n   *\n   * @param {object} event The event source of the callback.\n   */\n  onClose: PropTypes.func,\n\n  /**\n   * The ARIA role attribute of the element.\n   */\n  role: PropTypes.string,\n\n  /**\n   * The severity of the alert. This defines the color and icon used.\n   */\n  severity: PropTypes.oneOf(['error', 'info', 'success', 'warning']),\n\n  /**\n   * The variant to use.\n   */\n  variant: PropTypes.oneOf(['filled', 'outlined', 'standard'])\n} : void 0;\nexport default withStyles(styles, {\n  name: 'MuiAlert'\n})(Alert);","// NOTE: See https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding\n// This is solution 2\n/* eslint-disable no-bitwise,no-nested-ternary,no-plusplus */\nfunction b64ToUint6(nChr) {\n    return nChr > 64 && nChr < 91\n        ? nChr - 65\n        : nChr > 96 && nChr < 123\n            ? nChr - 71\n            : nChr > 47 && nChr < 58\n                ? nChr + 4\n                : nChr === 43\n                    ? 62\n                    : nChr === 47\n                        ? 63\n                        : 0;\n}\nfunction base64DecToArr(sBase64, nBlockSize) {\n    const sB64Enc = sBase64.replace(/[^A-Za-z0-9+/]/g, '');\n    const nInLen = sB64Enc.length;\n    const nOutLen = nBlockSize\n        ? Math.ceil(((nInLen * 3 + 1) >>> 2) / nBlockSize) * nBlockSize\n        : (nInLen * 3 + 1) >>> 2;\n    const aBytes = new Uint8Array(nOutLen);\n    for (let nMod3, nMod4, nUint24 = 0, nOutIdx = 0, nInIdx = 0; nInIdx < nInLen; nInIdx++) {\n        nMod4 = nInIdx & 3;\n        nUint24 |= b64ToUint6(sB64Enc.charCodeAt(nInIdx)) << (18 - 6 * nMod4);\n        if (nMod4 === 3 || nInLen - nInIdx === 1) {\n            for (nMod3 = 0; nMod3 < 3 && nOutIdx < nOutLen; nMod3++, nOutIdx++) {\n                aBytes[nOutIdx] = (nUint24 >>> ((16 >>> nMod3) & 24)) & 255;\n            }\n            nUint24 = 0;\n        }\n    }\n    return aBytes;\n}\n/* Base64 string to array encoding */\nfunction uint6ToB64(nUint6) {\n    return nUint6 < 26\n        ? nUint6 + 65\n        : nUint6 < 52\n            ? nUint6 + 71\n            : nUint6 < 62\n                ? nUint6 - 4\n                : nUint6 === 62\n                    ? 43\n                    : nUint6 === 63\n                        ? 47\n                        : 65;\n}\nfunction base64EncArr(aBytes) {\n    const eqLen = (3 - (aBytes.length % 3)) % 3;\n    let sB64Enc = '';\n    for (let nMod3, nLen = aBytes.length, nUint24 = 0, nIdx = 0; nIdx < nLen; nIdx++) {\n        nMod3 = nIdx % 3;\n        nUint24 |= aBytes[nIdx] << ((16 >>> nMod3) & 24);\n        if (nMod3 === 2 || aBytes.length - nIdx === 1) {\n            sB64Enc += String.fromCharCode(uint6ToB64((nUint24 >>> 18) & 63), uint6ToB64((nUint24 >>> 12) & 63), uint6ToB64((nUint24 >>> 6) & 63), uint6ToB64(nUint24 & 63));\n            nUint24 = 0;\n        }\n    }\n    return eqLen === 0\n        ? sB64Enc\n        : sB64Enc.substring(0, sB64Enc.length - eqLen) + (eqLen === 1 ? '=' : '==');\n}\n/* UTF-8 array to DOMString and vice versa */\nfunction UTF8ArrToStr(aBytes) {\n    let sView = '';\n    for (let nPart, nLen = aBytes.length, nIdx = 0; nIdx < nLen; nIdx++) {\n        nPart = aBytes[nIdx];\n        sView += String.fromCharCode(nPart > 251 && nPart < 254 && nIdx + 5 < nLen /* six bytes */\n            ? /* (nPart - 252 << 30) may be not so safe in ECMAScript! So...: */\n                (nPart - 252) * 1073741824 +\n                    ((aBytes[++nIdx] - 128) << 24) +\n                    ((aBytes[++nIdx] - 128) << 18) +\n                    ((aBytes[++nIdx] - 128) << 12) +\n                    ((aBytes[++nIdx] - 128) << 6) +\n                    aBytes[++nIdx] -\n                    128\n            : nPart > 247 && nPart < 252 && nIdx + 4 < nLen /* five bytes */\n                ? ((nPart - 248) << 24) +\n                    ((aBytes[++nIdx] - 128) << 18) +\n                    ((aBytes[++nIdx] - 128) << 12) +\n                    ((aBytes[++nIdx] - 128) << 6) +\n                    aBytes[++nIdx] -\n                    128\n                : nPart > 239 && nPart < 248 && nIdx + 3 < nLen /* four bytes */\n                    ? ((nPart - 240) << 18) +\n                        ((aBytes[++nIdx] - 128) << 12) +\n                        ((aBytes[++nIdx] - 128) << 6) +\n                        aBytes[++nIdx] -\n                        128\n                    : nPart > 223 && nPart < 240 && nIdx + 2 < nLen /* three bytes */\n                        ? ((nPart - 224) << 12) + ((aBytes[++nIdx] - 128) << 6) + aBytes[++nIdx] - 128\n                        : nPart > 191 && nPart < 224 && nIdx + 1 < nLen /* two bytes */\n                            ? ((nPart - 192) << 6) + aBytes[++nIdx] - 128 /* nPart < 127 ? */\n                            : /* one byte */\n                                nPart);\n    }\n    return sView;\n}\nfunction strToUTF8Arr(sDOMStr) {\n    const nStrLen = sDOMStr.length;\n    let nArrLen = 0;\n    /* mapping... */\n    for (let nMapIdx = 0; nMapIdx < nStrLen; nMapIdx++) {\n        const nChr = sDOMStr.charCodeAt(nMapIdx);\n        nArrLen +=\n            nChr < 0x80\n                ? 1\n                : nChr < 0x800\n                    ? 2\n                    : nChr < 0x10000\n                        ? 3\n                        : nChr < 0x200000\n                            ? 4\n                            : nChr < 0x4000000\n                                ? 5\n                                : 6;\n    }\n    const aBytes = new Uint8Array(nArrLen);\n    /* transcription... */\n    for (let nIdx = 0, nChrIdx = 0; nIdx < nArrLen; nChrIdx++) {\n        const nChr = sDOMStr.charCodeAt(nChrIdx);\n        if (nChr < 128) {\n            /* one byte */\n            aBytes[nIdx++] = nChr;\n        }\n        else if (nChr < 0x800) {\n            /* two bytes */\n            aBytes[nIdx++] = 192 + (nChr >>> 6);\n            aBytes[nIdx++] = 128 + (nChr & 63);\n        }\n        else if (nChr < 0x10000) {\n            /* three bytes */\n            aBytes[nIdx++] = 224 + (nChr >>> 12);\n            aBytes[nIdx++] = 128 + ((nChr >>> 6) & 63);\n            aBytes[nIdx++] = 128 + (nChr & 63);\n        }\n        else if (nChr < 0x200000) {\n            /* four bytes */\n            aBytes[nIdx++] = 240 + (nChr >>> 18);\n            aBytes[nIdx++] = 128 + ((nChr >>> 12) & 63);\n            aBytes[nIdx++] = 128 + ((nChr >>> 6) & 63);\n            aBytes[nIdx++] = 128 + (nChr & 63);\n        }\n        else if (nChr < 0x4000000) {\n            /* five bytes */\n            aBytes[nIdx++] = 248 + (nChr >>> 24);\n            aBytes[nIdx++] = 128 + ((nChr >>> 18) & 63);\n            aBytes[nIdx++] = 128 + ((nChr >>> 12) & 63);\n            aBytes[nIdx++] = 128 + ((nChr >>> 6) & 63);\n            aBytes[nIdx++] = 128 + (nChr & 63);\n        } /* if (nChr <= 0x7fffffff) */\n        else {\n            /* six bytes */\n            aBytes[nIdx++] = 252 + (nChr >>> 30);\n            aBytes[nIdx++] = 128 + ((nChr >>> 24) & 63);\n            aBytes[nIdx++] = 128 + ((nChr >>> 18) & 63);\n            aBytes[nIdx++] = 128 + ((nChr >>> 12) & 63);\n            aBytes[nIdx++] = 128 + ((nChr >>> 6) & 63);\n            aBytes[nIdx++] = 128 + (nChr & 63);\n        }\n    }\n    return aBytes;\n}\nexport const btoaUTF16 = (sString) => {\n    return base64EncArr(strToUTF8Arr(sString));\n};\nexport const atobUTF16 = (sBase64) => {\n    return UTF8ArrToStr(base64DecToArr(sBase64));\n};\n","import { useEffect, useState, useCallback } from 'react';\nimport YAML from 'yaml';\nimport { useFlexgetAPI } from 'core/api';\nimport { Method } from 'utils/fetch';\nimport { useGlobalInfo } from 'core/status/hooks';\nimport { atobUTF16, btoaUTF16 } from 'utils/encoding';\nimport { TaskContainer } from 'plugins/tasks/hooks';\nimport { useContainer } from 'unstated-next';\nexport const useGetConfig = () => {\n    const [get, getRequest] = useFlexgetAPI('/server/raw_config');\n    const [post, postRequest] = useFlexgetAPI('/server/raw_config', Method.Post);\n    const [config, setConfig] = useState('');\n    const { refresh } = useContainer(TaskContainer);\n    const pushInfo = useGlobalInfo();\n    useEffect(() => {\n        const fn = async () => {\n            const resp = await getRequest();\n            if (resp.ok) {\n                setConfig(atobUTF16(resp.data.rawConfig));\n            }\n        };\n        fn();\n    }, [getRequest]);\n    const saveConfig = useCallback(async (v) => {\n        const resp = await postRequest({ rawConfig: btoaUTF16(v) });\n        if (resp.ok) {\n            setConfig(v);\n            pushInfo(resp.data.message);\n            refresh();\n        }\n        return resp;\n    }, [postRequest, pushInfo, refresh]);\n    return [{ config, state: { get, post } }, saveConfig];\n};\nexport const useGetVariables = () => {\n    const [get, getRequest] = useFlexgetAPI('/variables');\n    const [post, postRequest] = useFlexgetAPI('/variables', Method.Put);\n    const [variables, setVariables] = useState('');\n    const pushInfo = useGlobalInfo();\n    useEffect(() => {\n        const fn = async () => {\n            const resp = await getRequest();\n            if (resp.ok) {\n                setVariables(YAML.stringify(resp.data));\n            }\n        };\n        fn();\n    }, [getRequest]);\n    const saveVariables = useCallback(async (v) => {\n        const resp = await postRequest(YAML.parse(v));\n        if (resp.ok) {\n            setVariables(v);\n            pushInfo('Variables successfully saved');\n        }\n        return resp;\n    }, [postRequest, pushInfo]);\n    return [{ variables, state: { get, post } }, saveVariables];\n};\nexport const useGetSchema = () => {\n    const [state, getRequest] = useFlexgetAPI('/schema', Method.Get, true);\n    const [schemas, setSchemas] = useState([]);\n    useEffect(() => {\n        const fn = async () => {\n            const resp = await getRequest();\n            if (resp.ok) {\n                setSchemas(resp.data.schemas.map(schema => ({\n                    uri: schema.id,\n                    fileMatch: schema.id === `${document.baseURI}api/schema/config` ? ['*'] : undefined,\n                    schema,\n                })));\n            }\n        };\n        fn();\n    }, [getRequest]);\n    return { ...state, schemas };\n};\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport './bracketMatching.css';\r\nimport * as nls from '../../../nls.js';\r\nimport { RunOnceScheduler } from '../../../base/common/async.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../browser/editorExtensions.js';\r\nimport { Position } from '../../common/core/position.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { Selection } from '../../common/core/selection.js';\r\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\r\nimport { OverviewRulerLane } from '../../common/model.js';\r\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\r\nimport { editorBracketMatchBackground, editorBracketMatchBorder } from '../../common/view/editorColorRegistry.js';\r\nimport { registerColor } from '../../../platform/theme/common/colorRegistry.js';\r\nimport { registerThemingParticipant, themeColorFromId } from '../../../platform/theme/common/themeService.js';\r\nimport { MenuRegistry } from '../../../platform/actions/common/actions.js';\r\nvar overviewRulerBracketMatchForeground = registerColor('editorOverviewRuler.bracketMatchForeground', { dark: '#A0A0A0', light: '#A0A0A0', hc: '#A0A0A0' }, nls.localize('overviewRulerBracketMatchForeground', 'Overview ruler marker color for matching brackets.'));\r\nvar JumpToBracketAction = /** @class */ (function (_super) {\r\n    __extends(JumpToBracketAction, _super);\r\n    function JumpToBracketAction() {\r\n        return _super.call(this, {\r\n            id: 'editor.action.jumpToBracket',\r\n            label: nls.localize('smartSelect.jumpBracket', \"Go to Bracket\"),\r\n            alias: 'Go to Bracket',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 88 /* US_BACKSLASH */,\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    JumpToBracketAction.prototype.run = function (accessor, editor) {\r\n        var controller = BracketMatchingController.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        controller.jumpToBracket();\r\n    };\r\n    return JumpToBracketAction;\r\n}(EditorAction));\r\nvar SelectToBracketAction = /** @class */ (function (_super) {\r\n    __extends(SelectToBracketAction, _super);\r\n    function SelectToBracketAction() {\r\n        return _super.call(this, {\r\n            id: 'editor.action.selectToBracket',\r\n            label: nls.localize('smartSelect.selectToBracket', \"Select to Bracket\"),\r\n            alias: 'Select to Bracket',\r\n            precondition: undefined,\r\n            description: {\r\n                description: \"Select to Bracket\",\r\n                args: [{\r\n                        name: 'args',\r\n                        schema: {\r\n                            type: 'object',\r\n                            properties: {\r\n                                'selectBrackets': {\r\n                                    type: 'boolean',\r\n                                    default: true\r\n                                }\r\n                            },\r\n                        }\r\n                    }]\r\n            }\r\n        }) || this;\r\n    }\r\n    SelectToBracketAction.prototype.run = function (accessor, editor, args) {\r\n        var controller = BracketMatchingController.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        var selectBrackets = true;\r\n        if (args && args.selectBrackets === false) {\r\n            selectBrackets = false;\r\n        }\r\n        controller.selectToBracket(selectBrackets);\r\n    };\r\n    return SelectToBracketAction;\r\n}(EditorAction));\r\nvar BracketsData = /** @class */ (function () {\r\n    function BracketsData(position, brackets, options) {\r\n        this.position = position;\r\n        this.brackets = brackets;\r\n        this.options = options;\r\n    }\r\n    return BracketsData;\r\n}());\r\nvar BracketMatchingController = /** @class */ (function (_super) {\r\n    __extends(BracketMatchingController, _super);\r\n    function BracketMatchingController(editor) {\r\n        var _this = _super.call(this) || this;\r\n        _this._editor = editor;\r\n        _this._lastBracketsData = [];\r\n        _this._lastVersionId = 0;\r\n        _this._decorations = [];\r\n        _this._updateBracketsSoon = _this._register(new RunOnceScheduler(function () { return _this._updateBrackets(); }, 50));\r\n        _this._matchBrackets = _this._editor.getOption(51 /* matchBrackets */);\r\n        _this._updateBracketsSoon.schedule();\r\n        _this._register(editor.onDidChangeCursorPosition(function (e) {\r\n            if (_this._matchBrackets === 'never') {\r\n                // Early exit if nothing needs to be done!\r\n                // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\r\n                return;\r\n            }\r\n            _this._updateBracketsSoon.schedule();\r\n        }));\r\n        _this._register(editor.onDidChangeModelContent(function (e) {\r\n            _this._updateBracketsSoon.schedule();\r\n        }));\r\n        _this._register(editor.onDidChangeModel(function (e) {\r\n            _this._lastBracketsData = [];\r\n            _this._decorations = [];\r\n            _this._updateBracketsSoon.schedule();\r\n        }));\r\n        _this._register(editor.onDidChangeModelLanguageConfiguration(function (e) {\r\n            _this._lastBracketsData = [];\r\n            _this._updateBracketsSoon.schedule();\r\n        }));\r\n        _this._register(editor.onDidChangeConfiguration(function (e) {\r\n            if (e.hasChanged(51 /* matchBrackets */)) {\r\n                _this._matchBrackets = _this._editor.getOption(51 /* matchBrackets */);\r\n                _this._decorations = _this._editor.deltaDecorations(_this._decorations, []);\r\n                _this._lastBracketsData = [];\r\n                _this._lastVersionId = 0;\r\n                _this._updateBracketsSoon.schedule();\r\n            }\r\n        }));\r\n        return _this;\r\n    }\r\n    BracketMatchingController.get = function (editor) {\r\n        return editor.getContribution(BracketMatchingController.ID);\r\n    };\r\n    BracketMatchingController.prototype.jumpToBracket = function () {\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        var model = this._editor.getModel();\r\n        var newSelections = this._editor.getSelections().map(function (selection) {\r\n            var position = selection.getStartPosition();\r\n            // find matching brackets if position is on a bracket\r\n            var brackets = model.matchBracket(position);\r\n            var newCursorPosition = null;\r\n            if (brackets) {\r\n                if (brackets[0].containsPosition(position)) {\r\n                    newCursorPosition = brackets[1].getStartPosition();\r\n                }\r\n                else if (brackets[1].containsPosition(position)) {\r\n                    newCursorPosition = brackets[0].getStartPosition();\r\n                }\r\n            }\r\n            else {\r\n                // find the enclosing brackets if the position isn't on a matching bracket\r\n                var enclosingBrackets = model.findEnclosingBrackets(position);\r\n                if (enclosingBrackets) {\r\n                    newCursorPosition = enclosingBrackets[0].getStartPosition();\r\n                }\r\n                else {\r\n                    // no enclosing brackets, try the very first next bracket\r\n                    var nextBracket = model.findNextBracket(position);\r\n                    if (nextBracket && nextBracket.range) {\r\n                        newCursorPosition = nextBracket.range.getStartPosition();\r\n                    }\r\n                }\r\n            }\r\n            if (newCursorPosition) {\r\n                return new Selection(newCursorPosition.lineNumber, newCursorPosition.column, newCursorPosition.lineNumber, newCursorPosition.column);\r\n            }\r\n            return new Selection(position.lineNumber, position.column, position.lineNumber, position.column);\r\n        });\r\n        this._editor.setSelections(newSelections);\r\n        this._editor.revealRange(newSelections[0]);\r\n    };\r\n    BracketMatchingController.prototype.selectToBracket = function (selectBrackets) {\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        var model = this._editor.getModel();\r\n        var newSelections = [];\r\n        this._editor.getSelections().forEach(function (selection) {\r\n            var position = selection.getStartPosition();\r\n            var brackets = model.matchBracket(position);\r\n            if (!brackets) {\r\n                brackets = model.findEnclosingBrackets(position);\r\n                if (!brackets) {\r\n                    var nextBracket = model.findNextBracket(position);\r\n                    if (nextBracket && nextBracket.range) {\r\n                        brackets = model.matchBracket(nextBracket.range.getStartPosition());\r\n                    }\r\n                }\r\n            }\r\n            var selectFrom = null;\r\n            var selectTo = null;\r\n            if (brackets) {\r\n                brackets.sort(Range.compareRangesUsingStarts);\r\n                var open_1 = brackets[0], close_1 = brackets[1];\r\n                selectFrom = selectBrackets ? open_1.getStartPosition() : open_1.getEndPosition();\r\n                selectTo = selectBrackets ? close_1.getEndPosition() : close_1.getStartPosition();\r\n            }\r\n            if (selectFrom && selectTo) {\r\n                newSelections.push(new Selection(selectFrom.lineNumber, selectFrom.column, selectTo.lineNumber, selectTo.column));\r\n            }\r\n        });\r\n        if (newSelections.length > 0) {\r\n            this._editor.setSelections(newSelections);\r\n            this._editor.revealRange(newSelections[0]);\r\n        }\r\n    };\r\n    BracketMatchingController.prototype._updateBrackets = function () {\r\n        if (this._matchBrackets === 'never') {\r\n            return;\r\n        }\r\n        this._recomputeBrackets();\r\n        var newDecorations = [], newDecorationsLen = 0;\r\n        for (var _i = 0, _a = this._lastBracketsData; _i < _a.length; _i++) {\r\n            var bracketData = _a[_i];\r\n            var brackets = bracketData.brackets;\r\n            if (brackets) {\r\n                newDecorations[newDecorationsLen++] = { range: brackets[0], options: bracketData.options };\r\n                newDecorations[newDecorationsLen++] = { range: brackets[1], options: bracketData.options };\r\n            }\r\n        }\r\n        this._decorations = this._editor.deltaDecorations(this._decorations, newDecorations);\r\n    };\r\n    BracketMatchingController.prototype._recomputeBrackets = function () {\r\n        if (!this._editor.hasModel()) {\r\n            // no model => no brackets!\r\n            this._lastBracketsData = [];\r\n            this._lastVersionId = 0;\r\n            return;\r\n        }\r\n        var selections = this._editor.getSelections();\r\n        if (selections.length > 100) {\r\n            // no bracket matching for high numbers of selections\r\n            this._lastBracketsData = [];\r\n            this._lastVersionId = 0;\r\n            return;\r\n        }\r\n        var model = this._editor.getModel();\r\n        var versionId = model.getVersionId();\r\n        var previousData = [];\r\n        if (this._lastVersionId === versionId) {\r\n            // use the previous data only if the model is at the same version id\r\n            previousData = this._lastBracketsData;\r\n        }\r\n        var positions = [], positionsLen = 0;\r\n        for (var i = 0, len = selections.length; i < len; i++) {\r\n            var selection = selections[i];\r\n            if (selection.isEmpty()) {\r\n                // will bracket match a cursor only if the selection is collapsed\r\n                positions[positionsLen++] = selection.getStartPosition();\r\n            }\r\n        }\r\n        // sort positions for `previousData` cache hits\r\n        if (positions.length > 1) {\r\n            positions.sort(Position.compare);\r\n        }\r\n        var newData = [], newDataLen = 0;\r\n        var previousIndex = 0, previousLen = previousData.length;\r\n        for (var i = 0, len = positions.length; i < len; i++) {\r\n            var position = positions[i];\r\n            while (previousIndex < previousLen && previousData[previousIndex].position.isBefore(position)) {\r\n                previousIndex++;\r\n            }\r\n            if (previousIndex < previousLen && previousData[previousIndex].position.equals(position)) {\r\n                newData[newDataLen++] = previousData[previousIndex];\r\n            }\r\n            else {\r\n                var brackets = model.matchBracket(position);\r\n                var options = BracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;\r\n                if (!brackets && this._matchBrackets === 'always') {\r\n                    brackets = model.findEnclosingBrackets(position, 20 /* give at most 20ms to compute */);\r\n                    options = BracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER;\r\n                }\r\n                newData[newDataLen++] = new BracketsData(position, brackets, options);\r\n            }\r\n        }\r\n        this._lastBracketsData = newData;\r\n        this._lastVersionId = versionId;\r\n    };\r\n    BracketMatchingController.ID = 'editor.contrib.bracketMatchingController';\r\n    BracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER = ModelDecorationOptions.register({\r\n        stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\r\n        className: 'bracket-match',\r\n        overviewRuler: {\r\n            color: themeColorFromId(overviewRulerBracketMatchForeground),\r\n            position: OverviewRulerLane.Center\r\n        }\r\n    });\r\n    BracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER = ModelDecorationOptions.register({\r\n        stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\r\n        className: 'bracket-match'\r\n    });\r\n    return BracketMatchingController;\r\n}(Disposable));\r\nexport { BracketMatchingController };\r\nregisterEditorContribution(BracketMatchingController.ID, BracketMatchingController);\r\nregisterEditorAction(SelectToBracketAction);\r\nregisterEditorAction(JumpToBracketAction);\r\nregisterThemingParticipant(function (theme, collector) {\r\n    var bracketMatchBackground = theme.getColor(editorBracketMatchBackground);\r\n    if (bracketMatchBackground) {\r\n        collector.addRule(\".monaco-editor .bracket-match { background-color: \" + bracketMatchBackground + \"; }\");\r\n    }\r\n    var bracketMatchBorder = theme.getColor(editorBracketMatchBorder);\r\n    if (bracketMatchBorder) {\r\n        collector.addRule(\".monaco-editor .bracket-match { border: 1px solid \" + bracketMatchBorder + \"; }\");\r\n    }\r\n});\r\n// Go to menu\r\nMenuRegistry.appendMenuItem(17 /* MenubarGoMenu */, {\r\n    group: '5_infile_nav',\r\n    command: {\r\n        id: 'editor.action.jumpToBracket',\r\n        title: nls.localize({ key: 'miGoToBracket', comment: ['&& denotes a mnemonic'] }, \"Go to &&Bracket\")\r\n    },\r\n    order: 2\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport './clipboard.css';\r\nimport * as nls from '../../../nls.js';\r\nimport * as browser from '../../../base/browser/browser.js';\r\nimport * as platform from '../../../base/common/platform.js';\r\nimport { CopyOptions } from '../../browser/controller/textAreaInput.js';\r\nimport { EditorAction, registerEditorAction } from '../../browser/editorExtensions.js';\r\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\r\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\r\nvar CLIPBOARD_CONTEXT_MENU_GROUP = '9_cutcopypaste';\r\nvar supportsCut = (platform.isNative || document.queryCommandSupported('cut'));\r\nvar supportsCopy = (platform.isNative || document.queryCommandSupported('copy'));\r\n// IE and Edge have trouble with setting html content in clipboard\r\nvar supportsCopyWithSyntaxHighlighting = (supportsCopy && !browser.isEdgeOrIE);\r\n// Chrome incorrectly returns true for document.queryCommandSupported('paste')\r\n// when the paste feature is available but the calling script has insufficient\r\n// privileges to actually perform the action\r\nvar supportsPaste = (platform.isNative || (!browser.isChrome && document.queryCommandSupported('paste')));\r\nvar ExecCommandAction = /** @class */ (function (_super) {\r\n    __extends(ExecCommandAction, _super);\r\n    function ExecCommandAction(browserCommand, opts) {\r\n        var _this = _super.call(this, opts) || this;\r\n        _this.browserCommand = browserCommand;\r\n        return _this;\r\n    }\r\n    ExecCommandAction.prototype.runCommand = function (accessor, args) {\r\n        var focusedEditor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\r\n        // Only if editor text focus (i.e. not if editor has widget focus).\r\n        if (focusedEditor && focusedEditor.hasTextFocus()) {\r\n            focusedEditor.trigger('keyboard', this.id, args);\r\n            return;\r\n        }\r\n        document.execCommand(this.browserCommand);\r\n    };\r\n    ExecCommandAction.prototype.run = function (accessor, editor) {\r\n        editor.focus();\r\n        document.execCommand(this.browserCommand);\r\n    };\r\n    return ExecCommandAction;\r\n}(EditorAction));\r\nvar ExecCommandCutAction = /** @class */ (function (_super) {\r\n    __extends(ExecCommandCutAction, _super);\r\n    function ExecCommandCutAction() {\r\n        var _this = this;\r\n        var kbOpts = {\r\n            kbExpr: EditorContextKeys.textInputFocus,\r\n            primary: 2048 /* CtrlCmd */ | 54 /* KEY_X */,\r\n            win: { primary: 2048 /* CtrlCmd */ | 54 /* KEY_X */, secondary: [1024 /* Shift */ | 20 /* Delete */] },\r\n            weight: 100 /* EditorContrib */\r\n        };\r\n        // Do not bind cut keybindings in the browser,\r\n        // since browsers do that for us and it avoids security prompts\r\n        if (!platform.isNative) {\r\n            kbOpts = undefined;\r\n        }\r\n        _this = _super.call(this, 'cut', {\r\n            id: 'editor.action.clipboardCutAction',\r\n            label: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\r\n            alias: 'Cut',\r\n            precondition: EditorContextKeys.writable,\r\n            kbOpts: kbOpts,\r\n            contextMenuOpts: {\r\n                group: CLIPBOARD_CONTEXT_MENU_GROUP,\r\n                order: 1\r\n            },\r\n            menuOpts: {\r\n                menuId: 15 /* MenubarEditMenu */,\r\n                group: '2_ccp',\r\n                title: nls.localize({ key: 'miCut', comment: ['&& denotes a mnemonic'] }, \"Cu&&t\"),\r\n                order: 1\r\n            }\r\n        }) || this;\r\n        return _this;\r\n    }\r\n    ExecCommandCutAction.prototype.run = function (accessor, editor) {\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        var emptySelectionClipboard = editor.getOption(24 /* emptySelectionClipboard */);\r\n        if (!emptySelectionClipboard && editor.getSelection().isEmpty()) {\r\n            return;\r\n        }\r\n        _super.prototype.run.call(this, accessor, editor);\r\n    };\r\n    return ExecCommandCutAction;\r\n}(ExecCommandAction));\r\nvar ExecCommandCopyAction = /** @class */ (function (_super) {\r\n    __extends(ExecCommandCopyAction, _super);\r\n    function ExecCommandCopyAction() {\r\n        var _this = this;\r\n        var kbOpts = {\r\n            kbExpr: EditorContextKeys.textInputFocus,\r\n            primary: 2048 /* CtrlCmd */ | 33 /* KEY_C */,\r\n            win: { primary: 2048 /* CtrlCmd */ | 33 /* KEY_C */, secondary: [2048 /* CtrlCmd */ | 19 /* Insert */] },\r\n            weight: 100 /* EditorContrib */\r\n        };\r\n        // Do not bind copy keybindings in the browser,\r\n        // since browsers do that for us and it avoids security prompts\r\n        if (!platform.isNative) {\r\n            kbOpts = undefined;\r\n        }\r\n        _this = _super.call(this, 'copy', {\r\n            id: 'editor.action.clipboardCopyAction',\r\n            label: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\r\n            alias: 'Copy',\r\n            precondition: undefined,\r\n            kbOpts: kbOpts,\r\n            contextMenuOpts: {\r\n                group: CLIPBOARD_CONTEXT_MENU_GROUP,\r\n                order: 2\r\n            },\r\n            menuOpts: {\r\n                menuId: 15 /* MenubarEditMenu */,\r\n                group: '2_ccp',\r\n                title: nls.localize({ key: 'miCopy', comment: ['&& denotes a mnemonic'] }, \"&&Copy\"),\r\n                order: 2\r\n            }\r\n        }) || this;\r\n        return _this;\r\n    }\r\n    ExecCommandCopyAction.prototype.run = function (accessor, editor) {\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        var emptySelectionClipboard = editor.getOption(24 /* emptySelectionClipboard */);\r\n        if (!emptySelectionClipboard && editor.getSelection().isEmpty()) {\r\n            return;\r\n        }\r\n        _super.prototype.run.call(this, accessor, editor);\r\n    };\r\n    return ExecCommandCopyAction;\r\n}(ExecCommandAction));\r\nvar ExecCommandPasteAction = /** @class */ (function (_super) {\r\n    __extends(ExecCommandPasteAction, _super);\r\n    function ExecCommandPasteAction() {\r\n        var _this = this;\r\n        var kbOpts = {\r\n            kbExpr: EditorContextKeys.textInputFocus,\r\n            primary: 2048 /* CtrlCmd */ | 52 /* KEY_V */,\r\n            win: { primary: 2048 /* CtrlCmd */ | 52 /* KEY_V */, secondary: [1024 /* Shift */ | 19 /* Insert */] },\r\n            weight: 100 /* EditorContrib */\r\n        };\r\n        // Do not bind paste keybindings in the browser,\r\n        // since browsers do that for us and it avoids security prompts\r\n        if (!platform.isNative) {\r\n            kbOpts = undefined;\r\n        }\r\n        _this = _super.call(this, 'paste', {\r\n            id: 'editor.action.clipboardPasteAction',\r\n            label: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\r\n            alias: 'Paste',\r\n            precondition: EditorContextKeys.writable,\r\n            kbOpts: kbOpts,\r\n            contextMenuOpts: {\r\n                group: CLIPBOARD_CONTEXT_MENU_GROUP,\r\n                order: 3\r\n            },\r\n            menuOpts: {\r\n                menuId: 15 /* MenubarEditMenu */,\r\n                group: '2_ccp',\r\n                title: nls.localize({ key: 'miPaste', comment: ['&& denotes a mnemonic'] }, \"&&Paste\"),\r\n                order: 3\r\n            }\r\n        }) || this;\r\n        return _this;\r\n    }\r\n    return ExecCommandPasteAction;\r\n}(ExecCommandAction));\r\nvar ExecCommandCopyWithSyntaxHighlightingAction = /** @class */ (function (_super) {\r\n    __extends(ExecCommandCopyWithSyntaxHighlightingAction, _super);\r\n    function ExecCommandCopyWithSyntaxHighlightingAction() {\r\n        return _super.call(this, 'copy', {\r\n            id: 'editor.action.clipboardCopyWithSyntaxHighlightingAction',\r\n            label: nls.localize('actions.clipboard.copyWithSyntaxHighlightingLabel', \"Copy With Syntax Highlighting\"),\r\n            alias: 'Copy With Syntax Highlighting',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.textInputFocus,\r\n                primary: 0,\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    ExecCommandCopyWithSyntaxHighlightingAction.prototype.run = function (accessor, editor) {\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        var emptySelectionClipboard = editor.getOption(24 /* emptySelectionClipboard */);\r\n        if (!emptySelectionClipboard && editor.getSelection().isEmpty()) {\r\n            return;\r\n        }\r\n        CopyOptions.forceCopyWithSyntaxHighlighting = true;\r\n        _super.prototype.run.call(this, accessor, editor);\r\n        CopyOptions.forceCopyWithSyntaxHighlighting = false;\r\n    };\r\n    return ExecCommandCopyWithSyntaxHighlightingAction;\r\n}(ExecCommandAction));\r\nif (supportsCut) {\r\n    registerEditorAction(ExecCommandCutAction);\r\n}\r\nif (supportsCopy) {\r\n    registerEditorAction(ExecCommandCopyAction);\r\n}\r\nif (supportsPaste) {\r\n    registerEditorAction(ExecCommandPasteAction);\r\n}\r\nif (supportsCopyWithSyntaxHighlighting) {\r\n    registerEditorAction(ExecCommandCopyWithSyntaxHighlightingAction);\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Range } from '../../common/core/range.js';\r\nimport { OverviewRulerLane, MinimapPosition } from '../../common/model.js';\r\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\r\nimport { overviewRulerFindMatchForeground, minimapFindMatch } from '../../../platform/theme/common/colorRegistry.js';\r\nimport { themeColorFromId } from '../../../platform/theme/common/themeService.js';\r\nvar FindDecorations = /** @class */ (function () {\r\n    function FindDecorations(editor) {\r\n        this._editor = editor;\r\n        this._decorations = [];\r\n        this._overviewRulerApproximateDecorations = [];\r\n        this._findScopeDecorationId = null;\r\n        this._rangeHighlightDecorationId = null;\r\n        this._highlightedDecorationId = null;\r\n        this._startPosition = this._editor.getPosition();\r\n    }\r\n    FindDecorations.prototype.dispose = function () {\r\n        this._editor.deltaDecorations(this._allDecorations(), []);\r\n        this._decorations = [];\r\n        this._overviewRulerApproximateDecorations = [];\r\n        this._findScopeDecorationId = null;\r\n        this._rangeHighlightDecorationId = null;\r\n        this._highlightedDecorationId = null;\r\n    };\r\n    FindDecorations.prototype.reset = function () {\r\n        this._decorations = [];\r\n        this._overviewRulerApproximateDecorations = [];\r\n        this._findScopeDecorationId = null;\r\n        this._rangeHighlightDecorationId = null;\r\n        this._highlightedDecorationId = null;\r\n    };\r\n    FindDecorations.prototype.getCount = function () {\r\n        return this._decorations.length;\r\n    };\r\n    FindDecorations.prototype.getFindScope = function () {\r\n        if (this._findScopeDecorationId) {\r\n            return this._editor.getModel().getDecorationRange(this._findScopeDecorationId);\r\n        }\r\n        return null;\r\n    };\r\n    FindDecorations.prototype.getStartPosition = function () {\r\n        return this._startPosition;\r\n    };\r\n    FindDecorations.prototype.setStartPosition = function (newStartPosition) {\r\n        this._startPosition = newStartPosition;\r\n        this.setCurrentFindMatch(null);\r\n    };\r\n    FindDecorations.prototype._getDecorationIndex = function (decorationId) {\r\n        var index = this._decorations.indexOf(decorationId);\r\n        if (index >= 0) {\r\n            return index + 1;\r\n        }\r\n        return 1;\r\n    };\r\n    FindDecorations.prototype.getCurrentMatchesPosition = function (desiredRange) {\r\n        var candidates = this._editor.getModel().getDecorationsInRange(desiredRange);\r\n        for (var _i = 0, candidates_1 = candidates; _i < candidates_1.length; _i++) {\r\n            var candidate = candidates_1[_i];\r\n            var candidateOpts = candidate.options;\r\n            if (candidateOpts === FindDecorations._FIND_MATCH_DECORATION || candidateOpts === FindDecorations._CURRENT_FIND_MATCH_DECORATION) {\r\n                return this._getDecorationIndex(candidate.id);\r\n            }\r\n        }\r\n        return 1;\r\n    };\r\n    FindDecorations.prototype.setCurrentFindMatch = function (nextMatch) {\r\n        var _this = this;\r\n        var newCurrentDecorationId = null;\r\n        var matchPosition = 0;\r\n        if (nextMatch) {\r\n            for (var i = 0, len = this._decorations.length; i < len; i++) {\r\n                var range = this._editor.getModel().getDecorationRange(this._decorations[i]);\r\n                if (nextMatch.equalsRange(range)) {\r\n                    newCurrentDecorationId = this._decorations[i];\r\n                    matchPosition = (i + 1);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (this._highlightedDecorationId !== null || newCurrentDecorationId !== null) {\r\n            this._editor.changeDecorations(function (changeAccessor) {\r\n                if (_this._highlightedDecorationId !== null) {\r\n                    changeAccessor.changeDecorationOptions(_this._highlightedDecorationId, FindDecorations._FIND_MATCH_DECORATION);\r\n                    _this._highlightedDecorationId = null;\r\n                }\r\n                if (newCurrentDecorationId !== null) {\r\n                    _this._highlightedDecorationId = newCurrentDecorationId;\r\n                    changeAccessor.changeDecorationOptions(_this._highlightedDecorationId, FindDecorations._CURRENT_FIND_MATCH_DECORATION);\r\n                }\r\n                if (_this._rangeHighlightDecorationId !== null) {\r\n                    changeAccessor.removeDecoration(_this._rangeHighlightDecorationId);\r\n                    _this._rangeHighlightDecorationId = null;\r\n                }\r\n                if (newCurrentDecorationId !== null) {\r\n                    var rng = _this._editor.getModel().getDecorationRange(newCurrentDecorationId);\r\n                    if (rng.startLineNumber !== rng.endLineNumber && rng.endColumn === 1) {\r\n                        var lineBeforeEnd = rng.endLineNumber - 1;\r\n                        var lineBeforeEndMaxColumn = _this._editor.getModel().getLineMaxColumn(lineBeforeEnd);\r\n                        rng = new Range(rng.startLineNumber, rng.startColumn, lineBeforeEnd, lineBeforeEndMaxColumn);\r\n                    }\r\n                    _this._rangeHighlightDecorationId = changeAccessor.addDecoration(rng, FindDecorations._RANGE_HIGHLIGHT_DECORATION);\r\n                }\r\n            });\r\n        }\r\n        return matchPosition;\r\n    };\r\n    FindDecorations.prototype.set = function (findMatches, findScope) {\r\n        var _this = this;\r\n        this._editor.changeDecorations(function (accessor) {\r\n            var findMatchesOptions = FindDecorations._FIND_MATCH_DECORATION;\r\n            var newOverviewRulerApproximateDecorations = [];\r\n            if (findMatches.length > 1000) {\r\n                // we go into a mode where the overview ruler gets \"approximate\" decorations\r\n                // the reason is that the overview ruler paints all the decorations in the file and we don't want to cause freezes\r\n                findMatchesOptions = FindDecorations._FIND_MATCH_NO_OVERVIEW_DECORATION;\r\n                // approximate a distance in lines where matches should be merged\r\n                var lineCount = _this._editor.getModel().getLineCount();\r\n                var height = _this._editor.getLayoutInfo().height;\r\n                var approxPixelsPerLine = height / lineCount;\r\n                var mergeLinesDelta = Math.max(2, Math.ceil(3 / approxPixelsPerLine));\r\n                // merge decorations as much as possible\r\n                var prevStartLineNumber = findMatches[0].range.startLineNumber;\r\n                var prevEndLineNumber = findMatches[0].range.endLineNumber;\r\n                for (var i = 1, len = findMatches.length; i < len; i++) {\r\n                    var range = findMatches[i].range;\r\n                    if (prevEndLineNumber + mergeLinesDelta >= range.startLineNumber) {\r\n                        if (range.endLineNumber > prevEndLineNumber) {\r\n                            prevEndLineNumber = range.endLineNumber;\r\n                        }\r\n                    }\r\n                    else {\r\n                        newOverviewRulerApproximateDecorations.push({\r\n                            range: new Range(prevStartLineNumber, 1, prevEndLineNumber, 1),\r\n                            options: FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION\r\n                        });\r\n                        prevStartLineNumber = range.startLineNumber;\r\n                        prevEndLineNumber = range.endLineNumber;\r\n                    }\r\n                }\r\n                newOverviewRulerApproximateDecorations.push({\r\n                    range: new Range(prevStartLineNumber, 1, prevEndLineNumber, 1),\r\n                    options: FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION\r\n                });\r\n            }\r\n            // Find matches\r\n            var newFindMatchesDecorations = new Array(findMatches.length);\r\n            for (var i = 0, len = findMatches.length; i < len; i++) {\r\n                newFindMatchesDecorations[i] = {\r\n                    range: findMatches[i].range,\r\n                    options: findMatchesOptions\r\n                };\r\n            }\r\n            _this._decorations = accessor.deltaDecorations(_this._decorations, newFindMatchesDecorations);\r\n            // Overview ruler approximate decorations\r\n            _this._overviewRulerApproximateDecorations = accessor.deltaDecorations(_this._overviewRulerApproximateDecorations, newOverviewRulerApproximateDecorations);\r\n            // Range highlight\r\n            if (_this._rangeHighlightDecorationId) {\r\n                accessor.removeDecoration(_this._rangeHighlightDecorationId);\r\n                _this._rangeHighlightDecorationId = null;\r\n            }\r\n            // Find scope\r\n            if (_this._findScopeDecorationId) {\r\n                accessor.removeDecoration(_this._findScopeDecorationId);\r\n                _this._findScopeDecorationId = null;\r\n            }\r\n            if (findScope) {\r\n                _this._findScopeDecorationId = accessor.addDecoration(findScope, FindDecorations._FIND_SCOPE_DECORATION);\r\n            }\r\n        });\r\n    };\r\n    FindDecorations.prototype.matchBeforePosition = function (position) {\r\n        if (this._decorations.length === 0) {\r\n            return null;\r\n        }\r\n        for (var i = this._decorations.length - 1; i >= 0; i--) {\r\n            var decorationId = this._decorations[i];\r\n            var r = this._editor.getModel().getDecorationRange(decorationId);\r\n            if (!r || r.endLineNumber > position.lineNumber) {\r\n                continue;\r\n            }\r\n            if (r.endLineNumber < position.lineNumber) {\r\n                return r;\r\n            }\r\n            if (r.endColumn > position.column) {\r\n                continue;\r\n            }\r\n            return r;\r\n        }\r\n        return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length - 1]);\r\n    };\r\n    FindDecorations.prototype.matchAfterPosition = function (position) {\r\n        if (this._decorations.length === 0) {\r\n            return null;\r\n        }\r\n        for (var i = 0, len = this._decorations.length; i < len; i++) {\r\n            var decorationId = this._decorations[i];\r\n            var r = this._editor.getModel().getDecorationRange(decorationId);\r\n            if (!r || r.startLineNumber < position.lineNumber) {\r\n                continue;\r\n            }\r\n            if (r.startLineNumber > position.lineNumber) {\r\n                return r;\r\n            }\r\n            if (r.startColumn < position.column) {\r\n                continue;\r\n            }\r\n            return r;\r\n        }\r\n        return this._editor.getModel().getDecorationRange(this._decorations[0]);\r\n    };\r\n    FindDecorations.prototype._allDecorations = function () {\r\n        var result = [];\r\n        result = result.concat(this._decorations);\r\n        result = result.concat(this._overviewRulerApproximateDecorations);\r\n        if (this._findScopeDecorationId) {\r\n            result.push(this._findScopeDecorationId);\r\n        }\r\n        if (this._rangeHighlightDecorationId) {\r\n            result.push(this._rangeHighlightDecorationId);\r\n        }\r\n        return result;\r\n    };\r\n    FindDecorations._CURRENT_FIND_MATCH_DECORATION = ModelDecorationOptions.register({\r\n        stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\r\n        zIndex: 13,\r\n        className: 'currentFindMatch',\r\n        showIfCollapsed: true,\r\n        overviewRuler: {\r\n            color: themeColorFromId(overviewRulerFindMatchForeground),\r\n            position: OverviewRulerLane.Center\r\n        },\r\n        minimap: {\r\n            color: themeColorFromId(minimapFindMatch),\r\n            position: MinimapPosition.Inline\r\n        }\r\n    });\r\n    FindDecorations._FIND_MATCH_DECORATION = ModelDecorationOptions.register({\r\n        stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\r\n        className: 'findMatch',\r\n        showIfCollapsed: true,\r\n        overviewRuler: {\r\n            color: themeColorFromId(overviewRulerFindMatchForeground),\r\n            position: OverviewRulerLane.Center\r\n        },\r\n        minimap: {\r\n            color: themeColorFromId(minimapFindMatch),\r\n            position: MinimapPosition.Inline\r\n        }\r\n    });\r\n    FindDecorations._FIND_MATCH_NO_OVERVIEW_DECORATION = ModelDecorationOptions.register({\r\n        stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\r\n        className: 'findMatch',\r\n        showIfCollapsed: true\r\n    });\r\n    FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION = ModelDecorationOptions.register({\r\n        stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\r\n        overviewRuler: {\r\n            color: themeColorFromId(overviewRulerFindMatchForeground),\r\n            position: OverviewRulerLane.Center\r\n        }\r\n    });\r\n    FindDecorations._RANGE_HIGHLIGHT_DECORATION = ModelDecorationOptions.register({\r\n        stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\r\n        className: 'rangeHighlight',\r\n        isWholeLine: true\r\n    });\r\n    FindDecorations._FIND_SCOPE_DECORATION = ModelDecorationOptions.register({\r\n        className: 'findScope',\r\n        isWholeLine: true\r\n    });\r\n    return FindDecorations;\r\n}());\r\nexport { FindDecorations };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Range } from '../../common/core/range.js';\r\nvar ReplaceAllCommand = /** @class */ (function () {\r\n    function ReplaceAllCommand(editorSelection, ranges, replaceStrings) {\r\n        this._editorSelection = editorSelection;\r\n        this._ranges = ranges;\r\n        this._replaceStrings = replaceStrings;\r\n        this._trackedEditorSelectionId = null;\r\n    }\r\n    ReplaceAllCommand.prototype.getEditOperations = function (model, builder) {\r\n        if (this._ranges.length > 0) {\r\n            // Collect all edit operations\r\n            var ops = [];\r\n            for (var i = 0; i < this._ranges.length; i++) {\r\n                ops.push({\r\n                    range: this._ranges[i],\r\n                    text: this._replaceStrings[i]\r\n                });\r\n            }\r\n            // Sort them in ascending order by range starts\r\n            ops.sort(function (o1, o2) {\r\n                return Range.compareRangesUsingStarts(o1.range, o2.range);\r\n            });\r\n            // Merge operations that touch each other\r\n            var resultOps = [];\r\n            var previousOp = ops[0];\r\n            for (var i = 1; i < ops.length; i++) {\r\n                if (previousOp.range.endLineNumber === ops[i].range.startLineNumber && previousOp.range.endColumn === ops[i].range.startColumn) {\r\n                    // These operations are one after another and can be merged\r\n                    previousOp.range = previousOp.range.plusRange(ops[i].range);\r\n                    previousOp.text = previousOp.text + ops[i].text;\r\n                }\r\n                else {\r\n                    resultOps.push(previousOp);\r\n                    previousOp = ops[i];\r\n                }\r\n            }\r\n            resultOps.push(previousOp);\r\n            for (var _i = 0, resultOps_1 = resultOps; _i < resultOps_1.length; _i++) {\r\n                var op = resultOps_1[_i];\r\n                builder.addEditOperation(op.range, op.text);\r\n            }\r\n        }\r\n        this._trackedEditorSelectionId = builder.trackSelection(this._editorSelection);\r\n    };\r\n    ReplaceAllCommand.prototype.computeCursorState = function (model, helper) {\r\n        return helper.getTrackedSelection(this._trackedEditorSelectionId);\r\n    };\r\n    return ReplaceAllCommand;\r\n}());\r\nexport { ReplaceAllCommand };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport * as strings from './strings.js';\r\nexport function buildReplaceStringWithCasePreserved(matches, pattern) {\r\n    if (matches && (matches[0] !== '')) {\r\n        var containsHyphens = validateSpecificSpecialCharacter(matches, pattern, '-');\r\n        var containsUnderscores = validateSpecificSpecialCharacter(matches, pattern, '_');\r\n        if (containsHyphens && !containsUnderscores) {\r\n            return buildReplaceStringForSpecificSpecialCharacter(matches, pattern, '-');\r\n        }\r\n        else if (!containsHyphens && containsUnderscores) {\r\n            return buildReplaceStringForSpecificSpecialCharacter(matches, pattern, '_');\r\n        }\r\n        if (matches[0].toUpperCase() === matches[0]) {\r\n            return pattern.toUpperCase();\r\n        }\r\n        else if (matches[0].toLowerCase() === matches[0]) {\r\n            return pattern.toLowerCase();\r\n        }\r\n        else if (strings.containsUppercaseCharacter(matches[0][0])) {\r\n            return pattern[0].toUpperCase() + pattern.substr(1);\r\n        }\r\n        else {\r\n            // we don't understand its pattern yet.\r\n            return pattern;\r\n        }\r\n    }\r\n    else {\r\n        return pattern;\r\n    }\r\n}\r\nfunction validateSpecificSpecialCharacter(matches, pattern, specialCharacter) {\r\n    var doesContainSpecialCharacter = matches[0].indexOf(specialCharacter) !== -1 && pattern.indexOf(specialCharacter) !== -1;\r\n    return doesContainSpecialCharacter && matches[0].split(specialCharacter).length === pattern.split(specialCharacter).length;\r\n}\r\nfunction buildReplaceStringForSpecificSpecialCharacter(matches, pattern, specialCharacter) {\r\n    var splitPatternAtSpecialCharacter = pattern.split(specialCharacter);\r\n    var splitMatchAtSpecialCharacter = matches[0].split(specialCharacter);\r\n    var replaceString = '';\r\n    splitPatternAtSpecialCharacter.forEach(function (splitValue, index) {\r\n        replaceString += buildReplaceStringWithCasePreserved([splitMatchAtSpecialCharacter[index]], splitValue) + specialCharacter;\r\n    });\r\n    return replaceString.slice(0, -1);\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { buildReplaceStringWithCasePreserved } from '../../../base/common/search.js';\r\n/**\r\n * Assigned when the replace pattern is entirely static.\r\n */\r\nvar StaticValueReplacePattern = /** @class */ (function () {\r\n    function StaticValueReplacePattern(staticValue) {\r\n        this.staticValue = staticValue;\r\n        this.kind = 0 /* StaticValue */;\r\n    }\r\n    return StaticValueReplacePattern;\r\n}());\r\n/**\r\n * Assigned when the replace pattern has replacemend patterns.\r\n */\r\nvar DynamicPiecesReplacePattern = /** @class */ (function () {\r\n    function DynamicPiecesReplacePattern(pieces) {\r\n        this.pieces = pieces;\r\n        this.kind = 1 /* DynamicPieces */;\r\n    }\r\n    return DynamicPiecesReplacePattern;\r\n}());\r\nvar ReplacePattern = /** @class */ (function () {\r\n    function ReplacePattern(pieces) {\r\n        if (!pieces || pieces.length === 0) {\r\n            this._state = new StaticValueReplacePattern('');\r\n        }\r\n        else if (pieces.length === 1 && pieces[0].staticValue !== null) {\r\n            this._state = new StaticValueReplacePattern(pieces[0].staticValue);\r\n        }\r\n        else {\r\n            this._state = new DynamicPiecesReplacePattern(pieces);\r\n        }\r\n    }\r\n    ReplacePattern.fromStaticValue = function (value) {\r\n        return new ReplacePattern([ReplacePiece.staticValue(value)]);\r\n    };\r\n    Object.defineProperty(ReplacePattern.prototype, \"hasReplacementPatterns\", {\r\n        get: function () {\r\n            return (this._state.kind === 1 /* DynamicPieces */);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ReplacePattern.prototype.buildReplaceString = function (matches, preserveCase) {\r\n        if (this._state.kind === 0 /* StaticValue */) {\r\n            if (preserveCase) {\r\n                return buildReplaceStringWithCasePreserved(matches, this._state.staticValue);\r\n            }\r\n            else {\r\n                return this._state.staticValue;\r\n            }\r\n        }\r\n        var result = '';\r\n        for (var i = 0, len = this._state.pieces.length; i < len; i++) {\r\n            var piece = this._state.pieces[i];\r\n            if (piece.staticValue !== null) {\r\n                // static value ReplacePiece\r\n                result += piece.staticValue;\r\n                continue;\r\n            }\r\n            // match index ReplacePiece\r\n            result += ReplacePattern._substitute(piece.matchIndex, matches);\r\n        }\r\n        return result;\r\n    };\r\n    ReplacePattern._substitute = function (matchIndex, matches) {\r\n        if (matches === null) {\r\n            return '';\r\n        }\r\n        if (matchIndex === 0) {\r\n            return matches[0];\r\n        }\r\n        var remainder = '';\r\n        while (matchIndex > 0) {\r\n            if (matchIndex < matches.length) {\r\n                // A match can be undefined\r\n                var match = (matches[matchIndex] || '');\r\n                return match + remainder;\r\n            }\r\n            remainder = String(matchIndex % 10) + remainder;\r\n            matchIndex = Math.floor(matchIndex / 10);\r\n        }\r\n        return '$' + remainder;\r\n    };\r\n    return ReplacePattern;\r\n}());\r\nexport { ReplacePattern };\r\n/**\r\n * A replace piece can either be a static string or an index to a specific match.\r\n */\r\nvar ReplacePiece = /** @class */ (function () {\r\n    function ReplacePiece(staticValue, matchIndex) {\r\n        this.staticValue = staticValue;\r\n        this.matchIndex = matchIndex;\r\n    }\r\n    ReplacePiece.staticValue = function (value) {\r\n        return new ReplacePiece(value, -1);\r\n    };\r\n    ReplacePiece.matchIndex = function (index) {\r\n        return new ReplacePiece(null, index);\r\n    };\r\n    return ReplacePiece;\r\n}());\r\nexport { ReplacePiece };\r\nvar ReplacePieceBuilder = /** @class */ (function () {\r\n    function ReplacePieceBuilder(source) {\r\n        this._source = source;\r\n        this._lastCharIndex = 0;\r\n        this._result = [];\r\n        this._resultLen = 0;\r\n        this._currentStaticPiece = '';\r\n    }\r\n    ReplacePieceBuilder.prototype.emitUnchanged = function (toCharIndex) {\r\n        this._emitStatic(this._source.substring(this._lastCharIndex, toCharIndex));\r\n        this._lastCharIndex = toCharIndex;\r\n    };\r\n    ReplacePieceBuilder.prototype.emitStatic = function (value, toCharIndex) {\r\n        this._emitStatic(value);\r\n        this._lastCharIndex = toCharIndex;\r\n    };\r\n    ReplacePieceBuilder.prototype._emitStatic = function (value) {\r\n        if (value.length === 0) {\r\n            return;\r\n        }\r\n        this._currentStaticPiece += value;\r\n    };\r\n    ReplacePieceBuilder.prototype.emitMatchIndex = function (index, toCharIndex) {\r\n        if (this._currentStaticPiece.length !== 0) {\r\n            this._result[this._resultLen++] = ReplacePiece.staticValue(this._currentStaticPiece);\r\n            this._currentStaticPiece = '';\r\n        }\r\n        this._result[this._resultLen++] = ReplacePiece.matchIndex(index);\r\n        this._lastCharIndex = toCharIndex;\r\n    };\r\n    ReplacePieceBuilder.prototype.finalize = function () {\r\n        this.emitUnchanged(this._source.length);\r\n        if (this._currentStaticPiece.length !== 0) {\r\n            this._result[this._resultLen++] = ReplacePiece.staticValue(this._currentStaticPiece);\r\n            this._currentStaticPiece = '';\r\n        }\r\n        return new ReplacePattern(this._result);\r\n    };\r\n    return ReplacePieceBuilder;\r\n}());\r\n/**\r\n * \\n\t\t\t=> inserts a LF\r\n * \\t\t\t\t=> inserts a TAB\r\n * \\\\\t\t\t=> inserts a \"\\\".\r\n * $$\t\t\t=> inserts a \"$\".\r\n * $& and $0\t=> inserts the matched substring.\r\n * $n\t\t\t=> Where n is a non-negative integer lesser than 100, inserts the nth parenthesized submatch string\r\n * everything else stays untouched\r\n *\r\n * Also see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_string_as_a_parameter\r\n */\r\nexport function parseReplaceString(replaceString) {\r\n    if (!replaceString || replaceString.length === 0) {\r\n        return new ReplacePattern(null);\r\n    }\r\n    var result = new ReplacePieceBuilder(replaceString);\r\n    for (var i = 0, len = replaceString.length; i < len; i++) {\r\n        var chCode = replaceString.charCodeAt(i);\r\n        if (chCode === 92 /* Backslash */) {\r\n            // move to next char\r\n            i++;\r\n            if (i >= len) {\r\n                // string ends with a \\\r\n                break;\r\n            }\r\n            var nextChCode = replaceString.charCodeAt(i);\r\n            // let replaceWithCharacter: string | null = null;\r\n            switch (nextChCode) {\r\n                case 92 /* Backslash */:\r\n                    // \\\\ => inserts a \"\\\"\r\n                    result.emitUnchanged(i - 1);\r\n                    result.emitStatic('\\\\', i + 1);\r\n                    break;\r\n                case 110 /* n */:\r\n                    // \\n => inserts a LF\r\n                    result.emitUnchanged(i - 1);\r\n                    result.emitStatic('\\n', i + 1);\r\n                    break;\r\n                case 116 /* t */:\r\n                    // \\t => inserts a TAB\r\n                    result.emitUnchanged(i - 1);\r\n                    result.emitStatic('\\t', i + 1);\r\n                    break;\r\n            }\r\n            continue;\r\n        }\r\n        if (chCode === 36 /* DollarSign */) {\r\n            // move to next char\r\n            i++;\r\n            if (i >= len) {\r\n                // string ends with a $\r\n                break;\r\n            }\r\n            var nextChCode = replaceString.charCodeAt(i);\r\n            if (nextChCode === 36 /* DollarSign */) {\r\n                // $$ => inserts a \"$\"\r\n                result.emitUnchanged(i - 1);\r\n                result.emitStatic('$', i + 1);\r\n                continue;\r\n            }\r\n            if (nextChCode === 48 /* Digit0 */ || nextChCode === 38 /* Ampersand */) {\r\n                // $& and $0 => inserts the matched substring.\r\n                result.emitUnchanged(i - 1);\r\n                result.emitMatchIndex(0, i + 1);\r\n                continue;\r\n            }\r\n            if (49 /* Digit1 */ <= nextChCode && nextChCode <= 57 /* Digit9 */) {\r\n                // $n\r\n                var matchIndex = nextChCode - 48 /* Digit0 */;\r\n                // peek next char to probe for $nn\r\n                if (i + 1 < len) {\r\n                    var nextNextChCode = replaceString.charCodeAt(i + 1);\r\n                    if (48 /* Digit0 */ <= nextNextChCode && nextNextChCode <= 57 /* Digit9 */) {\r\n                        // $nn\r\n                        // move to next char\r\n                        i++;\r\n                        matchIndex = matchIndex * 10 + (nextNextChCode - 48 /* Digit0 */);\r\n                        result.emitUnchanged(i - 2);\r\n                        result.emitMatchIndex(matchIndex, i + 1);\r\n                        continue;\r\n                    }\r\n                }\r\n                result.emitUnchanged(i - 1);\r\n                result.emitMatchIndex(matchIndex, i + 1);\r\n                continue;\r\n            }\r\n        }\r\n    }\r\n    return result.finalize();\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { RunOnceScheduler, TimeoutTimer } from '../../../base/common/async.js';\r\nimport { dispose, DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { ReplaceCommand, ReplaceCommandThatPreservesSelection } from '../../common/commands/replaceCommand.js';\r\nimport { Position } from '../../common/core/position.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { Selection } from '../../common/core/selection.js';\r\nimport { SearchParams } from '../../common/model/textModelSearch.js';\r\nimport { FindDecorations } from './findDecorations.js';\r\nimport { ReplaceAllCommand } from './replaceAllCommand.js';\r\nimport { ReplacePattern, parseReplaceString } from './replacePattern.js';\r\nimport { RawContextKey } from '../../../platform/contextkey/common/contextkey.js';\r\nexport var CONTEXT_FIND_WIDGET_VISIBLE = new RawContextKey('findWidgetVisible', false);\r\n// Keep ContextKey use of 'Focussed' to not break when clauses\r\nexport var CONTEXT_FIND_INPUT_FOCUSED = new RawContextKey('findInputFocussed', false);\r\nexport var CONTEXT_REPLACE_INPUT_FOCUSED = new RawContextKey('replaceInputFocussed', false);\r\nexport var ToggleCaseSensitiveKeybinding = {\r\n    primary: 512 /* Alt */ | 33 /* KEY_C */,\r\n    mac: { primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 33 /* KEY_C */ }\r\n};\r\nexport var ToggleWholeWordKeybinding = {\r\n    primary: 512 /* Alt */ | 53 /* KEY_W */,\r\n    mac: { primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 53 /* KEY_W */ }\r\n};\r\nexport var ToggleRegexKeybinding = {\r\n    primary: 512 /* Alt */ | 48 /* KEY_R */,\r\n    mac: { primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 48 /* KEY_R */ }\r\n};\r\nexport var ToggleSearchScopeKeybinding = {\r\n    primary: 512 /* Alt */ | 42 /* KEY_L */,\r\n    mac: { primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 42 /* KEY_L */ }\r\n};\r\nexport var FIND_IDS = {\r\n    StartFindAction: 'actions.find',\r\n    StartFindWithSelection: 'actions.findWithSelection',\r\n    NextMatchFindAction: 'editor.action.nextMatchFindAction',\r\n    PreviousMatchFindAction: 'editor.action.previousMatchFindAction',\r\n    NextSelectionMatchFindAction: 'editor.action.nextSelectionMatchFindAction',\r\n    PreviousSelectionMatchFindAction: 'editor.action.previousSelectionMatchFindAction',\r\n    StartFindReplaceAction: 'editor.action.startFindReplaceAction',\r\n    CloseFindWidgetCommand: 'closeFindWidget',\r\n    ToggleCaseSensitiveCommand: 'toggleFindCaseSensitive',\r\n    ToggleWholeWordCommand: 'toggleFindWholeWord',\r\n    ToggleRegexCommand: 'toggleFindRegex',\r\n    ToggleSearchScopeCommand: 'toggleFindInSelection',\r\n    TogglePreserveCaseCommand: 'togglePreserveCase',\r\n    ReplaceOneAction: 'editor.action.replaceOne',\r\n    ReplaceAllAction: 'editor.action.replaceAll',\r\n    SelectAllMatchesAction: 'editor.action.selectAllMatches'\r\n};\r\nexport var MATCHES_LIMIT = 19999;\r\nvar RESEARCH_DELAY = 240;\r\nvar FindModelBoundToEditorModel = /** @class */ (function () {\r\n    function FindModelBoundToEditorModel(editor, state) {\r\n        var _this = this;\r\n        this._toDispose = new DisposableStore();\r\n        this._editor = editor;\r\n        this._state = state;\r\n        this._isDisposed = false;\r\n        this._startSearchingTimer = new TimeoutTimer();\r\n        this._decorations = new FindDecorations(editor);\r\n        this._toDispose.add(this._decorations);\r\n        this._updateDecorationsScheduler = new RunOnceScheduler(function () { return _this.research(false); }, 100);\r\n        this._toDispose.add(this._updateDecorationsScheduler);\r\n        this._toDispose.add(this._editor.onDidChangeCursorPosition(function (e) {\r\n            if (e.reason === 3 /* Explicit */\r\n                || e.reason === 5 /* Undo */\r\n                || e.reason === 6 /* Redo */) {\r\n                _this._decorations.setStartPosition(_this._editor.getPosition());\r\n            }\r\n        }));\r\n        this._ignoreModelContentChanged = false;\r\n        this._toDispose.add(this._editor.onDidChangeModelContent(function (e) {\r\n            if (_this._ignoreModelContentChanged) {\r\n                return;\r\n            }\r\n            if (e.isFlush) {\r\n                // a model.setValue() was called\r\n                _this._decorations.reset();\r\n            }\r\n            _this._decorations.setStartPosition(_this._editor.getPosition());\r\n            _this._updateDecorationsScheduler.schedule();\r\n        }));\r\n        this._toDispose.add(this._state.onFindReplaceStateChange(function (e) { return _this._onStateChanged(e); }));\r\n        this.research(false, this._state.searchScope);\r\n    }\r\n    FindModelBoundToEditorModel.prototype.dispose = function () {\r\n        this._isDisposed = true;\r\n        dispose(this._startSearchingTimer);\r\n        this._toDispose.dispose();\r\n    };\r\n    FindModelBoundToEditorModel.prototype._onStateChanged = function (e) {\r\n        var _this = this;\r\n        if (this._isDisposed) {\r\n            // The find model is disposed during a find state changed event\r\n            return;\r\n        }\r\n        if (!this._editor.hasModel()) {\r\n            // The find model will be disposed momentarily\r\n            return;\r\n        }\r\n        if (e.searchString || e.isReplaceRevealed || e.isRegex || e.wholeWord || e.matchCase || e.searchScope) {\r\n            var model = this._editor.getModel();\r\n            if (model.isTooLargeForSyncing()) {\r\n                this._startSearchingTimer.cancel();\r\n                this._startSearchingTimer.setIfNotSet(function () {\r\n                    if (e.searchScope) {\r\n                        _this.research(e.moveCursor, _this._state.searchScope);\r\n                    }\r\n                    else {\r\n                        _this.research(e.moveCursor);\r\n                    }\r\n                }, RESEARCH_DELAY);\r\n            }\r\n            else {\r\n                if (e.searchScope) {\r\n                    this.research(e.moveCursor, this._state.searchScope);\r\n                }\r\n                else {\r\n                    this.research(e.moveCursor);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    FindModelBoundToEditorModel._getSearchRange = function (model, findScope) {\r\n        // If we have set now or before a find scope, use it for computing the search range\r\n        if (findScope) {\r\n            return findScope;\r\n        }\r\n        return model.getFullModelRange();\r\n    };\r\n    FindModelBoundToEditorModel.prototype.research = function (moveCursor, newFindScope) {\r\n        var findScope = null;\r\n        if (typeof newFindScope !== 'undefined') {\r\n            findScope = newFindScope;\r\n        }\r\n        else {\r\n            findScope = this._decorations.getFindScope();\r\n        }\r\n        if (findScope !== null) {\r\n            if (findScope.startLineNumber !== findScope.endLineNumber) {\r\n                if (findScope.endColumn === 1) {\r\n                    findScope = new Range(findScope.startLineNumber, 1, findScope.endLineNumber - 1, this._editor.getModel().getLineMaxColumn(findScope.endLineNumber - 1));\r\n                }\r\n                else {\r\n                    // multiline find scope => expand to line starts / ends\r\n                    findScope = new Range(findScope.startLineNumber, 1, findScope.endLineNumber, this._editor.getModel().getLineMaxColumn(findScope.endLineNumber));\r\n                }\r\n            }\r\n        }\r\n        var findMatches = this._findMatches(findScope, false, MATCHES_LIMIT);\r\n        this._decorations.set(findMatches, findScope);\r\n        this._state.changeMatchInfo(this._decorations.getCurrentMatchesPosition(this._editor.getSelection()), this._decorations.getCount(), undefined);\r\n        if (moveCursor) {\r\n            this._moveToNextMatch(this._decorations.getStartPosition());\r\n        }\r\n    };\r\n    FindModelBoundToEditorModel.prototype._hasMatches = function () {\r\n        return (this._state.matchesCount > 0);\r\n    };\r\n    FindModelBoundToEditorModel.prototype._cannotFind = function () {\r\n        if (!this._hasMatches()) {\r\n            var findScope = this._decorations.getFindScope();\r\n            if (findScope) {\r\n                // Reveal the selection so user is reminded that 'selection find' is on.\r\n                this._editor.revealRangeInCenterIfOutsideViewport(findScope, 0 /* Smooth */);\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    FindModelBoundToEditorModel.prototype._setCurrentFindMatch = function (match) {\r\n        var matchesPosition = this._decorations.setCurrentFindMatch(match);\r\n        this._state.changeMatchInfo(matchesPosition, this._decorations.getCount(), match);\r\n        this._editor.setSelection(match);\r\n        this._editor.revealRangeInCenterIfOutsideViewport(match, 0 /* Smooth */);\r\n    };\r\n    FindModelBoundToEditorModel.prototype._prevSearchPosition = function (before) {\r\n        var isUsingLineStops = this._state.isRegex && (this._state.searchString.indexOf('^') >= 0\r\n            || this._state.searchString.indexOf('$') >= 0);\r\n        var lineNumber = before.lineNumber, column = before.column;\r\n        var model = this._editor.getModel();\r\n        if (isUsingLineStops || column === 1) {\r\n            if (lineNumber === 1) {\r\n                lineNumber = model.getLineCount();\r\n            }\r\n            else {\r\n                lineNumber--;\r\n            }\r\n            column = model.getLineMaxColumn(lineNumber);\r\n        }\r\n        else {\r\n            column--;\r\n        }\r\n        return new Position(lineNumber, column);\r\n    };\r\n    FindModelBoundToEditorModel.prototype._moveToPrevMatch = function (before, isRecursed) {\r\n        if (isRecursed === void 0) { isRecursed = false; }\r\n        if (this._decorations.getCount() < MATCHES_LIMIT) {\r\n            var prevMatchRange = this._decorations.matchBeforePosition(before);\r\n            if (prevMatchRange && prevMatchRange.isEmpty() && prevMatchRange.getStartPosition().equals(before)) {\r\n                before = this._prevSearchPosition(before);\r\n                prevMatchRange = this._decorations.matchBeforePosition(before);\r\n            }\r\n            if (prevMatchRange) {\r\n                this._setCurrentFindMatch(prevMatchRange);\r\n            }\r\n            return;\r\n        }\r\n        if (this._cannotFind()) {\r\n            return;\r\n        }\r\n        var findScope = this._decorations.getFindScope();\r\n        var searchRange = FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), findScope);\r\n        // ...(----)...|...\r\n        if (searchRange.getEndPosition().isBefore(before)) {\r\n            before = searchRange.getEndPosition();\r\n        }\r\n        // ...|...(----)...\r\n        if (before.isBefore(searchRange.getStartPosition())) {\r\n            before = searchRange.getEndPosition();\r\n        }\r\n        var lineNumber = before.lineNumber, column = before.column;\r\n        var model = this._editor.getModel();\r\n        var position = new Position(lineNumber, column);\r\n        var prevMatch = model.findPreviousMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(92 /* wordSeparators */) : null, false);\r\n        if (prevMatch && prevMatch.range.isEmpty() && prevMatch.range.getStartPosition().equals(position)) {\r\n            // Looks like we're stuck at this position, unacceptable!\r\n            position = this._prevSearchPosition(position);\r\n            prevMatch = model.findPreviousMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(92 /* wordSeparators */) : null, false);\r\n        }\r\n        if (!prevMatch) {\r\n            // there is precisely one match and selection is on top of it\r\n            return;\r\n        }\r\n        if (!isRecursed && !searchRange.containsRange(prevMatch.range)) {\r\n            return this._moveToPrevMatch(prevMatch.range.getStartPosition(), true);\r\n        }\r\n        this._setCurrentFindMatch(prevMatch.range);\r\n    };\r\n    FindModelBoundToEditorModel.prototype.moveToPrevMatch = function () {\r\n        this._moveToPrevMatch(this._editor.getSelection().getStartPosition());\r\n    };\r\n    FindModelBoundToEditorModel.prototype._nextSearchPosition = function (after) {\r\n        var isUsingLineStops = this._state.isRegex && (this._state.searchString.indexOf('^') >= 0\r\n            || this._state.searchString.indexOf('$') >= 0);\r\n        var lineNumber = after.lineNumber, column = after.column;\r\n        var model = this._editor.getModel();\r\n        if (isUsingLineStops || column === model.getLineMaxColumn(lineNumber)) {\r\n            if (lineNumber === model.getLineCount()) {\r\n                lineNumber = 1;\r\n            }\r\n            else {\r\n                lineNumber++;\r\n            }\r\n            column = 1;\r\n        }\r\n        else {\r\n            column++;\r\n        }\r\n        return new Position(lineNumber, column);\r\n    };\r\n    FindModelBoundToEditorModel.prototype._moveToNextMatch = function (after) {\r\n        if (this._decorations.getCount() < MATCHES_LIMIT) {\r\n            var nextMatchRange = this._decorations.matchAfterPosition(after);\r\n            if (nextMatchRange && nextMatchRange.isEmpty() && nextMatchRange.getStartPosition().equals(after)) {\r\n                // Looks like we're stuck at this position, unacceptable!\r\n                after = this._nextSearchPosition(after);\r\n                nextMatchRange = this._decorations.matchAfterPosition(after);\r\n            }\r\n            if (nextMatchRange) {\r\n                this._setCurrentFindMatch(nextMatchRange);\r\n            }\r\n            return;\r\n        }\r\n        var nextMatch = this._getNextMatch(after, false, true);\r\n        if (nextMatch) {\r\n            this._setCurrentFindMatch(nextMatch.range);\r\n        }\r\n    };\r\n    FindModelBoundToEditorModel.prototype._getNextMatch = function (after, captureMatches, forceMove, isRecursed) {\r\n        if (isRecursed === void 0) { isRecursed = false; }\r\n        if (this._cannotFind()) {\r\n            return null;\r\n        }\r\n        var findScope = this._decorations.getFindScope();\r\n        var searchRange = FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), findScope);\r\n        // ...(----)...|...\r\n        if (searchRange.getEndPosition().isBefore(after)) {\r\n            after = searchRange.getStartPosition();\r\n        }\r\n        // ...|...(----)...\r\n        if (after.isBefore(searchRange.getStartPosition())) {\r\n            after = searchRange.getStartPosition();\r\n        }\r\n        var lineNumber = after.lineNumber, column = after.column;\r\n        var model = this._editor.getModel();\r\n        var position = new Position(lineNumber, column);\r\n        var nextMatch = model.findNextMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(92 /* wordSeparators */) : null, captureMatches);\r\n        if (forceMove && nextMatch && nextMatch.range.isEmpty() && nextMatch.range.getStartPosition().equals(position)) {\r\n            // Looks like we're stuck at this position, unacceptable!\r\n            position = this._nextSearchPosition(position);\r\n            nextMatch = model.findNextMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(92 /* wordSeparators */) : null, captureMatches);\r\n        }\r\n        if (!nextMatch) {\r\n            // there is precisely one match and selection is on top of it\r\n            return null;\r\n        }\r\n        if (!isRecursed && !searchRange.containsRange(nextMatch.range)) {\r\n            return this._getNextMatch(nextMatch.range.getEndPosition(), captureMatches, forceMove, true);\r\n        }\r\n        return nextMatch;\r\n    };\r\n    FindModelBoundToEditorModel.prototype.moveToNextMatch = function () {\r\n        this._moveToNextMatch(this._editor.getSelection().getEndPosition());\r\n    };\r\n    FindModelBoundToEditorModel.prototype._getReplacePattern = function () {\r\n        if (this._state.isRegex) {\r\n            return parseReplaceString(this._state.replaceString);\r\n        }\r\n        return ReplacePattern.fromStaticValue(this._state.replaceString);\r\n    };\r\n    FindModelBoundToEditorModel.prototype.replace = function () {\r\n        if (!this._hasMatches()) {\r\n            return;\r\n        }\r\n        var replacePattern = this._getReplacePattern();\r\n        var selection = this._editor.getSelection();\r\n        var nextMatch = this._getNextMatch(selection.getStartPosition(), true, false);\r\n        if (nextMatch) {\r\n            if (selection.equalsRange(nextMatch.range)) {\r\n                // selection sits on a find match => replace it!\r\n                var replaceString = replacePattern.buildReplaceString(nextMatch.matches, this._state.preserveCase);\r\n                var command = new ReplaceCommand(selection, replaceString);\r\n                this._executeEditorCommand('replace', command);\r\n                this._decorations.setStartPosition(new Position(selection.startLineNumber, selection.startColumn + replaceString.length));\r\n                this.research(true);\r\n            }\r\n            else {\r\n                this._decorations.setStartPosition(this._editor.getPosition());\r\n                this._setCurrentFindMatch(nextMatch.range);\r\n            }\r\n        }\r\n    };\r\n    FindModelBoundToEditorModel.prototype._findMatches = function (findScope, captureMatches, limitResultCount) {\r\n        var searchRange = FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), findScope);\r\n        return this._editor.getModel().findMatches(this._state.searchString, searchRange, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(92 /* wordSeparators */) : null, captureMatches, limitResultCount);\r\n    };\r\n    FindModelBoundToEditorModel.prototype.replaceAll = function () {\r\n        if (!this._hasMatches()) {\r\n            return;\r\n        }\r\n        var findScope = this._decorations.getFindScope();\r\n        if (findScope === null && this._state.matchesCount >= MATCHES_LIMIT) {\r\n            // Doing a replace on the entire file that is over ${MATCHES_LIMIT} matches\r\n            this._largeReplaceAll();\r\n        }\r\n        else {\r\n            this._regularReplaceAll(findScope);\r\n        }\r\n        this.research(false);\r\n    };\r\n    FindModelBoundToEditorModel.prototype._largeReplaceAll = function () {\r\n        var searchParams = new SearchParams(this._state.searchString, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(92 /* wordSeparators */) : null);\r\n        var searchData = searchParams.parseSearchRequest();\r\n        if (!searchData) {\r\n            return;\r\n        }\r\n        var searchRegex = searchData.regex;\r\n        if (!searchRegex.multiline) {\r\n            var mod = 'mu';\r\n            if (searchRegex.ignoreCase) {\r\n                mod += 'i';\r\n            }\r\n            if (searchRegex.global) {\r\n                mod += 'g';\r\n            }\r\n            searchRegex = new RegExp(searchRegex.source, mod);\r\n        }\r\n        var model = this._editor.getModel();\r\n        var modelText = model.getValue(1 /* LF */);\r\n        var fullModelRange = model.getFullModelRange();\r\n        var replacePattern = this._getReplacePattern();\r\n        var resultText;\r\n        var preserveCase = this._state.preserveCase;\r\n        if (replacePattern.hasReplacementPatterns || preserveCase) {\r\n            resultText = modelText.replace(searchRegex, function () {\r\n                return replacePattern.buildReplaceString(arguments, preserveCase);\r\n            });\r\n        }\r\n        else {\r\n            resultText = modelText.replace(searchRegex, replacePattern.buildReplaceString(null, preserveCase));\r\n        }\r\n        var command = new ReplaceCommandThatPreservesSelection(fullModelRange, resultText, this._editor.getSelection());\r\n        this._executeEditorCommand('replaceAll', command);\r\n    };\r\n    FindModelBoundToEditorModel.prototype._regularReplaceAll = function (findScope) {\r\n        var replacePattern = this._getReplacePattern();\r\n        // Get all the ranges (even more than the highlighted ones)\r\n        var matches = this._findMatches(findScope, replacePattern.hasReplacementPatterns || this._state.preserveCase, 1073741824 /* MAX_SAFE_SMALL_INTEGER */);\r\n        var replaceStrings = [];\r\n        for (var i = 0, len = matches.length; i < len; i++) {\r\n            replaceStrings[i] = replacePattern.buildReplaceString(matches[i].matches, this._state.preserveCase);\r\n        }\r\n        var command = new ReplaceAllCommand(this._editor.getSelection(), matches.map(function (m) { return m.range; }), replaceStrings);\r\n        this._executeEditorCommand('replaceAll', command);\r\n    };\r\n    FindModelBoundToEditorModel.prototype.selectAllMatches = function () {\r\n        if (!this._hasMatches()) {\r\n            return;\r\n        }\r\n        var findScope = this._decorations.getFindScope();\r\n        // Get all the ranges (even more than the highlighted ones)\r\n        var matches = this._findMatches(findScope, false, 1073741824 /* MAX_SAFE_SMALL_INTEGER */);\r\n        var selections = matches.map(function (m) { return new Selection(m.range.startLineNumber, m.range.startColumn, m.range.endLineNumber, m.range.endColumn); });\r\n        // If one of the ranges is the editor selection, then maintain it as primary\r\n        var editorSelection = this._editor.getSelection();\r\n        for (var i = 0, len = selections.length; i < len; i++) {\r\n            var sel = selections[i];\r\n            if (sel.equalsRange(editorSelection)) {\r\n                selections = [editorSelection].concat(selections.slice(0, i)).concat(selections.slice(i + 1));\r\n                break;\r\n            }\r\n        }\r\n        this._editor.setSelections(selections);\r\n    };\r\n    FindModelBoundToEditorModel.prototype._executeEditorCommand = function (source, command) {\r\n        try {\r\n            this._ignoreModelContentChanged = true;\r\n            this._editor.pushUndoStop();\r\n            this._editor.executeCommand(source, command);\r\n            this._editor.pushUndoStop();\r\n        }\r\n        finally {\r\n            this._ignoreModelContentChanged = false;\r\n        }\r\n    };\r\n    return FindModelBoundToEditorModel;\r\n}());\r\nexport { FindModelBoundToEditorModel };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport './checkbox.css';\r\nimport * as DOM from '../../dom.js';\r\nimport { Widget } from '../widget.js';\r\nimport { Color } from '../../../common/color.js';\r\nimport { Emitter } from '../../../common/event.js';\r\nimport * as objects from '../../../common/objects.js';\r\nvar defaultOpts = {\r\n    inputActiveOptionBorder: Color.fromHex('#007ACC00'),\r\n    inputActiveOptionBackground: Color.fromHex('#0E639C50')\r\n};\r\nvar Checkbox = /** @class */ (function (_super) {\r\n    __extends(Checkbox, _super);\r\n    function Checkbox(opts) {\r\n        var _this = _super.call(this) || this;\r\n        _this._onChange = _this._register(new Emitter());\r\n        _this.onChange = _this._onChange.event;\r\n        _this._onKeyDown = _this._register(new Emitter());\r\n        _this.onKeyDown = _this._onKeyDown.event;\r\n        _this._opts = objects.deepClone(opts);\r\n        objects.mixin(_this._opts, defaultOpts, false);\r\n        _this._checked = _this._opts.isChecked;\r\n        _this.domNode = document.createElement('div');\r\n        _this.domNode.title = _this._opts.title;\r\n        _this.domNode.className = 'monaco-custom-checkbox codicon ' + (_this._opts.actionClassName || '') + ' ' + (_this._checked ? 'checked' : 'unchecked');\r\n        _this.domNode.tabIndex = 0;\r\n        _this.domNode.setAttribute('role', 'checkbox');\r\n        _this.domNode.setAttribute('aria-checked', String(_this._checked));\r\n        _this.domNode.setAttribute('aria-label', _this._opts.title);\r\n        _this.applyStyles();\r\n        _this.onclick(_this.domNode, function (ev) {\r\n            _this.checked = !_this._checked;\r\n            _this._onChange.fire(false);\r\n            ev.preventDefault();\r\n        });\r\n        _this.ignoreGesture(_this.domNode);\r\n        _this.onkeydown(_this.domNode, function (keyboardEvent) {\r\n            if (keyboardEvent.keyCode === 10 /* Space */ || keyboardEvent.keyCode === 3 /* Enter */) {\r\n                _this.checked = !_this._checked;\r\n                _this._onChange.fire(true);\r\n                keyboardEvent.preventDefault();\r\n                return;\r\n            }\r\n            _this._onKeyDown.fire(keyboardEvent);\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Checkbox.prototype, \"enabled\", {\r\n        get: function () {\r\n            return this.domNode.getAttribute('aria-disabled') !== 'true';\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Checkbox.prototype.focus = function () {\r\n        this.domNode.focus();\r\n    };\r\n    Object.defineProperty(Checkbox.prototype, \"checked\", {\r\n        get: function () {\r\n            return this._checked;\r\n        },\r\n        set: function (newIsChecked) {\r\n            this._checked = newIsChecked;\r\n            this.domNode.setAttribute('aria-checked', String(this._checked));\r\n            if (this._checked) {\r\n                this.domNode.classList.add('checked');\r\n            }\r\n            else {\r\n                this.domNode.classList.remove('checked');\r\n            }\r\n            this.applyStyles();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Checkbox.prototype.width = function () {\r\n        return 2 /*marginleft*/ + 2 /*border*/ + 2 /*padding*/ + 16 /* icon width */;\r\n    };\r\n    Checkbox.prototype.style = function (styles) {\r\n        if (styles.inputActiveOptionBorder) {\r\n            this._opts.inputActiveOptionBorder = styles.inputActiveOptionBorder;\r\n        }\r\n        if (styles.inputActiveOptionBackground) {\r\n            this._opts.inputActiveOptionBackground = styles.inputActiveOptionBackground;\r\n        }\r\n        this.applyStyles();\r\n    };\r\n    Checkbox.prototype.applyStyles = function () {\r\n        if (this.domNode) {\r\n            this.domNode.style.borderColor = this._checked && this._opts.inputActiveOptionBorder ? this._opts.inputActiveOptionBorder.toString() : 'transparent';\r\n            this.domNode.style.backgroundColor = this._checked && this._opts.inputActiveOptionBackground ? this._opts.inputActiveOptionBackground.toString() : 'transparent';\r\n        }\r\n    };\r\n    Checkbox.prototype.enable = function () {\r\n        this.domNode.tabIndex = 0;\r\n        this.domNode.setAttribute('aria-disabled', String(false));\r\n    };\r\n    Checkbox.prototype.disable = function () {\r\n        DOM.removeTabIndexAndUpdateFocus(this.domNode);\r\n        this.domNode.setAttribute('aria-disabled', String(true));\r\n    };\r\n    return Checkbox;\r\n}(Widget));\r\nexport { Checkbox };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Checkbox } from '../checkbox/checkbox.js';\r\nimport * as nls from '../../../../nls.js';\r\nvar NLS_CASE_SENSITIVE_CHECKBOX_LABEL = nls.localize('caseDescription', \"Match Case\");\r\nvar NLS_WHOLE_WORD_CHECKBOX_LABEL = nls.localize('wordsDescription', \"Match Whole Word\");\r\nvar NLS_REGEX_CHECKBOX_LABEL = nls.localize('regexDescription', \"Use Regular Expression\");\r\nvar CaseSensitiveCheckbox = /** @class */ (function (_super) {\r\n    __extends(CaseSensitiveCheckbox, _super);\r\n    function CaseSensitiveCheckbox(opts) {\r\n        return _super.call(this, {\r\n            actionClassName: 'codicon-case-sensitive',\r\n            title: NLS_CASE_SENSITIVE_CHECKBOX_LABEL + opts.appendTitle,\r\n            isChecked: opts.isChecked,\r\n            inputActiveOptionBorder: opts.inputActiveOptionBorder,\r\n            inputActiveOptionBackground: opts.inputActiveOptionBackground\r\n        }) || this;\r\n    }\r\n    return CaseSensitiveCheckbox;\r\n}(Checkbox));\r\nexport { CaseSensitiveCheckbox };\r\nvar WholeWordsCheckbox = /** @class */ (function (_super) {\r\n    __extends(WholeWordsCheckbox, _super);\r\n    function WholeWordsCheckbox(opts) {\r\n        return _super.call(this, {\r\n            actionClassName: 'codicon-whole-word',\r\n            title: NLS_WHOLE_WORD_CHECKBOX_LABEL + opts.appendTitle,\r\n            isChecked: opts.isChecked,\r\n            inputActiveOptionBorder: opts.inputActiveOptionBorder,\r\n            inputActiveOptionBackground: opts.inputActiveOptionBackground\r\n        }) || this;\r\n    }\r\n    return WholeWordsCheckbox;\r\n}(Checkbox));\r\nexport { WholeWordsCheckbox };\r\nvar RegexCheckbox = /** @class */ (function (_super) {\r\n    __extends(RegexCheckbox, _super);\r\n    function RegexCheckbox(opts) {\r\n        return _super.call(this, {\r\n            actionClassName: 'codicon-regex',\r\n            title: NLS_REGEX_CHECKBOX_LABEL + opts.appendTitle,\r\n            isChecked: opts.isChecked,\r\n            inputActiveOptionBorder: opts.inputActiveOptionBorder,\r\n            inputActiveOptionBackground: opts.inputActiveOptionBackground\r\n        }) || this;\r\n    }\r\n    return RegexCheckbox;\r\n}(Checkbox));\r\nexport { RegexCheckbox };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { CaseSensitiveCheckbox, RegexCheckbox, WholeWordsCheckbox } from '../../../base/browser/ui/findinput/findInputCheckboxes.js';\r\nimport { Widget } from '../../../base/browser/ui/widget.js';\r\nimport { RunOnceScheduler } from '../../../base/common/async.js';\r\nimport { FIND_IDS } from './findModel.js';\r\nimport { contrastBorder, editorWidgetBackground, inputActiveOptionBorder, inputActiveOptionBackground, widgetShadow, editorWidgetForeground } from '../../../platform/theme/common/colorRegistry.js';\r\nimport { registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\r\nvar FindOptionsWidget = /** @class */ (function (_super) {\r\n    __extends(FindOptionsWidget, _super);\r\n    function FindOptionsWidget(editor, state, keybindingService, themeService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._hideSoon = _this._register(new RunOnceScheduler(function () { return _this._hide(); }, 2000));\r\n        _this._isVisible = false;\r\n        _this._editor = editor;\r\n        _this._state = state;\r\n        _this._keybindingService = keybindingService;\r\n        _this._domNode = document.createElement('div');\r\n        _this._domNode.className = 'findOptionsWidget';\r\n        _this._domNode.style.display = 'none';\r\n        _this._domNode.style.top = '10px';\r\n        _this._domNode.setAttribute('role', 'presentation');\r\n        _this._domNode.setAttribute('aria-hidden', 'true');\r\n        var inputActiveOptionBorderColor = themeService.getTheme().getColor(inputActiveOptionBorder);\r\n        var inputActiveOptionBackgroundColor = themeService.getTheme().getColor(inputActiveOptionBackground);\r\n        _this.caseSensitive = _this._register(new CaseSensitiveCheckbox({\r\n            appendTitle: _this._keybindingLabelFor(FIND_IDS.ToggleCaseSensitiveCommand),\r\n            isChecked: _this._state.matchCase,\r\n            inputActiveOptionBorder: inputActiveOptionBorderColor,\r\n            inputActiveOptionBackground: inputActiveOptionBackgroundColor\r\n        }));\r\n        _this._domNode.appendChild(_this.caseSensitive.domNode);\r\n        _this._register(_this.caseSensitive.onChange(function () {\r\n            _this._state.change({\r\n                matchCase: _this.caseSensitive.checked\r\n            }, false);\r\n        }));\r\n        _this.wholeWords = _this._register(new WholeWordsCheckbox({\r\n            appendTitle: _this._keybindingLabelFor(FIND_IDS.ToggleWholeWordCommand),\r\n            isChecked: _this._state.wholeWord,\r\n            inputActiveOptionBorder: inputActiveOptionBorderColor,\r\n            inputActiveOptionBackground: inputActiveOptionBackgroundColor\r\n        }));\r\n        _this._domNode.appendChild(_this.wholeWords.domNode);\r\n        _this._register(_this.wholeWords.onChange(function () {\r\n            _this._state.change({\r\n                wholeWord: _this.wholeWords.checked\r\n            }, false);\r\n        }));\r\n        _this.regex = _this._register(new RegexCheckbox({\r\n            appendTitle: _this._keybindingLabelFor(FIND_IDS.ToggleRegexCommand),\r\n            isChecked: _this._state.isRegex,\r\n            inputActiveOptionBorder: inputActiveOptionBorderColor,\r\n            inputActiveOptionBackground: inputActiveOptionBackgroundColor\r\n        }));\r\n        _this._domNode.appendChild(_this.regex.domNode);\r\n        _this._register(_this.regex.onChange(function () {\r\n            _this._state.change({\r\n                isRegex: _this.regex.checked\r\n            }, false);\r\n        }));\r\n        _this._editor.addOverlayWidget(_this);\r\n        _this._register(_this._state.onFindReplaceStateChange(function (e) {\r\n            var somethingChanged = false;\r\n            if (e.isRegex) {\r\n                _this.regex.checked = _this._state.isRegex;\r\n                somethingChanged = true;\r\n            }\r\n            if (e.wholeWord) {\r\n                _this.wholeWords.checked = _this._state.wholeWord;\r\n                somethingChanged = true;\r\n            }\r\n            if (e.matchCase) {\r\n                _this.caseSensitive.checked = _this._state.matchCase;\r\n                somethingChanged = true;\r\n            }\r\n            if (!_this._state.isRevealed && somethingChanged) {\r\n                _this._revealTemporarily();\r\n            }\r\n        }));\r\n        _this._register(dom.addDisposableNonBubblingMouseOutListener(_this._domNode, function (e) { return _this._onMouseOut(); }));\r\n        _this._register(dom.addDisposableListener(_this._domNode, 'mouseover', function (e) { return _this._onMouseOver(); }));\r\n        _this._applyTheme(themeService.getTheme());\r\n        _this._register(themeService.onThemeChange(_this._applyTheme.bind(_this)));\r\n        return _this;\r\n    }\r\n    FindOptionsWidget.prototype._keybindingLabelFor = function (actionId) {\r\n        var kb = this._keybindingService.lookupKeybinding(actionId);\r\n        if (!kb) {\r\n            return '';\r\n        }\r\n        return \" (\" + kb.getLabel() + \")\";\r\n    };\r\n    FindOptionsWidget.prototype.dispose = function () {\r\n        this._editor.removeOverlayWidget(this);\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    // ----- IOverlayWidget API\r\n    FindOptionsWidget.prototype.getId = function () {\r\n        return FindOptionsWidget.ID;\r\n    };\r\n    FindOptionsWidget.prototype.getDomNode = function () {\r\n        return this._domNode;\r\n    };\r\n    FindOptionsWidget.prototype.getPosition = function () {\r\n        return {\r\n            preference: 0 /* TOP_RIGHT_CORNER */\r\n        };\r\n    };\r\n    FindOptionsWidget.prototype.highlightFindOptions = function () {\r\n        this._revealTemporarily();\r\n    };\r\n    FindOptionsWidget.prototype._revealTemporarily = function () {\r\n        this._show();\r\n        this._hideSoon.schedule();\r\n    };\r\n    FindOptionsWidget.prototype._onMouseOut = function () {\r\n        this._hideSoon.schedule();\r\n    };\r\n    FindOptionsWidget.prototype._onMouseOver = function () {\r\n        this._hideSoon.cancel();\r\n    };\r\n    FindOptionsWidget.prototype._show = function () {\r\n        if (this._isVisible) {\r\n            return;\r\n        }\r\n        this._isVisible = true;\r\n        this._domNode.style.display = 'block';\r\n    };\r\n    FindOptionsWidget.prototype._hide = function () {\r\n        if (!this._isVisible) {\r\n            return;\r\n        }\r\n        this._isVisible = false;\r\n        this._domNode.style.display = 'none';\r\n    };\r\n    FindOptionsWidget.prototype._applyTheme = function (theme) {\r\n        var inputStyles = {\r\n            inputActiveOptionBorder: theme.getColor(inputActiveOptionBorder),\r\n            inputActiveOptionBackground: theme.getColor(inputActiveOptionBackground)\r\n        };\r\n        this.caseSensitive.style(inputStyles);\r\n        this.wholeWords.style(inputStyles);\r\n        this.regex.style(inputStyles);\r\n    };\r\n    FindOptionsWidget.ID = 'editor.contrib.findOptionsWidget';\r\n    return FindOptionsWidget;\r\n}(Widget));\r\nexport { FindOptionsWidget };\r\nregisterThemingParticipant(function (theme, collector) {\r\n    var widgetBackground = theme.getColor(editorWidgetBackground);\r\n    if (widgetBackground) {\r\n        collector.addRule(\".monaco-editor .findOptionsWidget { background-color: \" + widgetBackground + \"; }\");\r\n    }\r\n    var widgetForeground = theme.getColor(editorWidgetForeground);\r\n    if (widgetForeground) {\r\n        collector.addRule(\".monaco-editor .findOptionsWidget { color: \" + widgetForeground + \"; }\");\r\n    }\r\n    var widgetShadowColor = theme.getColor(widgetShadow);\r\n    if (widgetShadowColor) {\r\n        collector.addRule(\".monaco-editor .findOptionsWidget { box-shadow: 0 2px 8px \" + widgetShadowColor + \"; }\");\r\n    }\r\n    var hcBorder = theme.getColor(contrastBorder);\r\n    if (hcBorder) {\r\n        collector.addRule(\".monaco-editor .findOptionsWidget { border: 2px solid \" + hcBorder + \"; }\");\r\n    }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport { Range } from '../../common/core/range.js';\r\nfunction effectiveOptionValue(override, value) {\r\n    if (override === 1 /* True */) {\r\n        return true;\r\n    }\r\n    if (override === 2 /* False */) {\r\n        return false;\r\n    }\r\n    return value;\r\n}\r\nvar FindReplaceState = /** @class */ (function (_super) {\r\n    __extends(FindReplaceState, _super);\r\n    function FindReplaceState() {\r\n        var _this = _super.call(this) || this;\r\n        _this._onFindReplaceStateChange = _this._register(new Emitter());\r\n        _this.onFindReplaceStateChange = _this._onFindReplaceStateChange.event;\r\n        _this._searchString = '';\r\n        _this._replaceString = '';\r\n        _this._isRevealed = false;\r\n        _this._isReplaceRevealed = false;\r\n        _this._isRegex = false;\r\n        _this._isRegexOverride = 0 /* NotSet */;\r\n        _this._wholeWord = false;\r\n        _this._wholeWordOverride = 0 /* NotSet */;\r\n        _this._matchCase = false;\r\n        _this._matchCaseOverride = 0 /* NotSet */;\r\n        _this._preserveCase = false;\r\n        _this._preserveCaseOverride = 0 /* NotSet */;\r\n        _this._searchScope = null;\r\n        _this._matchesPosition = 0;\r\n        _this._matchesCount = 0;\r\n        _this._currentMatch = null;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(FindReplaceState.prototype, \"searchString\", {\r\n        get: function () { return this._searchString; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FindReplaceState.prototype, \"replaceString\", {\r\n        get: function () { return this._replaceString; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FindReplaceState.prototype, \"isRevealed\", {\r\n        get: function () { return this._isRevealed; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FindReplaceState.prototype, \"isReplaceRevealed\", {\r\n        get: function () { return this._isReplaceRevealed; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FindReplaceState.prototype, \"isRegex\", {\r\n        get: function () { return effectiveOptionValue(this._isRegexOverride, this._isRegex); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FindReplaceState.prototype, \"wholeWord\", {\r\n        get: function () { return effectiveOptionValue(this._wholeWordOverride, this._wholeWord); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FindReplaceState.prototype, \"matchCase\", {\r\n        get: function () { return effectiveOptionValue(this._matchCaseOverride, this._matchCase); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FindReplaceState.prototype, \"preserveCase\", {\r\n        get: function () { return effectiveOptionValue(this._preserveCaseOverride, this._preserveCase); },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FindReplaceState.prototype, \"actualIsRegex\", {\r\n        get: function () { return this._isRegex; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FindReplaceState.prototype, \"actualWholeWord\", {\r\n        get: function () { return this._wholeWord; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FindReplaceState.prototype, \"actualMatchCase\", {\r\n        get: function () { return this._matchCase; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FindReplaceState.prototype, \"actualPreserveCase\", {\r\n        get: function () { return this._preserveCase; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FindReplaceState.prototype, \"searchScope\", {\r\n        get: function () { return this._searchScope; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FindReplaceState.prototype, \"matchesPosition\", {\r\n        get: function () { return this._matchesPosition; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FindReplaceState.prototype, \"matchesCount\", {\r\n        get: function () { return this._matchesCount; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FindReplaceState.prototype, \"currentMatch\", {\r\n        get: function () { return this._currentMatch; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    FindReplaceState.prototype.changeMatchInfo = function (matchesPosition, matchesCount, currentMatch) {\r\n        var changeEvent = {\r\n            moveCursor: false,\r\n            updateHistory: false,\r\n            searchString: false,\r\n            replaceString: false,\r\n            isRevealed: false,\r\n            isReplaceRevealed: false,\r\n            isRegex: false,\r\n            wholeWord: false,\r\n            matchCase: false,\r\n            preserveCase: false,\r\n            searchScope: false,\r\n            matchesPosition: false,\r\n            matchesCount: false,\r\n            currentMatch: false\r\n        };\r\n        var somethingChanged = false;\r\n        if (matchesCount === 0) {\r\n            matchesPosition = 0;\r\n        }\r\n        if (matchesPosition > matchesCount) {\r\n            matchesPosition = matchesCount;\r\n        }\r\n        if (this._matchesPosition !== matchesPosition) {\r\n            this._matchesPosition = matchesPosition;\r\n            changeEvent.matchesPosition = true;\r\n            somethingChanged = true;\r\n        }\r\n        if (this._matchesCount !== matchesCount) {\r\n            this._matchesCount = matchesCount;\r\n            changeEvent.matchesCount = true;\r\n            somethingChanged = true;\r\n        }\r\n        if (typeof currentMatch !== 'undefined') {\r\n            if (!Range.equalsRange(this._currentMatch, currentMatch)) {\r\n                this._currentMatch = currentMatch;\r\n                changeEvent.currentMatch = true;\r\n                somethingChanged = true;\r\n            }\r\n        }\r\n        if (somethingChanged) {\r\n            this._onFindReplaceStateChange.fire(changeEvent);\r\n        }\r\n    };\r\n    FindReplaceState.prototype.change = function (newState, moveCursor, updateHistory) {\r\n        if (updateHistory === void 0) { updateHistory = true; }\r\n        var changeEvent = {\r\n            moveCursor: moveCursor,\r\n            updateHistory: updateHistory,\r\n            searchString: false,\r\n            replaceString: false,\r\n            isRevealed: false,\r\n            isReplaceRevealed: false,\r\n            isRegex: false,\r\n            wholeWord: false,\r\n            matchCase: false,\r\n            preserveCase: false,\r\n            searchScope: false,\r\n            matchesPosition: false,\r\n            matchesCount: false,\r\n            currentMatch: false\r\n        };\r\n        var somethingChanged = false;\r\n        var oldEffectiveIsRegex = this.isRegex;\r\n        var oldEffectiveWholeWords = this.wholeWord;\r\n        var oldEffectiveMatchCase = this.matchCase;\r\n        var oldEffectivePreserveCase = this.preserveCase;\r\n        if (typeof newState.searchString !== 'undefined') {\r\n            if (this._searchString !== newState.searchString) {\r\n                this._searchString = newState.searchString;\r\n                changeEvent.searchString = true;\r\n                somethingChanged = true;\r\n            }\r\n        }\r\n        if (typeof newState.replaceString !== 'undefined') {\r\n            if (this._replaceString !== newState.replaceString) {\r\n                this._replaceString = newState.replaceString;\r\n                changeEvent.replaceString = true;\r\n                somethingChanged = true;\r\n            }\r\n        }\r\n        if (typeof newState.isRevealed !== 'undefined') {\r\n            if (this._isRevealed !== newState.isRevealed) {\r\n                this._isRevealed = newState.isRevealed;\r\n                changeEvent.isRevealed = true;\r\n                somethingChanged = true;\r\n            }\r\n        }\r\n        if (typeof newState.isReplaceRevealed !== 'undefined') {\r\n            if (this._isReplaceRevealed !== newState.isReplaceRevealed) {\r\n                this._isReplaceRevealed = newState.isReplaceRevealed;\r\n                changeEvent.isReplaceRevealed = true;\r\n                somethingChanged = true;\r\n            }\r\n        }\r\n        if (typeof newState.isRegex !== 'undefined') {\r\n            this._isRegex = newState.isRegex;\r\n        }\r\n        if (typeof newState.wholeWord !== 'undefined') {\r\n            this._wholeWord = newState.wholeWord;\r\n        }\r\n        if (typeof newState.matchCase !== 'undefined') {\r\n            this._matchCase = newState.matchCase;\r\n        }\r\n        if (typeof newState.preserveCase !== 'undefined') {\r\n            this._preserveCase = newState.preserveCase;\r\n        }\r\n        if (typeof newState.searchScope !== 'undefined') {\r\n            if (!Range.equalsRange(this._searchScope, newState.searchScope)) {\r\n                this._searchScope = newState.searchScope;\r\n                changeEvent.searchScope = true;\r\n                somethingChanged = true;\r\n            }\r\n        }\r\n        // Overrides get set when they explicitly come in and get reset anytime something else changes\r\n        this._isRegexOverride = (typeof newState.isRegexOverride !== 'undefined' ? newState.isRegexOverride : 0 /* NotSet */);\r\n        this._wholeWordOverride = (typeof newState.wholeWordOverride !== 'undefined' ? newState.wholeWordOverride : 0 /* NotSet */);\r\n        this._matchCaseOverride = (typeof newState.matchCaseOverride !== 'undefined' ? newState.matchCaseOverride : 0 /* NotSet */);\r\n        this._preserveCaseOverride = (typeof newState.preserveCaseOverride !== 'undefined' ? newState.preserveCaseOverride : 0 /* NotSet */);\r\n        if (oldEffectiveIsRegex !== this.isRegex) {\r\n            somethingChanged = true;\r\n            changeEvent.isRegex = true;\r\n        }\r\n        if (oldEffectiveWholeWords !== this.wholeWord) {\r\n            somethingChanged = true;\r\n            changeEvent.wholeWord = true;\r\n        }\r\n        if (oldEffectiveMatchCase !== this.matchCase) {\r\n            somethingChanged = true;\r\n            changeEvent.matchCase = true;\r\n        }\r\n        if (oldEffectivePreserveCase !== this.preserveCase) {\r\n            somethingChanged = true;\r\n            changeEvent.preserveCase = true;\r\n        }\r\n        if (somethingChanged) {\r\n            this._onFindReplaceStateChange.fire(changeEvent);\r\n        }\r\n    };\r\n    return FindReplaceState;\r\n}(Disposable));\r\nexport { FindReplaceState };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport * as DOM from './dom.js';\r\nexport function renderText(text, options) {\r\n    if (options === void 0) { options = {}; }\r\n    var element = createElement(options);\r\n    element.textContent = text;\r\n    return element;\r\n}\r\nexport function renderFormattedText(formattedText, options) {\r\n    if (options === void 0) { options = {}; }\r\n    var element = createElement(options);\r\n    _renderFormattedText(element, parseFormattedText(formattedText), options.actionHandler);\r\n    return element;\r\n}\r\nexport function createElement(options) {\r\n    var tagName = options.inline ? 'span' : 'div';\r\n    var element = document.createElement(tagName);\r\n    if (options.className) {\r\n        element.className = options.className;\r\n    }\r\n    return element;\r\n}\r\nvar StringStream = /** @class */ (function () {\r\n    function StringStream(source) {\r\n        this.source = source;\r\n        this.index = 0;\r\n    }\r\n    StringStream.prototype.eos = function () {\r\n        return this.index >= this.source.length;\r\n    };\r\n    StringStream.prototype.next = function () {\r\n        var next = this.peek();\r\n        this.advance();\r\n        return next;\r\n    };\r\n    StringStream.prototype.peek = function () {\r\n        return this.source[this.index];\r\n    };\r\n    StringStream.prototype.advance = function () {\r\n        this.index++;\r\n    };\r\n    return StringStream;\r\n}());\r\nfunction _renderFormattedText(element, treeNode, actionHandler) {\r\n    var child;\r\n    if (treeNode.type === 2 /* Text */) {\r\n        child = document.createTextNode(treeNode.content || '');\r\n    }\r\n    else if (treeNode.type === 3 /* Bold */) {\r\n        child = document.createElement('b');\r\n    }\r\n    else if (treeNode.type === 4 /* Italics */) {\r\n        child = document.createElement('i');\r\n    }\r\n    else if (treeNode.type === 5 /* Action */ && actionHandler) {\r\n        var a = document.createElement('a');\r\n        a.href = '#';\r\n        actionHandler.disposeables.add(DOM.addStandardDisposableListener(a, 'click', function (event) {\r\n            actionHandler.callback(String(treeNode.index), event);\r\n        }));\r\n        child = a;\r\n    }\r\n    else if (treeNode.type === 7 /* NewLine */) {\r\n        child = document.createElement('br');\r\n    }\r\n    else if (treeNode.type === 1 /* Root */) {\r\n        child = element;\r\n    }\r\n    if (child && element !== child) {\r\n        element.appendChild(child);\r\n    }\r\n    if (child && Array.isArray(treeNode.children)) {\r\n        treeNode.children.forEach(function (nodeChild) {\r\n            _renderFormattedText(child, nodeChild, actionHandler);\r\n        });\r\n    }\r\n}\r\nfunction parseFormattedText(content) {\r\n    var root = {\r\n        type: 1 /* Root */,\r\n        children: []\r\n    };\r\n    var actionViewItemIndex = 0;\r\n    var current = root;\r\n    var stack = [];\r\n    var stream = new StringStream(content);\r\n    while (!stream.eos()) {\r\n        var next = stream.next();\r\n        var isEscapedFormatType = (next === '\\\\' && formatTagType(stream.peek()) !== 0 /* Invalid */);\r\n        if (isEscapedFormatType) {\r\n            next = stream.next(); // unread the backslash if it escapes a format tag type\r\n        }\r\n        if (!isEscapedFormatType && isFormatTag(next) && next === stream.peek()) {\r\n            stream.advance();\r\n            if (current.type === 2 /* Text */) {\r\n                current = stack.pop();\r\n            }\r\n            var type = formatTagType(next);\r\n            if (current.type === type || (current.type === 5 /* Action */ && type === 6 /* ActionClose */)) {\r\n                current = stack.pop();\r\n            }\r\n            else {\r\n                var newCurrent = {\r\n                    type: type,\r\n                    children: []\r\n                };\r\n                if (type === 5 /* Action */) {\r\n                    newCurrent.index = actionViewItemIndex;\r\n                    actionViewItemIndex++;\r\n                }\r\n                current.children.push(newCurrent);\r\n                stack.push(current);\r\n                current = newCurrent;\r\n            }\r\n        }\r\n        else if (next === '\\n') {\r\n            if (current.type === 2 /* Text */) {\r\n                current = stack.pop();\r\n            }\r\n            current.children.push({\r\n                type: 7 /* NewLine */\r\n            });\r\n        }\r\n        else {\r\n            if (current.type !== 2 /* Text */) {\r\n                var textCurrent = {\r\n                    type: 2 /* Text */,\r\n                    content: next\r\n                };\r\n                current.children.push(textCurrent);\r\n                stack.push(current);\r\n                current = textCurrent;\r\n            }\r\n            else {\r\n                current.content += next;\r\n            }\r\n        }\r\n    }\r\n    if (current.type === 2 /* Text */) {\r\n        current = stack.pop();\r\n    }\r\n    if (stack.length) {\r\n        // incorrectly formatted string literal\r\n    }\r\n    return root;\r\n}\r\nfunction isFormatTag(char) {\r\n    return formatTagType(char) !== 0 /* Invalid */;\r\n}\r\nfunction formatTagType(char) {\r\n    switch (char) {\r\n        case '*':\r\n            return 3 /* Bold */;\r\n        case '_':\r\n            return 4 /* Italics */;\r\n        case '[':\r\n            return 5 /* Action */;\r\n        case ']':\r\n            return 6 /* ActionClose */;\r\n        default:\r\n            return 0 /* Invalid */;\r\n    }\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { ArrayNavigator } from './iterator.js';\r\nvar HistoryNavigator = /** @class */ (function () {\r\n    function HistoryNavigator(history, limit) {\r\n        if (history === void 0) { history = []; }\r\n        if (limit === void 0) { limit = 10; }\r\n        this._initialize(history);\r\n        this._limit = limit;\r\n        this._onChange();\r\n    }\r\n    HistoryNavigator.prototype.add = function (t) {\r\n        this._history.delete(t);\r\n        this._history.add(t);\r\n        this._onChange();\r\n    };\r\n    HistoryNavigator.prototype.next = function () {\r\n        return this._navigator.next();\r\n    };\r\n    HistoryNavigator.prototype.previous = function () {\r\n        return this._navigator.previous();\r\n    };\r\n    HistoryNavigator.prototype.current = function () {\r\n        return this._navigator.current();\r\n    };\r\n    HistoryNavigator.prototype.parent = function () {\r\n        return null;\r\n    };\r\n    HistoryNavigator.prototype.first = function () {\r\n        return this._navigator.first();\r\n    };\r\n    HistoryNavigator.prototype.last = function () {\r\n        return this._navigator.last();\r\n    };\r\n    HistoryNavigator.prototype.has = function (t) {\r\n        return this._history.has(t);\r\n    };\r\n    HistoryNavigator.prototype._onChange = function () {\r\n        this._reduceToLimit();\r\n        var elements = this._elements;\r\n        this._navigator = new ArrayNavigator(elements, 0, elements.length, elements.length);\r\n    };\r\n    HistoryNavigator.prototype._reduceToLimit = function () {\r\n        var data = this._elements;\r\n        if (data.length > this._limit) {\r\n            this._initialize(data.slice(data.length - this._limit));\r\n        }\r\n    };\r\n    HistoryNavigator.prototype._initialize = function (history) {\r\n        this._history = new Set();\r\n        for (var _i = 0, history_1 = history; _i < history_1.length; _i++) {\r\n            var entry = history_1[_i];\r\n            this._history.add(entry);\r\n        }\r\n    };\r\n    Object.defineProperty(HistoryNavigator.prototype, \"_elements\", {\r\n        get: function () {\r\n            var elements = [];\r\n            this._history.forEach(function (e) { return elements.push(e); });\r\n            return elements;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return HistoryNavigator;\r\n}());\r\nexport { HistoryNavigator };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport './inputBox.css';\r\nimport * as nls from '../../../../nls.js';\r\nimport * as Bal from '../../browser.js';\r\nimport * as dom from '../../dom.js';\r\nimport { renderFormattedText, renderText } from '../../formattedTextRenderer.js';\r\nimport * as aria from '../aria/aria.js';\r\nimport { ActionBar } from '../actionbar/actionbar.js';\r\nimport { Event, Emitter } from '../../../common/event.js';\r\nimport { Widget } from '../widget.js';\r\nimport { Color } from '../../../common/color.js';\r\nimport { mixin } from '../../../common/objects.js';\r\nimport { HistoryNavigator } from '../../../common/history.js';\r\nimport { ScrollableElement } from '../scrollbar/scrollableElement.js';\r\nimport { domEvent } from '../../event.js';\r\nvar $ = dom.$;\r\nvar defaultOpts = {\r\n    inputBackground: Color.fromHex('#3C3C3C'),\r\n    inputForeground: Color.fromHex('#CCCCCC'),\r\n    inputValidationInfoBorder: Color.fromHex('#55AAFF'),\r\n    inputValidationInfoBackground: Color.fromHex('#063B49'),\r\n    inputValidationWarningBorder: Color.fromHex('#B89500'),\r\n    inputValidationWarningBackground: Color.fromHex('#352A05'),\r\n    inputValidationErrorBorder: Color.fromHex('#BE1100'),\r\n    inputValidationErrorBackground: Color.fromHex('#5A1D1D')\r\n};\r\nvar InputBox = /** @class */ (function (_super) {\r\n    __extends(InputBox, _super);\r\n    function InputBox(container, contextViewProvider, options) {\r\n        var _this = _super.call(this) || this;\r\n        _this.state = 'idle';\r\n        _this.maxHeight = Number.POSITIVE_INFINITY;\r\n        _this._onDidChange = _this._register(new Emitter());\r\n        _this.onDidChange = _this._onDidChange.event;\r\n        _this._onDidHeightChange = _this._register(new Emitter());\r\n        _this.onDidHeightChange = _this._onDidHeightChange.event;\r\n        _this.contextViewProvider = contextViewProvider;\r\n        _this.options = options || Object.create(null);\r\n        mixin(_this.options, defaultOpts, false);\r\n        _this.message = null;\r\n        _this.placeholder = _this.options.placeholder || '';\r\n        _this.ariaLabel = _this.options.ariaLabel || '';\r\n        _this.inputBackground = _this.options.inputBackground;\r\n        _this.inputForeground = _this.options.inputForeground;\r\n        _this.inputBorder = _this.options.inputBorder;\r\n        _this.inputValidationInfoBorder = _this.options.inputValidationInfoBorder;\r\n        _this.inputValidationInfoBackground = _this.options.inputValidationInfoBackground;\r\n        _this.inputValidationInfoForeground = _this.options.inputValidationInfoForeground;\r\n        _this.inputValidationWarningBorder = _this.options.inputValidationWarningBorder;\r\n        _this.inputValidationWarningBackground = _this.options.inputValidationWarningBackground;\r\n        _this.inputValidationWarningForeground = _this.options.inputValidationWarningForeground;\r\n        _this.inputValidationErrorBorder = _this.options.inputValidationErrorBorder;\r\n        _this.inputValidationErrorBackground = _this.options.inputValidationErrorBackground;\r\n        _this.inputValidationErrorForeground = _this.options.inputValidationErrorForeground;\r\n        if (_this.options.validationOptions) {\r\n            _this.validation = _this.options.validationOptions.validation;\r\n        }\r\n        _this.element = dom.append(container, $('.monaco-inputbox.idle'));\r\n        var tagName = _this.options.flexibleHeight ? 'textarea' : 'input';\r\n        var wrapper = dom.append(_this.element, $('.wrapper'));\r\n        _this.input = dom.append(wrapper, $(tagName + '.input.empty'));\r\n        _this.input.setAttribute('autocorrect', 'off');\r\n        _this.input.setAttribute('autocapitalize', 'off');\r\n        _this.input.setAttribute('spellcheck', 'false');\r\n        _this.onfocus(_this.input, function () { return dom.addClass(_this.element, 'synthetic-focus'); });\r\n        _this.onblur(_this.input, function () { return dom.removeClass(_this.element, 'synthetic-focus'); });\r\n        if (_this.options.flexibleHeight) {\r\n            _this.maxHeight = typeof _this.options.flexibleMaxHeight === 'number' ? _this.options.flexibleMaxHeight : Number.POSITIVE_INFINITY;\r\n            _this.mirror = dom.append(wrapper, $('div.mirror'));\r\n            _this.mirror.innerHTML = '&#160;';\r\n            _this.scrollableElement = new ScrollableElement(_this.element, { vertical: 1 /* Auto */ });\r\n            if (_this.options.flexibleWidth) {\r\n                _this.input.setAttribute('wrap', 'off');\r\n                _this.mirror.style.whiteSpace = 'pre';\r\n                _this.mirror.style.wordWrap = 'initial';\r\n            }\r\n            dom.append(container, _this.scrollableElement.getDomNode());\r\n            _this._register(_this.scrollableElement);\r\n            // from ScrollableElement to DOM\r\n            _this._register(_this.scrollableElement.onScroll(function (e) { return _this.input.scrollTop = e.scrollTop; }));\r\n            var onSelectionChange = Event.filter(domEvent(document, 'selectionchange'), function () {\r\n                var _a;\r\n                var selection = document.getSelection();\r\n                return ((_a = selection) === null || _a === void 0 ? void 0 : _a.anchorNode) === wrapper;\r\n            });\r\n            // from DOM to ScrollableElement\r\n            _this._register(onSelectionChange(_this.updateScrollDimensions, _this));\r\n            _this._register(_this.onDidHeightChange(_this.updateScrollDimensions, _this));\r\n        }\r\n        else {\r\n            _this.input.type = _this.options.type || 'text';\r\n            _this.input.setAttribute('wrap', 'off');\r\n        }\r\n        if (_this.ariaLabel) {\r\n            _this.input.setAttribute('aria-label', _this.ariaLabel);\r\n        }\r\n        if (_this.placeholder) {\r\n            _this.setPlaceHolder(_this.placeholder);\r\n        }\r\n        _this.oninput(_this.input, function () { return _this.onValueChange(); });\r\n        _this.onblur(_this.input, function () { return _this.onBlur(); });\r\n        _this.onfocus(_this.input, function () { return _this.onFocus(); });\r\n        // Add placeholder shim for IE because IE decides to hide the placeholder on focus (we dont want that!)\r\n        if (_this.placeholder && Bal.isIE) {\r\n            _this.onclick(_this.input, function (e) {\r\n                dom.EventHelper.stop(e, true);\r\n                _this.input.focus();\r\n            });\r\n        }\r\n        _this.ignoreGesture(_this.input);\r\n        setTimeout(function () { return _this.updateMirror(); }, 0);\r\n        // Support actions\r\n        if (_this.options.actions) {\r\n            _this.actionbar = _this._register(new ActionBar(_this.element));\r\n            _this.actionbar.push(_this.options.actions, { icon: true, label: false });\r\n        }\r\n        _this.applyStyles();\r\n        return _this;\r\n    }\r\n    InputBox.prototype.onBlur = function () {\r\n        this._hideMessage();\r\n    };\r\n    InputBox.prototype.onFocus = function () {\r\n        this._showMessage();\r\n    };\r\n    InputBox.prototype.setPlaceHolder = function (placeHolder) {\r\n        this.placeholder = placeHolder;\r\n        this.input.setAttribute('placeholder', placeHolder);\r\n        this.input.title = placeHolder;\r\n    };\r\n    InputBox.prototype.setAriaLabel = function (label) {\r\n        this.ariaLabel = label;\r\n        if (label) {\r\n            this.input.setAttribute('aria-label', this.ariaLabel);\r\n        }\r\n        else {\r\n            this.input.removeAttribute('aria-label');\r\n        }\r\n    };\r\n    Object.defineProperty(InputBox.prototype, \"inputElement\", {\r\n        get: function () {\r\n            return this.input;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(InputBox.prototype, \"value\", {\r\n        get: function () {\r\n            return this.input.value;\r\n        },\r\n        set: function (newValue) {\r\n            if (this.input.value !== newValue) {\r\n                this.input.value = newValue;\r\n                this.onValueChange();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(InputBox.prototype, \"height\", {\r\n        get: function () {\r\n            return typeof this.cachedHeight === 'number' ? this.cachedHeight : dom.getTotalHeight(this.element);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    InputBox.prototype.focus = function () {\r\n        this.input.focus();\r\n    };\r\n    InputBox.prototype.blur = function () {\r\n        this.input.blur();\r\n    };\r\n    InputBox.prototype.hasFocus = function () {\r\n        return document.activeElement === this.input;\r\n    };\r\n    InputBox.prototype.select = function (range) {\r\n        if (range === void 0) { range = null; }\r\n        this.input.select();\r\n        if (range) {\r\n            this.input.setSelectionRange(range.start, range.end);\r\n        }\r\n    };\r\n    InputBox.prototype.enable = function () {\r\n        this.input.removeAttribute('disabled');\r\n    };\r\n    InputBox.prototype.disable = function () {\r\n        this.blur();\r\n        this.input.disabled = true;\r\n        this._hideMessage();\r\n    };\r\n    Object.defineProperty(InputBox.prototype, \"width\", {\r\n        get: function () {\r\n            return dom.getTotalWidth(this.input);\r\n        },\r\n        set: function (width) {\r\n            if (this.options.flexibleHeight && this.options.flexibleWidth) {\r\n                // textarea with horizontal scrolling\r\n                var horizontalPadding = 0;\r\n                if (this.mirror) {\r\n                    var paddingLeft = parseFloat(this.mirror.style.paddingLeft || '') || 0;\r\n                    var paddingRight = parseFloat(this.mirror.style.paddingRight || '') || 0;\r\n                    horizontalPadding = paddingLeft + paddingRight;\r\n                }\r\n                this.input.style.width = (width - horizontalPadding) + 'px';\r\n            }\r\n            else {\r\n                this.input.style.width = width + 'px';\r\n            }\r\n            if (this.mirror) {\r\n                this.mirror.style.width = width + 'px';\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(InputBox.prototype, \"paddingRight\", {\r\n        set: function (paddingRight) {\r\n            if (this.options.flexibleHeight && this.options.flexibleWidth) {\r\n                this.input.style.width = \"calc(100% - \" + paddingRight + \"px)\";\r\n            }\r\n            else {\r\n                this.input.style.paddingRight = paddingRight + 'px';\r\n            }\r\n            if (this.mirror) {\r\n                this.mirror.style.paddingRight = paddingRight + 'px';\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    InputBox.prototype.updateScrollDimensions = function () {\r\n        if (typeof this.cachedContentHeight !== 'number' || typeof this.cachedHeight !== 'number' || !this.scrollableElement) {\r\n            return;\r\n        }\r\n        var scrollHeight = this.cachedContentHeight;\r\n        var height = this.cachedHeight;\r\n        var scrollTop = this.input.scrollTop;\r\n        this.scrollableElement.setScrollDimensions({ scrollHeight: scrollHeight, height: height });\r\n        this.scrollableElement.setScrollPosition({ scrollTop: scrollTop });\r\n    };\r\n    InputBox.prototype.showMessage = function (message, force) {\r\n        this.message = message;\r\n        dom.removeClass(this.element, 'idle');\r\n        dom.removeClass(this.element, 'info');\r\n        dom.removeClass(this.element, 'warning');\r\n        dom.removeClass(this.element, 'error');\r\n        dom.addClass(this.element, this.classForType(message.type));\r\n        var styles = this.stylesForType(this.message.type);\r\n        this.element.style.border = styles.border ? \"1px solid \" + styles.border : '';\r\n        // ARIA Support\r\n        var alertText;\r\n        if (message.type === 3 /* ERROR */) {\r\n            alertText = nls.localize('alertErrorMessage', \"Error: {0}\", message.content);\r\n        }\r\n        else if (message.type === 2 /* WARNING */) {\r\n            alertText = nls.localize('alertWarningMessage', \"Warning: {0}\", message.content);\r\n        }\r\n        else {\r\n            alertText = nls.localize('alertInfoMessage', \"Info: {0}\", message.content);\r\n        }\r\n        aria.alert(alertText);\r\n        if (this.hasFocus() || force) {\r\n            this._showMessage();\r\n        }\r\n    };\r\n    InputBox.prototype.hideMessage = function () {\r\n        this.message = null;\r\n        dom.removeClass(this.element, 'info');\r\n        dom.removeClass(this.element, 'warning');\r\n        dom.removeClass(this.element, 'error');\r\n        dom.addClass(this.element, 'idle');\r\n        this._hideMessage();\r\n        this.applyStyles();\r\n    };\r\n    InputBox.prototype.validate = function () {\r\n        var errorMsg = null;\r\n        if (this.validation) {\r\n            errorMsg = this.validation(this.value);\r\n            if (errorMsg) {\r\n                this.inputElement.setAttribute('aria-invalid', 'true');\r\n                this.showMessage(errorMsg);\r\n            }\r\n            else if (this.inputElement.hasAttribute('aria-invalid')) {\r\n                this.inputElement.removeAttribute('aria-invalid');\r\n                this.hideMessage();\r\n            }\r\n        }\r\n        return !errorMsg;\r\n    };\r\n    InputBox.prototype.stylesForType = function (type) {\r\n        switch (type) {\r\n            case 1 /* INFO */: return { border: this.inputValidationInfoBorder, background: this.inputValidationInfoBackground, foreground: this.inputValidationInfoForeground };\r\n            case 2 /* WARNING */: return { border: this.inputValidationWarningBorder, background: this.inputValidationWarningBackground, foreground: this.inputValidationWarningForeground };\r\n            default: return { border: this.inputValidationErrorBorder, background: this.inputValidationErrorBackground, foreground: this.inputValidationErrorForeground };\r\n        }\r\n    };\r\n    InputBox.prototype.classForType = function (type) {\r\n        switch (type) {\r\n            case 1 /* INFO */: return 'info';\r\n            case 2 /* WARNING */: return 'warning';\r\n            default: return 'error';\r\n        }\r\n    };\r\n    InputBox.prototype._showMessage = function () {\r\n        var _this = this;\r\n        if (!this.contextViewProvider || !this.message) {\r\n            return;\r\n        }\r\n        var div;\r\n        var layout = function () { return div.style.width = dom.getTotalWidth(_this.element) + 'px'; };\r\n        this.contextViewProvider.showContextView({\r\n            getAnchor: function () { return _this.element; },\r\n            anchorAlignment: 1 /* RIGHT */,\r\n            render: function (container) {\r\n                if (!_this.message) {\r\n                    return null;\r\n                }\r\n                div = dom.append(container, $('.monaco-inputbox-container'));\r\n                layout();\r\n                var renderOptions = {\r\n                    inline: true,\r\n                    className: 'monaco-inputbox-message'\r\n                };\r\n                var spanElement = (_this.message.formatContent\r\n                    ? renderFormattedText(_this.message.content, renderOptions)\r\n                    : renderText(_this.message.content, renderOptions));\r\n                dom.addClass(spanElement, _this.classForType(_this.message.type));\r\n                var styles = _this.stylesForType(_this.message.type);\r\n                spanElement.style.backgroundColor = styles.background ? styles.background.toString() : '';\r\n                spanElement.style.color = styles.foreground ? styles.foreground.toString() : null;\r\n                spanElement.style.border = styles.border ? \"1px solid \" + styles.border : '';\r\n                dom.append(div, spanElement);\r\n                return null;\r\n            },\r\n            onHide: function () {\r\n                _this.state = 'closed';\r\n            },\r\n            layout: layout\r\n        });\r\n        this.state = 'open';\r\n    };\r\n    InputBox.prototype._hideMessage = function () {\r\n        if (!this.contextViewProvider) {\r\n            return;\r\n        }\r\n        if (this.state === 'open') {\r\n            this.contextViewProvider.hideContextView();\r\n        }\r\n        this.state = 'idle';\r\n    };\r\n    InputBox.prototype.onValueChange = function () {\r\n        this._onDidChange.fire(this.value);\r\n        this.validate();\r\n        this.updateMirror();\r\n        dom.toggleClass(this.input, 'empty', !this.value);\r\n        if (this.state === 'open' && this.contextViewProvider) {\r\n            this.contextViewProvider.layout();\r\n        }\r\n    };\r\n    InputBox.prototype.updateMirror = function () {\r\n        if (!this.mirror) {\r\n            return;\r\n        }\r\n        var value = this.value;\r\n        var lastCharCode = value.charCodeAt(value.length - 1);\r\n        var suffix = lastCharCode === 10 ? ' ' : '';\r\n        var mirrorTextContent = value + suffix;\r\n        if (mirrorTextContent) {\r\n            this.mirror.textContent = value + suffix;\r\n        }\r\n        else {\r\n            this.mirror.innerHTML = '&#160;';\r\n        }\r\n        this.layout();\r\n    };\r\n    InputBox.prototype.style = function (styles) {\r\n        this.inputBackground = styles.inputBackground;\r\n        this.inputForeground = styles.inputForeground;\r\n        this.inputBorder = styles.inputBorder;\r\n        this.inputValidationInfoBackground = styles.inputValidationInfoBackground;\r\n        this.inputValidationInfoForeground = styles.inputValidationInfoForeground;\r\n        this.inputValidationInfoBorder = styles.inputValidationInfoBorder;\r\n        this.inputValidationWarningBackground = styles.inputValidationWarningBackground;\r\n        this.inputValidationWarningForeground = styles.inputValidationWarningForeground;\r\n        this.inputValidationWarningBorder = styles.inputValidationWarningBorder;\r\n        this.inputValidationErrorBackground = styles.inputValidationErrorBackground;\r\n        this.inputValidationErrorForeground = styles.inputValidationErrorForeground;\r\n        this.inputValidationErrorBorder = styles.inputValidationErrorBorder;\r\n        this.applyStyles();\r\n    };\r\n    InputBox.prototype.applyStyles = function () {\r\n        var background = this.inputBackground ? this.inputBackground.toString() : '';\r\n        var foreground = this.inputForeground ? this.inputForeground.toString() : '';\r\n        var border = this.inputBorder ? this.inputBorder.toString() : '';\r\n        this.element.style.backgroundColor = background;\r\n        this.element.style.color = foreground;\r\n        this.input.style.backgroundColor = background;\r\n        this.input.style.color = foreground;\r\n        this.element.style.borderWidth = border ? '1px' : '';\r\n        this.element.style.borderStyle = border ? 'solid' : '';\r\n        this.element.style.borderColor = border;\r\n    };\r\n    InputBox.prototype.layout = function () {\r\n        if (!this.mirror) {\r\n            return;\r\n        }\r\n        var previousHeight = this.cachedContentHeight;\r\n        this.cachedContentHeight = dom.getTotalHeight(this.mirror);\r\n        if (previousHeight !== this.cachedContentHeight) {\r\n            this.cachedHeight = Math.min(this.cachedContentHeight, this.maxHeight);\r\n            this.input.style.height = this.cachedHeight + 'px';\r\n            this._onDidHeightChange.fire(this.cachedContentHeight);\r\n        }\r\n    };\r\n    InputBox.prototype.insertAtCursor = function (text) {\r\n        var inputElement = this.inputElement;\r\n        var start = inputElement.selectionStart;\r\n        var end = inputElement.selectionEnd;\r\n        var content = inputElement.value;\r\n        if (start !== null && end !== null) {\r\n            this.value = content.substr(0, start) + text + content.substr(end);\r\n            inputElement.setSelectionRange(start + 1, start + 1);\r\n            this.layout();\r\n        }\r\n    };\r\n    InputBox.prototype.dispose = function () {\r\n        this._hideMessage();\r\n        this.message = null;\r\n        if (this.actionbar) {\r\n            this.actionbar.dispose();\r\n        }\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    return InputBox;\r\n}(Widget));\r\nexport { InputBox };\r\nvar HistoryInputBox = /** @class */ (function (_super) {\r\n    __extends(HistoryInputBox, _super);\r\n    function HistoryInputBox(container, contextViewProvider, options) {\r\n        var _this = _super.call(this, container, contextViewProvider, options) || this;\r\n        _this.history = new HistoryNavigator(options.history, 100);\r\n        return _this;\r\n    }\r\n    HistoryInputBox.prototype.addToHistory = function () {\r\n        if (this.value && this.value !== this.getCurrentValue()) {\r\n            this.history.add(this.value);\r\n        }\r\n    };\r\n    HistoryInputBox.prototype.showNextValue = function () {\r\n        if (!this.history.has(this.value)) {\r\n            this.addToHistory();\r\n        }\r\n        var next = this.getNextValue();\r\n        if (next) {\r\n            next = next === this.value ? this.getNextValue() : next;\r\n        }\r\n        if (next) {\r\n            this.value = next;\r\n            aria.status(this.value);\r\n        }\r\n    };\r\n    HistoryInputBox.prototype.showPreviousValue = function () {\r\n        if (!this.history.has(this.value)) {\r\n            this.addToHistory();\r\n        }\r\n        var previous = this.getPreviousValue();\r\n        if (previous) {\r\n            previous = previous === this.value ? this.getPreviousValue() : previous;\r\n        }\r\n        if (previous) {\r\n            this.value = previous;\r\n            aria.status(this.value);\r\n        }\r\n    };\r\n    HistoryInputBox.prototype.getCurrentValue = function () {\r\n        var currentValue = this.history.current();\r\n        if (!currentValue) {\r\n            currentValue = this.history.last();\r\n            this.history.next();\r\n        }\r\n        return currentValue;\r\n    };\r\n    HistoryInputBox.prototype.getPreviousValue = function () {\r\n        return this.history.previous() || this.history.first();\r\n    };\r\n    HistoryInputBox.prototype.getNextValue = function () {\r\n        return this.history.next() || this.history.last();\r\n    };\r\n    return HistoryInputBox;\r\n}(InputBox));\r\nexport { HistoryInputBox };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport './findInput.css';\r\nimport * as nls from '../../../../nls.js';\r\nimport * as dom from '../../dom.js';\r\nimport { HistoryInputBox } from '../inputbox/inputBox.js';\r\nimport { Widget } from '../widget.js';\r\nimport { Emitter } from '../../../common/event.js';\r\nimport { CaseSensitiveCheckbox, WholeWordsCheckbox, RegexCheckbox } from './findInputCheckboxes.js';\r\nvar NLS_DEFAULT_LABEL = nls.localize('defaultLabel', \"input\");\r\nvar FindInput = /** @class */ (function (_super) {\r\n    __extends(FindInput, _super);\r\n    function FindInput(parent, contextViewProvider, _showOptionButtons, options) {\r\n        var _this = _super.call(this) || this;\r\n        _this._showOptionButtons = _showOptionButtons;\r\n        _this.fixFocusOnOptionClickEnabled = true;\r\n        _this._onDidOptionChange = _this._register(new Emitter());\r\n        _this.onDidOptionChange = _this._onDidOptionChange.event;\r\n        _this._onKeyDown = _this._register(new Emitter());\r\n        _this.onKeyDown = _this._onKeyDown.event;\r\n        _this._onMouseDown = _this._register(new Emitter());\r\n        _this.onMouseDown = _this._onMouseDown.event;\r\n        _this._onInput = _this._register(new Emitter());\r\n        _this._onKeyUp = _this._register(new Emitter());\r\n        _this._onCaseSensitiveKeyDown = _this._register(new Emitter());\r\n        _this.onCaseSensitiveKeyDown = _this._onCaseSensitiveKeyDown.event;\r\n        _this._onRegexKeyDown = _this._register(new Emitter());\r\n        _this.onRegexKeyDown = _this._onRegexKeyDown.event;\r\n        _this._lastHighlightFindOptions = 0;\r\n        _this.contextViewProvider = contextViewProvider;\r\n        _this.placeholder = options.placeholder || '';\r\n        _this.validation = options.validation;\r\n        _this.label = options.label || NLS_DEFAULT_LABEL;\r\n        _this.inputActiveOptionBorder = options.inputActiveOptionBorder;\r\n        _this.inputActiveOptionBackground = options.inputActiveOptionBackground;\r\n        _this.inputBackground = options.inputBackground;\r\n        _this.inputForeground = options.inputForeground;\r\n        _this.inputBorder = options.inputBorder;\r\n        _this.inputValidationInfoBorder = options.inputValidationInfoBorder;\r\n        _this.inputValidationInfoBackground = options.inputValidationInfoBackground;\r\n        _this.inputValidationInfoForeground = options.inputValidationInfoForeground;\r\n        _this.inputValidationWarningBorder = options.inputValidationWarningBorder;\r\n        _this.inputValidationWarningBackground = options.inputValidationWarningBackground;\r\n        _this.inputValidationWarningForeground = options.inputValidationWarningForeground;\r\n        _this.inputValidationErrorBorder = options.inputValidationErrorBorder;\r\n        _this.inputValidationErrorBackground = options.inputValidationErrorBackground;\r\n        _this.inputValidationErrorForeground = options.inputValidationErrorForeground;\r\n        var appendCaseSensitiveLabel = options.appendCaseSensitiveLabel || '';\r\n        var appendWholeWordsLabel = options.appendWholeWordsLabel || '';\r\n        var appendRegexLabel = options.appendRegexLabel || '';\r\n        var history = options.history || [];\r\n        var flexibleHeight = !!options.flexibleHeight;\r\n        var flexibleWidth = !!options.flexibleWidth;\r\n        var flexibleMaxHeight = options.flexibleMaxHeight;\r\n        _this.domNode = document.createElement('div');\r\n        dom.addClass(_this.domNode, 'monaco-findInput');\r\n        _this.inputBox = _this._register(new HistoryInputBox(_this.domNode, _this.contextViewProvider, {\r\n            placeholder: _this.placeholder || '',\r\n            ariaLabel: _this.label || '',\r\n            validationOptions: {\r\n                validation: _this.validation\r\n            },\r\n            inputBackground: _this.inputBackground,\r\n            inputForeground: _this.inputForeground,\r\n            inputBorder: _this.inputBorder,\r\n            inputValidationInfoBackground: _this.inputValidationInfoBackground,\r\n            inputValidationInfoForeground: _this.inputValidationInfoForeground,\r\n            inputValidationInfoBorder: _this.inputValidationInfoBorder,\r\n            inputValidationWarningBackground: _this.inputValidationWarningBackground,\r\n            inputValidationWarningForeground: _this.inputValidationWarningForeground,\r\n            inputValidationWarningBorder: _this.inputValidationWarningBorder,\r\n            inputValidationErrorBackground: _this.inputValidationErrorBackground,\r\n            inputValidationErrorForeground: _this.inputValidationErrorForeground,\r\n            inputValidationErrorBorder: _this.inputValidationErrorBorder,\r\n            history: history,\r\n            flexibleHeight: flexibleHeight,\r\n            flexibleWidth: flexibleWidth,\r\n            flexibleMaxHeight: flexibleMaxHeight\r\n        }));\r\n        _this.regex = _this._register(new RegexCheckbox({\r\n            appendTitle: appendRegexLabel,\r\n            isChecked: false,\r\n            inputActiveOptionBorder: _this.inputActiveOptionBorder,\r\n            inputActiveOptionBackground: _this.inputActiveOptionBackground\r\n        }));\r\n        _this._register(_this.regex.onChange(function (viaKeyboard) {\r\n            _this._onDidOptionChange.fire(viaKeyboard);\r\n            if (!viaKeyboard && _this.fixFocusOnOptionClickEnabled) {\r\n                _this.inputBox.focus();\r\n            }\r\n            _this.validate();\r\n        }));\r\n        _this._register(_this.regex.onKeyDown(function (e) {\r\n            _this._onRegexKeyDown.fire(e);\r\n        }));\r\n        _this.wholeWords = _this._register(new WholeWordsCheckbox({\r\n            appendTitle: appendWholeWordsLabel,\r\n            isChecked: false,\r\n            inputActiveOptionBorder: _this.inputActiveOptionBorder,\r\n            inputActiveOptionBackground: _this.inputActiveOptionBackground\r\n        }));\r\n        _this._register(_this.wholeWords.onChange(function (viaKeyboard) {\r\n            _this._onDidOptionChange.fire(viaKeyboard);\r\n            if (!viaKeyboard && _this.fixFocusOnOptionClickEnabled) {\r\n                _this.inputBox.focus();\r\n            }\r\n            _this.validate();\r\n        }));\r\n        _this.caseSensitive = _this._register(new CaseSensitiveCheckbox({\r\n            appendTitle: appendCaseSensitiveLabel,\r\n            isChecked: false,\r\n            inputActiveOptionBorder: _this.inputActiveOptionBorder,\r\n            inputActiveOptionBackground: _this.inputActiveOptionBackground\r\n        }));\r\n        _this._register(_this.caseSensitive.onChange(function (viaKeyboard) {\r\n            _this._onDidOptionChange.fire(viaKeyboard);\r\n            if (!viaKeyboard && _this.fixFocusOnOptionClickEnabled) {\r\n                _this.inputBox.focus();\r\n            }\r\n            _this.validate();\r\n        }));\r\n        _this._register(_this.caseSensitive.onKeyDown(function (e) {\r\n            _this._onCaseSensitiveKeyDown.fire(e);\r\n        }));\r\n        if (_this._showOptionButtons) {\r\n            _this.inputBox.paddingRight = _this.caseSensitive.width() + _this.wholeWords.width() + _this.regex.width();\r\n        }\r\n        // Arrow-Key support to navigate between options\r\n        var indexes = [_this.caseSensitive.domNode, _this.wholeWords.domNode, _this.regex.domNode];\r\n        _this.onkeydown(_this.domNode, function (event) {\r\n            if (event.equals(15 /* LeftArrow */) || event.equals(17 /* RightArrow */) || event.equals(9 /* Escape */)) {\r\n                var index = indexes.indexOf(document.activeElement);\r\n                if (index >= 0) {\r\n                    var newIndex = -1;\r\n                    if (event.equals(17 /* RightArrow */)) {\r\n                        newIndex = (index + 1) % indexes.length;\r\n                    }\r\n                    else if (event.equals(15 /* LeftArrow */)) {\r\n                        if (index === 0) {\r\n                            newIndex = indexes.length - 1;\r\n                        }\r\n                        else {\r\n                            newIndex = index - 1;\r\n                        }\r\n                    }\r\n                    if (event.equals(9 /* Escape */)) {\r\n                        indexes[index].blur();\r\n                    }\r\n                    else if (newIndex >= 0) {\r\n                        indexes[newIndex].focus();\r\n                    }\r\n                    dom.EventHelper.stop(event, true);\r\n                }\r\n            }\r\n        });\r\n        var controls = document.createElement('div');\r\n        controls.className = 'controls';\r\n        controls.style.display = _this._showOptionButtons ? 'block' : 'none';\r\n        controls.appendChild(_this.caseSensitive.domNode);\r\n        controls.appendChild(_this.wholeWords.domNode);\r\n        controls.appendChild(_this.regex.domNode);\r\n        _this.domNode.appendChild(controls);\r\n        if (parent) {\r\n            parent.appendChild(_this.domNode);\r\n        }\r\n        _this.onkeydown(_this.inputBox.inputElement, function (e) { return _this._onKeyDown.fire(e); });\r\n        _this.onkeyup(_this.inputBox.inputElement, function (e) { return _this._onKeyUp.fire(e); });\r\n        _this.oninput(_this.inputBox.inputElement, function (e) { return _this._onInput.fire(); });\r\n        _this.onmousedown(_this.inputBox.inputElement, function (e) { return _this._onMouseDown.fire(e); });\r\n        return _this;\r\n    }\r\n    FindInput.prototype.enable = function () {\r\n        dom.removeClass(this.domNode, 'disabled');\r\n        this.inputBox.enable();\r\n        this.regex.enable();\r\n        this.wholeWords.enable();\r\n        this.caseSensitive.enable();\r\n    };\r\n    FindInput.prototype.disable = function () {\r\n        dom.addClass(this.domNode, 'disabled');\r\n        this.inputBox.disable();\r\n        this.regex.disable();\r\n        this.wholeWords.disable();\r\n        this.caseSensitive.disable();\r\n    };\r\n    FindInput.prototype.setFocusInputOnOptionClick = function (value) {\r\n        this.fixFocusOnOptionClickEnabled = value;\r\n    };\r\n    FindInput.prototype.setEnabled = function (enabled) {\r\n        if (enabled) {\r\n            this.enable();\r\n        }\r\n        else {\r\n            this.disable();\r\n        }\r\n    };\r\n    FindInput.prototype.getValue = function () {\r\n        return this.inputBox.value;\r\n    };\r\n    FindInput.prototype.setValue = function (value) {\r\n        if (this.inputBox.value !== value) {\r\n            this.inputBox.value = value;\r\n        }\r\n    };\r\n    FindInput.prototype.style = function (styles) {\r\n        this.inputActiveOptionBorder = styles.inputActiveOptionBorder;\r\n        this.inputActiveOptionBackground = styles.inputActiveOptionBackground;\r\n        this.inputBackground = styles.inputBackground;\r\n        this.inputForeground = styles.inputForeground;\r\n        this.inputBorder = styles.inputBorder;\r\n        this.inputValidationInfoBackground = styles.inputValidationInfoBackground;\r\n        this.inputValidationInfoForeground = styles.inputValidationInfoForeground;\r\n        this.inputValidationInfoBorder = styles.inputValidationInfoBorder;\r\n        this.inputValidationWarningBackground = styles.inputValidationWarningBackground;\r\n        this.inputValidationWarningForeground = styles.inputValidationWarningForeground;\r\n        this.inputValidationWarningBorder = styles.inputValidationWarningBorder;\r\n        this.inputValidationErrorBackground = styles.inputValidationErrorBackground;\r\n        this.inputValidationErrorForeground = styles.inputValidationErrorForeground;\r\n        this.inputValidationErrorBorder = styles.inputValidationErrorBorder;\r\n        this.applyStyles();\r\n    };\r\n    FindInput.prototype.applyStyles = function () {\r\n        if (this.domNode) {\r\n            var checkBoxStyles = {\r\n                inputActiveOptionBorder: this.inputActiveOptionBorder,\r\n                inputActiveOptionBackground: this.inputActiveOptionBackground,\r\n            };\r\n            this.regex.style(checkBoxStyles);\r\n            this.wholeWords.style(checkBoxStyles);\r\n            this.caseSensitive.style(checkBoxStyles);\r\n            var inputBoxStyles = {\r\n                inputBackground: this.inputBackground,\r\n                inputForeground: this.inputForeground,\r\n                inputBorder: this.inputBorder,\r\n                inputValidationInfoBackground: this.inputValidationInfoBackground,\r\n                inputValidationInfoForeground: this.inputValidationInfoForeground,\r\n                inputValidationInfoBorder: this.inputValidationInfoBorder,\r\n                inputValidationWarningBackground: this.inputValidationWarningBackground,\r\n                inputValidationWarningForeground: this.inputValidationWarningForeground,\r\n                inputValidationWarningBorder: this.inputValidationWarningBorder,\r\n                inputValidationErrorBackground: this.inputValidationErrorBackground,\r\n                inputValidationErrorForeground: this.inputValidationErrorForeground,\r\n                inputValidationErrorBorder: this.inputValidationErrorBorder\r\n            };\r\n            this.inputBox.style(inputBoxStyles);\r\n        }\r\n    };\r\n    FindInput.prototype.select = function () {\r\n        this.inputBox.select();\r\n    };\r\n    FindInput.prototype.focus = function () {\r\n        this.inputBox.focus();\r\n    };\r\n    FindInput.prototype.getCaseSensitive = function () {\r\n        return this.caseSensitive.checked;\r\n    };\r\n    FindInput.prototype.setCaseSensitive = function (value) {\r\n        this.caseSensitive.checked = value;\r\n    };\r\n    FindInput.prototype.getWholeWords = function () {\r\n        return this.wholeWords.checked;\r\n    };\r\n    FindInput.prototype.setWholeWords = function (value) {\r\n        this.wholeWords.checked = value;\r\n    };\r\n    FindInput.prototype.getRegex = function () {\r\n        return this.regex.checked;\r\n    };\r\n    FindInput.prototype.setRegex = function (value) {\r\n        this.regex.checked = value;\r\n        this.validate();\r\n    };\r\n    FindInput.prototype.focusOnCaseSensitive = function () {\r\n        this.caseSensitive.focus();\r\n    };\r\n    FindInput.prototype.highlightFindOptions = function () {\r\n        dom.removeClass(this.domNode, 'highlight-' + (this._lastHighlightFindOptions));\r\n        this._lastHighlightFindOptions = 1 - this._lastHighlightFindOptions;\r\n        dom.addClass(this.domNode, 'highlight-' + (this._lastHighlightFindOptions));\r\n    };\r\n    FindInput.prototype.validate = function () {\r\n        this.inputBox.validate();\r\n    };\r\n    FindInput.prototype.clearMessage = function () {\r\n        this.inputBox.hideMessage();\r\n    };\r\n    return FindInput;\r\n}(Widget));\r\nexport { FindInput };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport './findInput.css';\r\nimport * as nls from '../../../../nls.js';\r\nimport * as dom from '../../dom.js';\r\nimport { HistoryInputBox } from '../inputbox/inputBox.js';\r\nimport { Widget } from '../widget.js';\r\nimport { Emitter } from '../../../common/event.js';\r\nimport { Checkbox } from '../checkbox/checkbox.js';\r\nvar NLS_DEFAULT_LABEL = nls.localize('defaultLabel', \"input\");\r\nvar NLS_PRESERVE_CASE_LABEL = nls.localize('label.preserveCaseCheckbox', \"Preserve Case\");\r\nvar PreserveCaseCheckbox = /** @class */ (function (_super) {\r\n    __extends(PreserveCaseCheckbox, _super);\r\n    function PreserveCaseCheckbox(opts) {\r\n        return _super.call(this, {\r\n            // TODO: does this need its own icon?\r\n            actionClassName: 'codicon-preserve-case',\r\n            title: NLS_PRESERVE_CASE_LABEL + opts.appendTitle,\r\n            isChecked: opts.isChecked,\r\n            inputActiveOptionBorder: opts.inputActiveOptionBorder,\r\n            inputActiveOptionBackground: opts.inputActiveOptionBackground\r\n        }) || this;\r\n    }\r\n    return PreserveCaseCheckbox;\r\n}(Checkbox));\r\nexport { PreserveCaseCheckbox };\r\nvar ReplaceInput = /** @class */ (function (_super) {\r\n    __extends(ReplaceInput, _super);\r\n    function ReplaceInput(parent, contextViewProvider, _showOptionButtons, options) {\r\n        var _this = _super.call(this) || this;\r\n        _this._showOptionButtons = _showOptionButtons;\r\n        _this.fixFocusOnOptionClickEnabled = true;\r\n        _this.cachedOptionsWidth = 0;\r\n        _this._onDidOptionChange = _this._register(new Emitter());\r\n        _this.onDidOptionChange = _this._onDidOptionChange.event;\r\n        _this._onKeyDown = _this._register(new Emitter());\r\n        _this.onKeyDown = _this._onKeyDown.event;\r\n        _this._onMouseDown = _this._register(new Emitter());\r\n        _this._onInput = _this._register(new Emitter());\r\n        _this._onKeyUp = _this._register(new Emitter());\r\n        _this._onPreserveCaseKeyDown = _this._register(new Emitter());\r\n        _this.onPreserveCaseKeyDown = _this._onPreserveCaseKeyDown.event;\r\n        _this.contextViewProvider = contextViewProvider;\r\n        _this.placeholder = options.placeholder || '';\r\n        _this.validation = options.validation;\r\n        _this.label = options.label || NLS_DEFAULT_LABEL;\r\n        _this.inputActiveOptionBorder = options.inputActiveOptionBorder;\r\n        _this.inputActiveOptionBackground = options.inputActiveOptionBackground;\r\n        _this.inputBackground = options.inputBackground;\r\n        _this.inputForeground = options.inputForeground;\r\n        _this.inputBorder = options.inputBorder;\r\n        _this.inputValidationInfoBorder = options.inputValidationInfoBorder;\r\n        _this.inputValidationInfoBackground = options.inputValidationInfoBackground;\r\n        _this.inputValidationInfoForeground = options.inputValidationInfoForeground;\r\n        _this.inputValidationWarningBorder = options.inputValidationWarningBorder;\r\n        _this.inputValidationWarningBackground = options.inputValidationWarningBackground;\r\n        _this.inputValidationWarningForeground = options.inputValidationWarningForeground;\r\n        _this.inputValidationErrorBorder = options.inputValidationErrorBorder;\r\n        _this.inputValidationErrorBackground = options.inputValidationErrorBackground;\r\n        _this.inputValidationErrorForeground = options.inputValidationErrorForeground;\r\n        var history = options.history || [];\r\n        var flexibleHeight = !!options.flexibleHeight;\r\n        var flexibleWidth = !!options.flexibleWidth;\r\n        var flexibleMaxHeight = options.flexibleMaxHeight;\r\n        _this.domNode = document.createElement('div');\r\n        dom.addClass(_this.domNode, 'monaco-findInput');\r\n        _this.inputBox = _this._register(new HistoryInputBox(_this.domNode, _this.contextViewProvider, {\r\n            ariaLabel: _this.label || '',\r\n            placeholder: _this.placeholder || '',\r\n            validationOptions: {\r\n                validation: _this.validation\r\n            },\r\n            inputBackground: _this.inputBackground,\r\n            inputForeground: _this.inputForeground,\r\n            inputBorder: _this.inputBorder,\r\n            inputValidationInfoBackground: _this.inputValidationInfoBackground,\r\n            inputValidationInfoForeground: _this.inputValidationInfoForeground,\r\n            inputValidationInfoBorder: _this.inputValidationInfoBorder,\r\n            inputValidationWarningBackground: _this.inputValidationWarningBackground,\r\n            inputValidationWarningForeground: _this.inputValidationWarningForeground,\r\n            inputValidationWarningBorder: _this.inputValidationWarningBorder,\r\n            inputValidationErrorBackground: _this.inputValidationErrorBackground,\r\n            inputValidationErrorForeground: _this.inputValidationErrorForeground,\r\n            inputValidationErrorBorder: _this.inputValidationErrorBorder,\r\n            history: history,\r\n            flexibleHeight: flexibleHeight,\r\n            flexibleWidth: flexibleWidth,\r\n            flexibleMaxHeight: flexibleMaxHeight\r\n        }));\r\n        _this.preserveCase = _this._register(new PreserveCaseCheckbox({\r\n            appendTitle: '',\r\n            isChecked: false,\r\n            inputActiveOptionBorder: _this.inputActiveOptionBorder,\r\n            inputActiveOptionBackground: _this.inputActiveOptionBackground,\r\n        }));\r\n        _this._register(_this.preserveCase.onChange(function (viaKeyboard) {\r\n            _this._onDidOptionChange.fire(viaKeyboard);\r\n            if (!viaKeyboard && _this.fixFocusOnOptionClickEnabled) {\r\n                _this.inputBox.focus();\r\n            }\r\n            _this.validate();\r\n        }));\r\n        _this._register(_this.preserveCase.onKeyDown(function (e) {\r\n            _this._onPreserveCaseKeyDown.fire(e);\r\n        }));\r\n        if (_this._showOptionButtons) {\r\n            _this.cachedOptionsWidth = _this.preserveCase.width();\r\n        }\r\n        else {\r\n            _this.cachedOptionsWidth = 0;\r\n        }\r\n        // Arrow-Key support to navigate between options\r\n        var indexes = [_this.preserveCase.domNode];\r\n        _this.onkeydown(_this.domNode, function (event) {\r\n            if (event.equals(15 /* LeftArrow */) || event.equals(17 /* RightArrow */) || event.equals(9 /* Escape */)) {\r\n                var index = indexes.indexOf(document.activeElement);\r\n                if (index >= 0) {\r\n                    var newIndex = -1;\r\n                    if (event.equals(17 /* RightArrow */)) {\r\n                        newIndex = (index + 1) % indexes.length;\r\n                    }\r\n                    else if (event.equals(15 /* LeftArrow */)) {\r\n                        if (index === 0) {\r\n                            newIndex = indexes.length - 1;\r\n                        }\r\n                        else {\r\n                            newIndex = index - 1;\r\n                        }\r\n                    }\r\n                    if (event.equals(9 /* Escape */)) {\r\n                        indexes[index].blur();\r\n                    }\r\n                    else if (newIndex >= 0) {\r\n                        indexes[newIndex].focus();\r\n                    }\r\n                    dom.EventHelper.stop(event, true);\r\n                }\r\n            }\r\n        });\r\n        var controls = document.createElement('div');\r\n        controls.className = 'controls';\r\n        controls.style.display = _this._showOptionButtons ? 'block' : 'none';\r\n        controls.appendChild(_this.preserveCase.domNode);\r\n        _this.domNode.appendChild(controls);\r\n        if (parent) {\r\n            parent.appendChild(_this.domNode);\r\n        }\r\n        _this.onkeydown(_this.inputBox.inputElement, function (e) { return _this._onKeyDown.fire(e); });\r\n        _this.onkeyup(_this.inputBox.inputElement, function (e) { return _this._onKeyUp.fire(e); });\r\n        _this.oninput(_this.inputBox.inputElement, function (e) { return _this._onInput.fire(); });\r\n        _this.onmousedown(_this.inputBox.inputElement, function (e) { return _this._onMouseDown.fire(e); });\r\n        return _this;\r\n    }\r\n    ReplaceInput.prototype.enable = function () {\r\n        dom.removeClass(this.domNode, 'disabled');\r\n        this.inputBox.enable();\r\n        this.preserveCase.enable();\r\n    };\r\n    ReplaceInput.prototype.disable = function () {\r\n        dom.addClass(this.domNode, 'disabled');\r\n        this.inputBox.disable();\r\n        this.preserveCase.disable();\r\n    };\r\n    ReplaceInput.prototype.setEnabled = function (enabled) {\r\n        if (enabled) {\r\n            this.enable();\r\n        }\r\n        else {\r\n            this.disable();\r\n        }\r\n    };\r\n    ReplaceInput.prototype.style = function (styles) {\r\n        this.inputActiveOptionBorder = styles.inputActiveOptionBorder;\r\n        this.inputActiveOptionBackground = styles.inputActiveOptionBackground;\r\n        this.inputBackground = styles.inputBackground;\r\n        this.inputForeground = styles.inputForeground;\r\n        this.inputBorder = styles.inputBorder;\r\n        this.inputValidationInfoBackground = styles.inputValidationInfoBackground;\r\n        this.inputValidationInfoForeground = styles.inputValidationInfoForeground;\r\n        this.inputValidationInfoBorder = styles.inputValidationInfoBorder;\r\n        this.inputValidationWarningBackground = styles.inputValidationWarningBackground;\r\n        this.inputValidationWarningForeground = styles.inputValidationWarningForeground;\r\n        this.inputValidationWarningBorder = styles.inputValidationWarningBorder;\r\n        this.inputValidationErrorBackground = styles.inputValidationErrorBackground;\r\n        this.inputValidationErrorForeground = styles.inputValidationErrorForeground;\r\n        this.inputValidationErrorBorder = styles.inputValidationErrorBorder;\r\n        this.applyStyles();\r\n    };\r\n    ReplaceInput.prototype.applyStyles = function () {\r\n        if (this.domNode) {\r\n            var checkBoxStyles = {\r\n                inputActiveOptionBorder: this.inputActiveOptionBorder,\r\n                inputActiveOptionBackground: this.inputActiveOptionBackground,\r\n            };\r\n            this.preserveCase.style(checkBoxStyles);\r\n            var inputBoxStyles = {\r\n                inputBackground: this.inputBackground,\r\n                inputForeground: this.inputForeground,\r\n                inputBorder: this.inputBorder,\r\n                inputValidationInfoBackground: this.inputValidationInfoBackground,\r\n                inputValidationInfoForeground: this.inputValidationInfoForeground,\r\n                inputValidationInfoBorder: this.inputValidationInfoBorder,\r\n                inputValidationWarningBackground: this.inputValidationWarningBackground,\r\n                inputValidationWarningForeground: this.inputValidationWarningForeground,\r\n                inputValidationWarningBorder: this.inputValidationWarningBorder,\r\n                inputValidationErrorBackground: this.inputValidationErrorBackground,\r\n                inputValidationErrorForeground: this.inputValidationErrorForeground,\r\n                inputValidationErrorBorder: this.inputValidationErrorBorder\r\n            };\r\n            this.inputBox.style(inputBoxStyles);\r\n        }\r\n    };\r\n    ReplaceInput.prototype.select = function () {\r\n        this.inputBox.select();\r\n    };\r\n    ReplaceInput.prototype.focus = function () {\r\n        this.inputBox.focus();\r\n    };\r\n    ReplaceInput.prototype.getPreserveCase = function () {\r\n        return this.preserveCase.checked;\r\n    };\r\n    ReplaceInput.prototype.setPreserveCase = function (value) {\r\n        this.preserveCase.checked = value;\r\n    };\r\n    ReplaceInput.prototype.focusOnPreserve = function () {\r\n        this.preserveCase.focus();\r\n    };\r\n    ReplaceInput.prototype.validate = function () {\r\n        if (this.inputBox) {\r\n            this.inputBox.validate();\r\n        }\r\n    };\r\n    Object.defineProperty(ReplaceInput.prototype, \"width\", {\r\n        set: function (newWidth) {\r\n            this.inputBox.paddingRight = this.cachedOptionsWidth;\r\n            this.inputBox.width = newWidth;\r\n            this.domNode.style.width = newWidth + 'px';\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ReplaceInput.prototype.dispose = function () {\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    return ReplaceInput;\r\n}(Widget));\r\nexport { ReplaceInput };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { IContextKeyService, ContextKeyExpr, RawContextKey } from '../contextkey/common/contextkey.js';\r\nimport { FindInput } from '../../base/browser/ui/findinput/findInput.js';\r\nimport { KeybindingsRegistry } from '../keybinding/common/keybindingsRegistry.js';\r\nimport { ReplaceInput } from '../../base/browser/ui/findinput/replaceInput.js';\r\nexport var HistoryNavigationWidgetContext = 'historyNavigationWidget';\r\nexport var HistoryNavigationEnablementContext = 'historyNavigationEnabled';\r\nfunction bindContextScopedWidget(contextKeyService, widget, contextKey) {\r\n    new RawContextKey(contextKey, widget).bindTo(contextKeyService);\r\n}\r\nfunction createWidgetScopedContextKeyService(contextKeyService, widget) {\r\n    return contextKeyService.createScoped(widget.target);\r\n}\r\nfunction getContextScopedWidget(contextKeyService, contextKey) {\r\n    return contextKeyService.getContext(document.activeElement).getValue(contextKey);\r\n}\r\nexport function createAndBindHistoryNavigationWidgetScopedContextKeyService(contextKeyService, widget) {\r\n    var scopedContextKeyService = createWidgetScopedContextKeyService(contextKeyService, widget);\r\n    bindContextScopedWidget(scopedContextKeyService, widget, HistoryNavigationWidgetContext);\r\n    var historyNavigationEnablement = new RawContextKey(HistoryNavigationEnablementContext, true).bindTo(scopedContextKeyService);\r\n    return { scopedContextKeyService: scopedContextKeyService, historyNavigationEnablement: historyNavigationEnablement };\r\n}\r\nvar ContextScopedFindInput = /** @class */ (function (_super) {\r\n    __extends(ContextScopedFindInput, _super);\r\n    function ContextScopedFindInput(container, contextViewProvider, options, contextKeyService, showFindOptions) {\r\n        if (showFindOptions === void 0) { showFindOptions = false; }\r\n        var _this = _super.call(this, container, contextViewProvider, showFindOptions, options) || this;\r\n        _this._register(createAndBindHistoryNavigationWidgetScopedContextKeyService(contextKeyService, { target: _this.inputBox.element, historyNavigator: _this.inputBox }).scopedContextKeyService);\r\n        return _this;\r\n    }\r\n    ContextScopedFindInput = __decorate([\r\n        __param(3, IContextKeyService)\r\n    ], ContextScopedFindInput);\r\n    return ContextScopedFindInput;\r\n}(FindInput));\r\nexport { ContextScopedFindInput };\r\nvar ContextScopedReplaceInput = /** @class */ (function (_super) {\r\n    __extends(ContextScopedReplaceInput, _super);\r\n    function ContextScopedReplaceInput(container, contextViewProvider, options, contextKeyService, showReplaceOptions) {\r\n        if (showReplaceOptions === void 0) { showReplaceOptions = false; }\r\n        var _this = _super.call(this, container, contextViewProvider, showReplaceOptions, options) || this;\r\n        _this._register(createAndBindHistoryNavigationWidgetScopedContextKeyService(contextKeyService, { target: _this.inputBox.element, historyNavigator: _this.inputBox }).scopedContextKeyService);\r\n        return _this;\r\n    }\r\n    ContextScopedReplaceInput = __decorate([\r\n        __param(3, IContextKeyService)\r\n    ], ContextScopedReplaceInput);\r\n    return ContextScopedReplaceInput;\r\n}(ReplaceInput));\r\nexport { ContextScopedReplaceInput };\r\nKeybindingsRegistry.registerCommandAndKeybindingRule({\r\n    id: 'history.showPrevious',\r\n    weight: 200 /* WorkbenchContrib */,\r\n    when: ContextKeyExpr.and(ContextKeyExpr.has(HistoryNavigationWidgetContext), ContextKeyExpr.equals(HistoryNavigationEnablementContext, true)),\r\n    primary: 16 /* UpArrow */,\r\n    secondary: [512 /* Alt */ | 16 /* UpArrow */],\r\n    handler: function (accessor, arg2) {\r\n        var widget = getContextScopedWidget(accessor.get(IContextKeyService), HistoryNavigationWidgetContext);\r\n        if (widget) {\r\n            var historyInputBox = widget.historyNavigator;\r\n            historyInputBox.showPreviousValue();\r\n        }\r\n    }\r\n});\r\nKeybindingsRegistry.registerCommandAndKeybindingRule({\r\n    id: 'history.showNext',\r\n    weight: 200 /* WorkbenchContrib */,\r\n    when: ContextKeyExpr.and(ContextKeyExpr.has(HistoryNavigationWidgetContext), ContextKeyExpr.equals(HistoryNavigationEnablementContext, true)),\r\n    primary: 18 /* DownArrow */,\r\n    secondary: [512 /* Alt */ | 18 /* DownArrow */],\r\n    handler: function (accessor, arg2) {\r\n        var widget = getContextScopedWidget(accessor.get(IContextKeyService), HistoryNavigationWidgetContext);\r\n        if (widget) {\r\n            var historyInputBox = widget.historyNavigator;\r\n            historyInputBox.showNextValue();\r\n        }\r\n    }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport './findWidget.css';\r\nimport * as nls from '../../../nls.js';\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { alert as alertFn } from '../../../base/browser/ui/aria/aria.js';\r\nimport { Checkbox } from '../../../base/browser/ui/checkbox/checkbox.js';\r\nimport { Sash } from '../../../base/browser/ui/sash/sash.js';\r\nimport { Widget } from '../../../base/browser/ui/widget.js';\r\nimport { Delayer } from '../../../base/common/async.js';\r\nimport { onUnexpectedError } from '../../../base/common/errors.js';\r\nimport { toDisposable } from '../../../base/common/lifecycle.js';\r\nimport * as platform from '../../../base/common/platform.js';\r\nimport * as strings from '../../../base/common/strings.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { CONTEXT_FIND_INPUT_FOCUSED, CONTEXT_REPLACE_INPUT_FOCUSED, FIND_IDS, MATCHES_LIMIT } from './findModel.js';\r\nimport { contrastBorder, editorFindMatch, editorFindMatchBorder, editorFindMatchHighlight, editorFindMatchHighlightBorder, editorFindRangeHighlight, editorFindRangeHighlightBorder, editorWidgetBackground, editorWidgetBorder, editorWidgetResizeBorder, errorForeground, inputActiveOptionBorder, inputActiveOptionBackground, inputBackground, inputBorder, inputForeground, inputValidationErrorBackground, inputValidationErrorBorder, inputValidationErrorForeground, inputValidationInfoBackground, inputValidationInfoBorder, inputValidationInfoForeground, inputValidationWarningBackground, inputValidationWarningBorder, inputValidationWarningForeground, widgetShadow, editorWidgetForeground, focusBorder } from '../../../platform/theme/common/colorRegistry.js';\r\nimport { registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\r\nimport { ContextScopedFindInput, ContextScopedReplaceInput } from '../../../platform/browser/contextScopedHistoryWidget.js';\r\nvar NLS_FIND_INPUT_LABEL = nls.localize('label.find', \"Find\");\r\nvar NLS_FIND_INPUT_PLACEHOLDER = nls.localize('placeholder.find', \"Find\");\r\nvar NLS_PREVIOUS_MATCH_BTN_LABEL = nls.localize('label.previousMatchButton', \"Previous match\");\r\nvar NLS_NEXT_MATCH_BTN_LABEL = nls.localize('label.nextMatchButton', \"Next match\");\r\nvar NLS_TOGGLE_SELECTION_FIND_TITLE = nls.localize('label.toggleSelectionFind', \"Find in selection\");\r\nvar NLS_CLOSE_BTN_LABEL = nls.localize('label.closeButton', \"Close\");\r\nvar NLS_REPLACE_INPUT_LABEL = nls.localize('label.replace', \"Replace\");\r\nvar NLS_REPLACE_INPUT_PLACEHOLDER = nls.localize('placeholder.replace', \"Replace\");\r\nvar NLS_REPLACE_BTN_LABEL = nls.localize('label.replaceButton', \"Replace\");\r\nvar NLS_REPLACE_ALL_BTN_LABEL = nls.localize('label.replaceAllButton', \"Replace All\");\r\nvar NLS_TOGGLE_REPLACE_MODE_BTN_LABEL = nls.localize('label.toggleReplaceButton', \"Toggle Replace mode\");\r\nvar NLS_MATCHES_COUNT_LIMIT_TITLE = nls.localize('title.matchesCountLimit', \"Only the first {0} results are highlighted, but all find operations work on the entire text.\", MATCHES_LIMIT);\r\nvar NLS_MATCHES_LOCATION = nls.localize('label.matchesLocation', \"{0} of {1}\");\r\nvar NLS_NO_RESULTS = nls.localize('label.noResults', \"No Results\");\r\nvar FIND_WIDGET_INITIAL_WIDTH = 419;\r\nvar PART_WIDTH = 275;\r\nvar FIND_INPUT_AREA_WIDTH = PART_WIDTH - 54;\r\nvar MAX_MATCHES_COUNT_WIDTH = 69;\r\n// let FIND_ALL_CONTROLS_WIDTH = 17/** Find Input margin-left */ + (MAX_MATCHES_COUNT_WIDTH + 3 + 1) /** Match Results */ + 23 /** Button */ * 4 + 2/** sash */;\r\nvar FIND_INPUT_AREA_HEIGHT = 33; // The height of Find Widget when Replace Input is not visible.\r\nvar ctrlEnterReplaceAllWarningPromptedKey = 'ctrlEnterReplaceAll.windows.donotask';\r\nvar ctrlKeyMod = (platform.isMacintosh ? 256 /* WinCtrl */ : 2048 /* CtrlCmd */);\r\nvar FindWidgetViewZone = /** @class */ (function () {\r\n    function FindWidgetViewZone(afterLineNumber) {\r\n        this.afterLineNumber = afterLineNumber;\r\n        this.heightInPx = FIND_INPUT_AREA_HEIGHT;\r\n        this.suppressMouseDown = false;\r\n        this.domNode = document.createElement('div');\r\n        this.domNode.className = 'dock-find-viewzone';\r\n    }\r\n    return FindWidgetViewZone;\r\n}());\r\nexport { FindWidgetViewZone };\r\nfunction stopPropagationForMultiLineUpwards(event, value, textarea) {\r\n    var isMultiline = !!value.match(/\\n/);\r\n    if (textarea && isMultiline && textarea.selectionStart > 0) {\r\n        event.stopPropagation();\r\n        return;\r\n    }\r\n}\r\nfunction stopPropagationForMultiLineDownwards(event, value, textarea) {\r\n    var isMultiline = !!value.match(/\\n/);\r\n    if (textarea && isMultiline && textarea.selectionEnd < textarea.value.length) {\r\n        event.stopPropagation();\r\n        return;\r\n    }\r\n}\r\nvar FindWidget = /** @class */ (function (_super) {\r\n    __extends(FindWidget, _super);\r\n    function FindWidget(codeEditor, controller, state, contextViewProvider, keybindingService, contextKeyService, themeService, storageService, notificationService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._cachedHeight = null;\r\n        _this._codeEditor = codeEditor;\r\n        _this._controller = controller;\r\n        _this._state = state;\r\n        _this._contextViewProvider = contextViewProvider;\r\n        _this._keybindingService = keybindingService;\r\n        _this._contextKeyService = contextKeyService;\r\n        _this._storageService = storageService;\r\n        _this._notificationService = notificationService;\r\n        _this._ctrlEnterReplaceAllWarningPrompted = !!storageService.getBoolean(ctrlEnterReplaceAllWarningPromptedKey, 0 /* GLOBAL */);\r\n        _this._isVisible = false;\r\n        _this._isReplaceVisible = false;\r\n        _this._ignoreChangeEvent = false;\r\n        _this._updateHistoryDelayer = new Delayer(500);\r\n        _this._register(toDisposable(function () { return _this._updateHistoryDelayer.cancel(); }));\r\n        _this._register(_this._state.onFindReplaceStateChange(function (e) { return _this._onStateChanged(e); }));\r\n        _this._buildDomNode();\r\n        _this._updateButtons();\r\n        _this._tryUpdateWidgetWidth();\r\n        _this._findInput.inputBox.layout();\r\n        _this._register(_this._codeEditor.onDidChangeConfiguration(function (e) {\r\n            if (e.hasChanged(65 /* readOnly */)) {\r\n                if (_this._codeEditor.getOption(65 /* readOnly */)) {\r\n                    // Hide replace part if editor becomes read only\r\n                    _this._state.change({ isReplaceRevealed: false }, false);\r\n                }\r\n                _this._updateButtons();\r\n            }\r\n            if (e.hasChanged(103 /* layoutInfo */)) {\r\n                _this._tryUpdateWidgetWidth();\r\n            }\r\n            if (e.hasChanged(2 /* accessibilitySupport */)) {\r\n                _this.updateAccessibilitySupport();\r\n            }\r\n            if (e.hasChanged(27 /* find */)) {\r\n                var addExtraSpaceOnTop = _this._codeEditor.getOption(27 /* find */).addExtraSpaceOnTop;\r\n                if (addExtraSpaceOnTop && !_this._viewZone) {\r\n                    _this._viewZone = new FindWidgetViewZone(0);\r\n                    _this._showViewZone();\r\n                }\r\n                if (!addExtraSpaceOnTop && _this._viewZone) {\r\n                    _this._removeViewZone();\r\n                }\r\n            }\r\n        }));\r\n        _this.updateAccessibilitySupport();\r\n        _this._register(_this._codeEditor.onDidChangeCursorSelection(function () {\r\n            if (_this._isVisible) {\r\n                _this._updateToggleSelectionFindButton();\r\n            }\r\n        }));\r\n        _this._register(_this._codeEditor.onDidFocusEditorWidget(function () {\r\n            if (_this._isVisible) {\r\n                var globalBufferTerm = _this._controller.getGlobalBufferTerm();\r\n                if (globalBufferTerm && globalBufferTerm !== _this._state.searchString) {\r\n                    _this._state.change({ searchString: globalBufferTerm }, true);\r\n                    _this._findInput.select();\r\n                }\r\n            }\r\n        }));\r\n        _this._findInputFocused = CONTEXT_FIND_INPUT_FOCUSED.bindTo(contextKeyService);\r\n        _this._findFocusTracker = _this._register(dom.trackFocus(_this._findInput.inputBox.inputElement));\r\n        _this._register(_this._findFocusTracker.onDidFocus(function () {\r\n            _this._findInputFocused.set(true);\r\n            _this._updateSearchScope();\r\n        }));\r\n        _this._register(_this._findFocusTracker.onDidBlur(function () {\r\n            _this._findInputFocused.set(false);\r\n        }));\r\n        _this._replaceInputFocused = CONTEXT_REPLACE_INPUT_FOCUSED.bindTo(contextKeyService);\r\n        _this._replaceFocusTracker = _this._register(dom.trackFocus(_this._replaceInput.inputBox.inputElement));\r\n        _this._register(_this._replaceFocusTracker.onDidFocus(function () {\r\n            _this._replaceInputFocused.set(true);\r\n            _this._updateSearchScope();\r\n        }));\r\n        _this._register(_this._replaceFocusTracker.onDidBlur(function () {\r\n            _this._replaceInputFocused.set(false);\r\n        }));\r\n        _this._codeEditor.addOverlayWidget(_this);\r\n        if (_this._codeEditor.getOption(27 /* find */).addExtraSpaceOnTop) {\r\n            _this._viewZone = new FindWidgetViewZone(0); // Put it before the first line then users can scroll beyond the first line.\r\n        }\r\n        _this._applyTheme(themeService.getTheme());\r\n        _this._register(themeService.onThemeChange(_this._applyTheme.bind(_this)));\r\n        _this._register(_this._codeEditor.onDidChangeModel(function () {\r\n            if (!_this._isVisible) {\r\n                return;\r\n            }\r\n            _this._viewZoneId = undefined;\r\n        }));\r\n        _this._register(_this._codeEditor.onDidScrollChange(function (e) {\r\n            if (e.scrollTopChanged) {\r\n                _this._layoutViewZone();\r\n                return;\r\n            }\r\n            // for other scroll changes, layout the viewzone in next tick to avoid ruining current rendering.\r\n            setTimeout(function () {\r\n                _this._layoutViewZone();\r\n            }, 0);\r\n        }));\r\n        return _this;\r\n    }\r\n    // ----- IOverlayWidget API\r\n    FindWidget.prototype.getId = function () {\r\n        return FindWidget.ID;\r\n    };\r\n    FindWidget.prototype.getDomNode = function () {\r\n        return this._domNode;\r\n    };\r\n    FindWidget.prototype.getPosition = function () {\r\n        if (this._isVisible) {\r\n            return {\r\n                preference: 0 /* TOP_RIGHT_CORNER */\r\n            };\r\n        }\r\n        return null;\r\n    };\r\n    // ----- React to state changes\r\n    FindWidget.prototype._onStateChanged = function (e) {\r\n        if (e.searchString) {\r\n            try {\r\n                this._ignoreChangeEvent = true;\r\n                this._findInput.setValue(this._state.searchString);\r\n            }\r\n            finally {\r\n                this._ignoreChangeEvent = false;\r\n            }\r\n            this._updateButtons();\r\n        }\r\n        if (e.replaceString) {\r\n            this._replaceInput.inputBox.value = this._state.replaceString;\r\n        }\r\n        if (e.isRevealed) {\r\n            if (this._state.isRevealed) {\r\n                this._reveal();\r\n            }\r\n            else {\r\n                this._hide(true);\r\n            }\r\n        }\r\n        if (e.isReplaceRevealed) {\r\n            if (this._state.isReplaceRevealed) {\r\n                if (!this._codeEditor.getOption(65 /* readOnly */) && !this._isReplaceVisible) {\r\n                    this._isReplaceVisible = true;\r\n                    this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\r\n                    this._updateButtons();\r\n                    this._replaceInput.inputBox.layout();\r\n                }\r\n            }\r\n            else {\r\n                if (this._isReplaceVisible) {\r\n                    this._isReplaceVisible = false;\r\n                    this._updateButtons();\r\n                }\r\n            }\r\n        }\r\n        if ((e.isRevealed || e.isReplaceRevealed) && (this._state.isRevealed || this._state.isReplaceRevealed)) {\r\n            if (this._tryUpdateHeight()) {\r\n                this._showViewZone();\r\n            }\r\n        }\r\n        if (e.isRegex) {\r\n            this._findInput.setRegex(this._state.isRegex);\r\n        }\r\n        if (e.wholeWord) {\r\n            this._findInput.setWholeWords(this._state.wholeWord);\r\n        }\r\n        if (e.matchCase) {\r\n            this._findInput.setCaseSensitive(this._state.matchCase);\r\n        }\r\n        if (e.searchScope) {\r\n            if (this._state.searchScope) {\r\n                this._toggleSelectionFind.checked = true;\r\n            }\r\n            else {\r\n                this._toggleSelectionFind.checked = false;\r\n            }\r\n            this._updateToggleSelectionFindButton();\r\n        }\r\n        if (e.searchString || e.matchesCount || e.matchesPosition) {\r\n            var showRedOutline = (this._state.searchString.length > 0 && this._state.matchesCount === 0);\r\n            dom.toggleClass(this._domNode, 'no-results', showRedOutline);\r\n            this._updateMatchesCount();\r\n            this._updateButtons();\r\n        }\r\n        if (e.searchString || e.currentMatch) {\r\n            this._layoutViewZone();\r\n        }\r\n        if (e.updateHistory) {\r\n            this._delayedUpdateHistory();\r\n        }\r\n    };\r\n    FindWidget.prototype._delayedUpdateHistory = function () {\r\n        this._updateHistoryDelayer.trigger(this._updateHistory.bind(this));\r\n    };\r\n    FindWidget.prototype._updateHistory = function () {\r\n        if (this._state.searchString) {\r\n            this._findInput.inputBox.addToHistory();\r\n        }\r\n        if (this._state.replaceString) {\r\n            this._replaceInput.inputBox.addToHistory();\r\n        }\r\n    };\r\n    FindWidget.prototype._updateMatchesCount = function () {\r\n        this._matchesCount.style.minWidth = MAX_MATCHES_COUNT_WIDTH + 'px';\r\n        if (this._state.matchesCount >= MATCHES_LIMIT) {\r\n            this._matchesCount.title = NLS_MATCHES_COUNT_LIMIT_TITLE;\r\n        }\r\n        else {\r\n            this._matchesCount.title = '';\r\n        }\r\n        // remove previous content\r\n        if (this._matchesCount.firstChild) {\r\n            this._matchesCount.removeChild(this._matchesCount.firstChild);\r\n        }\r\n        var label;\r\n        if (this._state.matchesCount > 0) {\r\n            var matchesCount = String(this._state.matchesCount);\r\n            if (this._state.matchesCount >= MATCHES_LIMIT) {\r\n                matchesCount += '+';\r\n            }\r\n            var matchesPosition = String(this._state.matchesPosition);\r\n            if (matchesPosition === '0') {\r\n                matchesPosition = '?';\r\n            }\r\n            label = strings.format(NLS_MATCHES_LOCATION, matchesPosition, matchesCount);\r\n        }\r\n        else {\r\n            label = NLS_NO_RESULTS;\r\n        }\r\n        this._matchesCount.appendChild(document.createTextNode(label));\r\n        alertFn(this._getAriaLabel(label, this._state.currentMatch, this._state.searchString), true);\r\n        MAX_MATCHES_COUNT_WIDTH = Math.max(MAX_MATCHES_COUNT_WIDTH, this._matchesCount.clientWidth);\r\n    };\r\n    // ----- actions\r\n    FindWidget.prototype._getAriaLabel = function (label, currentMatch, searchString) {\r\n        if (label === NLS_NO_RESULTS) {\r\n            return searchString === ''\r\n                ? nls.localize('ariaSearchNoResultEmpty', \"{0} found\", label)\r\n                : nls.localize('ariaSearchNoResult', \"{0} found for {1}\", label, searchString);\r\n        }\r\n        return currentMatch\r\n            ? nls.localize('ariaSearchNoResultWithLineNum', \"{0} found for {1} at {2}\", label, searchString, currentMatch.startLineNumber + ':' + currentMatch.startColumn)\r\n            : nls.localize('ariaSearchNoResultWithLineNumNoCurrentMatch', \"{0} found for {1}\", label, searchString);\r\n    };\r\n    /**\r\n     * If 'selection find' is ON we should not disable the button (its function is to cancel 'selection find').\r\n     * If 'selection find' is OFF we enable the button only if there is a selection.\r\n     */\r\n    FindWidget.prototype._updateToggleSelectionFindButton = function () {\r\n        var selection = this._codeEditor.getSelection();\r\n        var isSelection = selection ? (selection.startLineNumber !== selection.endLineNumber || selection.startColumn !== selection.endColumn) : false;\r\n        var isChecked = this._toggleSelectionFind.checked;\r\n        if (this._isVisible && (isChecked || isSelection)) {\r\n            this._toggleSelectionFind.enable();\r\n        }\r\n        else {\r\n            this._toggleSelectionFind.disable();\r\n        }\r\n    };\r\n    FindWidget.prototype._updateButtons = function () {\r\n        this._findInput.setEnabled(this._isVisible);\r\n        this._replaceInput.setEnabled(this._isVisible && this._isReplaceVisible);\r\n        this._updateToggleSelectionFindButton();\r\n        this._closeBtn.setEnabled(this._isVisible);\r\n        var findInputIsNonEmpty = (this._state.searchString.length > 0);\r\n        var matchesCount = this._state.matchesCount ? true : false;\r\n        this._prevBtn.setEnabled(this._isVisible && findInputIsNonEmpty && matchesCount);\r\n        this._nextBtn.setEnabled(this._isVisible && findInputIsNonEmpty && matchesCount);\r\n        this._replaceBtn.setEnabled(this._isVisible && this._isReplaceVisible && findInputIsNonEmpty);\r\n        this._replaceAllBtn.setEnabled(this._isVisible && this._isReplaceVisible && findInputIsNonEmpty);\r\n        dom.toggleClass(this._domNode, 'replaceToggled', this._isReplaceVisible);\r\n        this._toggleReplaceBtn.toggleClass('codicon-chevron-right', !this._isReplaceVisible);\r\n        this._toggleReplaceBtn.toggleClass('codicon-chevron-down', this._isReplaceVisible);\r\n        this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);\r\n        var canReplace = !this._codeEditor.getOption(65 /* readOnly */);\r\n        this._toggleReplaceBtn.setEnabled(this._isVisible && canReplace);\r\n    };\r\n    FindWidget.prototype._reveal = function () {\r\n        var _this = this;\r\n        if (!this._isVisible) {\r\n            this._isVisible = true;\r\n            var selection = this._codeEditor.getSelection();\r\n            switch (this._codeEditor.getOption(27 /* find */).autoFindInSelection) {\r\n                case 'always':\r\n                    this._toggleSelectionFind.checked = true;\r\n                    break;\r\n                case 'never':\r\n                    this._toggleSelectionFind.checked = false;\r\n                    break;\r\n                case 'multiline':\r\n                    var isSelectionMultipleLine = !!selection && selection.startLineNumber !== selection.endLineNumber;\r\n                    this._toggleSelectionFind.checked = isSelectionMultipleLine;\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            this._tryUpdateWidgetWidth();\r\n            this._updateButtons();\r\n            setTimeout(function () {\r\n                dom.addClass(_this._domNode, 'visible');\r\n                _this._domNode.setAttribute('aria-hidden', 'false');\r\n            }, 0);\r\n            // validate query again as it's being dismissed when we hide the find widget.\r\n            setTimeout(function () {\r\n                _this._findInput.validate();\r\n            }, 200);\r\n            this._codeEditor.layoutOverlayWidget(this);\r\n            var adjustEditorScrollTop = true;\r\n            if (this._codeEditor.getOption(27 /* find */).seedSearchStringFromSelection && selection) {\r\n                var domNode = this._codeEditor.getDomNode();\r\n                if (domNode) {\r\n                    var editorCoords = dom.getDomNodePagePosition(domNode);\r\n                    var startCoords = this._codeEditor.getScrolledVisiblePosition(selection.getStartPosition());\r\n                    var startLeft = editorCoords.left + (startCoords ? startCoords.left : 0);\r\n                    var startTop = startCoords ? startCoords.top : 0;\r\n                    if (this._viewZone && startTop < this._viewZone.heightInPx) {\r\n                        if (selection.endLineNumber > selection.startLineNumber) {\r\n                            adjustEditorScrollTop = false;\r\n                        }\r\n                        var leftOfFindWidget = dom.getTopLeftOffset(this._domNode).left;\r\n                        if (startLeft > leftOfFindWidget) {\r\n                            adjustEditorScrollTop = false;\r\n                        }\r\n                        var endCoords = this._codeEditor.getScrolledVisiblePosition(selection.getEndPosition());\r\n                        var endLeft = editorCoords.left + (endCoords ? endCoords.left : 0);\r\n                        if (endLeft > leftOfFindWidget) {\r\n                            adjustEditorScrollTop = false;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            this._showViewZone(adjustEditorScrollTop);\r\n        }\r\n    };\r\n    FindWidget.prototype._hide = function (focusTheEditor) {\r\n        if (this._isVisible) {\r\n            this._isVisible = false;\r\n            this._updateButtons();\r\n            dom.removeClass(this._domNode, 'visible');\r\n            this._domNode.setAttribute('aria-hidden', 'true');\r\n            this._findInput.clearMessage();\r\n            if (focusTheEditor) {\r\n                this._codeEditor.focus();\r\n            }\r\n            this._codeEditor.layoutOverlayWidget(this);\r\n            this._removeViewZone();\r\n        }\r\n    };\r\n    FindWidget.prototype._layoutViewZone = function () {\r\n        var _this = this;\r\n        var addExtraSpaceOnTop = this._codeEditor.getOption(27 /* find */).addExtraSpaceOnTop;\r\n        if (!addExtraSpaceOnTop) {\r\n            this._removeViewZone();\r\n            return;\r\n        }\r\n        if (!this._isVisible) {\r\n            return;\r\n        }\r\n        var viewZone = this._viewZone;\r\n        if (this._viewZoneId !== undefined || !viewZone) {\r\n            return;\r\n        }\r\n        this._codeEditor.changeViewZones(function (accessor) {\r\n            viewZone.heightInPx = _this._getHeight();\r\n            _this._viewZoneId = accessor.addZone(viewZone);\r\n            // scroll top adjust to make sure the editor doesn't scroll when adding viewzone at the beginning.\r\n            _this._codeEditor.setScrollTop(_this._codeEditor.getScrollTop() + viewZone.heightInPx);\r\n        });\r\n    };\r\n    FindWidget.prototype._showViewZone = function (adjustScroll) {\r\n        var _this = this;\r\n        if (adjustScroll === void 0) { adjustScroll = true; }\r\n        if (!this._isVisible) {\r\n            return;\r\n        }\r\n        var addExtraSpaceOnTop = this._codeEditor.getOption(27 /* find */).addExtraSpaceOnTop;\r\n        if (!addExtraSpaceOnTop) {\r\n            return;\r\n        }\r\n        if (this._viewZone === undefined) {\r\n            this._viewZone = new FindWidgetViewZone(0);\r\n        }\r\n        var viewZone = this._viewZone;\r\n        this._codeEditor.changeViewZones(function (accessor) {\r\n            if (_this._viewZoneId !== undefined) {\r\n                // the view zone already exists, we need to update the height\r\n                var newHeight = _this._getHeight();\r\n                if (newHeight === viewZone.heightInPx) {\r\n                    return;\r\n                }\r\n                var scrollAdjustment = newHeight - viewZone.heightInPx;\r\n                viewZone.heightInPx = newHeight;\r\n                accessor.layoutZone(_this._viewZoneId);\r\n                if (adjustScroll) {\r\n                    _this._codeEditor.setScrollTop(_this._codeEditor.getScrollTop() + scrollAdjustment);\r\n                }\r\n                return;\r\n            }\r\n            else {\r\n                var scrollAdjustment = _this._getHeight();\r\n                viewZone.heightInPx = scrollAdjustment;\r\n                _this._viewZoneId = accessor.addZone(viewZone);\r\n                if (adjustScroll) {\r\n                    _this._codeEditor.setScrollTop(_this._codeEditor.getScrollTop() + scrollAdjustment);\r\n                }\r\n            }\r\n        });\r\n    };\r\n    FindWidget.prototype._removeViewZone = function () {\r\n        var _this = this;\r\n        this._codeEditor.changeViewZones(function (accessor) {\r\n            if (_this._viewZoneId !== undefined) {\r\n                accessor.removeZone(_this._viewZoneId);\r\n                _this._viewZoneId = undefined;\r\n                if (_this._viewZone) {\r\n                    _this._codeEditor.setScrollTop(_this._codeEditor.getScrollTop() - _this._viewZone.heightInPx);\r\n                    _this._viewZone = undefined;\r\n                }\r\n            }\r\n        });\r\n    };\r\n    FindWidget.prototype._applyTheme = function (theme) {\r\n        var inputStyles = {\r\n            inputActiveOptionBorder: theme.getColor(inputActiveOptionBorder),\r\n            inputActiveOptionBackground: theme.getColor(inputActiveOptionBackground),\r\n            inputBackground: theme.getColor(inputBackground),\r\n            inputForeground: theme.getColor(inputForeground),\r\n            inputBorder: theme.getColor(inputBorder),\r\n            inputValidationInfoBackground: theme.getColor(inputValidationInfoBackground),\r\n            inputValidationInfoForeground: theme.getColor(inputValidationInfoForeground),\r\n            inputValidationInfoBorder: theme.getColor(inputValidationInfoBorder),\r\n            inputValidationWarningBackground: theme.getColor(inputValidationWarningBackground),\r\n            inputValidationWarningForeground: theme.getColor(inputValidationWarningForeground),\r\n            inputValidationWarningBorder: theme.getColor(inputValidationWarningBorder),\r\n            inputValidationErrorBackground: theme.getColor(inputValidationErrorBackground),\r\n            inputValidationErrorForeground: theme.getColor(inputValidationErrorForeground),\r\n            inputValidationErrorBorder: theme.getColor(inputValidationErrorBorder),\r\n        };\r\n        this._findInput.style(inputStyles);\r\n        this._replaceInput.style(inputStyles);\r\n        this._toggleSelectionFind.style(inputStyles);\r\n    };\r\n    FindWidget.prototype._tryUpdateWidgetWidth = function () {\r\n        if (!this._isVisible) {\r\n            return;\r\n        }\r\n        if (!dom.isInDOM(this._domNode)) {\r\n            // the widget is not in the DOM\r\n            return;\r\n        }\r\n        var layoutInfo = this._codeEditor.getLayoutInfo();\r\n        var editorContentWidth = layoutInfo.contentWidth;\r\n        if (editorContentWidth <= 0) {\r\n            // for example, diff view original editor\r\n            dom.addClass(this._domNode, 'hiddenEditor');\r\n            return;\r\n        }\r\n        else if (dom.hasClass(this._domNode, 'hiddenEditor')) {\r\n            dom.removeClass(this._domNode, 'hiddenEditor');\r\n        }\r\n        var editorWidth = layoutInfo.width;\r\n        var minimapWidth = layoutInfo.minimapWidth;\r\n        var collapsedFindWidget = false;\r\n        var reducedFindWidget = false;\r\n        var narrowFindWidget = false;\r\n        if (this._resized) {\r\n            var widgetWidth = dom.getTotalWidth(this._domNode);\r\n            if (widgetWidth > FIND_WIDGET_INITIAL_WIDTH) {\r\n                // as the widget is resized by users, we may need to change the max width of the widget as the editor width changes.\r\n                this._domNode.style.maxWidth = editorWidth - 28 - minimapWidth - 15 + \"px\";\r\n                this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\r\n                return;\r\n            }\r\n        }\r\n        if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth >= editorWidth) {\r\n            reducedFindWidget = true;\r\n        }\r\n        if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth - MAX_MATCHES_COUNT_WIDTH >= editorWidth) {\r\n            narrowFindWidget = true;\r\n        }\r\n        if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth - MAX_MATCHES_COUNT_WIDTH >= editorWidth + 50) {\r\n            collapsedFindWidget = true;\r\n        }\r\n        dom.toggleClass(this._domNode, 'collapsed-find-widget', collapsedFindWidget);\r\n        dom.toggleClass(this._domNode, 'narrow-find-widget', narrowFindWidget);\r\n        dom.toggleClass(this._domNode, 'reduced-find-widget', reducedFindWidget);\r\n        if (!narrowFindWidget && !collapsedFindWidget) {\r\n            // the minimal left offset of findwidget is 15px.\r\n            this._domNode.style.maxWidth = editorWidth - 28 - minimapWidth - 15 + \"px\";\r\n        }\r\n        if (this._resized) {\r\n            this._findInput.inputBox.layout();\r\n            var findInputWidth = this._findInput.inputBox.element.clientWidth;\r\n            if (findInputWidth > 0) {\r\n                this._replaceInput.width = findInputWidth;\r\n            }\r\n        }\r\n        else if (this._isReplaceVisible) {\r\n            this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\r\n        }\r\n    };\r\n    FindWidget.prototype._getHeight = function () {\r\n        var totalheight = 0;\r\n        // find input margin top\r\n        totalheight += 4;\r\n        // find input height\r\n        totalheight += this._findInput.inputBox.height + 2 /** input box border */;\r\n        if (this._isReplaceVisible) {\r\n            // replace input margin\r\n            totalheight += 4;\r\n            totalheight += this._replaceInput.inputBox.height + 2 /** input box border */;\r\n        }\r\n        // margin bottom\r\n        totalheight += 4;\r\n        return totalheight;\r\n    };\r\n    FindWidget.prototype._tryUpdateHeight = function () {\r\n        var totalHeight = this._getHeight();\r\n        if (this._cachedHeight !== null && this._cachedHeight === totalHeight) {\r\n            return false;\r\n        }\r\n        this._cachedHeight = totalHeight;\r\n        this._domNode.style.height = totalHeight + \"px\";\r\n        return true;\r\n    };\r\n    // ----- Public\r\n    FindWidget.prototype.focusFindInput = function () {\r\n        this._findInput.select();\r\n        // Edge browser requires focus() in addition to select()\r\n        this._findInput.focus();\r\n    };\r\n    FindWidget.prototype.focusReplaceInput = function () {\r\n        this._replaceInput.select();\r\n        // Edge browser requires focus() in addition to select()\r\n        this._replaceInput.focus();\r\n    };\r\n    FindWidget.prototype.highlightFindOptions = function () {\r\n        this._findInput.highlightFindOptions();\r\n    };\r\n    FindWidget.prototype._updateSearchScope = function () {\r\n        if (!this._codeEditor.hasModel()) {\r\n            return;\r\n        }\r\n        if (this._toggleSelectionFind.checked) {\r\n            var selection = this._codeEditor.getSelection();\r\n            if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\r\n                selection = selection.setEndPosition(selection.endLineNumber - 1, this._codeEditor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\r\n            }\r\n            var currentMatch = this._state.currentMatch;\r\n            if (selection.startLineNumber !== selection.endLineNumber) {\r\n                if (!Range.equalsRange(selection, currentMatch)) {\r\n                    // Reseed find scope\r\n                    this._state.change({ searchScope: selection }, true);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    FindWidget.prototype._onFindInputMouseDown = function (e) {\r\n        // on linux, middle key does pasting.\r\n        if (e.middleButton) {\r\n            e.stopPropagation();\r\n        }\r\n    };\r\n    FindWidget.prototype._onFindInputKeyDown = function (e) {\r\n        if (e.equals(ctrlKeyMod | 3 /* Enter */)) {\r\n            this._findInput.inputBox.insertAtCursor('\\n');\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n        if (e.equals(2 /* Tab */)) {\r\n            if (this._isReplaceVisible) {\r\n                this._replaceInput.focus();\r\n            }\r\n            else {\r\n                this._findInput.focusOnCaseSensitive();\r\n            }\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n        if (e.equals(2048 /* CtrlCmd */ | 18 /* DownArrow */)) {\r\n            this._codeEditor.focus();\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n        if (e.equals(16 /* UpArrow */)) {\r\n            return stopPropagationForMultiLineUpwards(e, this._findInput.getValue(), this._findInput.domNode.querySelector('textarea'));\r\n        }\r\n        if (e.equals(18 /* DownArrow */)) {\r\n            return stopPropagationForMultiLineDownwards(e, this._findInput.getValue(), this._findInput.domNode.querySelector('textarea'));\r\n        }\r\n    };\r\n    FindWidget.prototype._onReplaceInputKeyDown = function (e) {\r\n        if (e.equals(ctrlKeyMod | 3 /* Enter */)) {\r\n            if (platform.isWindows && platform.isNative && !this._ctrlEnterReplaceAllWarningPrompted) {\r\n                // this is the first time when users press Ctrl + Enter to replace all\r\n                this._notificationService.info(nls.localize('ctrlEnter.keybindingChanged', 'Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.'));\r\n                this._ctrlEnterReplaceAllWarningPrompted = true;\r\n                this._storageService.store(ctrlEnterReplaceAllWarningPromptedKey, true, 0 /* GLOBAL */);\r\n            }\r\n            this._replaceInput.inputBox.insertAtCursor('\\n');\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n        if (e.equals(2 /* Tab */)) {\r\n            this._findInput.focusOnCaseSensitive();\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n        if (e.equals(1024 /* Shift */ | 2 /* Tab */)) {\r\n            this._findInput.focus();\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n        if (e.equals(2048 /* CtrlCmd */ | 18 /* DownArrow */)) {\r\n            this._codeEditor.focus();\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n        if (e.equals(16 /* UpArrow */)) {\r\n            return stopPropagationForMultiLineUpwards(e, this._replaceInput.inputBox.value, this._replaceInput.inputBox.element.querySelector('textarea'));\r\n        }\r\n        if (e.equals(18 /* DownArrow */)) {\r\n            return stopPropagationForMultiLineDownwards(e, this._replaceInput.inputBox.value, this._replaceInput.inputBox.element.querySelector('textarea'));\r\n        }\r\n    };\r\n    // ----- sash\r\n    FindWidget.prototype.getHorizontalSashTop = function (_sash) {\r\n        return 0;\r\n    };\r\n    FindWidget.prototype.getHorizontalSashLeft = function (_sash) {\r\n        return 0;\r\n    };\r\n    FindWidget.prototype.getHorizontalSashWidth = function (_sash) {\r\n        return 500;\r\n    };\r\n    // ----- initialization\r\n    FindWidget.prototype._keybindingLabelFor = function (actionId) {\r\n        var kb = this._keybindingService.lookupKeybinding(actionId);\r\n        if (!kb) {\r\n            return '';\r\n        }\r\n        return \" (\" + kb.getLabel() + \")\";\r\n    };\r\n    FindWidget.prototype._buildDomNode = function () {\r\n        var _this = this;\r\n        var flexibleHeight = true;\r\n        var flexibleWidth = true;\r\n        // Find input\r\n        this._findInput = this._register(new ContextScopedFindInput(null, this._contextViewProvider, {\r\n            width: FIND_INPUT_AREA_WIDTH,\r\n            label: NLS_FIND_INPUT_LABEL,\r\n            placeholder: NLS_FIND_INPUT_PLACEHOLDER,\r\n            appendCaseSensitiveLabel: this._keybindingLabelFor(FIND_IDS.ToggleCaseSensitiveCommand),\r\n            appendWholeWordsLabel: this._keybindingLabelFor(FIND_IDS.ToggleWholeWordCommand),\r\n            appendRegexLabel: this._keybindingLabelFor(FIND_IDS.ToggleRegexCommand),\r\n            validation: function (value) {\r\n                if (value.length === 0 || !_this._findInput.getRegex()) {\r\n                    return null;\r\n                }\r\n                try {\r\n                    /* tslint:disable-next-line:no-unused-expression */\r\n                    new RegExp(value);\r\n                    return null;\r\n                }\r\n                catch (e) {\r\n                    return { content: e.message };\r\n                }\r\n            },\r\n            flexibleHeight: flexibleHeight,\r\n            flexibleWidth: flexibleWidth,\r\n            flexibleMaxHeight: 118\r\n        }, this._contextKeyService, true));\r\n        this._findInput.setRegex(!!this._state.isRegex);\r\n        this._findInput.setCaseSensitive(!!this._state.matchCase);\r\n        this._findInput.setWholeWords(!!this._state.wholeWord);\r\n        this._register(this._findInput.onKeyDown(function (e) { return _this._onFindInputKeyDown(e); }));\r\n        this._register(this._findInput.inputBox.onDidChange(function () {\r\n            if (_this._ignoreChangeEvent) {\r\n                return;\r\n            }\r\n            _this._state.change({ searchString: _this._findInput.getValue() }, true);\r\n        }));\r\n        this._register(this._findInput.onDidOptionChange(function () {\r\n            _this._state.change({\r\n                isRegex: _this._findInput.getRegex(),\r\n                wholeWord: _this._findInput.getWholeWords(),\r\n                matchCase: _this._findInput.getCaseSensitive()\r\n            }, true);\r\n        }));\r\n        this._register(this._findInput.onCaseSensitiveKeyDown(function (e) {\r\n            if (e.equals(1024 /* Shift */ | 2 /* Tab */)) {\r\n                if (_this._isReplaceVisible) {\r\n                    _this._replaceInput.focus();\r\n                    e.preventDefault();\r\n                }\r\n            }\r\n        }));\r\n        this._register(this._findInput.onRegexKeyDown(function (e) {\r\n            if (e.equals(2 /* Tab */)) {\r\n                if (_this._isReplaceVisible) {\r\n                    _this._replaceInput.focusOnPreserve();\r\n                    e.preventDefault();\r\n                }\r\n            }\r\n        }));\r\n        this._register(this._findInput.inputBox.onDidHeightChange(function (e) {\r\n            if (_this._tryUpdateHeight()) {\r\n                _this._showViewZone();\r\n            }\r\n        }));\r\n        if (platform.isLinux) {\r\n            this._register(this._findInput.onMouseDown(function (e) { return _this._onFindInputMouseDown(e); }));\r\n        }\r\n        this._matchesCount = document.createElement('div');\r\n        this._matchesCount.className = 'matchesCount';\r\n        this._updateMatchesCount();\r\n        // Previous button\r\n        this._prevBtn = this._register(new SimpleButton({\r\n            label: NLS_PREVIOUS_MATCH_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.PreviousMatchFindAction),\r\n            className: 'codicon codicon-arrow-up',\r\n            onTrigger: function () {\r\n                _this._codeEditor.getAction(FIND_IDS.PreviousMatchFindAction).run().then(undefined, onUnexpectedError);\r\n            }\r\n        }));\r\n        // Next button\r\n        this._nextBtn = this._register(new SimpleButton({\r\n            label: NLS_NEXT_MATCH_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.NextMatchFindAction),\r\n            className: 'codicon codicon-arrow-down',\r\n            onTrigger: function () {\r\n                _this._codeEditor.getAction(FIND_IDS.NextMatchFindAction).run().then(undefined, onUnexpectedError);\r\n            }\r\n        }));\r\n        var findPart = document.createElement('div');\r\n        findPart.className = 'find-part';\r\n        findPart.appendChild(this._findInput.domNode);\r\n        var actionsContainer = document.createElement('div');\r\n        actionsContainer.className = 'find-actions';\r\n        findPart.appendChild(actionsContainer);\r\n        actionsContainer.appendChild(this._matchesCount);\r\n        actionsContainer.appendChild(this._prevBtn.domNode);\r\n        actionsContainer.appendChild(this._nextBtn.domNode);\r\n        // Toggle selection button\r\n        this._toggleSelectionFind = this._register(new Checkbox({\r\n            actionClassName: 'codicon codicon-selection',\r\n            title: NLS_TOGGLE_SELECTION_FIND_TITLE + this._keybindingLabelFor(FIND_IDS.ToggleSearchScopeCommand),\r\n            isChecked: false\r\n        }));\r\n        this._register(this._toggleSelectionFind.onChange(function () {\r\n            if (_this._toggleSelectionFind.checked) {\r\n                if (_this._codeEditor.hasModel()) {\r\n                    var selection = _this._codeEditor.getSelection();\r\n                    if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\r\n                        selection = selection.setEndPosition(selection.endLineNumber - 1, _this._codeEditor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\r\n                    }\r\n                    if (!selection.isEmpty()) {\r\n                        _this._state.change({ searchScope: selection }, true);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                _this._state.change({ searchScope: null }, true);\r\n            }\r\n        }));\r\n        actionsContainer.appendChild(this._toggleSelectionFind.domNode);\r\n        // Close button\r\n        this._closeBtn = this._register(new SimpleButton({\r\n            label: NLS_CLOSE_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.CloseFindWidgetCommand),\r\n            className: 'codicon codicon-close',\r\n            onTrigger: function () {\r\n                _this._state.change({ isRevealed: false, searchScope: null }, false);\r\n            },\r\n            onKeyDown: function (e) {\r\n                if (e.equals(2 /* Tab */)) {\r\n                    if (_this._isReplaceVisible) {\r\n                        if (_this._replaceBtn.isEnabled()) {\r\n                            _this._replaceBtn.focus();\r\n                        }\r\n                        else {\r\n                            _this._codeEditor.focus();\r\n                        }\r\n                        e.preventDefault();\r\n                    }\r\n                }\r\n            }\r\n        }));\r\n        actionsContainer.appendChild(this._closeBtn.domNode);\r\n        // Replace input\r\n        this._replaceInput = this._register(new ContextScopedReplaceInput(null, undefined, {\r\n            label: NLS_REPLACE_INPUT_LABEL,\r\n            placeholder: NLS_REPLACE_INPUT_PLACEHOLDER,\r\n            history: [],\r\n            flexibleHeight: flexibleHeight,\r\n            flexibleWidth: flexibleWidth,\r\n            flexibleMaxHeight: 118\r\n        }, this._contextKeyService, true));\r\n        this._replaceInput.setPreserveCase(!!this._state.preserveCase);\r\n        this._register(this._replaceInput.onKeyDown(function (e) { return _this._onReplaceInputKeyDown(e); }));\r\n        this._register(this._replaceInput.inputBox.onDidChange(function () {\r\n            _this._state.change({ replaceString: _this._replaceInput.inputBox.value }, false);\r\n        }));\r\n        this._register(this._replaceInput.inputBox.onDidHeightChange(function (e) {\r\n            if (_this._isReplaceVisible && _this._tryUpdateHeight()) {\r\n                _this._showViewZone();\r\n            }\r\n        }));\r\n        this._register(this._replaceInput.onDidOptionChange(function () {\r\n            _this._state.change({\r\n                preserveCase: _this._replaceInput.getPreserveCase()\r\n            }, true);\r\n        }));\r\n        this._register(this._replaceInput.onPreserveCaseKeyDown(function (e) {\r\n            if (e.equals(2 /* Tab */)) {\r\n                if (_this._prevBtn.isEnabled()) {\r\n                    _this._prevBtn.focus();\r\n                }\r\n                else if (_this._nextBtn.isEnabled()) {\r\n                    _this._nextBtn.focus();\r\n                }\r\n                else if (_this._toggleSelectionFind.enabled) {\r\n                    _this._toggleSelectionFind.focus();\r\n                }\r\n                else if (_this._closeBtn.isEnabled()) {\r\n                    _this._closeBtn.focus();\r\n                }\r\n                e.preventDefault();\r\n            }\r\n        }));\r\n        // Replace one button\r\n        this._replaceBtn = this._register(new SimpleButton({\r\n            label: NLS_REPLACE_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.ReplaceOneAction),\r\n            className: 'codicon codicon-replace',\r\n            onTrigger: function () {\r\n                _this._controller.replace();\r\n            },\r\n            onKeyDown: function (e) {\r\n                if (e.equals(1024 /* Shift */ | 2 /* Tab */)) {\r\n                    _this._closeBtn.focus();\r\n                    e.preventDefault();\r\n                }\r\n            }\r\n        }));\r\n        // Replace all button\r\n        this._replaceAllBtn = this._register(new SimpleButton({\r\n            label: NLS_REPLACE_ALL_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.ReplaceAllAction),\r\n            className: 'codicon codicon-replace-all',\r\n            onTrigger: function () {\r\n                _this._controller.replaceAll();\r\n            }\r\n        }));\r\n        var replacePart = document.createElement('div');\r\n        replacePart.className = 'replace-part';\r\n        replacePart.appendChild(this._replaceInput.domNode);\r\n        var replaceActionsContainer = document.createElement('div');\r\n        replaceActionsContainer.className = 'replace-actions';\r\n        replacePart.appendChild(replaceActionsContainer);\r\n        replaceActionsContainer.appendChild(this._replaceBtn.domNode);\r\n        replaceActionsContainer.appendChild(this._replaceAllBtn.domNode);\r\n        // Toggle replace button\r\n        this._toggleReplaceBtn = this._register(new SimpleButton({\r\n            label: NLS_TOGGLE_REPLACE_MODE_BTN_LABEL,\r\n            className: 'codicon toggle left',\r\n            onTrigger: function () {\r\n                _this._state.change({ isReplaceRevealed: !_this._isReplaceVisible }, false);\r\n                if (_this._isReplaceVisible) {\r\n                    _this._replaceInput.width = dom.getTotalWidth(_this._findInput.domNode);\r\n                    _this._replaceInput.inputBox.layout();\r\n                }\r\n                _this._showViewZone();\r\n            }\r\n        }));\r\n        this._toggleReplaceBtn.toggleClass('codicon-chevron-down', this._isReplaceVisible);\r\n        this._toggleReplaceBtn.toggleClass('codicon-chevron-right', !this._isReplaceVisible);\r\n        this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);\r\n        // Widget\r\n        this._domNode = document.createElement('div');\r\n        this._domNode.className = 'editor-widget find-widget';\r\n        this._domNode.setAttribute('aria-hidden', 'true');\r\n        // We need to set this explicitly, otherwise on IE11, the width inheritence of flex doesn't work.\r\n        this._domNode.style.width = FIND_WIDGET_INITIAL_WIDTH + \"px\";\r\n        this._domNode.appendChild(this._toggleReplaceBtn.domNode);\r\n        this._domNode.appendChild(findPart);\r\n        this._domNode.appendChild(replacePart);\r\n        this._resizeSash = new Sash(this._domNode, this, { orientation: 0 /* VERTICAL */ });\r\n        this._resized = false;\r\n        var originalWidth = FIND_WIDGET_INITIAL_WIDTH;\r\n        this._register(this._resizeSash.onDidStart(function () {\r\n            originalWidth = dom.getTotalWidth(_this._domNode);\r\n        }));\r\n        this._register(this._resizeSash.onDidChange(function (evt) {\r\n            _this._resized = true;\r\n            var width = originalWidth + evt.startX - evt.currentX;\r\n            if (width < FIND_WIDGET_INITIAL_WIDTH) {\r\n                // narrow down the find widget should be handled by CSS.\r\n                return;\r\n            }\r\n            var maxWidth = parseFloat(dom.getComputedStyle(_this._domNode).maxWidth) || 0;\r\n            if (width > maxWidth) {\r\n                return;\r\n            }\r\n            _this._domNode.style.width = width + \"px\";\r\n            if (_this._isReplaceVisible) {\r\n                _this._replaceInput.width = dom.getTotalWidth(_this._findInput.domNode);\r\n            }\r\n            _this._findInput.inputBox.layout();\r\n            _this._tryUpdateHeight();\r\n        }));\r\n        this._register(this._resizeSash.onDidReset(function () {\r\n            // users double click on the sash\r\n            var currentWidth = dom.getTotalWidth(_this._domNode);\r\n            if (currentWidth < FIND_WIDGET_INITIAL_WIDTH) {\r\n                // The editor is narrow and the width of the find widget is controlled fully by CSS.\r\n                return;\r\n            }\r\n            var width = FIND_WIDGET_INITIAL_WIDTH;\r\n            if (!_this._resized || currentWidth === FIND_WIDGET_INITIAL_WIDTH) {\r\n                // 1. never resized before, double click should maximizes it\r\n                // 2. users resized it already but its width is the same as default\r\n                var layoutInfo = _this._codeEditor.getLayoutInfo();\r\n                width = layoutInfo.width - 28 - layoutInfo.minimapWidth - 15;\r\n                _this._resized = true;\r\n            }\r\n            else {\r\n                /**\r\n                 * no op, the find widget should be shrinked to its default size.\r\n                 */\r\n            }\r\n            _this._domNode.style.width = width + \"px\";\r\n            if (_this._isReplaceVisible) {\r\n                _this._replaceInput.width = dom.getTotalWidth(_this._findInput.domNode);\r\n            }\r\n            _this._findInput.inputBox.layout();\r\n        }));\r\n    };\r\n    FindWidget.prototype.updateAccessibilitySupport = function () {\r\n        var value = this._codeEditor.getOption(2 /* accessibilitySupport */);\r\n        this._findInput.setFocusInputOnOptionClick(value !== 2 /* Enabled */);\r\n    };\r\n    FindWidget.ID = 'editor.contrib.findWidget';\r\n    return FindWidget;\r\n}(Widget));\r\nexport { FindWidget };\r\nvar SimpleButton = /** @class */ (function (_super) {\r\n    __extends(SimpleButton, _super);\r\n    function SimpleButton(opts) {\r\n        var _this = _super.call(this) || this;\r\n        _this._opts = opts;\r\n        _this._domNode = document.createElement('div');\r\n        _this._domNode.title = _this._opts.label;\r\n        _this._domNode.tabIndex = 0;\r\n        _this._domNode.className = 'button ' + _this._opts.className;\r\n        _this._domNode.setAttribute('role', 'button');\r\n        _this._domNode.setAttribute('aria-label', _this._opts.label);\r\n        _this.onclick(_this._domNode, function (e) {\r\n            _this._opts.onTrigger();\r\n            e.preventDefault();\r\n        });\r\n        _this.onkeydown(_this._domNode, function (e) {\r\n            if (e.equals(10 /* Space */) || e.equals(3 /* Enter */)) {\r\n                _this._opts.onTrigger();\r\n                e.preventDefault();\r\n                return;\r\n            }\r\n            if (_this._opts.onKeyDown) {\r\n                _this._opts.onKeyDown(e);\r\n            }\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(SimpleButton.prototype, \"domNode\", {\r\n        get: function () {\r\n            return this._domNode;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SimpleButton.prototype.isEnabled = function () {\r\n        return (this._domNode.tabIndex >= 0);\r\n    };\r\n    SimpleButton.prototype.focus = function () {\r\n        this._domNode.focus();\r\n    };\r\n    SimpleButton.prototype.setEnabled = function (enabled) {\r\n        dom.toggleClass(this._domNode, 'disabled', !enabled);\r\n        this._domNode.setAttribute('aria-disabled', String(!enabled));\r\n        this._domNode.tabIndex = enabled ? 0 : -1;\r\n    };\r\n    SimpleButton.prototype.setExpanded = function (expanded) {\r\n        this._domNode.setAttribute('aria-expanded', String(!!expanded));\r\n    };\r\n    SimpleButton.prototype.toggleClass = function (className, shouldHaveIt) {\r\n        dom.toggleClass(this._domNode, className, shouldHaveIt);\r\n    };\r\n    return SimpleButton;\r\n}(Widget));\r\nexport { SimpleButton };\r\n// theming\r\nregisterThemingParticipant(function (theme, collector) {\r\n    var addBackgroundColorRule = function (selector, color) {\r\n        if (color) {\r\n            collector.addRule(\".monaco-editor \" + selector + \" { background-color: \" + color + \"; }\");\r\n        }\r\n    };\r\n    addBackgroundColorRule('.findMatch', theme.getColor(editorFindMatchHighlight));\r\n    addBackgroundColorRule('.currentFindMatch', theme.getColor(editorFindMatch));\r\n    addBackgroundColorRule('.findScope', theme.getColor(editorFindRangeHighlight));\r\n    var widgetBackground = theme.getColor(editorWidgetBackground);\r\n    addBackgroundColorRule('.find-widget', widgetBackground);\r\n    var widgetShadowColor = theme.getColor(widgetShadow);\r\n    if (widgetShadowColor) {\r\n        collector.addRule(\".monaco-editor .find-widget { box-shadow: 0 2px 8px \" + widgetShadowColor + \"; }\");\r\n    }\r\n    var findMatchHighlightBorder = theme.getColor(editorFindMatchHighlightBorder);\r\n    if (findMatchHighlightBorder) {\r\n        collector.addRule(\".monaco-editor .findMatch { border: 1px \" + (theme.type === 'hc' ? 'dotted' : 'solid') + \" \" + findMatchHighlightBorder + \"; box-sizing: border-box; }\");\r\n    }\r\n    var findMatchBorder = theme.getColor(editorFindMatchBorder);\r\n    if (findMatchBorder) {\r\n        collector.addRule(\".monaco-editor .currentFindMatch { border: 2px solid \" + findMatchBorder + \"; padding: 1px; box-sizing: border-box; }\");\r\n    }\r\n    var findRangeHighlightBorder = theme.getColor(editorFindRangeHighlightBorder);\r\n    if (findRangeHighlightBorder) {\r\n        collector.addRule(\".monaco-editor .findScope { border: 1px \" + (theme.type === 'hc' ? 'dashed' : 'solid') + \" \" + findRangeHighlightBorder + \"; }\");\r\n    }\r\n    var hcBorder = theme.getColor(contrastBorder);\r\n    if (hcBorder) {\r\n        collector.addRule(\".monaco-editor .find-widget { border: 1px solid \" + hcBorder + \"; }\");\r\n    }\r\n    var foreground = theme.getColor(editorWidgetForeground);\r\n    if (foreground) {\r\n        collector.addRule(\".monaco-editor .find-widget { color: \" + foreground + \"; }\");\r\n    }\r\n    var error = theme.getColor(errorForeground);\r\n    if (error) {\r\n        collector.addRule(\".monaco-editor .find-widget.no-results .matchesCount { color: \" + error + \"; }\");\r\n    }\r\n    var resizeBorderBackground = theme.getColor(editorWidgetResizeBorder);\r\n    if (resizeBorderBackground) {\r\n        collector.addRule(\".monaco-editor .find-widget .monaco-sash { background-color: \" + resizeBorderBackground + \"; width: 3px !important; margin-left: -4px;}\");\r\n    }\r\n    else {\r\n        var border = theme.getColor(editorWidgetBorder);\r\n        if (border) {\r\n            collector.addRule(\".monaco-editor .find-widget .monaco-sash { background-color: \" + border + \"; width: 3px !important; margin-left: -4px;}\");\r\n        }\r\n    }\r\n    // This rule is used to override the outline color for synthetic-focus find input.\r\n    var focusOutline = theme.getColor(focusBorder);\r\n    if (focusOutline) {\r\n        collector.addRule(\".monaco-workbench .monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: \" + focusOutline + \"; }\");\r\n    }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport * as nls from '../../../nls.js';\r\nimport { Delayer } from '../../../base/common/async.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport * as strings from '../../../base/common/strings.js';\r\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../browser/editorExtensions.js';\r\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\r\nimport { CONTEXT_FIND_INPUT_FOCUSED, CONTEXT_FIND_WIDGET_VISIBLE, FIND_IDS, FindModelBoundToEditorModel, ToggleCaseSensitiveKeybinding, ToggleRegexKeybinding, ToggleSearchScopeKeybinding, ToggleWholeWordKeybinding, CONTEXT_REPLACE_INPUT_FOCUSED } from './findModel.js';\r\nimport { FindOptionsWidget } from './findOptionsWidget.js';\r\nimport { FindReplaceState } from './findState.js';\r\nimport { FindWidget } from './findWidget.js';\r\nimport { IClipboardService } from '../../../platform/clipboard/common/clipboardService.js';\r\nimport { IContextKeyService, ContextKeyExpr } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { IContextViewService } from '../../../platform/contextview/browser/contextView.js';\r\nimport { optional } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\r\nimport { IStorageService } from '../../../platform/storage/common/storage.js';\r\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\r\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\r\nvar SEARCH_STRING_MAX_LENGTH = 524288;\r\nexport function getSelectionSearchString(editor) {\r\n    if (!editor.hasModel()) {\r\n        return null;\r\n    }\r\n    var selection = editor.getSelection();\r\n    // if selection spans multiple lines, default search string to empty\r\n    if (selection.startLineNumber === selection.endLineNumber) {\r\n        if (selection.isEmpty()) {\r\n            var wordAtPosition = editor.getModel().getWordAtPosition(selection.getStartPosition());\r\n            if (wordAtPosition) {\r\n                return wordAtPosition.word;\r\n            }\r\n        }\r\n        else {\r\n            if (editor.getModel().getValueLengthInRange(selection) < SEARCH_STRING_MAX_LENGTH) {\r\n                return editor.getModel().getValueInRange(selection);\r\n            }\r\n        }\r\n    }\r\n    return null;\r\n}\r\nvar CommonFindController = /** @class */ (function (_super) {\r\n    __extends(CommonFindController, _super);\r\n    function CommonFindController(editor, contextKeyService, storageService, clipboardService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._editor = editor;\r\n        _this._findWidgetVisible = CONTEXT_FIND_WIDGET_VISIBLE.bindTo(contextKeyService);\r\n        _this._contextKeyService = contextKeyService;\r\n        _this._storageService = storageService;\r\n        _this._clipboardService = clipboardService;\r\n        _this._updateHistoryDelayer = new Delayer(500);\r\n        _this._state = _this._register(new FindReplaceState());\r\n        _this.loadQueryState();\r\n        _this._register(_this._state.onFindReplaceStateChange(function (e) { return _this._onStateChanged(e); }));\r\n        _this._model = null;\r\n        _this._register(_this._editor.onDidChangeModel(function () {\r\n            var shouldRestartFind = (_this._editor.getModel() && _this._state.isRevealed);\r\n            _this.disposeModel();\r\n            _this._state.change({\r\n                searchScope: null,\r\n                matchCase: _this._storageService.getBoolean('editor.matchCase', 1 /* WORKSPACE */, false),\r\n                wholeWord: _this._storageService.getBoolean('editor.wholeWord', 1 /* WORKSPACE */, false),\r\n                isRegex: _this._storageService.getBoolean('editor.isRegex', 1 /* WORKSPACE */, false),\r\n                preserveCase: _this._storageService.getBoolean('editor.preserveCase', 1 /* WORKSPACE */, false)\r\n            }, false);\r\n            if (shouldRestartFind) {\r\n                _this._start({\r\n                    forceRevealReplace: false,\r\n                    seedSearchStringFromSelection: false && _this._editor.getOption(27 /* find */).seedSearchStringFromSelection,\r\n                    seedSearchStringFromGlobalClipboard: false,\r\n                    shouldFocus: 0 /* NoFocusChange */,\r\n                    shouldAnimate: false,\r\n                    updateSearchScope: false\r\n                });\r\n            }\r\n        }));\r\n        return _this;\r\n    }\r\n    CommonFindController.get = function (editor) {\r\n        return editor.getContribution(CommonFindController.ID);\r\n    };\r\n    CommonFindController.prototype.dispose = function () {\r\n        this.disposeModel();\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    CommonFindController.prototype.disposeModel = function () {\r\n        if (this._model) {\r\n            this._model.dispose();\r\n            this._model = null;\r\n        }\r\n    };\r\n    CommonFindController.prototype._onStateChanged = function (e) {\r\n        this.saveQueryState(e);\r\n        if (e.isRevealed) {\r\n            if (this._state.isRevealed) {\r\n                this._findWidgetVisible.set(true);\r\n            }\r\n            else {\r\n                this._findWidgetVisible.reset();\r\n                this.disposeModel();\r\n            }\r\n        }\r\n        if (e.searchString) {\r\n            this.setGlobalBufferTerm(this._state.searchString);\r\n        }\r\n    };\r\n    CommonFindController.prototype.saveQueryState = function (e) {\r\n        if (e.isRegex) {\r\n            this._storageService.store('editor.isRegex', this._state.actualIsRegex, 1 /* WORKSPACE */);\r\n        }\r\n        if (e.wholeWord) {\r\n            this._storageService.store('editor.wholeWord', this._state.actualWholeWord, 1 /* WORKSPACE */);\r\n        }\r\n        if (e.matchCase) {\r\n            this._storageService.store('editor.matchCase', this._state.actualMatchCase, 1 /* WORKSPACE */);\r\n        }\r\n        if (e.preserveCase) {\r\n            this._storageService.store('editor.preserveCase', this._state.actualPreserveCase, 1 /* WORKSPACE */);\r\n        }\r\n    };\r\n    CommonFindController.prototype.loadQueryState = function () {\r\n        this._state.change({\r\n            matchCase: this._storageService.getBoolean('editor.matchCase', 1 /* WORKSPACE */, this._state.matchCase),\r\n            wholeWord: this._storageService.getBoolean('editor.wholeWord', 1 /* WORKSPACE */, this._state.wholeWord),\r\n            isRegex: this._storageService.getBoolean('editor.isRegex', 1 /* WORKSPACE */, this._state.isRegex),\r\n            preserveCase: this._storageService.getBoolean('editor.preserveCase', 1 /* WORKSPACE */, this._state.preserveCase)\r\n        }, false);\r\n    };\r\n    CommonFindController.prototype.isFindInputFocused = function () {\r\n        return !!CONTEXT_FIND_INPUT_FOCUSED.getValue(this._contextKeyService);\r\n    };\r\n    CommonFindController.prototype.getState = function () {\r\n        return this._state;\r\n    };\r\n    CommonFindController.prototype.closeFindWidget = function () {\r\n        this._state.change({\r\n            isRevealed: false,\r\n            searchScope: null\r\n        }, false);\r\n        this._editor.focus();\r\n    };\r\n    CommonFindController.prototype.toggleCaseSensitive = function () {\r\n        this._state.change({ matchCase: !this._state.matchCase }, false);\r\n        if (!this._state.isRevealed) {\r\n            this.highlightFindOptions();\r\n        }\r\n    };\r\n    CommonFindController.prototype.toggleWholeWords = function () {\r\n        this._state.change({ wholeWord: !this._state.wholeWord }, false);\r\n        if (!this._state.isRevealed) {\r\n            this.highlightFindOptions();\r\n        }\r\n    };\r\n    CommonFindController.prototype.toggleRegex = function () {\r\n        this._state.change({ isRegex: !this._state.isRegex }, false);\r\n        if (!this._state.isRevealed) {\r\n            this.highlightFindOptions();\r\n        }\r\n    };\r\n    CommonFindController.prototype.toggleSearchScope = function () {\r\n        if (this._state.searchScope) {\r\n            this._state.change({ searchScope: null }, true);\r\n        }\r\n        else {\r\n            if (this._editor.hasModel()) {\r\n                var selection = this._editor.getSelection();\r\n                if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\r\n                    selection = selection.setEndPosition(selection.endLineNumber - 1, this._editor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\r\n                }\r\n                if (!selection.isEmpty()) {\r\n                    this._state.change({ searchScope: selection }, true);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    CommonFindController.prototype.setSearchString = function (searchString) {\r\n        if (this._state.isRegex) {\r\n            searchString = strings.escapeRegExpCharacters(searchString);\r\n        }\r\n        this._state.change({ searchString: searchString }, false);\r\n    };\r\n    CommonFindController.prototype.highlightFindOptions = function () {\r\n        // overwritten in subclass\r\n    };\r\n    CommonFindController.prototype._start = function (opts) {\r\n        this.disposeModel();\r\n        if (!this._editor.hasModel()) {\r\n            // cannot do anything with an editor that doesn't have a model...\r\n            return;\r\n        }\r\n        var stateChanges = {\r\n            isRevealed: true\r\n        };\r\n        if (opts.seedSearchStringFromSelection) {\r\n            var selectionSearchString = getSelectionSearchString(this._editor);\r\n            if (selectionSearchString) {\r\n                if (this._state.isRegex) {\r\n                    stateChanges.searchString = strings.escapeRegExpCharacters(selectionSearchString);\r\n                }\r\n                else {\r\n                    stateChanges.searchString = selectionSearchString;\r\n                }\r\n            }\r\n        }\r\n        if (!stateChanges.searchString && opts.seedSearchStringFromGlobalClipboard) {\r\n            var selectionSearchString = this.getGlobalBufferTerm();\r\n            if (selectionSearchString) {\r\n                stateChanges.searchString = selectionSearchString;\r\n            }\r\n        }\r\n        // Overwrite isReplaceRevealed\r\n        if (opts.forceRevealReplace) {\r\n            stateChanges.isReplaceRevealed = true;\r\n        }\r\n        else if (!this._findWidgetVisible.get()) {\r\n            stateChanges.isReplaceRevealed = false;\r\n        }\r\n        if (opts.updateSearchScope) {\r\n            var currentSelection = this._editor.getSelection();\r\n            if (!currentSelection.isEmpty()) {\r\n                stateChanges.searchScope = currentSelection;\r\n            }\r\n        }\r\n        this._state.change(stateChanges, false);\r\n        if (!this._model) {\r\n            this._model = new FindModelBoundToEditorModel(this._editor, this._state);\r\n        }\r\n    };\r\n    CommonFindController.prototype.start = function (opts) {\r\n        this._start(opts);\r\n    };\r\n    CommonFindController.prototype.moveToNextMatch = function () {\r\n        if (this._model) {\r\n            this._model.moveToNextMatch();\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    CommonFindController.prototype.moveToPrevMatch = function () {\r\n        if (this._model) {\r\n            this._model.moveToPrevMatch();\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    CommonFindController.prototype.replace = function () {\r\n        if (this._model) {\r\n            this._model.replace();\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    CommonFindController.prototype.replaceAll = function () {\r\n        if (this._model) {\r\n            this._model.replaceAll();\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    CommonFindController.prototype.selectAllMatches = function () {\r\n        if (this._model) {\r\n            this._model.selectAllMatches();\r\n            this._editor.focus();\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    CommonFindController.prototype.getGlobalBufferTerm = function () {\r\n        if (this._editor.getOption(27 /* find */).globalFindClipboard\r\n            && this._clipboardService\r\n            && this._editor.hasModel()\r\n            && !this._editor.getModel().isTooLargeForSyncing()) {\r\n            return this._clipboardService.readFindText();\r\n        }\r\n        return '';\r\n    };\r\n    CommonFindController.prototype.setGlobalBufferTerm = function (text) {\r\n        if (this._editor.getOption(27 /* find */).globalFindClipboard\r\n            && this._clipboardService\r\n            && this._editor.hasModel()\r\n            && !this._editor.getModel().isTooLargeForSyncing()) {\r\n            this._clipboardService.writeFindText(text);\r\n        }\r\n    };\r\n    CommonFindController.ID = 'editor.contrib.findController';\r\n    CommonFindController = __decorate([\r\n        __param(1, IContextKeyService),\r\n        __param(2, IStorageService),\r\n        __param(3, IClipboardService)\r\n    ], CommonFindController);\r\n    return CommonFindController;\r\n}(Disposable));\r\nexport { CommonFindController };\r\nvar FindController = /** @class */ (function (_super) {\r\n    __extends(FindController, _super);\r\n    function FindController(editor, _contextViewService, _contextKeyService, _keybindingService, _themeService, _notificationService, _storageService, clipboardService) {\r\n        var _this = _super.call(this, editor, _contextKeyService, _storageService, clipboardService) || this;\r\n        _this._contextViewService = _contextViewService;\r\n        _this._keybindingService = _keybindingService;\r\n        _this._themeService = _themeService;\r\n        _this._notificationService = _notificationService;\r\n        _this._widget = null;\r\n        _this._findOptionsWidget = null;\r\n        return _this;\r\n    }\r\n    FindController.prototype._start = function (opts) {\r\n        if (!this._widget) {\r\n            this._createFindWidget();\r\n        }\r\n        var selection = this._editor.getSelection();\r\n        var updateSearchScope = false;\r\n        switch (this._editor.getOption(27 /* find */).autoFindInSelection) {\r\n            case 'always':\r\n                updateSearchScope = true;\r\n                break;\r\n            case 'never':\r\n                updateSearchScope = false;\r\n                break;\r\n            case 'multiline':\r\n                var isSelectionMultipleLine = !!selection && selection.startLineNumber !== selection.endLineNumber;\r\n                updateSearchScope = isSelectionMultipleLine;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        opts.updateSearchScope = updateSearchScope;\r\n        _super.prototype._start.call(this, opts);\r\n        if (opts.shouldFocus === 2 /* FocusReplaceInput */) {\r\n            this._widget.focusReplaceInput();\r\n        }\r\n        else if (opts.shouldFocus === 1 /* FocusFindInput */) {\r\n            this._widget.focusFindInput();\r\n        }\r\n    };\r\n    FindController.prototype.highlightFindOptions = function () {\r\n        if (!this._widget) {\r\n            this._createFindWidget();\r\n        }\r\n        if (this._state.isRevealed) {\r\n            this._widget.highlightFindOptions();\r\n        }\r\n        else {\r\n            this._findOptionsWidget.highlightFindOptions();\r\n        }\r\n    };\r\n    FindController.prototype._createFindWidget = function () {\r\n        this._widget = this._register(new FindWidget(this._editor, this, this._state, this._contextViewService, this._keybindingService, this._contextKeyService, this._themeService, this._storageService, this._notificationService));\r\n        this._findOptionsWidget = this._register(new FindOptionsWidget(this._editor, this._state, this._keybindingService, this._themeService));\r\n    };\r\n    FindController = __decorate([\r\n        __param(1, IContextViewService),\r\n        __param(2, IContextKeyService),\r\n        __param(3, IKeybindingService),\r\n        __param(4, IThemeService),\r\n        __param(5, INotificationService),\r\n        __param(6, IStorageService),\r\n        __param(7, optional(IClipboardService))\r\n    ], FindController);\r\n    return FindController;\r\n}(CommonFindController));\r\nexport { FindController };\r\nvar StartFindAction = /** @class */ (function (_super) {\r\n    __extends(StartFindAction, _super);\r\n    function StartFindAction() {\r\n        return _super.call(this, {\r\n            id: FIND_IDS.StartFindAction,\r\n            label: nls.localize('startFindAction', \"Find\"),\r\n            alias: 'Find',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: null,\r\n                primary: 2048 /* CtrlCmd */ | 36 /* KEY_F */,\r\n                weight: 100 /* EditorContrib */\r\n            },\r\n            menuOpts: {\r\n                menuId: 15 /* MenubarEditMenu */,\r\n                group: '3_find',\r\n                title: nls.localize({ key: 'miFind', comment: ['&& denotes a mnemonic'] }, \"&&Find\"),\r\n                order: 1\r\n            }\r\n        }) || this;\r\n    }\r\n    StartFindAction.prototype.run = function (accessor, editor) {\r\n        var controller = CommonFindController.get(editor);\r\n        if (controller) {\r\n            controller.start({\r\n                forceRevealReplace: false,\r\n                seedSearchStringFromSelection: editor.getOption(27 /* find */).seedSearchStringFromSelection,\r\n                seedSearchStringFromGlobalClipboard: editor.getOption(27 /* find */).globalFindClipboard,\r\n                shouldFocus: 1 /* FocusFindInput */,\r\n                shouldAnimate: true,\r\n                updateSearchScope: false\r\n            });\r\n        }\r\n    };\r\n    return StartFindAction;\r\n}(EditorAction));\r\nexport { StartFindAction };\r\nvar StartFindWithSelectionAction = /** @class */ (function (_super) {\r\n    __extends(StartFindWithSelectionAction, _super);\r\n    function StartFindWithSelectionAction() {\r\n        return _super.call(this, {\r\n            id: FIND_IDS.StartFindWithSelection,\r\n            label: nls.localize('startFindWithSelectionAction', \"Find With Selection\"),\r\n            alias: 'Find With Selection',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: null,\r\n                primary: 0,\r\n                mac: {\r\n                    primary: 2048 /* CtrlCmd */ | 35 /* KEY_E */,\r\n                },\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    StartFindWithSelectionAction.prototype.run = function (accessor, editor) {\r\n        var controller = CommonFindController.get(editor);\r\n        if (controller) {\r\n            controller.start({\r\n                forceRevealReplace: false,\r\n                seedSearchStringFromSelection: true,\r\n                seedSearchStringFromGlobalClipboard: false,\r\n                shouldFocus: 0 /* NoFocusChange */,\r\n                shouldAnimate: true,\r\n                updateSearchScope: false\r\n            });\r\n            controller.setGlobalBufferTerm(controller.getState().searchString);\r\n        }\r\n    };\r\n    return StartFindWithSelectionAction;\r\n}(EditorAction));\r\nexport { StartFindWithSelectionAction };\r\nvar MatchFindAction = /** @class */ (function (_super) {\r\n    __extends(MatchFindAction, _super);\r\n    function MatchFindAction() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    MatchFindAction.prototype.run = function (accessor, editor) {\r\n        var controller = CommonFindController.get(editor);\r\n        if (controller && !this._run(controller)) {\r\n            controller.start({\r\n                forceRevealReplace: false,\r\n                seedSearchStringFromSelection: (controller.getState().searchString.length === 0) && editor.getOption(27 /* find */).seedSearchStringFromSelection,\r\n                seedSearchStringFromGlobalClipboard: true,\r\n                shouldFocus: 0 /* NoFocusChange */,\r\n                shouldAnimate: true,\r\n                updateSearchScope: false\r\n            });\r\n            this._run(controller);\r\n        }\r\n    };\r\n    return MatchFindAction;\r\n}(EditorAction));\r\nexport { MatchFindAction };\r\nvar NextMatchFindAction = /** @class */ (function (_super) {\r\n    __extends(NextMatchFindAction, _super);\r\n    function NextMatchFindAction() {\r\n        return _super.call(this, {\r\n            id: FIND_IDS.NextMatchFindAction,\r\n            label: nls.localize('findNextMatchAction', \"Find Next\"),\r\n            alias: 'Find Next',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: 61 /* F3 */,\r\n                mac: { primary: 2048 /* CtrlCmd */ | 37 /* KEY_G */, secondary: [61 /* F3 */] },\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    NextMatchFindAction.prototype._run = function (controller) {\r\n        return controller.moveToNextMatch();\r\n    };\r\n    return NextMatchFindAction;\r\n}(MatchFindAction));\r\nexport { NextMatchFindAction };\r\nvar NextMatchFindAction2 = /** @class */ (function (_super) {\r\n    __extends(NextMatchFindAction2, _super);\r\n    function NextMatchFindAction2() {\r\n        return _super.call(this, {\r\n            id: FIND_IDS.NextMatchFindAction,\r\n            label: nls.localize('findNextMatchAction', \"Find Next\"),\r\n            alias: 'Find Next',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_FIND_INPUT_FOCUSED),\r\n                primary: 3 /* Enter */,\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    NextMatchFindAction2.prototype._run = function (controller) {\r\n        return controller.moveToNextMatch();\r\n    };\r\n    return NextMatchFindAction2;\r\n}(MatchFindAction));\r\nexport { NextMatchFindAction2 };\r\nvar PreviousMatchFindAction = /** @class */ (function (_super) {\r\n    __extends(PreviousMatchFindAction, _super);\r\n    function PreviousMatchFindAction() {\r\n        return _super.call(this, {\r\n            id: FIND_IDS.PreviousMatchFindAction,\r\n            label: nls.localize('findPreviousMatchAction', \"Find Previous\"),\r\n            alias: 'Find Previous',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: 1024 /* Shift */ | 61 /* F3 */,\r\n                mac: { primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 37 /* KEY_G */, secondary: [1024 /* Shift */ | 61 /* F3 */] },\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    PreviousMatchFindAction.prototype._run = function (controller) {\r\n        return controller.moveToPrevMatch();\r\n    };\r\n    return PreviousMatchFindAction;\r\n}(MatchFindAction));\r\nexport { PreviousMatchFindAction };\r\nvar PreviousMatchFindAction2 = /** @class */ (function (_super) {\r\n    __extends(PreviousMatchFindAction2, _super);\r\n    function PreviousMatchFindAction2() {\r\n        return _super.call(this, {\r\n            id: FIND_IDS.PreviousMatchFindAction,\r\n            label: nls.localize('findPreviousMatchAction', \"Find Previous\"),\r\n            alias: 'Find Previous',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_FIND_INPUT_FOCUSED),\r\n                primary: 1024 /* Shift */ | 3 /* Enter */,\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    PreviousMatchFindAction2.prototype._run = function (controller) {\r\n        return controller.moveToPrevMatch();\r\n    };\r\n    return PreviousMatchFindAction2;\r\n}(MatchFindAction));\r\nexport { PreviousMatchFindAction2 };\r\nvar SelectionMatchFindAction = /** @class */ (function (_super) {\r\n    __extends(SelectionMatchFindAction, _super);\r\n    function SelectionMatchFindAction() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    SelectionMatchFindAction.prototype.run = function (accessor, editor) {\r\n        var controller = CommonFindController.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        var selectionSearchString = getSelectionSearchString(editor);\r\n        if (selectionSearchString) {\r\n            controller.setSearchString(selectionSearchString);\r\n        }\r\n        if (!this._run(controller)) {\r\n            controller.start({\r\n                forceRevealReplace: false,\r\n                seedSearchStringFromSelection: editor.getOption(27 /* find */).seedSearchStringFromSelection,\r\n                seedSearchStringFromGlobalClipboard: false,\r\n                shouldFocus: 0 /* NoFocusChange */,\r\n                shouldAnimate: true,\r\n                updateSearchScope: false\r\n            });\r\n            this._run(controller);\r\n        }\r\n    };\r\n    return SelectionMatchFindAction;\r\n}(EditorAction));\r\nexport { SelectionMatchFindAction };\r\nvar NextSelectionMatchFindAction = /** @class */ (function (_super) {\r\n    __extends(NextSelectionMatchFindAction, _super);\r\n    function NextSelectionMatchFindAction() {\r\n        return _super.call(this, {\r\n            id: FIND_IDS.NextSelectionMatchFindAction,\r\n            label: nls.localize('nextSelectionMatchFindAction', \"Find Next Selection\"),\r\n            alias: 'Find Next Selection',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: 2048 /* CtrlCmd */ | 61 /* F3 */,\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    NextSelectionMatchFindAction.prototype._run = function (controller) {\r\n        return controller.moveToNextMatch();\r\n    };\r\n    return NextSelectionMatchFindAction;\r\n}(SelectionMatchFindAction));\r\nexport { NextSelectionMatchFindAction };\r\nvar PreviousSelectionMatchFindAction = /** @class */ (function (_super) {\r\n    __extends(PreviousSelectionMatchFindAction, _super);\r\n    function PreviousSelectionMatchFindAction() {\r\n        return _super.call(this, {\r\n            id: FIND_IDS.PreviousSelectionMatchFindAction,\r\n            label: nls.localize('previousSelectionMatchFindAction', \"Find Previous Selection\"),\r\n            alias: 'Find Previous Selection',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 61 /* F3 */,\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    PreviousSelectionMatchFindAction.prototype._run = function (controller) {\r\n        return controller.moveToPrevMatch();\r\n    };\r\n    return PreviousSelectionMatchFindAction;\r\n}(SelectionMatchFindAction));\r\nexport { PreviousSelectionMatchFindAction };\r\nvar StartFindReplaceAction = /** @class */ (function (_super) {\r\n    __extends(StartFindReplaceAction, _super);\r\n    function StartFindReplaceAction() {\r\n        return _super.call(this, {\r\n            id: FIND_IDS.StartFindReplaceAction,\r\n            label: nls.localize('startReplace', \"Replace\"),\r\n            alias: 'Replace',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: null,\r\n                primary: 2048 /* CtrlCmd */ | 38 /* KEY_H */,\r\n                mac: { primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 36 /* KEY_F */ },\r\n                weight: 100 /* EditorContrib */\r\n            },\r\n            menuOpts: {\r\n                menuId: 15 /* MenubarEditMenu */,\r\n                group: '3_find',\r\n                title: nls.localize({ key: 'miReplace', comment: ['&& denotes a mnemonic'] }, \"&&Replace\"),\r\n                order: 2\r\n            }\r\n        }) || this;\r\n    }\r\n    StartFindReplaceAction.prototype.run = function (accessor, editor) {\r\n        if (!editor.hasModel() || editor.getOption(65 /* readOnly */)) {\r\n            return;\r\n        }\r\n        var controller = CommonFindController.get(editor);\r\n        var currentSelection = editor.getSelection();\r\n        var findInputFocused = controller.isFindInputFocused();\r\n        // we only seed search string from selection when the current selection is single line and not empty,\r\n        // + the find input is not focused\r\n        var seedSearchStringFromSelection = !currentSelection.isEmpty()\r\n            && currentSelection.startLineNumber === currentSelection.endLineNumber && editor.getOption(27 /* find */).seedSearchStringFromSelection\r\n            && !findInputFocused;\r\n        /*\r\n         * if the existing search string in find widget is empty and we don't seed search string from selection, it means the Find Input is still empty, so we should focus the Find Input instead of Replace Input.\r\n\r\n         * findInputFocused true -> seedSearchStringFromSelection false, FocusReplaceInput\r\n         * findInputFocused false, seedSearchStringFromSelection true FocusReplaceInput\r\n         * findInputFocused false seedSearchStringFromSelection false FocusFindInput\r\n         */\r\n        var shouldFocus = (findInputFocused || seedSearchStringFromSelection) ?\r\n            2 /* FocusReplaceInput */ : 1 /* FocusFindInput */;\r\n        if (controller) {\r\n            controller.start({\r\n                forceRevealReplace: true,\r\n                seedSearchStringFromSelection: seedSearchStringFromSelection,\r\n                seedSearchStringFromGlobalClipboard: editor.getOption(27 /* find */).seedSearchStringFromSelection,\r\n                shouldFocus: shouldFocus,\r\n                shouldAnimate: true,\r\n                updateSearchScope: false\r\n            });\r\n        }\r\n    };\r\n    return StartFindReplaceAction;\r\n}(EditorAction));\r\nexport { StartFindReplaceAction };\r\nregisterEditorContribution(CommonFindController.ID, FindController);\r\nregisterEditorAction(StartFindAction);\r\nregisterEditorAction(StartFindWithSelectionAction);\r\nregisterEditorAction(NextMatchFindAction);\r\nregisterEditorAction(NextMatchFindAction2);\r\nregisterEditorAction(PreviousMatchFindAction);\r\nregisterEditorAction(PreviousMatchFindAction2);\r\nregisterEditorAction(NextSelectionMatchFindAction);\r\nregisterEditorAction(PreviousSelectionMatchFindAction);\r\nregisterEditorAction(StartFindReplaceAction);\r\nvar FindCommand = EditorCommand.bindToContribution(CommonFindController.get);\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.CloseFindWidgetCommand,\r\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\r\n    handler: function (x) { return x.closeFindWidget(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */ + 5,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: 9 /* Escape */,\r\n        secondary: [1024 /* Shift */ | 9 /* Escape */]\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.ToggleCaseSensitiveCommand,\r\n    precondition: undefined,\r\n    handler: function (x) { return x.toggleCaseSensitive(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */ + 5,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: ToggleCaseSensitiveKeybinding.primary,\r\n        mac: ToggleCaseSensitiveKeybinding.mac,\r\n        win: ToggleCaseSensitiveKeybinding.win,\r\n        linux: ToggleCaseSensitiveKeybinding.linux\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.ToggleWholeWordCommand,\r\n    precondition: undefined,\r\n    handler: function (x) { return x.toggleWholeWords(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */ + 5,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: ToggleWholeWordKeybinding.primary,\r\n        mac: ToggleWholeWordKeybinding.mac,\r\n        win: ToggleWholeWordKeybinding.win,\r\n        linux: ToggleWholeWordKeybinding.linux\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.ToggleRegexCommand,\r\n    precondition: undefined,\r\n    handler: function (x) { return x.toggleRegex(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */ + 5,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: ToggleRegexKeybinding.primary,\r\n        mac: ToggleRegexKeybinding.mac,\r\n        win: ToggleRegexKeybinding.win,\r\n        linux: ToggleRegexKeybinding.linux\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.ToggleSearchScopeCommand,\r\n    precondition: undefined,\r\n    handler: function (x) { return x.toggleSearchScope(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */ + 5,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: ToggleSearchScopeKeybinding.primary,\r\n        mac: ToggleSearchScopeKeybinding.mac,\r\n        win: ToggleSearchScopeKeybinding.win,\r\n        linux: ToggleSearchScopeKeybinding.linux\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.ReplaceOneAction,\r\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\r\n    handler: function (x) { return x.replace(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */ + 5,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 22 /* KEY_1 */\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.ReplaceOneAction,\r\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\r\n    handler: function (x) { return x.replace(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */ + 5,\r\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_REPLACE_INPUT_FOCUSED),\r\n        primary: 3 /* Enter */\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.ReplaceAllAction,\r\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\r\n    handler: function (x) { return x.replaceAll(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */ + 5,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 3 /* Enter */\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.ReplaceAllAction,\r\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\r\n    handler: function (x) { return x.replaceAll(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */ + 5,\r\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_REPLACE_INPUT_FOCUSED),\r\n        primary: undefined,\r\n        mac: {\r\n            primary: 2048 /* CtrlCmd */ | 3 /* Enter */,\r\n        }\r\n    }\r\n}));\r\nregisterEditorCommand(new FindCommand({\r\n    id: FIND_IDS.SelectAllMatchesAction,\r\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\r\n    handler: function (x) { return x.selectAllMatches(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */ + 5,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: 512 /* Alt */ | 3 /* Enter */\r\n    }\r\n}));\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { equals } from './arrays.js';\r\nvar MarkdownString = /** @class */ (function () {\r\n    function MarkdownString(value, isTrusted) {\r\n        if (value === void 0) { value = ''; }\r\n        if (isTrusted === void 0) { isTrusted = false; }\r\n        this._value = value;\r\n        this._isTrusted = isTrusted;\r\n    }\r\n    Object.defineProperty(MarkdownString.prototype, \"value\", {\r\n        get: function () { return this._value; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MarkdownString.prototype, \"isTrusted\", {\r\n        get: function () { return this._isTrusted; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    MarkdownString.prototype.appendText = function (value) {\r\n        // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\r\n        this._value += value\r\n            .replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&')\r\n            .replace('\\n', '\\n\\n');\r\n        return this;\r\n    };\r\n    MarkdownString.prototype.appendMarkdown = function (value) {\r\n        this._value += value;\r\n        return this;\r\n    };\r\n    MarkdownString.prototype.appendCodeblock = function (langId, code) {\r\n        this._value += '\\n```';\r\n        this._value += langId;\r\n        this._value += '\\n';\r\n        this._value += code;\r\n        this._value += '\\n```\\n';\r\n        return this;\r\n    };\r\n    return MarkdownString;\r\n}());\r\nexport { MarkdownString };\r\nexport function isEmptyMarkdownString(oneOrMany) {\r\n    if (isMarkdownString(oneOrMany)) {\r\n        return !oneOrMany.value;\r\n    }\r\n    else if (Array.isArray(oneOrMany)) {\r\n        return oneOrMany.every(isEmptyMarkdownString);\r\n    }\r\n    else {\r\n        return true;\r\n    }\r\n}\r\nexport function isMarkdownString(thing) {\r\n    if (thing instanceof MarkdownString) {\r\n        return true;\r\n    }\r\n    else if (thing && typeof thing === 'object') {\r\n        return typeof thing.value === 'string'\r\n            && (typeof thing.isTrusted === 'boolean' || thing.isTrusted === undefined);\r\n    }\r\n    return false;\r\n}\r\nexport function markedStringsEquals(a, b) {\r\n    if (!a && !b) {\r\n        return true;\r\n    }\r\n    else if (!a || !b) {\r\n        return false;\r\n    }\r\n    else if (Array.isArray(a) && Array.isArray(b)) {\r\n        return equals(a, b, markdownStringEqual);\r\n    }\r\n    else if (isMarkdownString(a) && isMarkdownString(b)) {\r\n        return markdownStringEqual(a, b);\r\n    }\r\n    else {\r\n        return false;\r\n    }\r\n}\r\nfunction markdownStringEqual(a, b) {\r\n    if (a === b) {\r\n        return true;\r\n    }\r\n    else if (!a || !b) {\r\n        return false;\r\n    }\r\n    else {\r\n        return a.value === b.value && a.isTrusted === b.isTrusted;\r\n    }\r\n}\r\nexport function removeMarkdownEscapes(text) {\r\n    if (!text) {\r\n        return text;\r\n    }\r\n    return text.replace(/\\\\([\\\\`*_{}[\\]()#+\\-.!])/g, '$1');\r\n}\r\nexport function parseHrefAndDimensions(href) {\r\n    var dimensions = [];\r\n    var splitted = href.split('|').map(function (s) { return s.trim(); });\r\n    href = splitted[0];\r\n    var parameters = splitted[1];\r\n    if (parameters) {\r\n        var heightFromParams = /height=(\\d+)/.exec(parameters);\r\n        var widthFromParams = /width=(\\d+)/.exec(parameters);\r\n        var height = heightFromParams ? heightFromParams[1] : '';\r\n        var width = widthFromParams ? widthFromParams[1] : '';\r\n        var widthIsFinite = isFinite(parseInt(width));\r\n        var heightIsFinite = isFinite(parseInt(height));\r\n        if (widthIsFinite) {\r\n            dimensions.push(\"width=\\\"\" + width + \"\\\"\");\r\n        }\r\n        if (heightIsFinite) {\r\n            dimensions.push(\"height=\\\"\" + height + \"\\\"\");\r\n        }\r\n    }\r\n    return { href: href, dimensions: dimensions };\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { CancellationToken } from '../../../base/common/cancellation.js';\r\nimport { illegalArgument } from '../../../base/common/errors.js';\r\nimport { URI } from '../../../base/common/uri.js';\r\nimport { registerLanguageCommand } from '../../browser/editorExtensions.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { ColorProviderRegistry } from '../../common/modes.js';\r\nimport { IModelService } from '../../common/services/modelService.js';\r\nexport function getColors(model, token) {\r\n    var colors = [];\r\n    var providers = ColorProviderRegistry.ordered(model).reverse();\r\n    var promises = providers.map(function (provider) { return Promise.resolve(provider.provideDocumentColors(model, token)).then(function (result) {\r\n        if (Array.isArray(result)) {\r\n            for (var _i = 0, result_1 = result; _i < result_1.length; _i++) {\r\n                var colorInfo = result_1[_i];\r\n                colors.push({ colorInfo: colorInfo, provider: provider });\r\n            }\r\n        }\r\n    }); });\r\n    return Promise.all(promises).then(function () { return colors; });\r\n}\r\nexport function getColorPresentations(model, colorInfo, provider, token) {\r\n    return Promise.resolve(provider.provideColorPresentations(model, colorInfo, token));\r\n}\r\nregisterLanguageCommand('_executeDocumentColorProvider', function (accessor, args) {\r\n    var resource = args.resource;\r\n    if (!(resource instanceof URI)) {\r\n        throw illegalArgument();\r\n    }\r\n    var model = accessor.get(IModelService).getModel(resource);\r\n    if (!model) {\r\n        throw illegalArgument();\r\n    }\r\n    var rawCIs = [];\r\n    var providers = ColorProviderRegistry.ordered(model).reverse();\r\n    var promises = providers.map(function (provider) { return Promise.resolve(provider.provideDocumentColors(model, CancellationToken.None)).then(function (result) {\r\n        if (Array.isArray(result)) {\r\n            for (var _i = 0, result_2 = result; _i < result_2.length; _i++) {\r\n                var ci = result_2[_i];\r\n                rawCIs.push({ range: ci.range, color: [ci.color.red, ci.color.green, ci.color.blue, ci.color.alpha] });\r\n            }\r\n        }\r\n    }); });\r\n    return Promise.all(promises).then(function () { return rawCIs; });\r\n});\r\nregisterLanguageCommand('_executeColorPresentationProvider', function (accessor, args) {\r\n    var resource = args.resource, color = args.color, range = args.range;\r\n    if (!(resource instanceof URI) || !Array.isArray(color) || color.length !== 4 || !Range.isIRange(range)) {\r\n        throw illegalArgument();\r\n    }\r\n    var red = color[0], green = color[1], blue = color[2], alpha = color[3];\r\n    var model = accessor.get(IModelService).getModel(resource);\r\n    if (!model) {\r\n        throw illegalArgument();\r\n    }\r\n    var colorInfo = {\r\n        range: range,\r\n        color: { red: red, green: green, blue: blue, alpha: alpha }\r\n    };\r\n    var presentations = [];\r\n    var providers = ColorProviderRegistry.ordered(model).reverse();\r\n    var promises = providers.map(function (provider) { return Promise.resolve(provider.provideColorPresentations(model, colorInfo, CancellationToken.None)).then(function (result) {\r\n        if (Array.isArray(result)) {\r\n            presentations.push.apply(presentations, result);\r\n        }\r\n    }); });\r\n    return Promise.all(promises).then(function () { return presentations; });\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { TimeoutTimer, createCancelablePromise } from '../../../base/common/async.js';\r\nimport { RGBA } from '../../../base/common/color.js';\r\nimport { onUnexpectedError } from '../../../base/common/errors.js';\r\nimport { hash } from '../../../base/common/hash.js';\r\nimport { Disposable, DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { registerEditorContribution } from '../../browser/editorExtensions.js';\r\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\r\nimport { ColorProviderRegistry } from '../../common/modes.js';\r\nimport { getColors } from './color.js';\r\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\r\nvar MAX_DECORATORS = 500;\r\nvar ColorDetector = /** @class */ (function (_super) {\r\n    __extends(ColorDetector, _super);\r\n    function ColorDetector(_editor, _codeEditorService, _configurationService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._editor = _editor;\r\n        _this._codeEditorService = _codeEditorService;\r\n        _this._configurationService = _configurationService;\r\n        _this._localToDispose = _this._register(new DisposableStore());\r\n        _this._decorationsIds = [];\r\n        _this._colorDatas = new Map();\r\n        _this._colorDecoratorIds = [];\r\n        _this._decorationsTypes = new Set();\r\n        _this._register(_editor.onDidChangeModel(function (e) {\r\n            _this._isEnabled = _this.isEnabled();\r\n            _this.onModelChanged();\r\n        }));\r\n        _this._register(_editor.onDidChangeModelLanguage(function (e) { return _this.onModelChanged(); }));\r\n        _this._register(ColorProviderRegistry.onDidChange(function (e) { return _this.onModelChanged(); }));\r\n        _this._register(_editor.onDidChangeConfiguration(function (e) {\r\n            var prevIsEnabled = _this._isEnabled;\r\n            _this._isEnabled = _this.isEnabled();\r\n            if (prevIsEnabled !== _this._isEnabled) {\r\n                if (_this._isEnabled) {\r\n                    _this.onModelChanged();\r\n                }\r\n                else {\r\n                    _this.removeAllDecorations();\r\n                }\r\n            }\r\n        }));\r\n        _this._timeoutTimer = null;\r\n        _this._computePromise = null;\r\n        _this._isEnabled = _this.isEnabled();\r\n        _this.onModelChanged();\r\n        return _this;\r\n    }\r\n    ColorDetector.prototype.isEnabled = function () {\r\n        var model = this._editor.getModel();\r\n        if (!model) {\r\n            return false;\r\n        }\r\n        var languageId = model.getLanguageIdentifier();\r\n        // handle deprecated settings. [languageId].colorDecorators.enable\r\n        var deprecatedConfig = this._configurationService.getValue(languageId.language);\r\n        if (deprecatedConfig) {\r\n            var colorDecorators = deprecatedConfig['colorDecorators']; // deprecatedConfig.valueOf('.colorDecorators.enable');\r\n            if (colorDecorators && colorDecorators['enable'] !== undefined && !colorDecorators['enable']) {\r\n                return colorDecorators['enable'];\r\n            }\r\n        }\r\n        return this._editor.getOption(12 /* colorDecorators */);\r\n    };\r\n    ColorDetector.get = function (editor) {\r\n        return editor.getContribution(this.ID);\r\n    };\r\n    ColorDetector.prototype.dispose = function () {\r\n        this.stop();\r\n        this.removeAllDecorations();\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    ColorDetector.prototype.onModelChanged = function () {\r\n        var _this = this;\r\n        this.stop();\r\n        if (!this._isEnabled) {\r\n            return;\r\n        }\r\n        var model = this._editor.getModel();\r\n        if (!model || !ColorProviderRegistry.has(model)) {\r\n            return;\r\n        }\r\n        this._localToDispose.add(this._editor.onDidChangeModelContent(function (e) {\r\n            if (!_this._timeoutTimer) {\r\n                _this._timeoutTimer = new TimeoutTimer();\r\n                _this._timeoutTimer.cancelAndSet(function () {\r\n                    _this._timeoutTimer = null;\r\n                    _this.beginCompute();\r\n                }, ColorDetector.RECOMPUTE_TIME);\r\n            }\r\n        }));\r\n        this.beginCompute();\r\n    };\r\n    ColorDetector.prototype.beginCompute = function () {\r\n        var _this = this;\r\n        this._computePromise = createCancelablePromise(function (token) {\r\n            var model = _this._editor.getModel();\r\n            if (!model) {\r\n                return Promise.resolve([]);\r\n            }\r\n            return getColors(model, token);\r\n        });\r\n        this._computePromise.then(function (colorInfos) {\r\n            _this.updateDecorations(colorInfos);\r\n            _this.updateColorDecorators(colorInfos);\r\n            _this._computePromise = null;\r\n        }, onUnexpectedError);\r\n    };\r\n    ColorDetector.prototype.stop = function () {\r\n        if (this._timeoutTimer) {\r\n            this._timeoutTimer.cancel();\r\n            this._timeoutTimer = null;\r\n        }\r\n        if (this._computePromise) {\r\n            this._computePromise.cancel();\r\n            this._computePromise = null;\r\n        }\r\n        this._localToDispose.clear();\r\n    };\r\n    ColorDetector.prototype.updateDecorations = function (colorDatas) {\r\n        var _this = this;\r\n        var decorations = colorDatas.map(function (c) { return ({\r\n            range: {\r\n                startLineNumber: c.colorInfo.range.startLineNumber,\r\n                startColumn: c.colorInfo.range.startColumn,\r\n                endLineNumber: c.colorInfo.range.endLineNumber,\r\n                endColumn: c.colorInfo.range.endColumn\r\n            },\r\n            options: ModelDecorationOptions.EMPTY\r\n        }); });\r\n        this._decorationsIds = this._editor.deltaDecorations(this._decorationsIds, decorations);\r\n        this._colorDatas = new Map();\r\n        this._decorationsIds.forEach(function (id, i) { return _this._colorDatas.set(id, colorDatas[i]); });\r\n    };\r\n    ColorDetector.prototype.updateColorDecorators = function (colorData) {\r\n        var _this = this;\r\n        var decorations = [];\r\n        var newDecorationsTypes = {};\r\n        for (var i = 0; i < colorData.length && decorations.length < MAX_DECORATORS; i++) {\r\n            var _a = colorData[i].colorInfo.color, red = _a.red, green = _a.green, blue = _a.blue, alpha = _a.alpha;\r\n            var rgba = new RGBA(Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255), alpha);\r\n            var subKey = hash(rgba).toString(16);\r\n            var color = \"rgba(\" + rgba.r + \", \" + rgba.g + \", \" + rgba.b + \", \" + rgba.a + \")\";\r\n            var key = 'colorBox-' + subKey;\r\n            if (!this._decorationsTypes.has(key) && !newDecorationsTypes[key]) {\r\n                this._codeEditorService.registerDecorationType(key, {\r\n                    before: {\r\n                        contentText: ' ',\r\n                        border: 'solid 0.1em #000',\r\n                        margin: '0.1em 0.2em 0 0.2em',\r\n                        width: '0.8em',\r\n                        height: '0.8em',\r\n                        backgroundColor: color\r\n                    },\r\n                    dark: {\r\n                        before: {\r\n                            border: 'solid 0.1em #eee'\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n            newDecorationsTypes[key] = true;\r\n            decorations.push({\r\n                range: {\r\n                    startLineNumber: colorData[i].colorInfo.range.startLineNumber,\r\n                    startColumn: colorData[i].colorInfo.range.startColumn,\r\n                    endLineNumber: colorData[i].colorInfo.range.endLineNumber,\r\n                    endColumn: colorData[i].colorInfo.range.endColumn\r\n                },\r\n                options: this._codeEditorService.resolveDecorationOptions(key, true)\r\n            });\r\n        }\r\n        this._decorationsTypes.forEach(function (subType) {\r\n            if (!newDecorationsTypes[subType]) {\r\n                _this._codeEditorService.removeDecorationType(subType);\r\n            }\r\n        });\r\n        this._colorDecoratorIds = this._editor.deltaDecorations(this._colorDecoratorIds, decorations);\r\n    };\r\n    ColorDetector.prototype.removeAllDecorations = function () {\r\n        var _this = this;\r\n        this._decorationsIds = this._editor.deltaDecorations(this._decorationsIds, []);\r\n        this._colorDecoratorIds = this._editor.deltaDecorations(this._colorDecoratorIds, []);\r\n        this._decorationsTypes.forEach(function (subType) {\r\n            _this._codeEditorService.removeDecorationType(subType);\r\n        });\r\n    };\r\n    ColorDetector.prototype.getColorData = function (position) {\r\n        var _this = this;\r\n        var model = this._editor.getModel();\r\n        if (!model) {\r\n            return null;\r\n        }\r\n        var decorations = model\r\n            .getDecorationsInRange(Range.fromPositions(position, position))\r\n            .filter(function (d) { return _this._colorDatas.has(d.id); });\r\n        if (decorations.length === 0) {\r\n            return null;\r\n        }\r\n        return this._colorDatas.get(decorations[0].id);\r\n    };\r\n    ColorDetector.ID = 'editor.contrib.colorDetector';\r\n    ColorDetector.RECOMPUTE_TIME = 1000; // ms\r\n    ColorDetector = __decorate([\r\n        __param(1, ICodeEditorService),\r\n        __param(2, IConfigurationService)\r\n    ], ColorDetector);\r\n    return ColorDetector;\r\n}(Disposable));\r\nexport { ColorDetector };\r\nregisterEditorContribution(ColorDetector.ID, ColorDetector);\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Emitter } from '../../../base/common/event.js';\r\nvar ColorPickerModel = /** @class */ (function () {\r\n    function ColorPickerModel(color, availableColorPresentations, presentationIndex) {\r\n        this.presentationIndex = presentationIndex;\r\n        this._onColorFlushed = new Emitter();\r\n        this.onColorFlushed = this._onColorFlushed.event;\r\n        this._onDidChangeColor = new Emitter();\r\n        this.onDidChangeColor = this._onDidChangeColor.event;\r\n        this._onDidChangePresentation = new Emitter();\r\n        this.onDidChangePresentation = this._onDidChangePresentation.event;\r\n        this.originalColor = color;\r\n        this._color = color;\r\n        this._colorPresentations = availableColorPresentations;\r\n    }\r\n    Object.defineProperty(ColorPickerModel.prototype, \"color\", {\r\n        get: function () {\r\n            return this._color;\r\n        },\r\n        set: function (color) {\r\n            if (this._color.equals(color)) {\r\n                return;\r\n            }\r\n            this._color = color;\r\n            this._onDidChangeColor.fire(color);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ColorPickerModel.prototype, \"presentation\", {\r\n        get: function () { return this.colorPresentations[this.presentationIndex]; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ColorPickerModel.prototype, \"colorPresentations\", {\r\n        get: function () {\r\n            return this._colorPresentations;\r\n        },\r\n        set: function (colorPresentations) {\r\n            this._colorPresentations = colorPresentations;\r\n            if (this.presentationIndex > colorPresentations.length - 1) {\r\n                this.presentationIndex = 0;\r\n            }\r\n            this._onDidChangePresentation.fire(this.presentation);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ColorPickerModel.prototype.selectNextColorPresentation = function () {\r\n        this.presentationIndex = (this.presentationIndex + 1) % this.colorPresentations.length;\r\n        this.flushColor();\r\n        this._onDidChangePresentation.fire(this.presentation);\r\n    };\r\n    ColorPickerModel.prototype.guessColorPresentation = function (color, originalText) {\r\n        for (var i = 0; i < this.colorPresentations.length; i++) {\r\n            if (originalText === this.colorPresentations[i].label) {\r\n                this.presentationIndex = i;\r\n                this._onDidChangePresentation.fire(this.presentation);\r\n                break;\r\n            }\r\n        }\r\n    };\r\n    ColorPickerModel.prototype.flushColor = function () {\r\n        this._onColorFlushed.fire(this._color);\r\n    };\r\n    return ColorPickerModel;\r\n}());\r\nexport { ColorPickerModel };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport './colorPicker.css';\r\nimport { onDidChangeZoomLevel } from '../../../base/browser/browser.js';\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { GlobalMouseMoveMonitor, standardMouseMoveMerger } from '../../../base/browser/globalMouseMoveMonitor.js';\r\nimport { Widget } from '../../../base/browser/ui/widget.js';\r\nimport { Color, HSVA, RGBA } from '../../../base/common/color.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport { editorHoverBackground } from '../../../platform/theme/common/colorRegistry.js';\r\nimport { registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\r\nvar $ = dom.$;\r\nvar ColorPickerHeader = /** @class */ (function (_super) {\r\n    __extends(ColorPickerHeader, _super);\r\n    function ColorPickerHeader(container, model, themeService) {\r\n        var _this = _super.call(this) || this;\r\n        _this.model = model;\r\n        _this.domNode = $('.colorpicker-header');\r\n        dom.append(container, _this.domNode);\r\n        _this.pickedColorNode = dom.append(_this.domNode, $('.picked-color'));\r\n        var colorBox = dom.append(_this.domNode, $('.original-color'));\r\n        colorBox.style.backgroundColor = Color.Format.CSS.format(_this.model.originalColor) || '';\r\n        _this.backgroundColor = themeService.getTheme().getColor(editorHoverBackground) || Color.white;\r\n        _this._register(registerThemingParticipant(function (theme, collector) {\r\n            _this.backgroundColor = theme.getColor(editorHoverBackground) || Color.white;\r\n        }));\r\n        _this._register(dom.addDisposableListener(_this.pickedColorNode, dom.EventType.CLICK, function () { return _this.model.selectNextColorPresentation(); }));\r\n        _this._register(dom.addDisposableListener(colorBox, dom.EventType.CLICK, function () {\r\n            _this.model.color = _this.model.originalColor;\r\n            _this.model.flushColor();\r\n        }));\r\n        _this._register(model.onDidChangeColor(_this.onDidChangeColor, _this));\r\n        _this._register(model.onDidChangePresentation(_this.onDidChangePresentation, _this));\r\n        _this.pickedColorNode.style.backgroundColor = Color.Format.CSS.format(model.color) || '';\r\n        dom.toggleClass(_this.pickedColorNode, 'light', model.color.rgba.a < 0.5 ? _this.backgroundColor.isLighter() : model.color.isLighter());\r\n        return _this;\r\n    }\r\n    ColorPickerHeader.prototype.onDidChangeColor = function (color) {\r\n        this.pickedColorNode.style.backgroundColor = Color.Format.CSS.format(color) || '';\r\n        dom.toggleClass(this.pickedColorNode, 'light', color.rgba.a < 0.5 ? this.backgroundColor.isLighter() : color.isLighter());\r\n        this.onDidChangePresentation();\r\n    };\r\n    ColorPickerHeader.prototype.onDidChangePresentation = function () {\r\n        this.pickedColorNode.textContent = this.model.presentation ? this.model.presentation.label : '';\r\n    };\r\n    return ColorPickerHeader;\r\n}(Disposable));\r\nexport { ColorPickerHeader };\r\nvar ColorPickerBody = /** @class */ (function (_super) {\r\n    __extends(ColorPickerBody, _super);\r\n    function ColorPickerBody(container, model, pixelRatio) {\r\n        var _this = _super.call(this) || this;\r\n        _this.model = model;\r\n        _this.pixelRatio = pixelRatio;\r\n        _this.domNode = $('.colorpicker-body');\r\n        dom.append(container, _this.domNode);\r\n        _this.saturationBox = new SaturationBox(_this.domNode, _this.model, _this.pixelRatio);\r\n        _this._register(_this.saturationBox);\r\n        _this._register(_this.saturationBox.onDidChange(_this.onDidSaturationValueChange, _this));\r\n        _this._register(_this.saturationBox.onColorFlushed(_this.flushColor, _this));\r\n        _this.opacityStrip = new OpacityStrip(_this.domNode, _this.model);\r\n        _this._register(_this.opacityStrip);\r\n        _this._register(_this.opacityStrip.onDidChange(_this.onDidOpacityChange, _this));\r\n        _this._register(_this.opacityStrip.onColorFlushed(_this.flushColor, _this));\r\n        _this.hueStrip = new HueStrip(_this.domNode, _this.model);\r\n        _this._register(_this.hueStrip);\r\n        _this._register(_this.hueStrip.onDidChange(_this.onDidHueChange, _this));\r\n        _this._register(_this.hueStrip.onColorFlushed(_this.flushColor, _this));\r\n        return _this;\r\n    }\r\n    ColorPickerBody.prototype.flushColor = function () {\r\n        this.model.flushColor();\r\n    };\r\n    ColorPickerBody.prototype.onDidSaturationValueChange = function (_a) {\r\n        var s = _a.s, v = _a.v;\r\n        var hsva = this.model.color.hsva;\r\n        this.model.color = new Color(new HSVA(hsva.h, s, v, hsva.a));\r\n    };\r\n    ColorPickerBody.prototype.onDidOpacityChange = function (a) {\r\n        var hsva = this.model.color.hsva;\r\n        this.model.color = new Color(new HSVA(hsva.h, hsva.s, hsva.v, a));\r\n    };\r\n    ColorPickerBody.prototype.onDidHueChange = function (value) {\r\n        var hsva = this.model.color.hsva;\r\n        var h = (1 - value) * 360;\r\n        this.model.color = new Color(new HSVA(h === 360 ? 0 : h, hsva.s, hsva.v, hsva.a));\r\n    };\r\n    ColorPickerBody.prototype.layout = function () {\r\n        this.saturationBox.layout();\r\n        this.opacityStrip.layout();\r\n        this.hueStrip.layout();\r\n    };\r\n    return ColorPickerBody;\r\n}(Disposable));\r\nexport { ColorPickerBody };\r\nvar SaturationBox = /** @class */ (function (_super) {\r\n    __extends(SaturationBox, _super);\r\n    function SaturationBox(container, model, pixelRatio) {\r\n        var _this = _super.call(this) || this;\r\n        _this.model = model;\r\n        _this.pixelRatio = pixelRatio;\r\n        _this._onDidChange = new Emitter();\r\n        _this.onDidChange = _this._onDidChange.event;\r\n        _this._onColorFlushed = new Emitter();\r\n        _this.onColorFlushed = _this._onColorFlushed.event;\r\n        _this.domNode = $('.saturation-wrap');\r\n        dom.append(container, _this.domNode);\r\n        // Create canvas, draw selected color\r\n        _this.canvas = document.createElement('canvas');\r\n        _this.canvas.className = 'saturation-box';\r\n        dom.append(_this.domNode, _this.canvas);\r\n        // Add selection circle\r\n        _this.selection = $('.saturation-selection');\r\n        dom.append(_this.domNode, _this.selection);\r\n        _this.layout();\r\n        _this._register(dom.addDisposableGenericMouseDownListner(_this.domNode, function (e) { return _this.onMouseDown(e); }));\r\n        _this._register(_this.model.onDidChangeColor(_this.onDidChangeColor, _this));\r\n        _this.monitor = null;\r\n        return _this;\r\n    }\r\n    SaturationBox.prototype.onMouseDown = function (e) {\r\n        var _this = this;\r\n        this.monitor = this._register(new GlobalMouseMoveMonitor());\r\n        var origin = dom.getDomNodePagePosition(this.domNode);\r\n        if (e.target !== this.selection) {\r\n            this.onDidChangePosition(e.offsetX, e.offsetY);\r\n        }\r\n        this.monitor.startMonitoring(standardMouseMoveMerger, function (event) { return _this.onDidChangePosition(event.posx - origin.left, event.posy - origin.top); }, function () { return null; });\r\n        var mouseUpListener = dom.addDisposableGenericMouseUpListner(document, function () {\r\n            _this._onColorFlushed.fire();\r\n            mouseUpListener.dispose();\r\n            if (_this.monitor) {\r\n                _this.monitor.stopMonitoring(true);\r\n                _this.monitor = null;\r\n            }\r\n        }, true);\r\n    };\r\n    SaturationBox.prototype.onDidChangePosition = function (left, top) {\r\n        var s = Math.max(0, Math.min(1, left / this.width));\r\n        var v = Math.max(0, Math.min(1, 1 - (top / this.height)));\r\n        this.paintSelection(s, v);\r\n        this._onDidChange.fire({ s: s, v: v });\r\n    };\r\n    SaturationBox.prototype.layout = function () {\r\n        this.width = this.domNode.offsetWidth;\r\n        this.height = this.domNode.offsetHeight;\r\n        this.canvas.width = this.width * this.pixelRatio;\r\n        this.canvas.height = this.height * this.pixelRatio;\r\n        this.paint();\r\n        var hsva = this.model.color.hsva;\r\n        this.paintSelection(hsva.s, hsva.v);\r\n    };\r\n    SaturationBox.prototype.paint = function () {\r\n        var hsva = this.model.color.hsva;\r\n        var saturatedColor = new Color(new HSVA(hsva.h, 1, 1, 1));\r\n        var ctx = this.canvas.getContext('2d');\r\n        var whiteGradient = ctx.createLinearGradient(0, 0, this.canvas.width, 0);\r\n        whiteGradient.addColorStop(0, 'rgba(255, 255, 255, 1)');\r\n        whiteGradient.addColorStop(0.5, 'rgba(255, 255, 255, 0.5)');\r\n        whiteGradient.addColorStop(1, 'rgba(255, 255, 255, 0)');\r\n        var blackGradient = ctx.createLinearGradient(0, 0, 0, this.canvas.height);\r\n        blackGradient.addColorStop(0, 'rgba(0, 0, 0, 0)');\r\n        blackGradient.addColorStop(1, 'rgba(0, 0, 0, 1)');\r\n        ctx.rect(0, 0, this.canvas.width, this.canvas.height);\r\n        ctx.fillStyle = Color.Format.CSS.format(saturatedColor);\r\n        ctx.fill();\r\n        ctx.fillStyle = whiteGradient;\r\n        ctx.fill();\r\n        ctx.fillStyle = blackGradient;\r\n        ctx.fill();\r\n    };\r\n    SaturationBox.prototype.paintSelection = function (s, v) {\r\n        this.selection.style.left = s * this.width + \"px\";\r\n        this.selection.style.top = this.height - v * this.height + \"px\";\r\n    };\r\n    SaturationBox.prototype.onDidChangeColor = function () {\r\n        if (this.monitor && this.monitor.isMonitoring()) {\r\n            return;\r\n        }\r\n        this.paint();\r\n    };\r\n    return SaturationBox;\r\n}(Disposable));\r\nvar Strip = /** @class */ (function (_super) {\r\n    __extends(Strip, _super);\r\n    function Strip(container, model) {\r\n        var _this = _super.call(this) || this;\r\n        _this.model = model;\r\n        _this._onDidChange = new Emitter();\r\n        _this.onDidChange = _this._onDidChange.event;\r\n        _this._onColorFlushed = new Emitter();\r\n        _this.onColorFlushed = _this._onColorFlushed.event;\r\n        _this.domNode = dom.append(container, $('.strip'));\r\n        _this.overlay = dom.append(_this.domNode, $('.overlay'));\r\n        _this.slider = dom.append(_this.domNode, $('.slider'));\r\n        _this.slider.style.top = \"0px\";\r\n        _this._register(dom.addDisposableGenericMouseDownListner(_this.domNode, function (e) { return _this.onMouseDown(e); }));\r\n        _this.layout();\r\n        return _this;\r\n    }\r\n    Strip.prototype.layout = function () {\r\n        this.height = this.domNode.offsetHeight - this.slider.offsetHeight;\r\n        var value = this.getValue(this.model.color);\r\n        this.updateSliderPosition(value);\r\n    };\r\n    Strip.prototype.onMouseDown = function (e) {\r\n        var _this = this;\r\n        var monitor = this._register(new GlobalMouseMoveMonitor());\r\n        var origin = dom.getDomNodePagePosition(this.domNode);\r\n        dom.addClass(this.domNode, 'grabbing');\r\n        if (e.target !== this.slider) {\r\n            this.onDidChangeTop(e.offsetY);\r\n        }\r\n        monitor.startMonitoring(standardMouseMoveMerger, function (event) { return _this.onDidChangeTop(event.posy - origin.top); }, function () { return null; });\r\n        var mouseUpListener = dom.addDisposableGenericMouseUpListner(document, function () {\r\n            _this._onColorFlushed.fire();\r\n            mouseUpListener.dispose();\r\n            monitor.stopMonitoring(true);\r\n            dom.removeClass(_this.domNode, 'grabbing');\r\n        }, true);\r\n    };\r\n    Strip.prototype.onDidChangeTop = function (top) {\r\n        var value = Math.max(0, Math.min(1, 1 - (top / this.height)));\r\n        this.updateSliderPosition(value);\r\n        this._onDidChange.fire(value);\r\n    };\r\n    Strip.prototype.updateSliderPosition = function (value) {\r\n        this.slider.style.top = (1 - value) * this.height + \"px\";\r\n    };\r\n    return Strip;\r\n}(Disposable));\r\nvar OpacityStrip = /** @class */ (function (_super) {\r\n    __extends(OpacityStrip, _super);\r\n    function OpacityStrip(container, model) {\r\n        var _this = _super.call(this, container, model) || this;\r\n        dom.addClass(_this.domNode, 'opacity-strip');\r\n        _this._register(model.onDidChangeColor(_this.onDidChangeColor, _this));\r\n        _this.onDidChangeColor(_this.model.color);\r\n        return _this;\r\n    }\r\n    OpacityStrip.prototype.onDidChangeColor = function (color) {\r\n        var _a = color.rgba, r = _a.r, g = _a.g, b = _a.b;\r\n        var opaque = new Color(new RGBA(r, g, b, 1));\r\n        var transparent = new Color(new RGBA(r, g, b, 0));\r\n        this.overlay.style.background = \"linear-gradient(to bottom, \" + opaque + \" 0%, \" + transparent + \" 100%)\";\r\n    };\r\n    OpacityStrip.prototype.getValue = function (color) {\r\n        return color.hsva.a;\r\n    };\r\n    return OpacityStrip;\r\n}(Strip));\r\nvar HueStrip = /** @class */ (function (_super) {\r\n    __extends(HueStrip, _super);\r\n    function HueStrip(container, model) {\r\n        var _this = _super.call(this, container, model) || this;\r\n        dom.addClass(_this.domNode, 'hue-strip');\r\n        return _this;\r\n    }\r\n    HueStrip.prototype.getValue = function (color) {\r\n        return 1 - (color.hsva.h / 360);\r\n    };\r\n    return HueStrip;\r\n}(Strip));\r\nvar ColorPickerWidget = /** @class */ (function (_super) {\r\n    __extends(ColorPickerWidget, _super);\r\n    function ColorPickerWidget(container, model, pixelRatio, themeService) {\r\n        var _this = _super.call(this) || this;\r\n        _this.model = model;\r\n        _this.pixelRatio = pixelRatio;\r\n        _this._register(onDidChangeZoomLevel(function () { return _this.layout(); }));\r\n        var element = $('.colorpicker-widget');\r\n        container.appendChild(element);\r\n        var header = new ColorPickerHeader(element, _this.model, themeService);\r\n        _this.body = new ColorPickerBody(element, _this.model, _this.pixelRatio);\r\n        _this._register(header);\r\n        _this._register(_this.body);\r\n        return _this;\r\n    }\r\n    ColorPickerWidget.prototype.layout = function () {\r\n        this.body.layout();\r\n    };\r\n    return ColorPickerWidget;\r\n}(Widget));\r\nexport { ColorPickerWidget };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { coalesce } from '../../../base/common/arrays.js';\r\nimport { CancellationToken } from '../../../base/common/cancellation.js';\r\nimport { onUnexpectedExternalError } from '../../../base/common/errors.js';\r\nimport { registerDefaultLanguageCommand } from '../../browser/editorExtensions.js';\r\nimport { HoverProviderRegistry } from '../../common/modes.js';\r\nexport function getHover(model, position, token) {\r\n    var supports = HoverProviderRegistry.ordered(model);\r\n    var promises = supports.map(function (support) {\r\n        return Promise.resolve(support.provideHover(model, position, token)).then(function (hover) {\r\n            return hover && isValid(hover) ? hover : undefined;\r\n        }, function (err) {\r\n            onUnexpectedExternalError(err);\r\n            return undefined;\r\n        });\r\n    });\r\n    return Promise.all(promises).then(coalesce);\r\n}\r\nregisterDefaultLanguageCommand('_executeHoverProvider', function (model, position) { return getHover(model, position, CancellationToken.None); });\r\nfunction isValid(result) {\r\n    var hasRange = (typeof result.range !== 'undefined');\r\n    var hasHtmlContent = typeof result.contents !== 'undefined' && result.contents && result.contents.length > 0;\r\n    return hasRange && hasHtmlContent;\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { RunOnceScheduler, createCancelablePromise } from '../../../base/common/async.js';\r\nimport { onUnexpectedError } from '../../../base/common/errors.js';\r\nvar HoverOperation = /** @class */ (function () {\r\n    function HoverOperation(computer, success, error, progress, hoverTime) {\r\n        var _this = this;\r\n        this._computer = computer;\r\n        this._state = 0 /* IDLE */;\r\n        this._hoverTime = hoverTime;\r\n        this._firstWaitScheduler = new RunOnceScheduler(function () { return _this._triggerAsyncComputation(); }, 0);\r\n        this._secondWaitScheduler = new RunOnceScheduler(function () { return _this._triggerSyncComputation(); }, 0);\r\n        this._loadingMessageScheduler = new RunOnceScheduler(function () { return _this._showLoadingMessage(); }, 0);\r\n        this._asyncComputationPromise = null;\r\n        this._asyncComputationPromiseDone = false;\r\n        this._completeCallback = success;\r\n        this._errorCallback = error;\r\n        this._progressCallback = progress;\r\n    }\r\n    HoverOperation.prototype.setHoverTime = function (hoverTime) {\r\n        this._hoverTime = hoverTime;\r\n    };\r\n    HoverOperation.prototype._firstWaitTime = function () {\r\n        return this._hoverTime / 2;\r\n    };\r\n    HoverOperation.prototype._secondWaitTime = function () {\r\n        return this._hoverTime / 2;\r\n    };\r\n    HoverOperation.prototype._loadingMessageTime = function () {\r\n        return 3 * this._hoverTime;\r\n    };\r\n    HoverOperation.prototype._triggerAsyncComputation = function () {\r\n        var _this = this;\r\n        this._state = 2 /* SECOND_WAIT */;\r\n        this._secondWaitScheduler.schedule(this._secondWaitTime());\r\n        if (this._computer.computeAsync) {\r\n            this._asyncComputationPromiseDone = false;\r\n            this._asyncComputationPromise = createCancelablePromise(function (token) { return _this._computer.computeAsync(token); });\r\n            this._asyncComputationPromise.then(function (asyncResult) {\r\n                _this._asyncComputationPromiseDone = true;\r\n                _this._withAsyncResult(asyncResult);\r\n            }, function (e) { return _this._onError(e); });\r\n        }\r\n        else {\r\n            this._asyncComputationPromiseDone = true;\r\n        }\r\n    };\r\n    HoverOperation.prototype._triggerSyncComputation = function () {\r\n        if (this._computer.computeSync) {\r\n            this._computer.onResult(this._computer.computeSync(), true);\r\n        }\r\n        if (this._asyncComputationPromiseDone) {\r\n            this._state = 0 /* IDLE */;\r\n            this._onComplete(this._computer.getResult());\r\n        }\r\n        else {\r\n            this._state = 3 /* WAITING_FOR_ASYNC_COMPUTATION */;\r\n            this._onProgress(this._computer.getResult());\r\n        }\r\n    };\r\n    HoverOperation.prototype._showLoadingMessage = function () {\r\n        if (this._state === 3 /* WAITING_FOR_ASYNC_COMPUTATION */) {\r\n            this._onProgress(this._computer.getResultWithLoadingMessage());\r\n        }\r\n    };\r\n    HoverOperation.prototype._withAsyncResult = function (asyncResult) {\r\n        if (asyncResult) {\r\n            this._computer.onResult(asyncResult, false);\r\n        }\r\n        if (this._state === 3 /* WAITING_FOR_ASYNC_COMPUTATION */) {\r\n            this._state = 0 /* IDLE */;\r\n            this._onComplete(this._computer.getResult());\r\n        }\r\n    };\r\n    HoverOperation.prototype._onComplete = function (value) {\r\n        if (this._completeCallback) {\r\n            this._completeCallback(value);\r\n        }\r\n    };\r\n    HoverOperation.prototype._onError = function (error) {\r\n        if (this._errorCallback) {\r\n            this._errorCallback(error);\r\n        }\r\n        else {\r\n            onUnexpectedError(error);\r\n        }\r\n    };\r\n    HoverOperation.prototype._onProgress = function (value) {\r\n        if (this._progressCallback) {\r\n            this._progressCallback(value);\r\n        }\r\n    };\r\n    HoverOperation.prototype.start = function (mode) {\r\n        if (mode === 0 /* Delayed */) {\r\n            if (this._state === 0 /* IDLE */) {\r\n                this._state = 1 /* FIRST_WAIT */;\r\n                this._firstWaitScheduler.schedule(this._firstWaitTime());\r\n                this._loadingMessageScheduler.schedule(this._loadingMessageTime());\r\n            }\r\n        }\r\n        else {\r\n            switch (this._state) {\r\n                case 0 /* IDLE */:\r\n                    this._triggerAsyncComputation();\r\n                    this._secondWaitScheduler.cancel();\r\n                    this._triggerSyncComputation();\r\n                    break;\r\n                case 2 /* SECOND_WAIT */:\r\n                    this._secondWaitScheduler.cancel();\r\n                    this._triggerSyncComputation();\r\n                    break;\r\n            }\r\n        }\r\n    };\r\n    HoverOperation.prototype.cancel = function () {\r\n        this._loadingMessageScheduler.cancel();\r\n        if (this._state === 1 /* FIRST_WAIT */) {\r\n            this._firstWaitScheduler.cancel();\r\n        }\r\n        if (this._state === 2 /* SECOND_WAIT */) {\r\n            this._secondWaitScheduler.cancel();\r\n            if (this._asyncComputationPromise) {\r\n                this._asyncComputationPromise.cancel();\r\n                this._asyncComputationPromise = null;\r\n            }\r\n        }\r\n        if (this._state === 3 /* WAITING_FOR_ASYNC_COMPUTATION */) {\r\n            if (this._asyncComputationPromise) {\r\n                this._asyncComputationPromise.cancel();\r\n                this._asyncComputationPromise = null;\r\n            }\r\n        }\r\n        this._state = 0 /* IDLE */;\r\n    };\r\n    return HoverOperation;\r\n}());\r\nexport { HoverOperation };\r\n","/**\n * marked - a markdown parser\n * Copyright (c) 2011-2014, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n\n// BEGIN MONACOCHANGE\nvar __marked_exports;\n// END MONACOCHANGE\n\n;(function(root) {\n'use strict';\n\n/**\n * Block-Level Grammar\n */\n\nvar block = {\n  newline: /^\\n+/,\n  code: /^( {4}[^\\n]+\\n*)+/,\n  fences: noop,\n  hr: /^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)/,\n  heading: /^ *(#{1,6}) *([^\\n]+?) *(?:#+ *)?(?:\\n+|$)/,\n  nptable: noop,\n  blockquote: /^( {0,3}> ?(paragraph|[^\\n]*)(?:\\n|$))+/,\n  list: /^( {0,3})(bull) [\\s\\S]+?(?:hr|def|\\n{2,}(?! )(?!\\1bull )\\n*|\\s*$)/,\n  html: '^ {0,3}(?:' // optional indentation\n    + '<(script|pre|style)[\\\\s>][\\\\s\\\\S]*?(?:</\\\\1>[^\\\\n]*\\\\n+|$)' // (1)\n    + '|comment[^\\\\n]*(\\\\n+|$)' // (2)\n    + '|<\\\\?[\\\\s\\\\S]*?\\\\?>\\\\n*' // (3)\n    + '|<![A-Z][\\\\s\\\\S]*?>\\\\n*' // (4)\n    + '|<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>\\\\n*' // (5)\n    + '|</?(tag)(?: +|\\\\n|/?>)[\\\\s\\\\S]*?(?:\\\\n{2,}|$)' // (6)\n    + '|<(?!script|pre|style)([a-z][\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:\\\\n{2,}|$)' // (7) open tag\n    + '|</(?!script|pre|style)[a-z][\\\\w-]*\\\\s*>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:\\\\n{2,}|$)' // (7) closing tag\n    + ')',\n  def: /^ {0,3}\\[(label)\\]: *\\n? *<?([^\\s>]+)>?(?:(?: +\\n? *| *\\n *)(title))? *(?:\\n+|$)/,\n  table: noop,\n  lheading: /^([^\\n]+)\\n *(=|-){2,} *(?:\\n+|$)/,\n  paragraph: /^([^\\n]+(?:\\n(?!hr|heading|lheading| {0,3}>|<\\/?(?:tag)(?: +|\\n|\\/?>)|<(?:script|pre|style|!--))[^\\n]+)*)/,\n  text: /^[^\\n]+/\n};\n\nblock._label = /(?!\\s*\\])(?:\\\\[\\[\\]]|[^\\[\\]])+/;\nblock._title = /(?:\"(?:\\\\\"?|[^\"\\\\])*\"|'[^'\\n]*(?:\\n[^'\\n]+)*\\n?'|\\([^()]*\\))/;\nblock.def = edit(block.def)\n  .replace('label', block._label)\n  .replace('title', block._title)\n  .getRegex();\n\nblock.bullet = /(?:[*+-]|\\d{1,9}\\.)/;\nblock.item = /^( *)(bull) ?[^\\n]*(?:\\n(?!\\1bull ?)[^\\n]*)*/;\nblock.item = edit(block.item, 'gm')\n  .replace(/bull/g, block.bullet)\n  .getRegex();\n\nblock.list = edit(block.list)\n  .replace(/bull/g, block.bullet)\n  .replace('hr', '\\\\n+(?=\\\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$))')\n  .replace('def', '\\\\n+(?=' + block.def.source + ')')\n  .getRegex();\n\nblock._tag = 'address|article|aside|base|basefont|blockquote|body|caption'\n  + '|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption'\n  + '|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe'\n  + '|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option'\n  + '|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr'\n  + '|track|ul';\nblock._comment = /<!--(?!-?>)[\\s\\S]*?-->/;\nblock.html = edit(block.html, 'i')\n  .replace('comment', block._comment)\n  .replace('tag', block._tag)\n  .replace('attribute', / +[a-zA-Z:_][\\w.:-]*(?: *= *\"[^\"\\n]*\"| *= *'[^'\\n]*'| *= *[^\\s\"'=<>`]+)?/)\n  .getRegex();\n\nblock.paragraph = edit(block.paragraph)\n  .replace('hr', block.hr)\n  .replace('heading', block.heading)\n  .replace('lheading', block.lheading)\n  .replace('tag', block._tag) // pars can be interrupted by type (6) html blocks\n  .getRegex();\n\nblock.blockquote = edit(block.blockquote)\n  .replace('paragraph', block.paragraph)\n  .getRegex();\n\n/**\n * Normal Block Grammar\n */\n\nblock.normal = merge({}, block);\n\n/**\n * GFM Block Grammar\n */\n\nblock.gfm = merge({}, block.normal, {\n  fences: /^ {0,3}(`{3,}|~{3,})([^`\\n]*)\\n(?:|([\\s\\S]*?)\\n)(?: {0,3}\\1[~`]* *(?:\\n+|$)|$)/,\n  paragraph: /^/,\n  heading: /^ *(#{1,6}) +([^\\n]+?) *#* *(?:\\n+|$)/\n});\n\nblock.gfm.paragraph = edit(block.paragraph)\n  .replace('(?!', '(?!'\n    + block.gfm.fences.source.replace('\\\\1', '\\\\2') + '|'\n    + block.list.source.replace('\\\\1', '\\\\3') + '|')\n  .getRegex();\n\n/**\n * GFM + Tables Block Grammar\n */\n\nblock.tables = merge({}, block.gfm, {\n  nptable: /^ *([^|\\n ].*\\|.*)\\n *([-:]+ *\\|[-| :]*)(?:\\n((?:.*[^>\\n ].*(?:\\n|$))*)\\n*|$)/,\n  table: /^ *\\|(.+)\\n *\\|?( *[-:]+[-| :]*)(?:\\n((?: *[^>\\n ].*(?:\\n|$))*)\\n*|$)/\n});\n\n/**\n * Pedantic grammar\n */\n\nblock.pedantic = merge({}, block.normal, {\n  html: edit(\n    '^ *(?:comment *(?:\\\\n|\\\\s*$)'\n    + '|<(tag)[\\\\s\\\\S]+?</\\\\1> *(?:\\\\n{2,}|\\\\s*$)' // closed tag\n    + '|<tag(?:\"[^\"]*\"|\\'[^\\']*\\'|\\\\s[^\\'\"/>\\\\s]*)*?/?> *(?:\\\\n{2,}|\\\\s*$))')\n    .replace('comment', block._comment)\n    .replace(/tag/g, '(?!(?:'\n      + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub'\n      + '|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)'\n      + '\\\\b)\\\\w+(?!:|[^\\\\w\\\\s@]*@)\\\\b')\n    .getRegex(),\n  def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +([\"(][^\\n]+[\")]))? *(?:\\n+|$)/\n});\n\n/**\n * Block Lexer\n */\n\nfunction Lexer(options) {\n  this.tokens = [];\n  this.tokens.links = Object.create(null);\n  this.options = options || marked.defaults;\n  this.rules = block.normal;\n\n  if (this.options.pedantic) {\n    this.rules = block.pedantic;\n  } else if (this.options.gfm) {\n    if (this.options.tables) {\n      this.rules = block.tables;\n    } else {\n      this.rules = block.gfm;\n    }\n  }\n}\n\n/**\n * Expose Block Rules\n */\n\nLexer.rules = block;\n\n/**\n * Static Lex Method\n */\n\nLexer.lex = function(src, options) {\n  var lexer = new Lexer(options);\n  return lexer.lex(src);\n};\n\n/**\n * Preprocessing\n */\n\nLexer.prototype.lex = function(src) {\n  src = src\n    .replace(/\\r\\n|\\r/g, '\\n')\n    .replace(/\\t/g, '    ')\n    .replace(/\\u00a0/g, ' ')\n    .replace(/\\u2424/g, '\\n');\n\n  return this.token(src, true);\n};\n\n/**\n * Lexing\n */\n\nLexer.prototype.token = function(src, top) {\n  src = src.replace(/^ +$/gm, '');\n  var next,\n      loose,\n      cap,\n      bull,\n      b,\n      item,\n      listStart,\n      listItems,\n      t,\n      space,\n      i,\n      tag,\n      l,\n      isordered,\n      istask,\n      ischecked;\n\n  while (src) {\n    // newline\n    if (cap = this.rules.newline.exec(src)) {\n      src = src.substring(cap[0].length);\n      if (cap[0].length > 1) {\n        this.tokens.push({\n          type: 'space'\n        });\n      }\n    }\n\n    // code\n    if (cap = this.rules.code.exec(src)) {\n      src = src.substring(cap[0].length);\n      cap = cap[0].replace(/^ {4}/gm, '');\n      this.tokens.push({\n        type: 'code',\n        text: !this.options.pedantic\n          ? rtrim(cap, '\\n')\n          : cap\n      });\n      continue;\n    }\n\n    // fences (gfm)\n    if (cap = this.rules.fences.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'code',\n        lang: cap[2] ? cap[2].trim() : cap[2],\n        text: cap[3] || ''\n      });\n      continue;\n    }\n\n    // heading\n    if (cap = this.rules.heading.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'heading',\n        depth: cap[1].length,\n        text: cap[2]\n      });\n      continue;\n    }\n\n    // table no leading pipe (gfm)\n    if (cap = this.rules.nptable.exec(src)) {\n      item = {\n        type: 'table',\n        header: splitCells(cap[1].replace(/^ *| *\\| *$/g, '')),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : []\n      };\n\n      if (item.header.length === item.align.length) {\n        src = src.substring(cap[0].length);\n\n        for (i = 0; i < item.align.length; i++) {\n          if (/^ *-+: *$/.test(item.align[i])) {\n            item.align[i] = 'right';\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\n            item.align[i] = 'center';\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\n            item.align[i] = 'left';\n          } else {\n            item.align[i] = null;\n          }\n        }\n\n        for (i = 0; i < item.cells.length; i++) {\n          item.cells[i] = splitCells(item.cells[i], item.header.length);\n        }\n\n        this.tokens.push(item);\n\n        continue;\n      }\n    }\n\n    // hr\n    if (cap = this.rules.hr.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'hr'\n      });\n      continue;\n    }\n\n    // blockquote\n    if (cap = this.rules.blockquote.exec(src)) {\n      src = src.substring(cap[0].length);\n\n      this.tokens.push({\n        type: 'blockquote_start'\n      });\n\n      cap = cap[0].replace(/^ *> ?/gm, '');\n\n      // Pass `top` to keep the current\n      // \"toplevel\" state. This is exactly\n      // how markdown.pl works.\n      this.token(cap, top);\n\n      this.tokens.push({\n        type: 'blockquote_end'\n      });\n\n      continue;\n    }\n\n    // list\n    if (cap = this.rules.list.exec(src)) {\n      src = src.substring(cap[0].length);\n      bull = cap[2];\n      isordered = bull.length > 1;\n\n      listStart = {\n        type: 'list_start',\n        ordered: isordered,\n        start: isordered ? +bull : '',\n        loose: false\n      };\n\n      this.tokens.push(listStart);\n\n      // Get each top-level item.\n      cap = cap[0].match(this.rules.item);\n\n      listItems = [];\n      next = false;\n      l = cap.length;\n      i = 0;\n\n      for (; i < l; i++) {\n        item = cap[i];\n\n        // Remove the list item's bullet\n        // so it is seen as the next token.\n        space = item.length;\n        item = item.replace(/^ *([*+-]|\\d+\\.) */, '');\n\n        // Outdent whatever the\n        // list item contains. Hacky.\n        if (~item.indexOf('\\n ')) {\n          space -= item.length;\n          item = !this.options.pedantic\n            ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '')\n            : item.replace(/^ {1,4}/gm, '');\n        }\n\n        // Determine whether the next list item belongs here.\n        // Backpedal if it does not belong in this list.\n        if (i !== l - 1) {\n          b = block.bullet.exec(cap[i + 1])[0];\n          if (bull.length > 1 ? b.length === 1\n            : (b.length > 1 || (this.options.smartLists && b !== bull))) {\n            src = cap.slice(i + 1).join('\\n') + src;\n            i = l - 1;\n          }\n        }\n\n        // Determine whether item is loose or not.\n        // Use: /(^|\\n)(?! )[^\\n]+\\n\\n(?!\\s*$)/\n        // for discount behavior.\n        loose = next || /\\n\\n(?!\\s*$)/.test(item);\n        if (i !== l - 1) {\n          next = item.charAt(item.length - 1) === '\\n';\n          if (!loose) loose = next;\n        }\n\n        if (loose) {\n          listStart.loose = true;\n        }\n\n        // Check for task list items\n        istask = /^\\[[ xX]\\] /.test(item);\n        ischecked = undefined;\n        if (istask) {\n          ischecked = item[1] !== ' ';\n          item = item.replace(/^\\[[ xX]\\] +/, '');\n        }\n\n        t = {\n          type: 'list_item_start',\n          task: istask,\n          checked: ischecked,\n          loose: loose\n        };\n\n        listItems.push(t);\n        this.tokens.push(t);\n\n        // Recurse.\n        this.token(item, false);\n\n        this.tokens.push({\n          type: 'list_item_end'\n        });\n      }\n\n      if (listStart.loose) {\n        l = listItems.length;\n        i = 0;\n        for (; i < l; i++) {\n          listItems[i].loose = true;\n        }\n      }\n\n      this.tokens.push({\n        type: 'list_end'\n      });\n\n      continue;\n    }\n\n    // html\n    if (cap = this.rules.html.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: this.options.sanitize\n          ? 'paragraph'\n          : 'html',\n        pre: !this.options.sanitizer\n          && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n        text: cap[0]\n      });\n      continue;\n    }\n\n    // def\n    if (top && (cap = this.rules.def.exec(src))) {\n      src = src.substring(cap[0].length);\n      if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\n      tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n      if (!this.tokens.links[tag]) {\n        this.tokens.links[tag] = {\n          href: cap[2],\n          title: cap[3]\n        };\n      }\n      continue;\n    }\n\n    // table (gfm)\n    if (cap = this.rules.table.exec(src)) {\n      item = {\n        type: 'table',\n        header: splitCells(cap[1].replace(/^ *| *\\| *$/g, '')),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : []\n      };\n\n      if (item.header.length === item.align.length) {\n        src = src.substring(cap[0].length);\n\n        for (i = 0; i < item.align.length; i++) {\n          if (/^ *-+: *$/.test(item.align[i])) {\n            item.align[i] = 'right';\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\n            item.align[i] = 'center';\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\n            item.align[i] = 'left';\n          } else {\n            item.align[i] = null;\n          }\n        }\n\n        for (i = 0; i < item.cells.length; i++) {\n          item.cells[i] = splitCells(\n            item.cells[i].replace(/^ *\\| *| *\\| *$/g, ''),\n            item.header.length);\n        }\n\n        this.tokens.push(item);\n\n        continue;\n      }\n    }\n\n    // lheading\n    if (cap = this.rules.lheading.exec(src)) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'heading',\n        depth: cap[2] === '=' ? 1 : 2,\n        text: cap[1]\n      });\n      continue;\n    }\n\n    // top-level paragraph\n    if (top && (cap = this.rules.paragraph.exec(src))) {\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'paragraph',\n        text: cap[1].charAt(cap[1].length - 1) === '\\n'\n          ? cap[1].slice(0, -1)\n          : cap[1]\n      });\n      continue;\n    }\n\n    // text\n    if (cap = this.rules.text.exec(src)) {\n      // Top-level should never reach here.\n      src = src.substring(cap[0].length);\n      this.tokens.push({\n        type: 'text',\n        text: cap[0]\n      });\n      continue;\n    }\n\n    if (src) {\n      throw new Error('Infinite loop on byte: ' + src.charCodeAt(0));\n    }\n  }\n\n  return this.tokens;\n};\n\n/**\n * Inline-Level Grammar\n */\n\nvar inline = {\n  escape: /^\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/,\n  autolink: /^<(scheme:[^\\s\\x00-\\x1f<>]*|email)>/,\n  url: noop,\n  tag: '^comment'\n    + '|^</[a-zA-Z][\\\\w:-]*\\\\s*>' // self-closing tag\n    + '|^<[a-zA-Z][\\\\w-]*(?:attribute)*?\\\\s*/?>' // open tag\n    + '|^<\\\\?[\\\\s\\\\S]*?\\\\?>' // processing instruction, e.g. <?php ?>\n    + '|^<![a-zA-Z]+\\\\s[\\\\s\\\\S]*?>' // declaration, e.g. <!DOCTYPE html>\n    + '|^<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>', // CDATA section\n  link: /^!?\\[(label)\\]\\(href(?:\\s+(title))?\\s*\\)/,\n  reflink: /^!?\\[(label)\\]\\[(?!\\s*\\])((?:\\\\[\\[\\]]?|[^\\[\\]\\\\])+)\\]/,\n  nolink: /^!?\\[(?!\\s*\\])((?:\\[[^\\[\\]]*\\]|\\\\[\\[\\]]|[^\\[\\]])*)\\](?:\\[\\])?/,\n  strong: /^__([^\\s_])__(?!_)|^\\*\\*([^\\s*])\\*\\*(?!\\*)|^__([^\\s][\\s\\S]*?[^\\s])__(?!_)|^\\*\\*([^\\s][\\s\\S]*?[^\\s])\\*\\*(?!\\*)/,\n  em: /^_([^\\s_])_(?!_)|^\\*([^\\s*\"<\\[])\\*(?!\\*)|^_([^\\s][\\s\\S]*?[^\\s_])_(?!_|[^\\spunctuation])|^_([^\\s_][\\s\\S]*?[^\\s])_(?!_|[^\\spunctuation])|^\\*([^\\s\"<\\[][\\s\\S]*?[^\\s*])\\*(?!\\*)|^\\*([^\\s*\"<\\[][\\s\\S]*?[^\\s])\\*(?!\\*)/,\n  code: /^(`+)([^`]|[^`][\\s\\S]*?[^`])\\1(?!`)/,\n  br: /^( {2,}|\\\\)\\n(?!\\s*$)/,\n  del: noop,\n  text: /^(`+|[^`])(?:[\\s\\S]*?(?:(?=[\\\\<!\\[`*]|\\b_|$)|[^ ](?= {2,}\\n))|(?= {2,}\\n))/\n};\n\n// list of punctuation marks from common mark spec\n// without ` and ] to workaround Rule 17 (inline code blocks/links)\ninline._punctuation = '!\"#$%&\\'()*+,\\\\-./:;<=>?@\\\\[^_{|}~';\ninline.em = edit(inline.em).replace(/punctuation/g, inline._punctuation).getRegex();\n\ninline._escapes = /\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/g;\n\ninline._scheme = /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;\ninline._email = /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;\ninline.autolink = edit(inline.autolink)\n  .replace('scheme', inline._scheme)\n  .replace('email', inline._email)\n  .getRegex();\n\ninline._attribute = /\\s+[a-zA-Z:_][\\w.:-]*(?:\\s*=\\s*\"[^\"]*\"|\\s*=\\s*'[^']*'|\\s*=\\s*[^\\s\"'=<>`]+)?/;\n\ninline.tag = edit(inline.tag)\n  .replace('comment', block._comment)\n  .replace('attribute', inline._attribute)\n  .getRegex();\n\ninline._label = /(?:\\[[^\\[\\]]*\\]|\\\\[\\[\\]]?|`[^`]*`|`(?!`)|[^\\[\\]\\\\`])*?/;\ninline._href = /\\s*(<(?:\\\\[<>]?|[^\\s<>\\\\])*>|[^\\s\\x00-\\x1f]*)/;\ninline._title = /\"(?:\\\\\"?|[^\"\\\\])*\"|'(?:\\\\'?|[^'\\\\])*'|\\((?:\\\\\\)?|[^)\\\\])*\\)/;\n\ninline.link = edit(inline.link)\n  .replace('label', inline._label)\n  .replace('href', inline._href)\n  .replace('title', inline._title)\n  .getRegex();\n\ninline.reflink = edit(inline.reflink)\n  .replace('label', inline._label)\n  .getRegex();\n\n/**\n * Normal Inline Grammar\n */\n\ninline.normal = merge({}, inline);\n\n/**\n * Pedantic Inline Grammar\n */\n\ninline.pedantic = merge({}, inline.normal, {\n  strong: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n  em: /^_(?=\\S)([\\s\\S]*?\\S)_(?!_)|^\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)/,\n  link: edit(/^!?\\[(label)\\]\\((.*?)\\)/)\n    .replace('label', inline._label)\n    .getRegex(),\n  reflink: edit(/^!?\\[(label)\\]\\s*\\[([^\\]]*)\\]/)\n    .replace('label', inline._label)\n    .getRegex()\n});\n\n/**\n * GFM Inline Grammar\n */\n\ninline.gfm = merge({}, inline.normal, {\n  escape: edit(inline.escape).replace('])', '~|])').getRegex(),\n  _extended_email: /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,\n  url: /^((?:ftp|https?):\\/\\/|www\\.)(?:[a-zA-Z0-9\\-]+\\.?)+[^\\s<]*|^email/,\n  _backpedal: /(?:[^?!.,:;*_~()&]+|\\([^)]*\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,\n  del: /^~+(?=\\S)([\\s\\S]*?\\S)~+/,\n  text: /^(`+|[^`])(?:[\\s\\S]*?(?:(?=[\\\\<!\\[`*~]|\\b_|https?:\\/\\/|ftp:\\/\\/|www\\.|$)|[^ ](?= {2,}\\n)|[^a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@))|(?= {2,}\\n|[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@))/\n});\n\ninline.gfm.url = edit(inline.gfm.url, 'i')\n  .replace('email', inline.gfm._extended_email)\n  .getRegex();\n/**\n * GFM + Line Breaks Inline Grammar\n */\n\ninline.breaks = merge({}, inline.gfm, {\n  br: edit(inline.br).replace('{2,}', '*').getRegex(),\n  text: edit(inline.gfm.text).replace(/\\{2,\\}/g, '*').getRegex()\n});\n\n/**\n * Inline Lexer & Compiler\n */\n\nfunction InlineLexer(links, options) {\n  this.options = options || marked.defaults;\n  this.links = links;\n  this.rules = inline.normal;\n  this.renderer = this.options.renderer || new Renderer();\n  this.renderer.options = this.options;\n\n  if (!this.links) {\n    throw new Error('Tokens array requires a `links` property.');\n  }\n\n  if (this.options.pedantic) {\n    this.rules = inline.pedantic;\n  } else if (this.options.gfm) {\n    if (this.options.breaks) {\n      this.rules = inline.breaks;\n    } else {\n      this.rules = inline.gfm;\n    }\n  }\n}\n\n/**\n * Expose Inline Rules\n */\n\nInlineLexer.rules = inline;\n\n/**\n * Static Lexing/Compiling Method\n */\n\nInlineLexer.output = function(src, links, options) {\n  var inline = new InlineLexer(links, options);\n  return inline.output(src);\n};\n\n/**\n * Lexing/Compiling\n */\n\nInlineLexer.prototype.output = function(src) {\n  var out = '',\n      link,\n      text,\n      href,\n      title,\n      cap,\n      prevCapZero;\n\n  while (src) {\n    // escape\n    if (cap = this.rules.escape.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += escape(cap[1]);\n      continue;\n    }\n\n    // tag\n    if (cap = this.rules.tag.exec(src)) {\n      if (!this.inLink && /^<a /i.test(cap[0])) {\n        this.inLink = true;\n      } else if (this.inLink && /^<\\/a>/i.test(cap[0])) {\n        this.inLink = false;\n      }\n      if (!this.inRawBlock && /^<(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n        this.inRawBlock = true;\n      } else if (this.inRawBlock && /^<\\/(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n        this.inRawBlock = false;\n      }\n\n      src = src.substring(cap[0].length);\n      out += this.options.sanitize\n        ? this.options.sanitizer\n          ? this.options.sanitizer(cap[0])\n          : escape(cap[0])\n        : cap[0];\n      continue;\n    }\n\n    // link\n    if (cap = this.rules.link.exec(src)) {\n      var lastParenIndex = findClosingBracket(cap[2], '()');\n      if (lastParenIndex > -1) {\n        var linkLen = cap[0].length - (cap[2].length - lastParenIndex) - (cap[3] || '').length;\n        cap[2] = cap[2].substring(0, lastParenIndex);\n        cap[0] = cap[0].substring(0, linkLen).trim();\n        cap[3] = '';\n      }\n      src = src.substring(cap[0].length);\n      this.inLink = true;\n      href = cap[2];\n      if (this.options.pedantic) {\n        link = /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(href);\n\n        if (link) {\n          href = link[1];\n          title = link[3];\n        } else {\n          title = '';\n        }\n      } else {\n        title = cap[3] ? cap[3].slice(1, -1) : '';\n      }\n      href = href.trim().replace(/^<([\\s\\S]*)>$/, '$1');\n      out += this.outputLink(cap, {\n        href: InlineLexer.escapes(href),\n        title: InlineLexer.escapes(title)\n      });\n      this.inLink = false;\n      continue;\n    }\n\n    // reflink, nolink\n    if ((cap = this.rules.reflink.exec(src))\n        || (cap = this.rules.nolink.exec(src))) {\n      src = src.substring(cap[0].length);\n      link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n      link = this.links[link.toLowerCase()];\n      if (!link || !link.href) {\n        out += cap[0].charAt(0);\n        src = cap[0].substring(1) + src;\n        continue;\n      }\n      this.inLink = true;\n      out += this.outputLink(cap, link);\n      this.inLink = false;\n      continue;\n    }\n\n    // strong\n    if (cap = this.rules.strong.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.strong(this.output(cap[4] || cap[3] || cap[2] || cap[1]));\n      continue;\n    }\n\n    // em\n    if (cap = this.rules.em.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.em(this.output(cap[6] || cap[5] || cap[4] || cap[3] || cap[2] || cap[1]));\n      continue;\n    }\n\n    // code\n    if (cap = this.rules.code.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.codespan(escape(cap[2].trim(), true));\n      continue;\n    }\n\n    // br\n    if (cap = this.rules.br.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.br();\n      continue;\n    }\n\n    // del (gfm)\n    if (cap = this.rules.del.exec(src)) {\n      src = src.substring(cap[0].length);\n      out += this.renderer.del(this.output(cap[1]));\n      continue;\n    }\n\n    // autolink\n    if (cap = this.rules.autolink.exec(src)) {\n      src = src.substring(cap[0].length);\n      if (cap[2] === '@') {\n        text = escape(this.mangle(cap[1]));\n        href = 'mailto:' + text;\n      } else {\n        text = escape(cap[1]);\n        href = text;\n      }\n      out += this.renderer.link(href, null, text);\n      continue;\n    }\n\n    // url (gfm)\n    if (!this.inLink && (cap = this.rules.url.exec(src))) {\n      if (cap[2] === '@') {\n        text = escape(cap[0]);\n        href = 'mailto:' + text;\n      } else {\n        // do extended autolink path validation\n        do {\n          prevCapZero = cap[0];\n          cap[0] = this.rules._backpedal.exec(cap[0])[0];\n        } while (prevCapZero !== cap[0]);\n        text = escape(cap[0]);\n        if (cap[1] === 'www.') {\n          href = 'http://' + text;\n        } else {\n          href = text;\n        }\n      }\n      src = src.substring(cap[0].length);\n      out += this.renderer.link(href, null, text);\n      continue;\n    }\n\n    // text\n    if (cap = this.rules.text.exec(src)) {\n      src = src.substring(cap[0].length);\n      if (this.inRawBlock) {\n        out += this.renderer.text(cap[0]);\n      } else {\n        out += this.renderer.text(escape(this.smartypants(cap[0])));\n      }\n      continue;\n    }\n\n    if (src) {\n      throw new Error('Infinite loop on byte: ' + src.charCodeAt(0));\n    }\n  }\n\n  return out;\n};\n\nInlineLexer.escapes = function(text) {\n  return text ? text.replace(InlineLexer.rules._escapes, '$1') : text;\n};\n\n/**\n * Compile Link\n */\n\nInlineLexer.prototype.outputLink = function(cap, link) {\n  var href = link.href,\n      title = link.title ? escape(link.title) : null;\n\n  return cap[0].charAt(0) !== '!'\n    ? this.renderer.link(href, title, this.output(cap[1]))\n    : this.renderer.image(href, title, escape(cap[1]));\n};\n\n/**\n * Smartypants Transformations\n */\n\nInlineLexer.prototype.smartypants = function(text) {\n  if (!this.options.smartypants) return text;\n  return text\n    // em-dashes\n    .replace(/---/g, '\\u2014')\n    // en-dashes\n    .replace(/--/g, '\\u2013')\n    // opening singles\n    .replace(/(^|[-\\u2014/(\\[{\"\\s])'/g, '$1\\u2018')\n    // closing singles & apostrophes\n    .replace(/'/g, '\\u2019')\n    // opening doubles\n    .replace(/(^|[-\\u2014/(\\[{\\u2018\\s])\"/g, '$1\\u201c')\n    // closing doubles\n    .replace(/\"/g, '\\u201d')\n    // ellipses\n    .replace(/\\.{3}/g, '\\u2026');\n};\n\n/**\n * Mangle Links\n */\n\nInlineLexer.prototype.mangle = function(text) {\n  if (!this.options.mangle) return text;\n  var out = '',\n      l = text.length,\n      i = 0,\n      ch;\n\n  for (; i < l; i++) {\n    ch = text.charCodeAt(i);\n    if (Math.random() > 0.5) {\n      ch = 'x' + ch.toString(16);\n    }\n    out += '&#' + ch + ';';\n  }\n\n  return out;\n};\n\n/**\n * Renderer\n */\n\nfunction Renderer(options) {\n  this.options = options || marked.defaults;\n}\n\nRenderer.prototype.code = function(code, infostring, escaped) {\n  var lang = (infostring || '').match(/\\S*/)[0];\n  if (this.options.highlight) {\n    var out = this.options.highlight(code, lang);\n    if (out != null && out !== code) {\n      escaped = true;\n      code = out;\n    }\n  }\n\n  if (!lang) {\n    return '<pre><code>'\n      + (escaped ? code : escape(code, true))\n      + '</code></pre>';\n  }\n\n  return '<pre><code class=\"'\n    + this.options.langPrefix\n    + escape(lang, true)\n    + '\">'\n    + (escaped ? code : escape(code, true))\n    + '</code></pre>\\n';\n};\n\nRenderer.prototype.blockquote = function(quote) {\n  return '<blockquote>\\n' + quote + '</blockquote>\\n';\n};\n\nRenderer.prototype.html = function(html) {\n  return html;\n};\n\nRenderer.prototype.heading = function(text, level, raw, slugger) {\n  if (this.options.headerIds) {\n    return '<h'\n      + level\n      + ' id=\"'\n      + this.options.headerPrefix\n      + slugger.slug(raw)\n      + '\">'\n      + text\n      + '</h'\n      + level\n      + '>\\n';\n  }\n  // ignore IDs\n  return '<h' + level + '>' + text + '</h' + level + '>\\n';\n};\n\nRenderer.prototype.hr = function() {\n  return this.options.xhtml ? '<hr/>\\n' : '<hr>\\n';\n};\n\nRenderer.prototype.list = function(body, ordered, start) {\n  var type = ordered ? 'ol' : 'ul',\n      startatt = (ordered && start !== 1) ? (' start=\"' + start + '\"') : '';\n  return '<' + type + startatt + '>\\n' + body + '</' + type + '>\\n';\n};\n\nRenderer.prototype.listitem = function(text) {\n  return '<li>' + text + '</li>\\n';\n};\n\nRenderer.prototype.checkbox = function(checked) {\n  return '<input '\n    + (checked ? 'checked=\"\" ' : '')\n    + 'disabled=\"\" type=\"checkbox\"'\n    + (this.options.xhtml ? ' /' : '')\n    + '> ';\n};\n\nRenderer.prototype.paragraph = function(text) {\n  return '<p>' + text + '</p>\\n';\n};\n\nRenderer.prototype.table = function(header, body) {\n  if (body) body = '<tbody>' + body + '</tbody>';\n\n  return '<table>\\n'\n    + '<thead>\\n'\n    + header\n    + '</thead>\\n'\n    + body\n    + '</table>\\n';\n};\n\nRenderer.prototype.tablerow = function(content) {\n  return '<tr>\\n' + content + '</tr>\\n';\n};\n\nRenderer.prototype.tablecell = function(content, flags) {\n  var type = flags.header ? 'th' : 'td';\n  var tag = flags.align\n    ? '<' + type + ' align=\"' + flags.align + '\">'\n    : '<' + type + '>';\n  return tag + content + '</' + type + '>\\n';\n};\n\n// span level renderer\nRenderer.prototype.strong = function(text) {\n  return '<strong>' + text + '</strong>';\n};\n\nRenderer.prototype.em = function(text) {\n  return '<em>' + text + '</em>';\n};\n\nRenderer.prototype.codespan = function(text) {\n  return '<code>' + text + '</code>';\n};\n\nRenderer.prototype.br = function() {\n  return this.options.xhtml ? '<br/>' : '<br>';\n};\n\nRenderer.prototype.del = function(text) {\n  return '<del>' + text + '</del>';\n};\n\nRenderer.prototype.link = function(href, title, text) {\n  href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n  if (href === null) {\n    return text;\n  }\n  var out = '<a href=\"' + escape(href) + '\"';\n  if (title) {\n    out += ' title=\"' + title + '\"';\n  }\n  out += '>' + text + '</a>';\n  return out;\n};\n\nRenderer.prototype.image = function(href, title, text) {\n  href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n  if (href === null) {\n    return text;\n  }\n\n  var out = '<img src=\"' + href + '\" alt=\"' + text + '\"';\n  if (title) {\n    out += ' title=\"' + title + '\"';\n  }\n  out += this.options.xhtml ? '/>' : '>';\n  return out;\n};\n\nRenderer.prototype.text = function(text) {\n  return text;\n};\n\n/**\n * TextRenderer\n * returns only the textual part of the token\n */\n\nfunction TextRenderer() {}\n\n// no need for block level renderers\n\nTextRenderer.prototype.strong =\nTextRenderer.prototype.em =\nTextRenderer.prototype.codespan =\nTextRenderer.prototype.del =\nTextRenderer.prototype.text = function (text) {\n  return text;\n};\n\nTextRenderer.prototype.link =\nTextRenderer.prototype.image = function(href, title, text) {\n  return '' + text;\n};\n\nTextRenderer.prototype.br = function() {\n  return '';\n};\n\n/**\n * Parsing & Compiling\n */\n\nfunction Parser(options) {\n  this.tokens = [];\n  this.token = null;\n  this.options = options || marked.defaults;\n  this.options.renderer = this.options.renderer || new Renderer();\n  this.renderer = this.options.renderer;\n  this.renderer.options = this.options;\n  this.slugger = new Slugger();\n}\n\n/**\n * Static Parse Method\n */\n\nParser.parse = function(src, options) {\n  var parser = new Parser(options);\n  return parser.parse(src);\n};\n\n/**\n * Parse Loop\n */\n\nParser.prototype.parse = function(src) {\n  this.inline = new InlineLexer(src.links, this.options);\n  // use an InlineLexer with a TextRenderer to extract pure text\n  this.inlineText = new InlineLexer(\n    src.links,\n    merge({}, this.options, {renderer: new TextRenderer()})\n  );\n  this.tokens = src.reverse();\n\n  var out = '';\n  while (this.next()) {\n    out += this.tok();\n  }\n\n  return out;\n};\n\n/**\n * Next Token\n */\n\nParser.prototype.next = function() {\n  return this.token = this.tokens.pop();\n};\n\n/**\n * Preview Next Token\n */\n\nParser.prototype.peek = function() {\n  return this.tokens[this.tokens.length - 1] || 0;\n};\n\n/**\n * Parse Text Tokens\n */\n\nParser.prototype.parseText = function() {\n  var body = this.token.text;\n\n  while (this.peek().type === 'text') {\n    body += '\\n' + this.next().text;\n  }\n\n  return this.inline.output(body);\n};\n\n/**\n * Parse Current Token\n */\n\nParser.prototype.tok = function() {\n  switch (this.token.type) {\n    case 'space': {\n      return '';\n    }\n    case 'hr': {\n      return this.renderer.hr();\n    }\n    case 'heading': {\n      return this.renderer.heading(\n        this.inline.output(this.token.text),\n        this.token.depth,\n        unescape(this.inlineText.output(this.token.text)),\n        this.slugger);\n    }\n    case 'code': {\n      return this.renderer.code(this.token.text,\n        this.token.lang,\n        this.token.escaped);\n    }\n    case 'table': {\n      var header = '',\n          body = '',\n          i,\n          row,\n          cell,\n          j;\n\n      // header\n      cell = '';\n      for (i = 0; i < this.token.header.length; i++) {\n        cell += this.renderer.tablecell(\n          this.inline.output(this.token.header[i]),\n          { header: true, align: this.token.align[i] }\n        );\n      }\n      header += this.renderer.tablerow(cell);\n\n      for (i = 0; i < this.token.cells.length; i++) {\n        row = this.token.cells[i];\n\n        cell = '';\n        for (j = 0; j < row.length; j++) {\n          cell += this.renderer.tablecell(\n            this.inline.output(row[j]),\n            { header: false, align: this.token.align[j] }\n          );\n        }\n\n        body += this.renderer.tablerow(cell);\n      }\n      return this.renderer.table(header, body);\n    }\n    case 'blockquote_start': {\n      body = '';\n\n      while (this.next().type !== 'blockquote_end') {\n        body += this.tok();\n      }\n\n      return this.renderer.blockquote(body);\n    }\n    case 'list_start': {\n      body = '';\n      var ordered = this.token.ordered,\n          start = this.token.start;\n\n      while (this.next().type !== 'list_end') {\n        body += this.tok();\n      }\n\n      return this.renderer.list(body, ordered, start);\n    }\n    case 'list_item_start': {\n      body = '';\n      var loose = this.token.loose;\n      var checked = this.token.checked;\n      var task = this.token.task;\n\n      if (this.token.task) {\n        body += this.renderer.checkbox(checked);\n      }\n\n      while (this.next().type !== 'list_item_end') {\n        body += !loose && this.token.type === 'text'\n          ? this.parseText()\n          : this.tok();\n      }\n      return this.renderer.listitem(body, task, checked);\n    }\n    case 'html': {\n      // TODO parse inline content if parameter markdown=1\n      return this.renderer.html(this.token.text);\n    }\n    case 'paragraph': {\n      return this.renderer.paragraph(this.inline.output(this.token.text));\n    }\n    case 'text': {\n      return this.renderer.paragraph(this.parseText());\n    }\n    default: {\n      var errMsg = 'Token with \"' + this.token.type + '\" type was not found.';\n      if (this.options.silent) {\n        console.log(errMsg);\n      } else {\n        throw new Error(errMsg);\n      }\n    }\n  }\n};\n\n/**\n * Slugger generates header id\n */\n\nfunction Slugger () {\n  this.seen = {};\n}\n\n/**\n * Convert string to unique id\n */\n\nSlugger.prototype.slug = function (value) {\n  var slug = value\n    .toLowerCase()\n    .trim()\n    .replace(/[\\u2000-\\u206F\\u2E00-\\u2E7F\\\\'!\"#$%&()*+,./:;<=>?@[\\]^`{|}~]/g, '')\n    .replace(/\\s/g, '-');\n\n  if (this.seen.hasOwnProperty(slug)) {\n    var originalSlug = slug;\n    do {\n      this.seen[originalSlug]++;\n      slug = originalSlug + '-' + this.seen[originalSlug];\n    } while (this.seen.hasOwnProperty(slug));\n  }\n  this.seen[slug] = 0;\n\n  return slug;\n};\n\n/**\n * Helpers\n */\n\nfunction escape(html, encode) {\n  if (encode) {\n    if (escape.escapeTest.test(html)) {\n      return html.replace(escape.escapeReplace, function (ch) { return escape.replacements[ch]; });\n    }\n  } else {\n    if (escape.escapeTestNoEncode.test(html)) {\n      return html.replace(escape.escapeReplaceNoEncode, function (ch) { return escape.replacements[ch]; });\n    }\n  }\n\n  return html;\n}\n\nescape.escapeTest = /[&<>\"']/;\nescape.escapeReplace = /[&<>\"']/g;\nescape.replacements = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;'\n};\n\nescape.escapeTestNoEncode = /[<>\"']|&(?!#?\\w+;)/;\nescape.escapeReplaceNoEncode = /[<>\"']|&(?!#?\\w+;)/g;\n\nfunction unescape(html) {\n  // explicitly match decimal, hex, and named HTML entities\n  return html.replace(/&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig, function(_, n) {\n    n = n.toLowerCase();\n    if (n === 'colon') return ':';\n    if (n.charAt(0) === '#') {\n      return n.charAt(1) === 'x'\n        ? String.fromCharCode(parseInt(n.substring(2), 16))\n        : String.fromCharCode(+n.substring(1));\n    }\n    return '';\n  });\n}\n\nfunction edit(regex, opt) {\n  regex = regex.source || regex;\n  opt = opt || '';\n  return {\n    replace: function(name, val) {\n      val = val.source || val;\n      val = val.replace(/(^|[^\\[])\\^/g, '$1');\n      regex = regex.replace(name, val);\n      return this;\n    },\n    getRegex: function() {\n      return new RegExp(regex, opt);\n    }\n  };\n}\n\nfunction cleanUrl(sanitize, base, href) {\n  if (sanitize) {\n    try {\n      var prot = decodeURIComponent(unescape(href))\n        .replace(/[^\\w:]/g, '')\n        .toLowerCase();\n    } catch (e) {\n      return null;\n    }\n    if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n      return null;\n    }\n  }\n  if (base && !originIndependentUrl.test(href)) {\n    href = resolveUrl(base, href);\n  }\n  try {\n    href = encodeURI(href).replace(/%25/g, '%');\n  } catch (e) {\n    return null;\n  }\n  return href;\n}\n\nfunction resolveUrl(base, href) {\n  if (!baseUrls[' ' + base]) {\n    // we can ignore everything in base after the last slash of its path component,\n    // but we might need to add _that_\n    // https://tools.ietf.org/html/rfc3986#section-3\n    if (/^[^:]+:\\/*[^/]*$/.test(base)) {\n      baseUrls[' ' + base] = base + '/';\n    } else {\n      baseUrls[' ' + base] = rtrim(base, '/', true);\n    }\n  }\n  base = baseUrls[' ' + base];\n\n  if (href.slice(0, 2) === '//') {\n    return base.replace(/:[\\s\\S]*/, ':') + href;\n  } else if (href.charAt(0) === '/') {\n    return base.replace(/(:\\/*[^/]*)[\\s\\S]*/, '$1') + href;\n  } else {\n    return base + href;\n  }\n}\nvar baseUrls = {};\nvar originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\n\nfunction noop() {}\nnoop.exec = noop;\n\nfunction merge(obj) {\n  var i = 1,\n      target,\n      key;\n\n  for (; i < arguments.length; i++) {\n    target = arguments[i];\n    for (key in target) {\n      if (Object.prototype.hasOwnProperty.call(target, key)) {\n        obj[key] = target[key];\n      }\n    }\n  }\n\n  return obj;\n}\n\nfunction splitCells(tableRow, count) {\n  // ensure that every cell-delimiting pipe has a space\n  // before it to distinguish it from an escaped pipe\n  var row = tableRow.replace(/\\|/g, function (match, offset, str) {\n        var escaped = false,\n            curr = offset;\n        while (--curr >= 0 && str[curr] === '\\\\') escaped = !escaped;\n        if (escaped) {\n          // odd number of slashes means | is escaped\n          // so we leave it alone\n          return '|';\n        } else {\n          // add space before unescaped |\n          return ' |';\n        }\n      }),\n      cells = row.split(/ \\|/),\n      i = 0;\n\n  if (cells.length > count) {\n    cells.splice(count);\n  } else {\n    while (cells.length < count) cells.push('');\n  }\n\n  for (; i < cells.length; i++) {\n    // leading or trailing whitespace is ignored per the gfm spec\n    cells[i] = cells[i].trim().replace(/\\\\\\|/g, '|');\n  }\n  return cells;\n}\n\n// Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n// /c*$/ is vulnerable to REDOS.\n// invert: Remove suffix of non-c chars instead. Default falsey.\nfunction rtrim(str, c, invert) {\n  if (str.length === 0) {\n    return '';\n  }\n\n  // Length of suffix matching the invert condition.\n  var suffLen = 0;\n\n  // Step left until we fail to match the invert condition.\n  while (suffLen < str.length) {\n    var currChar = str.charAt(str.length - suffLen - 1);\n    if (currChar === c && !invert) {\n      suffLen++;\n    } else if (currChar !== c && invert) {\n      suffLen++;\n    } else {\n      break;\n    }\n  }\n\n  return str.substr(0, str.length - suffLen);\n}\n\nfunction findClosingBracket(str, b) {\n  if (str.indexOf(b[1]) === -1) {\n    return -1;\n  }\n  var level = 0;\n  for (var i = 0; i < str.length; i++) {\n    if (str[i] === '\\\\') {\n      i++;\n    } else if (str[i] === b[0]) {\n      level++;\n    } else if (str[i] === b[1]) {\n      level--;\n      if (level < 0) {\n        return i;\n      }\n    }\n  }\n  return -1;\n}\n\n/**\n * Marked\n */\n\nfunction marked(src, opt, callback) {\n  // throw error in case of non string input\n  if (typeof src === 'undefined' || src === null) {\n    throw new Error('marked(): input parameter is undefined or null');\n  }\n  if (typeof src !== 'string') {\n    throw new Error('marked(): input parameter is of type '\n      + Object.prototype.toString.call(src) + ', string expected');\n  }\n\n  if (callback || typeof opt === 'function') {\n    if (!callback) {\n      callback = opt;\n      opt = null;\n    }\n\n    opt = merge({}, marked.defaults, opt || {});\n\n    var highlight = opt.highlight,\n        tokens,\n        pending,\n        i = 0;\n\n    try {\n      tokens = Lexer.lex(src, opt);\n    } catch (e) {\n      return callback(e);\n    }\n\n    pending = tokens.length;\n\n    var done = function(err) {\n      if (err) {\n        opt.highlight = highlight;\n        return callback(err);\n      }\n\n      var out;\n\n      try {\n        out = Parser.parse(tokens, opt);\n      } catch (e) {\n        err = e;\n      }\n\n      opt.highlight = highlight;\n\n      return err\n        ? callback(err)\n        : callback(null, out);\n    };\n\n    if (!highlight || highlight.length < 3) {\n      return done();\n    }\n\n    delete opt.highlight;\n\n    if (!pending) return done();\n\n    for (; i < tokens.length; i++) {\n      (function(token) {\n        if (token.type !== 'code') {\n          return --pending || done();\n        }\n        return highlight(token.text, token.lang, function(err, code) {\n          if (err) return done(err);\n          if (code == null || code === token.text) {\n            return --pending || done();\n          }\n          token.text = code;\n          token.escaped = true;\n          --pending || done();\n        });\n      })(tokens[i]);\n    }\n\n    return;\n  }\n  try {\n    if (opt) opt = merge({}, marked.defaults, opt);\n    return Parser.parse(Lexer.lex(src, opt), opt);\n  } catch (e) {\n    e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n    if ((opt || marked.defaults).silent) {\n      return '<p>An error occurred:</p><pre>'\n        + escape(e.message + '', true)\n        + '</pre>';\n    }\n    throw e;\n  }\n}\n\n/**\n * Options\n */\n\nmarked.options =\nmarked.setOptions = function(opt) {\n  merge(marked.defaults, opt);\n  return marked;\n};\n\nmarked.getDefaults = function () {\n  return {\n    baseUrl: null,\n    breaks: false,\n    gfm: true,\n    headerIds: true,\n    headerPrefix: '',\n    highlight: null,\n    langPrefix: 'language-',\n    mangle: true,\n    pedantic: false,\n    renderer: new Renderer(),\n    sanitize: false,\n    sanitizer: null,\n    silent: false,\n    smartLists: false,\n    smartypants: false,\n    tables: true,\n    xhtml: false\n  };\n};\n\nmarked.defaults = marked.getDefaults();\n\n/**\n * Expose\n */\n\nmarked.Parser = Parser;\nmarked.parser = Parser.parse;\n\nmarked.Renderer = Renderer;\nmarked.TextRenderer = TextRenderer;\n\nmarked.Lexer = Lexer;\nmarked.lexer = Lexer.lex;\n\nmarked.InlineLexer = InlineLexer;\nmarked.inlineLexer = InlineLexer.output;\n\nmarked.Slugger = Slugger;\n\nmarked.parse = marked;\n\n// BEGIN MONACOCHANGE\n// if (typeof module !== 'undefined' && typeof exports === 'object') {\n//   module.exports = marked;\n// } else if (typeof define === 'function' && define.amd) {\n//   define(function() { return marked; });\n// } else {\n//   root.marked = marked;\n// }\n// })(this || (typeof window !== 'undefined' ? window : global));\n__marked_exports = marked;\n}).call(this);\n\n// ESM-comment-begin\n// define(function() { return __marked_exports; });\n// ESM-comment-end\n\n// ESM-uncomment-begin\nexport var marked = __marked_exports;\nexport var Parser = __marked_exports.Parser;\nexport var parser = __marked_exports.parser;\nexport var Renderer = __marked_exports.Renderer;\nexport var TextRenderer = __marked_exports.TextRenderer;\nexport var Lexer = __marked_exports.Lexer;\nexport var lexer = __marked_exports.lexer;\nexport var InlineLexer = __marked_exports.InlineLexer;\nexport var inlineLexer = __marked_exports.inlineLexer;\nexport var parse = __marked_exports.parse;\n// ESM-uncomment-end\n// END MONACOCHANGE\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nimport { toggleClass } from '../../../base/browser/dom.js';\r\nimport { DomScrollableElement } from '../../../base/browser/ui/scrollbar/scrollableElement.js';\r\nimport { Widget } from '../../../base/browser/ui/widget.js';\r\nvar ContentHoverWidget = /** @class */ (function (_super) {\r\n    __extends(ContentHoverWidget, _super);\r\n    function ContentHoverWidget(id, editor) {\r\n        var _this = _super.call(this) || this;\r\n        // Editor.IContentWidget.allowEditorOverflow\r\n        _this.allowEditorOverflow = true;\r\n        _this._id = id;\r\n        _this._editor = editor;\r\n        _this._isVisible = false;\r\n        _this._stoleFocus = false;\r\n        _this._containerDomNode = document.createElement('div');\r\n        _this._containerDomNode.className = 'monaco-editor-hover hidden';\r\n        _this._containerDomNode.tabIndex = 0;\r\n        _this._domNode = document.createElement('div');\r\n        _this._domNode.className = 'monaco-editor-hover-content';\r\n        _this.scrollbar = new DomScrollableElement(_this._domNode, {});\r\n        _this._register(_this.scrollbar);\r\n        _this._containerDomNode.appendChild(_this.scrollbar.getDomNode());\r\n        _this.onkeydown(_this._containerDomNode, function (e) {\r\n            if (e.equals(9 /* Escape */)) {\r\n                _this.hide();\r\n            }\r\n        });\r\n        _this._register(_this._editor.onDidChangeConfiguration(function (e) {\r\n            if (e.hasChanged(32 /* fontInfo */)) {\r\n                _this.updateFont();\r\n            }\r\n        }));\r\n        _this._editor.onDidLayoutChange(function (e) { return _this.layout(); });\r\n        _this.layout();\r\n        _this._editor.addContentWidget(_this);\r\n        _this._showAtPosition = null;\r\n        _this._showAtRange = null;\r\n        _this._stoleFocus = false;\r\n        return _this;\r\n    }\r\n    Object.defineProperty(ContentHoverWidget.prototype, \"isVisible\", {\r\n        get: function () {\r\n            return this._isVisible;\r\n        },\r\n        set: function (value) {\r\n            this._isVisible = value;\r\n            toggleClass(this._containerDomNode, 'hidden', !this._isVisible);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ContentHoverWidget.prototype.getId = function () {\r\n        return this._id;\r\n    };\r\n    ContentHoverWidget.prototype.getDomNode = function () {\r\n        return this._containerDomNode;\r\n    };\r\n    ContentHoverWidget.prototype.showAt = function (position, range, focus) {\r\n        // Position has changed\r\n        this._showAtPosition = position;\r\n        this._showAtRange = range;\r\n        this.isVisible = true;\r\n        this._editor.layoutContentWidget(this);\r\n        // Simply force a synchronous render on the editor\r\n        // such that the widget does not really render with left = '0px'\r\n        this._editor.render();\r\n        this._stoleFocus = focus;\r\n        if (focus) {\r\n            this._containerDomNode.focus();\r\n        }\r\n    };\r\n    ContentHoverWidget.prototype.hide = function () {\r\n        if (!this.isVisible) {\r\n            return;\r\n        }\r\n        this.isVisible = false;\r\n        this._editor.layoutContentWidget(this);\r\n        if (this._stoleFocus) {\r\n            this._editor.focus();\r\n        }\r\n    };\r\n    ContentHoverWidget.prototype.getPosition = function () {\r\n        if (this.isVisible) {\r\n            return {\r\n                position: this._showAtPosition,\r\n                range: this._showAtRange,\r\n                preference: [\r\n                    1 /* ABOVE */,\r\n                    2 /* BELOW */\r\n                ]\r\n            };\r\n        }\r\n        return null;\r\n    };\r\n    ContentHoverWidget.prototype.dispose = function () {\r\n        this._editor.removeContentWidget(this);\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    ContentHoverWidget.prototype.updateFont = function () {\r\n        var _this = this;\r\n        var codeClasses = Array.prototype.slice.call(this._domNode.getElementsByClassName('code'));\r\n        codeClasses.forEach(function (node) { return _this._editor.applyFontInfo(node); });\r\n    };\r\n    ContentHoverWidget.prototype.updateContents = function (node) {\r\n        this._domNode.textContent = '';\r\n        this._domNode.appendChild(node);\r\n        this.updateFont();\r\n        this._editor.layoutContentWidget(this);\r\n        this.onContentsChange();\r\n    };\r\n    ContentHoverWidget.prototype.onContentsChange = function () {\r\n        this.scrollbar.scanDomNode();\r\n    };\r\n    ContentHoverWidget.prototype.layout = function () {\r\n        var height = Math.max(this._editor.getLayoutInfo().height / 4, 250);\r\n        var _a = this._editor.getOption(32 /* fontInfo */), fontSize = _a.fontSize, lineHeight = _a.lineHeight;\r\n        this._domNode.style.fontSize = fontSize + \"px\";\r\n        this._domNode.style.lineHeight = lineHeight + \"px\";\r\n        this._domNode.style.maxHeight = height + \"px\";\r\n        this._domNode.style.maxWidth = Math.max(this._editor.getLayoutInfo().width * 0.66, 500) + \"px\";\r\n    };\r\n    return ContentHoverWidget;\r\n}(Widget));\r\nexport { ContentHoverWidget };\r\nvar GlyphHoverWidget = /** @class */ (function (_super) {\r\n    __extends(GlyphHoverWidget, _super);\r\n    function GlyphHoverWidget(id, editor) {\r\n        var _this = _super.call(this) || this;\r\n        _this._id = id;\r\n        _this._editor = editor;\r\n        _this._isVisible = false;\r\n        _this._domNode = document.createElement('div');\r\n        _this._domNode.className = 'monaco-editor-hover hidden';\r\n        _this._domNode.setAttribute('aria-hidden', 'true');\r\n        _this._domNode.setAttribute('role', 'presentation');\r\n        _this._showAtLineNumber = -1;\r\n        _this._register(_this._editor.onDidChangeConfiguration(function (e) {\r\n            if (e.hasChanged(32 /* fontInfo */)) {\r\n                _this.updateFont();\r\n            }\r\n        }));\r\n        _this._editor.addOverlayWidget(_this);\r\n        return _this;\r\n    }\r\n    Object.defineProperty(GlyphHoverWidget.prototype, \"isVisible\", {\r\n        get: function () {\r\n            return this._isVisible;\r\n        },\r\n        set: function (value) {\r\n            this._isVisible = value;\r\n            toggleClass(this._domNode, 'hidden', !this._isVisible);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    GlyphHoverWidget.prototype.getId = function () {\r\n        return this._id;\r\n    };\r\n    GlyphHoverWidget.prototype.getDomNode = function () {\r\n        return this._domNode;\r\n    };\r\n    GlyphHoverWidget.prototype.showAt = function (lineNumber) {\r\n        this._showAtLineNumber = lineNumber;\r\n        if (!this.isVisible) {\r\n            this.isVisible = true;\r\n        }\r\n        var editorLayout = this._editor.getLayoutInfo();\r\n        var topForLineNumber = this._editor.getTopForLineNumber(this._showAtLineNumber);\r\n        var editorScrollTop = this._editor.getScrollTop();\r\n        var lineHeight = this._editor.getOption(47 /* lineHeight */);\r\n        var nodeHeight = this._domNode.clientHeight;\r\n        var top = topForLineNumber - editorScrollTop - ((nodeHeight - lineHeight) / 2);\r\n        this._domNode.style.left = editorLayout.glyphMarginLeft + editorLayout.glyphMarginWidth + \"px\";\r\n        this._domNode.style.top = Math.max(Math.round(top), 0) + \"px\";\r\n    };\r\n    GlyphHoverWidget.prototype.hide = function () {\r\n        if (!this.isVisible) {\r\n            return;\r\n        }\r\n        this.isVisible = false;\r\n    };\r\n    GlyphHoverWidget.prototype.getPosition = function () {\r\n        return null;\r\n    };\r\n    GlyphHoverWidget.prototype.dispose = function () {\r\n        this._editor.removeOverlayWidget(this);\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    GlyphHoverWidget.prototype.updateFont = function () {\r\n        var _this = this;\r\n        var codeTags = Array.prototype.slice.call(this._domNode.getElementsByTagName('code'));\r\n        var codeClasses = Array.prototype.slice.call(this._domNode.getElementsByClassName('code'));\r\n        __spreadArrays(codeTags, codeClasses).forEach(function (node) { return _this._editor.applyFontInfo(node); });\r\n    };\r\n    GlyphHoverWidget.prototype.updateContents = function (node) {\r\n        this._domNode.textContent = '';\r\n        this._domNode.appendChild(node);\r\n        this.updateFont();\r\n    };\r\n    return GlyphHoverWidget;\r\n}(Widget));\r\nexport { GlyphHoverWidget };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar IdGenerator = /** @class */ (function () {\r\n    function IdGenerator(prefix) {\r\n        this._prefix = prefix;\r\n        this._lastId = 0;\r\n    }\r\n    IdGenerator.prototype.nextId = function () {\r\n        return this._prefix + (++this._lastId);\r\n    };\r\n    return IdGenerator;\r\n}());\r\nexport { IdGenerator };\r\nexport var defaultGenerator = new IdGenerator('id#');\r\n","/*\nThe MIT License (MIT)\n\nCopyright © 2015 Nicolas Bevacqua\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of\nthis software and associated documentation files (the \"Software\"), to deal in\nthe Software without restriction, including without limitation the rights to\nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\nthe Software, and to permit persons to whom the Software is furnished to do so,\nsubject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\nFOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\nCOPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\nIN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\nCONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nlet __insane_func;\n\n(function () { function r(e, n, t) { function o(i, f) { if (!n[i]) { if (!e[i]) { var c = \"function\" == typeof require && require; if (!f && c) return c(i, !0); if (u) return u(i, !0); var a = new Error(\"Cannot find module '\" + i + \"'\"); throw a.code = \"MODULE_NOT_FOUND\", a } var p = n[i] = { exports: {} }; e[i][0].call(p.exports, function (r) { var n = e[i][1][r]; return o(n || r) }, p, p.exports, r, e, n, t) } return n[i].exports } for (var u = \"function\" == typeof require && require, i = 0; i < t.length; i++)o(t[i]); return o } return r })()({\n\t1: [function (require, module, exports) {\n\t\t'use strict';\n\n\t\tvar toMap = require('./toMap');\n\t\tvar uris = ['background', 'base', 'cite', 'href', 'longdesc', 'src', 'usemap'];\n\n\t\tmodule.exports = {\n\t\t\turis: toMap(uris) // attributes that have an href and hence need to be sanitized\n\t\t};\n\n\t}, { \"./toMap\": 10 }], 2: [function (require, module, exports) {\n\t\t'use strict';\n\n\t\tvar defaults = {\n\t\t\tallowedAttributes: {\n\t\t\t\t'*': ['title', 'accesskey'],\n\t\t\t\ta: ['href', 'name', 'target', 'aria-label'],\n\t\t\t\tiframe: ['allowfullscreen', 'frameborder', 'src'],\n\t\t\t\timg: ['src', 'alt', 'title', 'aria-label']\n\t\t\t},\n\t\t\tallowedClasses: {},\n\t\t\tallowedSchemes: ['http', 'https', 'mailto'],\n\t\t\tallowedTags: [\n\t\t\t\t'a', 'abbr', 'article', 'b', 'blockquote', 'br', 'caption', 'code', 'del', 'details', 'div', 'em',\n\t\t\t\t'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'hr', 'i', 'img', 'ins', 'kbd', 'li', 'main', 'mark',\n\t\t\t\t'ol', 'p', 'pre', 'section', 'span', 'strike', 'strong', 'sub', 'summary', 'sup', 'table',\n\t\t\t\t'tbody', 'td', 'th', 'thead', 'tr', 'u', 'ul'\n\t\t\t],\n\t\t\tfilter: null\n\t\t};\n\n\t\tmodule.exports = defaults;\n\n\t}, {}], 3: [function (require, module, exports) {\n\t\t'use strict';\n\n\t\tvar toMap = require('./toMap');\n\t\tvar voids = ['area', 'br', 'col', 'hr', 'img', 'wbr', 'input', 'base', 'basefont', 'link', 'meta'];\n\n\t\tmodule.exports = {\n\t\t\tvoids: toMap(voids)\n\t\t};\n\n\t}, { \"./toMap\": 10 }], 4: [function (require, module, exports) {\n\t\t'use strict';\n\n\t\tvar he = require('he');\n\t\tvar assign = require('assignment');\n\t\tvar parser = require('./parser');\n\t\tvar sanitizer = require('./sanitizer');\n\t\tvar defaults = require('./defaults');\n\n\t\tfunction insane(html, options, strict) {\n\t\t\tvar buffer = [];\n\t\t\tvar configuration = strict === true ? options : assign({}, defaults, options);\n\t\t\tvar handler = sanitizer(buffer, configuration);\n\n\t\t\tparser(html, handler);\n\n\t\t\treturn buffer.join('');\n\t\t}\n\n\t\tinsane.defaults = defaults;\n\t\tmodule.exports = insane;\n\t\t__insane_func = insane;\n\n\t}, { \"./defaults\": 2, \"./parser\": 7, \"./sanitizer\": 8, \"assignment\": 6, \"he\": 9 }], 5: [function (require, module, exports) {\n\t\t'use strict';\n\n\t\tmodule.exports = function lowercase(string) {\n\t\t\treturn typeof string === 'string' ? string.toLowerCase() : string;\n\t\t};\n\n\t}, {}], 6: [function (require, module, exports) {\n\t\t'use strict';\n\n\t\tfunction assignment(result) {\n\t\t\tvar stack = Array.prototype.slice.call(arguments, 1);\n\t\t\tvar item;\n\t\t\tvar key;\n\t\t\twhile (stack.length) {\n\t\t\t\titem = stack.shift();\n\t\t\t\tfor (key in item) {\n\t\t\t\t\tif (item.hasOwnProperty(key)) {\n\t\t\t\t\t\tif (Object.prototype.toString.call(result[key]) === '[object Object]') {\n\t\t\t\t\t\t\tresult[key] = assignment(result[key], item[key]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresult[key] = item[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\n\t\tmodule.exports = assignment;\n\n\t}, {}], 7: [function (require, module, exports) {\n\t\t'use strict';\n\n\t\tvar he = require('he');\n\t\tvar lowercase = require('./lowercase');\n\t\tvar attributes = require('./attributes');\n\t\tvar elements = require('./elements');\n\t\tvar rstart = /^<\\s*([\\w:-]+)((?:\\s+[\\w:-]+(?:\\s*=\\s*(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>\\s]+))?)*)\\s*(\\/?)\\s*>/;\n\t\tvar rend = /^<\\s*\\/\\s*([\\w:-]+)[^>]*>/;\n\t\tvar rattrs = /([\\w:-]+)(?:\\s*=\\s*(?:(?:\"((?:[^\"])*)\")|(?:'((?:[^'])*)')|([^>\\s]+)))?/g;\n\t\tvar rtag = /^</;\n\t\tvar rtagend = /^<\\s*\\//;\n\n\t\tfunction createStack() {\n\t\t\tvar stack = [];\n\t\t\tstack.lastItem = function lastItem() {\n\t\t\t\treturn stack[stack.length - 1];\n\t\t\t};\n\t\t\treturn stack;\n\t\t}\n\n\t\tfunction parser(html, handler) {\n\t\t\tvar stack = createStack();\n\t\t\tvar last = html;\n\t\t\tvar chars;\n\n\t\t\twhile (html) {\n\t\t\t\tparsePart();\n\t\t\t}\n\t\t\tparseEndTag(); // clean up any remaining tags\n\n\t\t\tfunction parsePart() {\n\t\t\t\tchars = true;\n\t\t\t\tparseTag();\n\n\t\t\t\tvar same = html === last;\n\t\t\t\tlast = html;\n\n\t\t\t\tif (same) { // discard, because it's invalid\n\t\t\t\t\thtml = '';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction parseTag() {\n\t\t\t\tif (html.substr(0, 4) === '<!--') { // comments\n\t\t\t\t\tparseComment();\n\t\t\t\t} else if (rtagend.test(html)) {\n\t\t\t\t\tparseEdge(rend, parseEndTag);\n\t\t\t\t} else if (rtag.test(html)) {\n\t\t\t\t\tparseEdge(rstart, parseStartTag);\n\t\t\t\t}\n\t\t\t\tparseTagDecode();\n\t\t\t}\n\n\t\t\tfunction parseEdge(regex, parser) {\n\t\t\t\tvar match = html.match(regex);\n\t\t\t\tif (match) {\n\t\t\t\t\thtml = html.substring(match[0].length);\n\t\t\t\t\tmatch[0].replace(regex, parser);\n\t\t\t\t\tchars = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction parseComment() {\n\t\t\t\tvar index = html.indexOf('-->');\n\t\t\t\tif (index >= 0) {\n\t\t\t\t\tif (handler.comment) {\n\t\t\t\t\t\thandler.comment(html.substring(4, index));\n\t\t\t\t\t}\n\t\t\t\t\thtml = html.substring(index + 3);\n\t\t\t\t\tchars = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction parseTagDecode() {\n\t\t\t\tif (!chars) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar text;\n\t\t\t\tvar index = html.indexOf('<');\n\t\t\t\tif (index >= 0) {\n\t\t\t\t\ttext = html.substring(0, index);\n\t\t\t\t\thtml = html.substring(index);\n\t\t\t\t} else {\n\t\t\t\t\ttext = html;\n\t\t\t\t\thtml = '';\n\t\t\t\t}\n\t\t\t\tif (handler.chars) {\n\t\t\t\t\thandler.chars(text);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction parseStartTag(tag, tagName, rest, unary) {\n\t\t\t\tvar attrs = {};\n\t\t\t\tvar low = lowercase(tagName);\n\t\t\t\tvar u = elements.voids[low] || !!unary;\n\n\t\t\t\trest.replace(rattrs, attrReplacer);\n\n\t\t\t\tif (!u) {\n\t\t\t\t\tstack.push(low);\n\t\t\t\t}\n\t\t\t\tif (handler.start) {\n\t\t\t\t\thandler.start(low, attrs, u);\n\t\t\t\t}\n\n\t\t\t\tfunction attrReplacer(match, name, doubleQuotedValue, singleQuotedValue, unquotedValue) {\n\t\t\t\t\tif (doubleQuotedValue === void 0 && singleQuotedValue === void 0 && unquotedValue === void 0) {\n\t\t\t\t\t\tattrs[name] = void 0; // attribute is like <button disabled></button>\n\t\t\t\t\t} else {\n\t\t\t\t\t\tattrs[name] = he.decode(doubleQuotedValue || singleQuotedValue || unquotedValue || '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction parseEndTag(tag, tagName) {\n\t\t\t\tvar i;\n\t\t\t\tvar pos = 0;\n\t\t\t\tvar low = lowercase(tagName);\n\t\t\t\tif (low) {\n\t\t\t\t\tfor (pos = stack.length - 1; pos >= 0; pos--) {\n\t\t\t\t\t\tif (stack[pos] === low) {\n\t\t\t\t\t\t\tbreak; // find the closest opened tag of the same type\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (pos >= 0) {\n\t\t\t\t\tfor (i = stack.length - 1; i >= pos; i--) {\n\t\t\t\t\t\tif (handler.end) { // close all the open elements, up the stack\n\t\t\t\t\t\t\thandler.end(stack[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tstack.length = pos;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tmodule.exports = parser;\n\n\t}, { \"./attributes\": 1, \"./elements\": 3, \"./lowercase\": 5, \"he\": 9 }], 8: [function (require, module, exports) {\n\t\t'use strict';\n\n\t\tvar he = require('he');\n\t\tvar lowercase = require('./lowercase');\n\t\tvar attributes = require('./attributes');\n\t\tvar elements = require('./elements');\n\n\t\tfunction sanitizer(buffer, options) {\n\t\t\tvar last;\n\t\t\tvar context;\n\t\t\tvar o = options || {};\n\n\t\t\treset();\n\n\t\t\treturn {\n\t\t\t\tstart: start,\n\t\t\t\tend: end,\n\t\t\t\tchars: chars\n\t\t\t};\n\n\t\t\tfunction out(value) {\n\t\t\t\tbuffer.push(value);\n\t\t\t}\n\n\t\t\tfunction start(tag, attrs, unary) {\n\t\t\t\tvar low = lowercase(tag);\n\n\t\t\t\tif (context.ignoring) {\n\t\t\t\t\tignore(low); return;\n\t\t\t\t}\n\t\t\t\tif ((o.allowedTags || []).indexOf(low) === -1) {\n\t\t\t\t\tignore(low); return;\n\t\t\t\t}\n\t\t\t\tif (o.filter && !o.filter({ tag: low, attrs: attrs })) {\n\t\t\t\t\tignore(low); return;\n\t\t\t\t}\n\n\t\t\t\tout('<');\n\t\t\t\tout(low);\n\t\t\t\tObject.keys(attrs).forEach(parse);\n\t\t\t\tout(unary ? '/>' : '>');\n\n\t\t\t\tfunction parse(key) {\n\t\t\t\t\tvar value = attrs[key];\n\t\t\t\t\tvar classesOk = (o.allowedClasses || {})[low] || [];\n\t\t\t\t\tvar attrsOk = (o.allowedAttributes || {})[low] || [];\n\t\t\t\t\tattrsOk = attrsOk.concat((o.allowedAttributes || {})['*'] || []);\n\t\t\t\t\tvar valid;\n\t\t\t\t\tvar lkey = lowercase(key);\n\t\t\t\t\tif (lkey === 'class' && attrsOk.indexOf(lkey) === -1) {\n\t\t\t\t\t\tvalue = value.split(' ').filter(isValidClass).join(' ').trim();\n\t\t\t\t\t\tvalid = value.length;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalid = attrsOk.indexOf(lkey) !== -1 && (attributes.uris[lkey] !== true || testUrl(value));\n\t\t\t\t\t}\n\t\t\t\t\tif (valid) {\n\t\t\t\t\t\tout(' ');\n\t\t\t\t\t\tout(key);\n\t\t\t\t\t\tif (typeof value === 'string') {\n\t\t\t\t\t\t\tout('=\"');\n\t\t\t\t\t\t\tout(he.encode(value));\n\t\t\t\t\t\t\tout('\"');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfunction isValidClass(className) {\n\t\t\t\t\t\treturn classesOk && classesOk.indexOf(className) !== -1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction end(tag) {\n\t\t\t\tvar low = lowercase(tag);\n\t\t\t\tvar allowed = (o.allowedTags || []).indexOf(low) !== -1;\n\t\t\t\tif (allowed) {\n\t\t\t\t\tif (context.ignoring === false) {\n\t\t\t\t\t\tout('</');\n\t\t\t\t\t\tout(low);\n\t\t\t\t\t\tout('>');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tunignore(low);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tunignore(low);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction testUrl(text) {\n\t\t\t\tvar start = text[0];\n\t\t\t\tif (start === '#' || start === '/') {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tvar colon = text.indexOf(':');\n\t\t\t\tif (colon === -1) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tvar questionmark = text.indexOf('?');\n\t\t\t\tif (questionmark !== -1 && colon > questionmark) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tvar hash = text.indexOf('#');\n\t\t\t\tif (hash !== -1 && colon > hash) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn o.allowedSchemes.some(matches);\n\n\t\t\t\tfunction matches(scheme) {\n\t\t\t\t\treturn text.indexOf(scheme + ':') === 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction chars(text) {\n\t\t\t\tif (context.ignoring === false) {\n\t\t\t\t\tout(o.transformText ? o.transformText(text) : text);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction ignore(tag) {\n\t\t\t\tif (elements.voids[tag]) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (context.ignoring === false) {\n\t\t\t\t\tcontext = { ignoring: tag, depth: 1 };\n\t\t\t\t} else if (context.ignoring === tag) {\n\t\t\t\t\tcontext.depth++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction unignore(tag) {\n\t\t\t\tif (context.ignoring === tag) {\n\t\t\t\t\tif (--context.depth <= 0) {\n\t\t\t\t\t\treset();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction reset() {\n\t\t\t\tcontext = { ignoring: false, depth: 0 };\n\t\t\t}\n\t\t}\n\n\t\tmodule.exports = sanitizer;\n\n\t}, { \"./attributes\": 1, \"./elements\": 3, \"./lowercase\": 5, \"he\": 9 }], 9: [function (require, module, exports) {\n\t\t'use strict';\n\n\t\tvar escapes = {\n\t\t\t'&': '&amp;',\n\t\t\t'<': '&lt;',\n\t\t\t'>': '&gt;',\n\t\t\t'\"': '&quot;',\n\t\t\t\"'\": '&#39;'\n\t\t};\n\t\tvar unescapes = {\n\t\t\t'&amp;': '&',\n\t\t\t'&lt;': '<',\n\t\t\t'&gt;': '>',\n\t\t\t'&quot;': '\"',\n\t\t\t'&#39;': \"'\"\n\t\t};\n\t\tvar rescaped = /(&amp;|&lt;|&gt;|&quot;|&#39;)/g;\n\t\tvar runescaped = /[&<>\"']/g;\n\n\t\tfunction escapeHtmlChar(match) {\n\t\t\treturn escapes[match];\n\t\t}\n\t\tfunction unescapeHtmlChar(match) {\n\t\t\treturn unescapes[match];\n\t\t}\n\n\t\tfunction escapeHtml(text) {\n\t\t\treturn text == null ? '' : String(text).replace(runescaped, escapeHtmlChar);\n\t\t}\n\n\t\tfunction unescapeHtml(html) {\n\t\t\treturn html == null ? '' : String(html).replace(rescaped, unescapeHtmlChar);\n\t\t}\n\n\t\tescapeHtml.options = unescapeHtml.options = {};\n\n\t\tmodule.exports = {\n\t\t\tencode: escapeHtml,\n\t\t\tescape: escapeHtml,\n\t\t\tdecode: unescapeHtml,\n\t\t\tunescape: unescapeHtml,\n\t\t\tversion: '1.0.0-browser'\n\t\t};\n\n\t}, {}], 10: [function (require, module, exports) {\n\t\t'use strict';\n\n\t\tfunction toMap(list) {\n\t\t\treturn list.reduce(asKey, {});\n\t\t}\n\n\t\tfunction asKey(accumulator, item) {\n\t\t\taccumulator[item] = true;\n\t\t\treturn accumulator;\n\t\t}\n\n\t\tmodule.exports = toMap;\n\n\t}, {}]\n}, {}, [4]);\n\n// ESM-comment-begin\n// define(function() { return { insane: __insane_func }; });\n// ESM-comment-end\n\n// ESM-uncomment-begin\nexport var insane = __insane_func;\n// ESM-uncomment-end\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport * as DOM from './dom.js';\r\nimport { createElement } from './formattedTextRenderer.js';\r\nimport { onUnexpectedError } from '../common/errors.js';\r\nimport { parseHrefAndDimensions, removeMarkdownEscapes } from '../common/htmlContent.js';\r\nimport { defaultGenerator } from '../common/idGenerator.js';\r\nimport * as marked from '../common/marked/marked.js';\r\nimport { insane } from '../common/insane/insane.js';\r\nimport { parse } from '../common/marshalling.js';\r\nimport { cloneAndChange } from '../common/objects.js';\r\nimport { escape } from '../common/strings.js';\r\nimport { URI } from '../common/uri.js';\r\nimport { Schemas } from '../common/network.js';\r\n/**\r\n * Create html nodes for the given content element.\r\n */\r\nexport function renderMarkdown(markdown, options) {\r\n    if (options === void 0) { options = {}; }\r\n    var element = createElement(options);\r\n    var _uriMassage = function (part) {\r\n        var data;\r\n        try {\r\n            data = parse(decodeURIComponent(part));\r\n        }\r\n        catch (e) {\r\n            // ignore\r\n        }\r\n        if (!data) {\r\n            return part;\r\n        }\r\n        data = cloneAndChange(data, function (value) {\r\n            if (markdown.uris && markdown.uris[value]) {\r\n                return URI.revive(markdown.uris[value]);\r\n            }\r\n            else {\r\n                return undefined;\r\n            }\r\n        });\r\n        return encodeURIComponent(JSON.stringify(data));\r\n    };\r\n    var _href = function (href, isDomUri) {\r\n        var data = markdown.uris && markdown.uris[href];\r\n        if (!data) {\r\n            return href; // no uri exists\r\n        }\r\n        var uri = URI.revive(data);\r\n        if (URI.parse(href).toString() === uri.toString()) {\r\n            return href; // no tranformation performed\r\n        }\r\n        if (isDomUri) {\r\n            uri = DOM.asDomUri(uri);\r\n        }\r\n        if (uri.query) {\r\n            uri = uri.with({ query: _uriMassage(uri.query) });\r\n        }\r\n        return uri.toString(true);\r\n    };\r\n    // signal to code-block render that the\r\n    // element has been created\r\n    var signalInnerHTML;\r\n    var withInnerHTML = new Promise(function (c) { return signalInnerHTML = c; });\r\n    var renderer = new marked.Renderer();\r\n    renderer.image = function (href, title, text) {\r\n        var _a;\r\n        var dimensions = [];\r\n        var attributes = [];\r\n        if (href) {\r\n            (_a = parseHrefAndDimensions(href), href = _a.href, dimensions = _a.dimensions);\r\n            href = _href(href, true);\r\n            attributes.push(\"src=\\\"\" + href + \"\\\"\");\r\n        }\r\n        if (text) {\r\n            attributes.push(\"alt=\\\"\" + text + \"\\\"\");\r\n        }\r\n        if (title) {\r\n            attributes.push(\"title=\\\"\" + title + \"\\\"\");\r\n        }\r\n        if (dimensions.length) {\r\n            attributes = attributes.concat(dimensions);\r\n        }\r\n        return '<img ' + attributes.join(' ') + '>';\r\n    };\r\n    renderer.link = function (href, title, text) {\r\n        // Remove markdown escapes. Workaround for https://github.com/chjj/marked/issues/829\r\n        if (href === text) { // raw link case\r\n            text = removeMarkdownEscapes(text);\r\n        }\r\n        href = _href(href, false);\r\n        title = removeMarkdownEscapes(title);\r\n        href = removeMarkdownEscapes(href);\r\n        if (!href\r\n            || href.match(/^data:|javascript:/i)\r\n            || (href.match(/^command:/i) && !markdown.isTrusted)\r\n            || href.match(/^command:(\\/\\/\\/)?_workbench\\.downloadResource/i)) {\r\n            // drop the link\r\n            return text;\r\n        }\r\n        else {\r\n            // HTML Encode href\r\n            href = href.replace(/&/g, '&amp;')\r\n                .replace(/</g, '&lt;')\r\n                .replace(/>/g, '&gt;')\r\n                .replace(/\"/g, '&quot;')\r\n                .replace(/'/g, '&#39;');\r\n            return \"<a href=\\\"#\\\" data-href=\\\"\" + href + \"\\\" title=\\\"\" + (title || href) + \"\\\">\" + text + \"</a>\";\r\n        }\r\n    };\r\n    renderer.paragraph = function (text) {\r\n        return \"<p>\" + text + \"</p>\";\r\n    };\r\n    if (options.codeBlockRenderer) {\r\n        renderer.code = function (code, lang) {\r\n            var value = options.codeBlockRenderer(lang, code);\r\n            // when code-block rendering is async we return sync\r\n            // but update the node with the real result later.\r\n            var id = defaultGenerator.nextId();\r\n            var promise = Promise.all([value, withInnerHTML]).then(function (values) {\r\n                var strValue = values[0];\r\n                var span = element.querySelector(\"div[data-code=\\\"\" + id + \"\\\"]\");\r\n                if (span) {\r\n                    span.innerHTML = strValue;\r\n                }\r\n            }).catch(function (err) {\r\n                // ignore\r\n            });\r\n            if (options.codeBlockRenderCallback) {\r\n                promise.then(options.codeBlockRenderCallback);\r\n            }\r\n            return \"<div class=\\\"code\\\" data-code=\\\"\" + id + \"\\\">\" + escape(code) + \"</div>\";\r\n        };\r\n    }\r\n    var actionHandler = options.actionHandler;\r\n    if (actionHandler) {\r\n        actionHandler.disposeables.add(DOM.addStandardDisposableListener(element, 'click', function (event) {\r\n            var target = event.target;\r\n            if (target.tagName !== 'A') {\r\n                target = target.parentElement;\r\n                if (!target || target.tagName !== 'A') {\r\n                    return;\r\n                }\r\n            }\r\n            try {\r\n                var href = target.dataset['href'];\r\n                if (href) {\r\n                    actionHandler.callback(href, event);\r\n                }\r\n            }\r\n            catch (err) {\r\n                onUnexpectedError(err);\r\n            }\r\n            finally {\r\n                event.preventDefault();\r\n            }\r\n        }));\r\n    }\r\n    var markedOptions = {\r\n        sanitize: true,\r\n        renderer: renderer\r\n    };\r\n    var allowedSchemes = [Schemas.http, Schemas.https, Schemas.mailto, Schemas.data, Schemas.file, Schemas.vscodeRemote, Schemas.vscodeRemoteResource];\r\n    if (markdown.isTrusted) {\r\n        allowedSchemes.push(Schemas.command);\r\n    }\r\n    var renderedMarkdown = marked.parse(markdown.value, markedOptions);\r\n    element.innerHTML = insane(renderedMarkdown, {\r\n        allowedSchemes: allowedSchemes,\r\n        allowedAttributes: {\r\n            'a': ['href', 'name', 'target', 'data-href'],\r\n            'iframe': ['allowfullscreen', 'frameborder', 'src'],\r\n            'img': ['src', 'title', 'alt', 'width', 'height'],\r\n            'div': ['class', 'data-code'],\r\n            'span': ['class']\r\n        }\r\n    });\r\n    signalInnerHTML();\r\n    return element;\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { renderMarkdown } from '../../../base/browser/markdownRenderer.js';\r\nimport { IOpenerService, NullOpenerService } from '../../../platform/opener/common/opener.js';\r\nimport { IModeService } from '../../common/services/modeService.js';\r\nimport { onUnexpectedError } from '../../../base/common/errors.js';\r\nimport { tokenizeToString } from '../../common/modes/textToHtmlTokenizer.js';\r\nimport { optional } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { DisposableStore, Disposable } from '../../../base/common/lifecycle.js';\r\nimport { TokenizationRegistry } from '../../common/modes.js';\r\nvar MarkdownRenderer = /** @class */ (function (_super) {\r\n    __extends(MarkdownRenderer, _super);\r\n    function MarkdownRenderer(_editor, _modeService, _openerService) {\r\n        if (_openerService === void 0) { _openerService = NullOpenerService; }\r\n        var _this = _super.call(this) || this;\r\n        _this._editor = _editor;\r\n        _this._modeService = _modeService;\r\n        _this._openerService = _openerService;\r\n        _this._onDidRenderCodeBlock = _this._register(new Emitter());\r\n        _this.onDidRenderCodeBlock = _this._onDidRenderCodeBlock.event;\r\n        return _this;\r\n    }\r\n    MarkdownRenderer.prototype.getOptions = function (disposeables) {\r\n        var _this = this;\r\n        return {\r\n            codeBlockRenderer: function (languageAlias, value) {\r\n                // In markdown,\r\n                // it is possible that we stumble upon language aliases (e.g.js instead of javascript)\r\n                // it is possible no alias is given in which case we fall back to the current editor lang\r\n                var modeId = null;\r\n                if (languageAlias) {\r\n                    modeId = _this._modeService.getModeIdForLanguageName(languageAlias);\r\n                }\r\n                else {\r\n                    var model = _this._editor.getModel();\r\n                    if (model) {\r\n                        modeId = model.getLanguageIdentifier().language;\r\n                    }\r\n                }\r\n                _this._modeService.triggerMode(modeId || '');\r\n                return Promise.resolve(true).then(function (_) {\r\n                    var promise = TokenizationRegistry.getPromise(modeId || '');\r\n                    if (promise) {\r\n                        return promise.then(function (support) { return tokenizeToString(value, support); });\r\n                    }\r\n                    return tokenizeToString(value, undefined);\r\n                }).then(function (code) {\r\n                    return \"<span style=\\\"font-family: \" + _this._editor.getOption(32 /* fontInfo */).fontFamily + \"\\\">\" + code + \"</span>\";\r\n                });\r\n            },\r\n            codeBlockRenderCallback: function () { return _this._onDidRenderCodeBlock.fire(); },\r\n            actionHandler: {\r\n                callback: function (content) {\r\n                    _this._openerService.open(content, { fromUserGesture: true }).catch(onUnexpectedError);\r\n                },\r\n                disposeables: disposeables\r\n            }\r\n        };\r\n    };\r\n    MarkdownRenderer.prototype.render = function (markdown) {\r\n        var disposeables = new DisposableStore();\r\n        var element;\r\n        if (!markdown) {\r\n            element = document.createElement('span');\r\n        }\r\n        else {\r\n            element = renderMarkdown(markdown, this.getOptions(disposeables));\r\n        }\r\n        return {\r\n            element: element,\r\n            dispose: function () { return disposeables.dispose(); }\r\n        };\r\n    };\r\n    MarkdownRenderer = __decorate([\r\n        __param(1, IModeService),\r\n        __param(2, optional(IOpenerService))\r\n    ], MarkdownRenderer);\r\n    return MarkdownRenderer;\r\n}(Disposable));\r\nexport { MarkdownRenderer };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { URI } from './uri.js';\r\nimport { posix, normalize } from './path.js';\r\nimport { startsWithIgnoreCase, rtrim, startsWith } from './strings.js';\r\nimport { Schemas } from './network.js';\r\nimport { isLinux, isWindows } from './platform.js';\r\nimport { isEqual, basename, relativePath } from './resources.js';\r\n/**\r\n * @deprecated use LabelService instead\r\n */\r\nexport function getPathLabel(resource, userHomeProvider, rootProvider) {\r\n    if (typeof resource === 'string') {\r\n        resource = URI.file(resource);\r\n    }\r\n    // return early if we can resolve a relative path label from the root\r\n    if (rootProvider) {\r\n        var baseResource = rootProvider.getWorkspaceFolder(resource);\r\n        if (baseResource) {\r\n            var hasMultipleRoots = rootProvider.getWorkspace().folders.length > 1;\r\n            var pathLabel = void 0;\r\n            if (isEqual(baseResource.uri, resource)) {\r\n                pathLabel = ''; // no label if paths are identical\r\n            }\r\n            else {\r\n                pathLabel = relativePath(baseResource.uri, resource);\r\n            }\r\n            if (hasMultipleRoots) {\r\n                var rootName = baseResource.name ? baseResource.name : basename(baseResource.uri);\r\n                pathLabel = pathLabel ? (rootName + ' • ' + pathLabel) : rootName; // always show root basename if there are multiple\r\n            }\r\n            return pathLabel;\r\n        }\r\n    }\r\n    // return if the resource is neither file:// nor untitled:// and no baseResource was provided\r\n    if (resource.scheme !== Schemas.file && resource.scheme !== Schemas.untitled) {\r\n        return resource.with({ query: null, fragment: null }).toString(true);\r\n    }\r\n    // convert c:\\something => C:\\something\r\n    if (hasDriveLetter(resource.fsPath)) {\r\n        return normalize(normalizeDriveLetter(resource.fsPath));\r\n    }\r\n    // normalize and tildify (macOS, Linux only)\r\n    var res = normalize(resource.fsPath);\r\n    if (!isWindows && userHomeProvider) {\r\n        res = tildify(res, userHomeProvider.userHome);\r\n    }\r\n    return res;\r\n}\r\nexport function getBaseLabel(resource) {\r\n    if (!resource) {\r\n        return undefined;\r\n    }\r\n    if (typeof resource === 'string') {\r\n        resource = URI.file(resource);\r\n    }\r\n    var base = basename(resource) || (resource.scheme === Schemas.file ? resource.fsPath : resource.path) /* can be empty string if '/' is passed in */;\r\n    // convert c: => C:\r\n    if (hasDriveLetter(base)) {\r\n        return normalizeDriveLetter(base);\r\n    }\r\n    return base;\r\n}\r\nfunction hasDriveLetter(path) {\r\n    return !!(isWindows && path && path[1] === ':');\r\n}\r\nexport function normalizeDriveLetter(path) {\r\n    if (hasDriveLetter(path)) {\r\n        return path.charAt(0).toUpperCase() + path.slice(1);\r\n    }\r\n    return path;\r\n}\r\nvar normalizedUserHomeCached = Object.create(null);\r\nexport function tildify(path, userHome) {\r\n    if (isWindows || !path || !userHome) {\r\n        return path; // unsupported\r\n    }\r\n    // Keep a normalized user home path as cache to prevent accumulated string creation\r\n    var normalizedUserHome = normalizedUserHomeCached.original === userHome ? normalizedUserHomeCached.normalized : undefined;\r\n    if (!normalizedUserHome) {\r\n        normalizedUserHome = \"\" + rtrim(userHome, posix.sep) + posix.sep;\r\n        normalizedUserHomeCached = { original: userHome, normalized: normalizedUserHome };\r\n    }\r\n    // Linux: case sensitive, macOS: case insensitive\r\n    if (isLinux ? startsWith(path, normalizedUserHome) : startsWithIgnoreCase(path, normalizedUserHome)) {\r\n        path = \"~/\" + path.substr(normalizedUserHome.length);\r\n    }\r\n    return path;\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport './media/peekViewWidget.css';\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { ActionBar } from '../../../base/browser/ui/actionbar/actionbar.js';\r\nimport { Action } from '../../../base/common/actions.js';\r\nimport { Color } from '../../../base/common/color.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport * as objects from '../../../base/common/objects.js';\r\nimport * as strings from '../../../base/common/strings.js';\r\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\r\nimport { EmbeddedCodeEditorWidget } from '../../browser/widget/embeddedCodeEditorWidget.js';\r\nimport { ZoneWidget } from '../zoneWidget/zoneWidget.js';\r\nimport * as nls from '../../../nls.js';\r\nimport { RawContextKey, IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { registerSingleton } from '../../../platform/instantiation/common/extensions.js';\r\nimport { registerEditorContribution } from '../../browser/editorExtensions.js';\r\nimport { registerColor, contrastBorder, activeContrastBorder } from '../../../platform/theme/common/colorRegistry.js';\r\nexport var IPeekViewService = createDecorator('IPeekViewService');\r\nregisterSingleton(IPeekViewService, /** @class */ (function () {\r\n    function class_1() {\r\n        this._widgets = new Map();\r\n    }\r\n    class_1.prototype.addExclusiveWidget = function (editor, widget) {\r\n        var _this = this;\r\n        var existing = this._widgets.get(editor);\r\n        if (existing) {\r\n            existing.listener.dispose();\r\n            existing.widget.dispose();\r\n        }\r\n        var remove = function () {\r\n            var data = _this._widgets.get(editor);\r\n            if (data && data.widget === widget) {\r\n                data.listener.dispose();\r\n                _this._widgets.delete(editor);\r\n            }\r\n        };\r\n        this._widgets.set(editor, { widget: widget, listener: widget.onDidClose(remove) });\r\n    };\r\n    return class_1;\r\n}()));\r\nexport var PeekContext;\r\n(function (PeekContext) {\r\n    PeekContext.inPeekEditor = new RawContextKey('inReferenceSearchEditor', true);\r\n    PeekContext.notInPeekEditor = PeekContext.inPeekEditor.toNegated();\r\n})(PeekContext || (PeekContext = {}));\r\nvar PeekContextController = /** @class */ (function () {\r\n    function PeekContextController(editor, contextKeyService) {\r\n        if (editor instanceof EmbeddedCodeEditorWidget) {\r\n            PeekContext.inPeekEditor.bindTo(contextKeyService);\r\n        }\r\n    }\r\n    PeekContextController.prototype.dispose = function () { };\r\n    PeekContextController.ID = 'editor.contrib.referenceController';\r\n    PeekContextController = __decorate([\r\n        __param(1, IContextKeyService)\r\n    ], PeekContextController);\r\n    return PeekContextController;\r\n}());\r\nregisterEditorContribution(PeekContextController.ID, PeekContextController);\r\nexport function getOuterEditor(accessor) {\r\n    var editor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\r\n    if (editor instanceof EmbeddedCodeEditorWidget) {\r\n        return editor.getParentEditor();\r\n    }\r\n    return editor;\r\n}\r\nvar defaultOptions = {\r\n    headerBackgroundColor: Color.white,\r\n    primaryHeadingColor: Color.fromHex('#333333'),\r\n    secondaryHeadingColor: Color.fromHex('#6c6c6cb3')\r\n};\r\nvar PeekViewWidget = /** @class */ (function (_super) {\r\n    __extends(PeekViewWidget, _super);\r\n    function PeekViewWidget(editor, options) {\r\n        if (options === void 0) { options = {}; }\r\n        var _this = _super.call(this, editor, options) || this;\r\n        _this._onDidClose = new Emitter();\r\n        _this.onDidClose = _this._onDidClose.event;\r\n        objects.mixin(_this.options, defaultOptions, false);\r\n        return _this;\r\n    }\r\n    PeekViewWidget.prototype.dispose = function () {\r\n        _super.prototype.dispose.call(this);\r\n        this._onDidClose.fire(this);\r\n    };\r\n    PeekViewWidget.prototype.style = function (styles) {\r\n        var options = this.options;\r\n        if (styles.headerBackgroundColor) {\r\n            options.headerBackgroundColor = styles.headerBackgroundColor;\r\n        }\r\n        if (styles.primaryHeadingColor) {\r\n            options.primaryHeadingColor = styles.primaryHeadingColor;\r\n        }\r\n        if (styles.secondaryHeadingColor) {\r\n            options.secondaryHeadingColor = styles.secondaryHeadingColor;\r\n        }\r\n        _super.prototype.style.call(this, styles);\r\n    };\r\n    PeekViewWidget.prototype._applyStyles = function () {\r\n        _super.prototype._applyStyles.call(this);\r\n        var options = this.options;\r\n        if (this._headElement && options.headerBackgroundColor) {\r\n            this._headElement.style.backgroundColor = options.headerBackgroundColor.toString();\r\n        }\r\n        if (this._primaryHeading && options.primaryHeadingColor) {\r\n            this._primaryHeading.style.color = options.primaryHeadingColor.toString();\r\n        }\r\n        if (this._secondaryHeading && options.secondaryHeadingColor) {\r\n            this._secondaryHeading.style.color = options.secondaryHeadingColor.toString();\r\n        }\r\n        if (this._bodyElement && options.frameColor) {\r\n            this._bodyElement.style.borderColor = options.frameColor.toString();\r\n        }\r\n    };\r\n    PeekViewWidget.prototype._fillContainer = function (container) {\r\n        this.setCssClass('peekview-widget');\r\n        this._headElement = dom.$('.head');\r\n        this._bodyElement = dom.$('.body');\r\n        this._fillHead(this._headElement);\r\n        this._fillBody(this._bodyElement);\r\n        container.appendChild(this._headElement);\r\n        container.appendChild(this._bodyElement);\r\n    };\r\n    PeekViewWidget.prototype._fillHead = function (container) {\r\n        var _this = this;\r\n        var titleElement = dom.$('.peekview-title');\r\n        dom.append(this._headElement, titleElement);\r\n        dom.addStandardDisposableListener(titleElement, 'click', function (event) { return _this._onTitleClick(event); });\r\n        this._fillTitleIcon(titleElement);\r\n        this._primaryHeading = dom.$('span.filename');\r\n        this._secondaryHeading = dom.$('span.dirname');\r\n        this._metaHeading = dom.$('span.meta');\r\n        dom.append(titleElement, this._primaryHeading, this._secondaryHeading, this._metaHeading);\r\n        var actionsContainer = dom.$('.peekview-actions');\r\n        dom.append(this._headElement, actionsContainer);\r\n        var actionBarOptions = this._getActionBarOptions();\r\n        this._actionbarWidget = new ActionBar(actionsContainer, actionBarOptions);\r\n        this._disposables.add(this._actionbarWidget);\r\n        this._actionbarWidget.push(new Action('peekview.close', nls.localize('label.close', \"Close\"), 'codicon-close', true, function () {\r\n            _this.dispose();\r\n            return Promise.resolve();\r\n        }), { label: false, icon: true });\r\n    };\r\n    PeekViewWidget.prototype._fillTitleIcon = function (container) {\r\n    };\r\n    PeekViewWidget.prototype._getActionBarOptions = function () {\r\n        return {};\r\n    };\r\n    PeekViewWidget.prototype._onTitleClick = function (event) {\r\n        // implement me\r\n    };\r\n    PeekViewWidget.prototype.setTitle = function (primaryHeading, secondaryHeading) {\r\n        if (this._primaryHeading && this._secondaryHeading) {\r\n            this._primaryHeading.innerHTML = strings.escape(primaryHeading);\r\n            this._primaryHeading.setAttribute('aria-label', primaryHeading);\r\n            if (secondaryHeading) {\r\n                this._secondaryHeading.innerHTML = strings.escape(secondaryHeading);\r\n            }\r\n            else {\r\n                dom.clearNode(this._secondaryHeading);\r\n            }\r\n        }\r\n    };\r\n    PeekViewWidget.prototype.setMetaTitle = function (value) {\r\n        if (this._metaHeading) {\r\n            if (value) {\r\n                this._metaHeading.innerHTML = strings.escape(value);\r\n                dom.show(this._metaHeading);\r\n            }\r\n            else {\r\n                dom.hide(this._metaHeading);\r\n            }\r\n        }\r\n    };\r\n    PeekViewWidget.prototype._doLayout = function (heightInPixel, widthInPixel) {\r\n        if (!this._isShowing && heightInPixel < 0) {\r\n            // Looks like the view zone got folded away!\r\n            this.dispose();\r\n            return;\r\n        }\r\n        var headHeight = Math.ceil(this.editor.getOption(47 /* lineHeight */) * 1.2);\r\n        var bodyHeight = Math.round(heightInPixel - (headHeight + 2 /* the border-top/bottom width*/));\r\n        this._doLayoutHead(headHeight, widthInPixel);\r\n        this._doLayoutBody(bodyHeight, widthInPixel);\r\n    };\r\n    PeekViewWidget.prototype._doLayoutHead = function (heightInPixel, widthInPixel) {\r\n        if (this._headElement) {\r\n            this._headElement.style.height = heightInPixel + \"px\";\r\n            this._headElement.style.lineHeight = this._headElement.style.height;\r\n        }\r\n    };\r\n    PeekViewWidget.prototype._doLayoutBody = function (heightInPixel, widthInPixel) {\r\n        if (this._bodyElement) {\r\n            this._bodyElement.style.height = heightInPixel + \"px\";\r\n        }\r\n    };\r\n    return PeekViewWidget;\r\n}(ZoneWidget));\r\nexport { PeekViewWidget };\r\nexport var peekViewTitleBackground = registerColor('peekViewTitle.background', { dark: '#1E1E1E', light: '#FFFFFF', hc: '#0C141F' }, nls.localize('peekViewTitleBackground', 'Background color of the peek view title area.'));\r\nexport var peekViewTitleForeground = registerColor('peekViewTitleLabel.foreground', { dark: '#FFFFFF', light: '#333333', hc: '#FFFFFF' }, nls.localize('peekViewTitleForeground', 'Color of the peek view title.'));\r\nexport var peekViewTitleInfoForeground = registerColor('peekViewTitleDescription.foreground', { dark: '#ccccccb3', light: '#6c6c6cb3', hc: '#FFFFFF99' }, nls.localize('peekViewTitleInfoForeground', 'Color of the peek view title info.'));\r\nexport var peekViewBorder = registerColor('peekView.border', { dark: '#007acc', light: '#007acc', hc: contrastBorder }, nls.localize('peekViewBorder', 'Color of the peek view borders and arrow.'));\r\nexport var peekViewResultsBackground = registerColor('peekViewResult.background', { dark: '#252526', light: '#F3F3F3', hc: Color.black }, nls.localize('peekViewResultsBackground', 'Background color of the peek view result list.'));\r\nexport var peekViewResultsMatchForeground = registerColor('peekViewResult.lineForeground', { dark: '#bbbbbb', light: '#646465', hc: Color.white }, nls.localize('peekViewResultsMatchForeground', 'Foreground color for line nodes in the peek view result list.'));\r\nexport var peekViewResultsFileForeground = registerColor('peekViewResult.fileForeground', { dark: Color.white, light: '#1E1E1E', hc: Color.white }, nls.localize('peekViewResultsFileForeground', 'Foreground color for file nodes in the peek view result list.'));\r\nexport var peekViewResultsSelectionBackground = registerColor('peekViewResult.selectionBackground', { dark: '#3399ff33', light: '#3399ff33', hc: null }, nls.localize('peekViewResultsSelectionBackground', 'Background color of the selected entry in the peek view result list.'));\r\nexport var peekViewResultsSelectionForeground = registerColor('peekViewResult.selectionForeground', { dark: Color.white, light: '#6C6C6C', hc: Color.white }, nls.localize('peekViewResultsSelectionForeground', 'Foreground color of the selected entry in the peek view result list.'));\r\nexport var peekViewEditorBackground = registerColor('peekViewEditor.background', { dark: '#001F33', light: '#F2F8FC', hc: Color.black }, nls.localize('peekViewEditorBackground', 'Background color of the peek view editor.'));\r\nexport var peekViewEditorGutterBackground = registerColor('peekViewEditorGutter.background', { dark: peekViewEditorBackground, light: peekViewEditorBackground, hc: peekViewEditorBackground }, nls.localize('peekViewEditorGutterBackground', 'Background color of the gutter in the peek view editor.'));\r\nexport var peekViewResultsMatchHighlight = registerColor('peekViewResult.matchHighlightBackground', { dark: '#ea5c004d', light: '#ea5c004d', hc: null }, nls.localize('peekViewResultsMatchHighlight', 'Match highlight color in the peek view result list.'));\r\nexport var peekViewEditorMatchHighlight = registerColor('peekViewEditor.matchHighlightBackground', { dark: '#ff8f0099', light: '#f5d802de', hc: null }, nls.localize('peekViewEditorMatchHighlight', 'Match highlight color in the peek view editor.'));\r\nexport var peekViewEditorMatchHighlightBorder = registerColor('peekViewEditor.matchHighlightBorder', { dark: null, light: null, hc: activeContrastBorder }, nls.localize('peekViewEditorMatchHighlightBorder', 'Match highlight border in the peek view editor.'));\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport * as objects from '../../../base/common/objects.js';\r\nimport { ICodeEditorService } from '../services/codeEditorService.js';\r\nimport { CodeEditorWidget } from './codeEditorWidget.js';\r\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\r\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\r\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\r\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\r\nvar EmbeddedCodeEditorWidget = /** @class */ (function (_super) {\r\n    __extends(EmbeddedCodeEditorWidget, _super);\r\n    function EmbeddedCodeEditorWidget(domElement, options, parentEditor, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService) {\r\n        var _this = _super.call(this, domElement, parentEditor.getRawOptions(), {}, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService) || this;\r\n        _this._parentEditor = parentEditor;\r\n        _this._overwriteOptions = options;\r\n        // Overwrite parent's options\r\n        _super.prototype.updateOptions.call(_this, _this._overwriteOptions);\r\n        _this._register(parentEditor.onDidChangeConfiguration(function (e) { return _this._onParentConfigurationChanged(e); }));\r\n        return _this;\r\n    }\r\n    EmbeddedCodeEditorWidget.prototype.getParentEditor = function () {\r\n        return this._parentEditor;\r\n    };\r\n    EmbeddedCodeEditorWidget.prototype._onParentConfigurationChanged = function (e) {\r\n        _super.prototype.updateOptions.call(this, this._parentEditor.getRawOptions());\r\n        _super.prototype.updateOptions.call(this, this._overwriteOptions);\r\n    };\r\n    EmbeddedCodeEditorWidget.prototype.updateOptions = function (newOptions) {\r\n        objects.mixin(this._overwriteOptions, newOptions, true);\r\n        _super.prototype.updateOptions.call(this, this._overwriteOptions);\r\n    };\r\n    EmbeddedCodeEditorWidget = __decorate([\r\n        __param(3, IInstantiationService),\r\n        __param(4, ICodeEditorService),\r\n        __param(5, ICommandService),\r\n        __param(6, IContextKeyService),\r\n        __param(7, IThemeService),\r\n        __param(8, INotificationService),\r\n        __param(9, IAccessibilityService)\r\n    ], EmbeddedCodeEditorWidget);\r\n    return EmbeddedCodeEditorWidget;\r\n}(CodeEditorWidget));\r\nexport { EmbeddedCodeEditorWidget };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport './zoneWidget.css';\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { Sash } from '../../../base/browser/ui/sash/sash.js';\r\nimport { Color, RGBA } from '../../../base/common/color.js';\r\nimport { IdGenerator } from '../../../base/common/idGenerator.js';\r\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport * as objects from '../../../base/common/objects.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\r\nvar defaultColor = new Color(new RGBA(0, 122, 204));\r\nvar defaultOptions = {\r\n    showArrow: true,\r\n    showFrame: true,\r\n    className: '',\r\n    frameColor: defaultColor,\r\n    arrowColor: defaultColor,\r\n    keepEditorSelection: false\r\n};\r\nvar WIDGET_ID = 'vs.editor.contrib.zoneWidget';\r\nvar ViewZoneDelegate = /** @class */ (function () {\r\n    function ViewZoneDelegate(domNode, afterLineNumber, afterColumn, heightInLines, onDomNodeTop, onComputedHeight) {\r\n        this.id = ''; // A valid zone id should be greater than 0\r\n        this.domNode = domNode;\r\n        this.afterLineNumber = afterLineNumber;\r\n        this.afterColumn = afterColumn;\r\n        this.heightInLines = heightInLines;\r\n        this._onDomNodeTop = onDomNodeTop;\r\n        this._onComputedHeight = onComputedHeight;\r\n    }\r\n    ViewZoneDelegate.prototype.onDomNodeTop = function (top) {\r\n        this._onDomNodeTop(top);\r\n    };\r\n    ViewZoneDelegate.prototype.onComputedHeight = function (height) {\r\n        this._onComputedHeight(height);\r\n    };\r\n    return ViewZoneDelegate;\r\n}());\r\nexport { ViewZoneDelegate };\r\nvar OverlayWidgetDelegate = /** @class */ (function () {\r\n    function OverlayWidgetDelegate(id, domNode) {\r\n        this._id = id;\r\n        this._domNode = domNode;\r\n    }\r\n    OverlayWidgetDelegate.prototype.getId = function () {\r\n        return this._id;\r\n    };\r\n    OverlayWidgetDelegate.prototype.getDomNode = function () {\r\n        return this._domNode;\r\n    };\r\n    OverlayWidgetDelegate.prototype.getPosition = function () {\r\n        return null;\r\n    };\r\n    return OverlayWidgetDelegate;\r\n}());\r\nexport { OverlayWidgetDelegate };\r\nvar Arrow = /** @class */ (function () {\r\n    function Arrow(_editor) {\r\n        this._editor = _editor;\r\n        this._ruleName = Arrow._IdGenerator.nextId();\r\n        this._decorations = [];\r\n        this._color = null;\r\n        this._height = -1;\r\n        //\r\n    }\r\n    Arrow.prototype.dispose = function () {\r\n        this.hide();\r\n        dom.removeCSSRulesContainingSelector(this._ruleName);\r\n    };\r\n    Object.defineProperty(Arrow.prototype, \"color\", {\r\n        set: function (value) {\r\n            if (this._color !== value) {\r\n                this._color = value;\r\n                this._updateStyle();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Arrow.prototype, \"height\", {\r\n        set: function (value) {\r\n            if (this._height !== value) {\r\n                this._height = value;\r\n                this._updateStyle();\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Arrow.prototype._updateStyle = function () {\r\n        dom.removeCSSRulesContainingSelector(this._ruleName);\r\n        dom.createCSSRule(\".monaco-editor \" + this._ruleName, \"border-style: solid; border-color: transparent; border-bottom-color: \" + this._color + \"; border-width: \" + this._height + \"px; bottom: -\" + this._height + \"px; margin-left: -\" + this._height + \"px; \");\r\n    };\r\n    Arrow.prototype.show = function (where) {\r\n        this._decorations = this._editor.deltaDecorations(this._decorations, [{ range: Range.fromPositions(where), options: { className: this._ruleName, stickiness: 1 /* NeverGrowsWhenTypingAtEdges */ } }]);\r\n    };\r\n    Arrow.prototype.hide = function () {\r\n        this._editor.deltaDecorations(this._decorations, []);\r\n    };\r\n    Arrow._IdGenerator = new IdGenerator('.arrow-decoration-');\r\n    return Arrow;\r\n}());\r\nvar ZoneWidget = /** @class */ (function () {\r\n    function ZoneWidget(editor, options) {\r\n        var _this = this;\r\n        if (options === void 0) { options = {}; }\r\n        this._arrow = null;\r\n        this._overlayWidget = null;\r\n        this._resizeSash = null;\r\n        this._positionMarkerId = [];\r\n        this._viewZone = null;\r\n        this._disposables = new DisposableStore();\r\n        this.container = null;\r\n        this._isShowing = false;\r\n        this.editor = editor;\r\n        this.options = objects.deepClone(options);\r\n        objects.mixin(this.options, defaultOptions, false);\r\n        this.domNode = document.createElement('div');\r\n        if (!this.options.isAccessible) {\r\n            this.domNode.setAttribute('aria-hidden', 'true');\r\n            this.domNode.setAttribute('role', 'presentation');\r\n        }\r\n        this._disposables.add(this.editor.onDidLayoutChange(function (info) {\r\n            var width = _this._getWidth(info);\r\n            _this.domNode.style.width = width + 'px';\r\n            _this.domNode.style.left = _this._getLeft(info) + 'px';\r\n            _this._onWidth(width);\r\n        }));\r\n    }\r\n    ZoneWidget.prototype.dispose = function () {\r\n        var _this = this;\r\n        if (this._overlayWidget) {\r\n            this.editor.removeOverlayWidget(this._overlayWidget);\r\n            this._overlayWidget = null;\r\n        }\r\n        if (this._viewZone) {\r\n            this.editor.changeViewZones(function (accessor) {\r\n                if (_this._viewZone) {\r\n                    accessor.removeZone(_this._viewZone.id);\r\n                }\r\n                _this._viewZone = null;\r\n            });\r\n        }\r\n        this.editor.deltaDecorations(this._positionMarkerId, []);\r\n        this._positionMarkerId = [];\r\n        this._disposables.dispose();\r\n    };\r\n    ZoneWidget.prototype.create = function () {\r\n        dom.addClass(this.domNode, 'zone-widget');\r\n        if (this.options.className) {\r\n            dom.addClass(this.domNode, this.options.className);\r\n        }\r\n        this.container = document.createElement('div');\r\n        dom.addClass(this.container, 'zone-widget-container');\r\n        this.domNode.appendChild(this.container);\r\n        if (this.options.showArrow) {\r\n            this._arrow = new Arrow(this.editor);\r\n            this._disposables.add(this._arrow);\r\n        }\r\n        this._fillContainer(this.container);\r\n        this._initSash();\r\n        this._applyStyles();\r\n    };\r\n    ZoneWidget.prototype.style = function (styles) {\r\n        if (styles.frameColor) {\r\n            this.options.frameColor = styles.frameColor;\r\n        }\r\n        if (styles.arrowColor) {\r\n            this.options.arrowColor = styles.arrowColor;\r\n        }\r\n        this._applyStyles();\r\n    };\r\n    ZoneWidget.prototype._applyStyles = function () {\r\n        if (this.container && this.options.frameColor) {\r\n            var frameColor = this.options.frameColor.toString();\r\n            this.container.style.borderTopColor = frameColor;\r\n            this.container.style.borderBottomColor = frameColor;\r\n        }\r\n        if (this._arrow && this.options.arrowColor) {\r\n            var arrowColor = this.options.arrowColor.toString();\r\n            this._arrow.color = arrowColor;\r\n        }\r\n    };\r\n    ZoneWidget.prototype._getWidth = function (info) {\r\n        return info.width - info.minimapWidth - info.verticalScrollbarWidth;\r\n    };\r\n    ZoneWidget.prototype._getLeft = function (info) {\r\n        // If minimap is to the left, we move beyond it\r\n        if (info.minimapWidth > 0 && info.minimapLeft === 0) {\r\n            return info.minimapWidth;\r\n        }\r\n        return 0;\r\n    };\r\n    ZoneWidget.prototype._onViewZoneTop = function (top) {\r\n        this.domNode.style.top = top + 'px';\r\n    };\r\n    ZoneWidget.prototype._onViewZoneHeight = function (height) {\r\n        this.domNode.style.height = height + \"px\";\r\n        if (this.container) {\r\n            var containerHeight = height - this._decoratingElementsHeight();\r\n            this.container.style.height = containerHeight + \"px\";\r\n            var layoutInfo = this.editor.getLayoutInfo();\r\n            this._doLayout(containerHeight, this._getWidth(layoutInfo));\r\n        }\r\n        if (this._resizeSash) {\r\n            this._resizeSash.layout();\r\n        }\r\n    };\r\n    Object.defineProperty(ZoneWidget.prototype, \"position\", {\r\n        get: function () {\r\n            var id = this._positionMarkerId[0];\r\n            if (!id) {\r\n                return undefined;\r\n            }\r\n            var model = this.editor.getModel();\r\n            if (!model) {\r\n                return undefined;\r\n            }\r\n            var range = model.getDecorationRange(id);\r\n            if (!range) {\r\n                return undefined;\r\n            }\r\n            return range.getStartPosition();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ZoneWidget.prototype.show = function (rangeOrPos, heightInLines) {\r\n        var range = Range.isIRange(rangeOrPos) ? Range.lift(rangeOrPos) : Range.fromPositions(rangeOrPos);\r\n        this._isShowing = true;\r\n        this._showImpl(range, heightInLines);\r\n        this._isShowing = false;\r\n        this._positionMarkerId = this.editor.deltaDecorations(this._positionMarkerId, [{ range: range, options: ModelDecorationOptions.EMPTY }]);\r\n    };\r\n    ZoneWidget.prototype.hide = function () {\r\n        var _this = this;\r\n        if (this._viewZone) {\r\n            this.editor.changeViewZones(function (accessor) {\r\n                if (_this._viewZone) {\r\n                    accessor.removeZone(_this._viewZone.id);\r\n                }\r\n            });\r\n            this._viewZone = null;\r\n        }\r\n        if (this._overlayWidget) {\r\n            this.editor.removeOverlayWidget(this._overlayWidget);\r\n            this._overlayWidget = null;\r\n        }\r\n        if (this._arrow) {\r\n            this._arrow.hide();\r\n        }\r\n    };\r\n    ZoneWidget.prototype._decoratingElementsHeight = function () {\r\n        var lineHeight = this.editor.getOption(47 /* lineHeight */);\r\n        var result = 0;\r\n        if (this.options.showArrow) {\r\n            var arrowHeight = Math.round(lineHeight / 3);\r\n            result += 2 * arrowHeight;\r\n        }\r\n        if (this.options.showFrame) {\r\n            var frameThickness = Math.round(lineHeight / 9);\r\n            result += 2 * frameThickness;\r\n        }\r\n        return result;\r\n    };\r\n    ZoneWidget.prototype._showImpl = function (where, heightInLines) {\r\n        var _this = this;\r\n        var position = where.getStartPosition();\r\n        var layoutInfo = this.editor.getLayoutInfo();\r\n        var width = this._getWidth(layoutInfo);\r\n        this.domNode.style.width = width + \"px\";\r\n        this.domNode.style.left = this._getLeft(layoutInfo) + 'px';\r\n        // Render the widget as zone (rendering) and widget (lifecycle)\r\n        var viewZoneDomNode = document.createElement('div');\r\n        viewZoneDomNode.style.overflow = 'hidden';\r\n        var lineHeight = this.editor.getOption(47 /* lineHeight */);\r\n        // adjust heightInLines to viewport\r\n        var maxHeightInLines = (this.editor.getLayoutInfo().height / lineHeight) * 0.8;\r\n        if (heightInLines >= maxHeightInLines) {\r\n            heightInLines = maxHeightInLines;\r\n        }\r\n        var arrowHeight = 0;\r\n        var frameThickness = 0;\r\n        // Render the arrow one 1/3 of an editor line height\r\n        if (this._arrow && this.options.showArrow) {\r\n            arrowHeight = Math.round(lineHeight / 3);\r\n            this._arrow.height = arrowHeight;\r\n            this._arrow.show(position);\r\n        }\r\n        // Render the frame as 1/9 of an editor line height\r\n        if (this.options.showFrame) {\r\n            frameThickness = Math.round(lineHeight / 9);\r\n        }\r\n        // insert zone widget\r\n        this.editor.changeViewZones(function (accessor) {\r\n            if (_this._viewZone) {\r\n                accessor.removeZone(_this._viewZone.id);\r\n            }\r\n            if (_this._overlayWidget) {\r\n                _this.editor.removeOverlayWidget(_this._overlayWidget);\r\n                _this._overlayWidget = null;\r\n            }\r\n            _this.domNode.style.top = '-1000px';\r\n            _this._viewZone = new ViewZoneDelegate(viewZoneDomNode, position.lineNumber, position.column, heightInLines, function (top) { return _this._onViewZoneTop(top); }, function (height) { return _this._onViewZoneHeight(height); });\r\n            _this._viewZone.id = accessor.addZone(_this._viewZone);\r\n            _this._overlayWidget = new OverlayWidgetDelegate(WIDGET_ID + _this._viewZone.id, _this.domNode);\r\n            _this.editor.addOverlayWidget(_this._overlayWidget);\r\n        });\r\n        if (this.container && this.options.showFrame) {\r\n            var width_1 = this.options.frameWidth ? this.options.frameWidth : frameThickness;\r\n            this.container.style.borderTopWidth = width_1 + 'px';\r\n            this.container.style.borderBottomWidth = width_1 + 'px';\r\n        }\r\n        var containerHeight = heightInLines * lineHeight - this._decoratingElementsHeight();\r\n        if (this.container) {\r\n            this.container.style.top = arrowHeight + 'px';\r\n            this.container.style.height = containerHeight + 'px';\r\n            this.container.style.overflow = 'hidden';\r\n        }\r\n        this._doLayout(containerHeight, width);\r\n        if (!this.options.keepEditorSelection) {\r\n            this.editor.setSelection(where);\r\n        }\r\n        var model = this.editor.getModel();\r\n        if (model) {\r\n            var revealLine = where.endLineNumber + 1;\r\n            if (revealLine <= model.getLineCount()) {\r\n                // reveal line below the zone widget\r\n                this.revealLine(revealLine, false);\r\n            }\r\n            else {\r\n                // reveal last line atop\r\n                this.revealLine(model.getLineCount(), true);\r\n            }\r\n        }\r\n    };\r\n    ZoneWidget.prototype.revealLine = function (lineNumber, isLastLine) {\r\n        if (isLastLine) {\r\n            this.editor.revealLineInCenter(lineNumber, 0 /* Smooth */);\r\n        }\r\n        else {\r\n            this.editor.revealLine(lineNumber, 0 /* Smooth */);\r\n        }\r\n    };\r\n    ZoneWidget.prototype.setCssClass = function (className, classToReplace) {\r\n        if (!this.container) {\r\n            return;\r\n        }\r\n        if (classToReplace) {\r\n            this.container.classList.remove(classToReplace);\r\n        }\r\n        dom.addClass(this.container, className);\r\n    };\r\n    ZoneWidget.prototype._onWidth = function (widthInPixel) {\r\n        // implement in subclass\r\n    };\r\n    ZoneWidget.prototype._doLayout = function (heightInPixel, widthInPixel) {\r\n        // implement in subclass\r\n    };\r\n    ZoneWidget.prototype._relayout = function (newHeightInLines) {\r\n        var _this = this;\r\n        if (this._viewZone && this._viewZone.heightInLines !== newHeightInLines) {\r\n            this.editor.changeViewZones(function (accessor) {\r\n                if (_this._viewZone) {\r\n                    _this._viewZone.heightInLines = newHeightInLines;\r\n                    accessor.layoutZone(_this._viewZone.id);\r\n                }\r\n            });\r\n        }\r\n    };\r\n    // --- sash\r\n    ZoneWidget.prototype._initSash = function () {\r\n        var _this = this;\r\n        if (this._resizeSash) {\r\n            return;\r\n        }\r\n        this._resizeSash = this._disposables.add(new Sash(this.domNode, this, { orientation: 1 /* HORIZONTAL */ }));\r\n        if (!this.options.isResizeable) {\r\n            this._resizeSash.hide();\r\n            this._resizeSash.state = 0 /* Disabled */;\r\n        }\r\n        var data;\r\n        this._disposables.add(this._resizeSash.onDidStart(function (e) {\r\n            if (_this._viewZone) {\r\n                data = {\r\n                    startY: e.startY,\r\n                    heightInLines: _this._viewZone.heightInLines,\r\n                };\r\n            }\r\n        }));\r\n        this._disposables.add(this._resizeSash.onDidEnd(function () {\r\n            data = undefined;\r\n        }));\r\n        this._disposables.add(this._resizeSash.onDidChange(function (evt) {\r\n            if (data) {\r\n                var lineDelta = (evt.currentY - data.startY) / _this.editor.getOption(47 /* lineHeight */);\r\n                var roundedLineDelta = lineDelta < 0 ? Math.ceil(lineDelta) : Math.floor(lineDelta);\r\n                var newHeightInLines = data.heightInLines + roundedLineDelta;\r\n                if (newHeightInLines > 5 && newHeightInLines < 35) {\r\n                    _this._relayout(newHeightInLines);\r\n                }\r\n            }\r\n        }));\r\n    };\r\n    ZoneWidget.prototype.getHorizontalSashLeft = function () {\r\n        return 0;\r\n    };\r\n    ZoneWidget.prototype.getHorizontalSashTop = function () {\r\n        return (this.domNode.style.height === null ? 0 : parseInt(this.domNode.style.height)) - (this._decoratingElementsHeight() / 2);\r\n    };\r\n    ZoneWidget.prototype.getHorizontalSashWidth = function () {\r\n        var layoutInfo = this.editor.getLayoutInfo();\r\n        return layoutInfo.width - layoutInfo.minimapWidth;\r\n    };\r\n    return ZoneWidget;\r\n}());\r\nexport { ZoneWidget };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport Severity from '../../../base/common/severity.js';\r\nimport { registerThemingParticipant } from '../../theme/common/themeService.js';\r\nimport { problemsErrorIconForeground, problemsInfoIconForeground, problemsWarningIconForeground } from '../../theme/common/colorRegistry.js';\r\nexport var SeverityIcon;\r\n(function (SeverityIcon) {\r\n    function className(severity) {\r\n        switch (severity) {\r\n            case Severity.Ignore:\r\n                return 'severity-ignore codicon-info';\r\n            case Severity.Info:\r\n                return 'codicon-info';\r\n            case Severity.Warning:\r\n                return 'codicon-warning';\r\n            case Severity.Error:\r\n                return 'codicon-error';\r\n        }\r\n        return '';\r\n    }\r\n    SeverityIcon.className = className;\r\n})(SeverityIcon || (SeverityIcon = {}));\r\nregisterThemingParticipant(function (theme, collector) {\r\n    var errorIconForeground = theme.getColor(problemsErrorIconForeground);\r\n    if (errorIconForeground) {\r\n        collector.addRule(\"\\n\\t\\t\\t.monaco-editor .zone-widget .codicon-error,\\n\\t\\t\\t.monaco-workbench .markers-panel .marker-icon.codicon-error,\\n\\t\\t\\t.monaco-workbench .extensions-viewlet > .extensions .codicon-error,\\n\\t\\t\\t.monaco-workbench .dialog-box .dialog-message-row .codicon-error {\\n\\t\\t\\t\\tcolor: \" + errorIconForeground + \";\\n\\t\\t\\t}\\n\\t\\t\");\r\n    }\r\n    var warningIconForeground = theme.getColor(problemsWarningIconForeground);\r\n    if (errorIconForeground) {\r\n        collector.addRule(\"\\n\\t\\t\\t.monaco-editor .zone-widget .codicon-warning,\\n\\t\\t\\t.monaco-workbench .markers-panel .marker-icon.codicon-warning,\\n\\t\\t\\t.monaco-workbench .extensions-viewlet > .extensions .codicon-warning,\\n\\t\\t\\t.monaco-workbench .extension-editor .codicon-warning,\\n\\t\\t\\t.monaco-workbench .dialog-box .dialog-message-row .codicon-warning {\\n\\t\\t\\t\\tcolor: \" + warningIconForeground + \";\\n\\t\\t\\t}\\n\\t\\t\");\r\n    }\r\n    var infoIconForeground = theme.getColor(problemsInfoIconForeground);\r\n    if (errorIconForeground) {\r\n        collector.addRule(\"\\n\\t\\t\\t.monaco-editor .zone-widget .codicon-info,\\n\\t\\t\\t.monaco-workbench .markers-panel .marker-icon.codicon-info,\\n\\t\\t\\t.monaco-workbench .extensions-viewlet > .extensions .codicon-info,\\n\\t\\t\\t.monaco-workbench .extension-editor .codicon-info,\\n\\t\\t\\t.monaco-workbench .dialog-box .dialog-message-row .codicon-info {\\n\\t\\t\\t\\tcolor: \" + infoIconForeground + \";\\n\\t\\t\\t}\\n\\t\\t\");\r\n    }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport './media/gotoErrorWidget.css';\r\nimport * as nls from '../../../nls.js';\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { dispose, DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { MarkerSeverity } from '../../../platform/markers/common/markers.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { registerColor, oneOf, textLinkForeground, editorErrorForeground, editorErrorBorder, editorWarningForeground, editorWarningBorder, editorInfoForeground, editorInfoBorder } from '../../../platform/theme/common/colorRegistry.js';\r\nimport { registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\r\nimport { Color } from '../../../base/common/color.js';\r\nimport { ScrollableElement } from '../../../base/browser/ui/scrollbar/scrollableElement.js';\r\nimport { getBaseLabel, getPathLabel } from '../../../base/common/labels.js';\r\nimport { isNonEmptyArray } from '../../../base/common/arrays.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { PeekViewWidget, peekViewTitleForeground, peekViewTitleInfoForeground } from '../peekView/peekView.js';\r\nimport { basename } from '../../../base/common/resources.js';\r\nimport { SeverityIcon } from '../../../platform/severityIcon/common/severityIcon.js';\r\nvar MessageWidget = /** @class */ (function () {\r\n    function MessageWidget(parent, editor, onRelatedInformation) {\r\n        var _this = this;\r\n        this._lines = 0;\r\n        this._longestLineLength = 0;\r\n        this._relatedDiagnostics = new WeakMap();\r\n        this._disposables = new DisposableStore();\r\n        this._editor = editor;\r\n        var domNode = document.createElement('div');\r\n        domNode.className = 'descriptioncontainer';\r\n        domNode.setAttribute('aria-live', 'assertive');\r\n        domNode.setAttribute('role', 'alert');\r\n        this._messageBlock = document.createElement('div');\r\n        dom.addClass(this._messageBlock, 'message');\r\n        domNode.appendChild(this._messageBlock);\r\n        this._relatedBlock = document.createElement('div');\r\n        domNode.appendChild(this._relatedBlock);\r\n        this._disposables.add(dom.addStandardDisposableListener(this._relatedBlock, 'click', function (event) {\r\n            event.preventDefault();\r\n            var related = _this._relatedDiagnostics.get(event.target);\r\n            if (related) {\r\n                onRelatedInformation(related);\r\n            }\r\n        }));\r\n        this._scrollable = new ScrollableElement(domNode, {\r\n            horizontal: 1 /* Auto */,\r\n            vertical: 1 /* Auto */,\r\n            useShadows: false,\r\n            horizontalScrollbarSize: 3,\r\n            verticalScrollbarSize: 3\r\n        });\r\n        parent.appendChild(this._scrollable.getDomNode());\r\n        this._disposables.add(this._scrollable.onScroll(function (e) {\r\n            domNode.style.left = \"-\" + e.scrollLeft + \"px\";\r\n            domNode.style.top = \"-\" + e.scrollTop + \"px\";\r\n        }));\r\n        this._disposables.add(this._scrollable);\r\n    }\r\n    MessageWidget.prototype.dispose = function () {\r\n        dispose(this._disposables);\r\n    };\r\n    MessageWidget.prototype.update = function (_a) {\r\n        var source = _a.source, message = _a.message, relatedInformation = _a.relatedInformation, code = _a.code;\r\n        var lines = message.split(/\\r\\n|\\r|\\n/g);\r\n        this._lines = lines.length;\r\n        this._longestLineLength = 0;\r\n        for (var _i = 0, lines_1 = lines; _i < lines_1.length; _i++) {\r\n            var line = lines_1[_i];\r\n            this._longestLineLength = Math.max(line.length, this._longestLineLength);\r\n        }\r\n        dom.clearNode(this._messageBlock);\r\n        this._editor.applyFontInfo(this._messageBlock);\r\n        var lastLineElement = this._messageBlock;\r\n        for (var _b = 0, lines_2 = lines; _b < lines_2.length; _b++) {\r\n            var line = lines_2[_b];\r\n            lastLineElement = document.createElement('div');\r\n            lastLineElement.innerText = line;\r\n            if (line === '') {\r\n                lastLineElement.style.height = this._messageBlock.style.lineHeight;\r\n            }\r\n            this._messageBlock.appendChild(lastLineElement);\r\n        }\r\n        if (source || code) {\r\n            var detailsElement = document.createElement('span');\r\n            dom.addClass(detailsElement, 'details');\r\n            lastLineElement.appendChild(detailsElement);\r\n            if (source) {\r\n                var sourceElement = document.createElement('span');\r\n                sourceElement.innerText = source;\r\n                dom.addClass(sourceElement, 'source');\r\n                detailsElement.appendChild(sourceElement);\r\n            }\r\n            if (code) {\r\n                var codeElement = document.createElement('span');\r\n                codeElement.innerText = \"(\" + code + \")\";\r\n                dom.addClass(codeElement, 'code');\r\n                detailsElement.appendChild(codeElement);\r\n            }\r\n        }\r\n        dom.clearNode(this._relatedBlock);\r\n        this._editor.applyFontInfo(this._relatedBlock);\r\n        if (isNonEmptyArray(relatedInformation)) {\r\n            var relatedInformationNode = this._relatedBlock.appendChild(document.createElement('div'));\r\n            relatedInformationNode.style.paddingTop = Math.floor(this._editor.getOption(47 /* lineHeight */) * 0.66) + \"px\";\r\n            this._lines += 1;\r\n            for (var _c = 0, relatedInformation_1 = relatedInformation; _c < relatedInformation_1.length; _c++) {\r\n                var related = relatedInformation_1[_c];\r\n                var container = document.createElement('div');\r\n                var relatedResource = document.createElement('a');\r\n                dom.addClass(relatedResource, 'filename');\r\n                relatedResource.innerHTML = getBaseLabel(related.resource) + \"(\" + related.startLineNumber + \", \" + related.startColumn + \"): \";\r\n                relatedResource.title = getPathLabel(related.resource, undefined);\r\n                this._relatedDiagnostics.set(relatedResource, related);\r\n                var relatedMessage = document.createElement('span');\r\n                relatedMessage.innerText = related.message;\r\n                container.appendChild(relatedResource);\r\n                container.appendChild(relatedMessage);\r\n                this._lines += 1;\r\n                relatedInformationNode.appendChild(container);\r\n            }\r\n        }\r\n        var fontInfo = this._editor.getOption(32 /* fontInfo */);\r\n        var scrollWidth = Math.ceil(fontInfo.typicalFullwidthCharacterWidth * this._longestLineLength * 0.75);\r\n        var scrollHeight = fontInfo.lineHeight * this._lines;\r\n        this._scrollable.setScrollDimensions({ scrollWidth: scrollWidth, scrollHeight: scrollHeight });\r\n    };\r\n    MessageWidget.prototype.layout = function (height, width) {\r\n        this._scrollable.getDomNode().style.height = height + \"px\";\r\n        this._scrollable.getDomNode().style.width = width + \"px\";\r\n        this._scrollable.setScrollDimensions({ width: width, height: height });\r\n    };\r\n    MessageWidget.prototype.getHeightInLines = function () {\r\n        return Math.min(17, this._lines);\r\n    };\r\n    return MessageWidget;\r\n}());\r\nvar MarkerNavigationWidget = /** @class */ (function (_super) {\r\n    __extends(MarkerNavigationWidget, _super);\r\n    function MarkerNavigationWidget(editor, actions, _themeService) {\r\n        var _this = _super.call(this, editor, { showArrow: true, showFrame: true, isAccessible: true }) || this;\r\n        _this.actions = actions;\r\n        _this._themeService = _themeService;\r\n        _this._callOnDispose = new DisposableStore();\r\n        _this._onDidSelectRelatedInformation = new Emitter();\r\n        _this.onDidSelectRelatedInformation = _this._onDidSelectRelatedInformation.event;\r\n        _this._severity = MarkerSeverity.Warning;\r\n        _this._backgroundColor = Color.white;\r\n        _this._applyTheme(_themeService.getTheme());\r\n        _this._callOnDispose.add(_themeService.onThemeChange(_this._applyTheme.bind(_this)));\r\n        _this.create();\r\n        return _this;\r\n    }\r\n    MarkerNavigationWidget.prototype._applyTheme = function (theme) {\r\n        this._backgroundColor = theme.getColor(editorMarkerNavigationBackground);\r\n        var colorId = editorMarkerNavigationError;\r\n        if (this._severity === MarkerSeverity.Warning) {\r\n            colorId = editorMarkerNavigationWarning;\r\n        }\r\n        else if (this._severity === MarkerSeverity.Info) {\r\n            colorId = editorMarkerNavigationInfo;\r\n        }\r\n        var frameColor = theme.getColor(colorId);\r\n        this.style({\r\n            arrowColor: frameColor,\r\n            frameColor: frameColor,\r\n            headerBackgroundColor: this._backgroundColor,\r\n            primaryHeadingColor: theme.getColor(peekViewTitleForeground),\r\n            secondaryHeadingColor: theme.getColor(peekViewTitleInfoForeground)\r\n        }); // style() will trigger _applyStyles\r\n    };\r\n    MarkerNavigationWidget.prototype._applyStyles = function () {\r\n        if (this._parentContainer) {\r\n            this._parentContainer.style.backgroundColor = this._backgroundColor ? this._backgroundColor.toString() : '';\r\n        }\r\n        _super.prototype._applyStyles.call(this);\r\n    };\r\n    MarkerNavigationWidget.prototype.dispose = function () {\r\n        this._callOnDispose.dispose();\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    MarkerNavigationWidget.prototype._fillHead = function (container) {\r\n        _super.prototype._fillHead.call(this, container);\r\n        this._actionbarWidget.push(this.actions, { label: false, icon: true });\r\n    };\r\n    MarkerNavigationWidget.prototype._fillTitleIcon = function (container) {\r\n        this._icon = dom.append(container, dom.$(''));\r\n    };\r\n    MarkerNavigationWidget.prototype._getActionBarOptions = function () {\r\n        return {\r\n            orientation: 1 /* HORIZONTAL_REVERSE */\r\n        };\r\n    };\r\n    MarkerNavigationWidget.prototype._fillBody = function (container) {\r\n        var _this = this;\r\n        this._parentContainer = container;\r\n        dom.addClass(container, 'marker-widget');\r\n        this._parentContainer.tabIndex = 0;\r\n        this._parentContainer.setAttribute('role', 'tooltip');\r\n        this._container = document.createElement('div');\r\n        container.appendChild(this._container);\r\n        this._message = new MessageWidget(this._container, this.editor, function (related) { return _this._onDidSelectRelatedInformation.fire(related); });\r\n        this._disposables.add(this._message);\r\n    };\r\n    MarkerNavigationWidget.prototype.show = function (where, heightInLines) {\r\n        throw new Error('call showAtMarker');\r\n    };\r\n    MarkerNavigationWidget.prototype.showAtMarker = function (marker, markerIdx, markerCount) {\r\n        // update:\r\n        // * title\r\n        // * message\r\n        this._container.classList.remove('stale');\r\n        this._message.update(marker);\r\n        // update frame color (only applied on 'show')\r\n        this._severity = marker.severity;\r\n        this._applyTheme(this._themeService.getTheme());\r\n        // show\r\n        var range = Range.lift(marker);\r\n        var editorPosition = this.editor.getPosition();\r\n        var position = editorPosition && range.containsPosition(editorPosition) ? editorPosition : range.getStartPosition();\r\n        _super.prototype.show.call(this, position, this.computeRequiredHeight());\r\n        var model = this.editor.getModel();\r\n        if (model) {\r\n            var detail = markerCount > 1\r\n                ? nls.localize('problems', \"{0} of {1} problems\", markerIdx, markerCount)\r\n                : nls.localize('change', \"{0} of {1} problem\", markerIdx, markerCount);\r\n            this.setTitle(basename(model.uri), detail);\r\n        }\r\n        this._icon.className = \"codicon \" + SeverityIcon.className(MarkerSeverity.toSeverity(this._severity));\r\n        this.editor.revealPositionInCenter(position, 0 /* Smooth */);\r\n    };\r\n    MarkerNavigationWidget.prototype.updateMarker = function (marker) {\r\n        this._container.classList.remove('stale');\r\n        this._message.update(marker);\r\n    };\r\n    MarkerNavigationWidget.prototype.showStale = function () {\r\n        this._container.classList.add('stale');\r\n        this._relayout();\r\n    };\r\n    MarkerNavigationWidget.prototype._doLayoutBody = function (heightInPixel, widthInPixel) {\r\n        _super.prototype._doLayoutBody.call(this, heightInPixel, widthInPixel);\r\n        this._heightInPixel = heightInPixel;\r\n        this._message.layout(heightInPixel, widthInPixel);\r\n        this._container.style.height = heightInPixel + \"px\";\r\n    };\r\n    MarkerNavigationWidget.prototype._onWidth = function (widthInPixel) {\r\n        this._message.layout(this._heightInPixel, widthInPixel);\r\n    };\r\n    MarkerNavigationWidget.prototype._relayout = function () {\r\n        _super.prototype._relayout.call(this, this.computeRequiredHeight());\r\n    };\r\n    MarkerNavigationWidget.prototype.computeRequiredHeight = function () {\r\n        return 3 + this._message.getHeightInLines();\r\n    };\r\n    return MarkerNavigationWidget;\r\n}(PeekViewWidget));\r\nexport { MarkerNavigationWidget };\r\n// theming\r\nvar errorDefault = oneOf(editorErrorForeground, editorErrorBorder);\r\nvar warningDefault = oneOf(editorWarningForeground, editorWarningBorder);\r\nvar infoDefault = oneOf(editorInfoForeground, editorInfoBorder);\r\nexport var editorMarkerNavigationError = registerColor('editorMarkerNavigationError.background', { dark: errorDefault, light: errorDefault, hc: errorDefault }, nls.localize('editorMarkerNavigationError', 'Editor marker navigation widget error color.'));\r\nexport var editorMarkerNavigationWarning = registerColor('editorMarkerNavigationWarning.background', { dark: warningDefault, light: warningDefault, hc: warningDefault }, nls.localize('editorMarkerNavigationWarning', 'Editor marker navigation widget warning color.'));\r\nexport var editorMarkerNavigationInfo = registerColor('editorMarkerNavigationInfo.background', { dark: infoDefault, light: infoDefault, hc: infoDefault }, nls.localize('editorMarkerNavigationInfo', 'Editor marker navigation widget info color.'));\r\nexport var editorMarkerNavigationBackground = registerColor('editorMarkerNavigation.background', { dark: '#2D2D30', light: Color.white, hc: '#0C141F' }, nls.localize('editorMarkerNavigationBackground', 'Editor marker navigation widget background.'));\r\nregisterThemingParticipant(function (theme, collector) {\r\n    var link = theme.getColor(textLinkForeground);\r\n    if (link) {\r\n        collector.addRule(\".monaco-editor .marker-widget a { color: \" + link + \"; }\");\r\n    }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport * as nls from '../../../nls.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { RawContextKey, IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { IMarkerService, MarkerSeverity } from '../../../platform/markers/common/markers.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { registerEditorAction, registerEditorContribution, EditorAction, EditorCommand, registerEditorCommand } from '../../browser/editorExtensions.js';\r\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\r\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\r\nimport { MarkerNavigationWidget } from './gotoErrorWidget.js';\r\nimport { compare } from '../../../base/common/strings.js';\r\nimport { binarySearch, find } from '../../../base/common/arrays.js';\r\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\r\nimport { onUnexpectedError } from '../../../base/common/errors.js';\r\nimport { MenuRegistry } from '../../../platform/actions/common/actions.js';\r\nimport { Action } from '../../../base/common/actions.js';\r\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\r\nimport { isEqual } from '../../../base/common/resources.js';\r\nvar MarkerModel = /** @class */ (function () {\r\n    function MarkerModel(editor, markers) {\r\n        var _this = this;\r\n        this._toUnbind = new DisposableStore();\r\n        this._editor = editor;\r\n        this._markers = [];\r\n        this._nextIdx = -1;\r\n        this._ignoreSelectionChange = false;\r\n        this._onCurrentMarkerChanged = new Emitter();\r\n        this._onMarkerSetChanged = new Emitter();\r\n        this.setMarkers(markers);\r\n        // listen on editor\r\n        this._toUnbind.add(this._editor.onDidDispose(function () { return _this.dispose(); }));\r\n        this._toUnbind.add(this._editor.onDidChangeCursorPosition(function () {\r\n            if (_this._ignoreSelectionChange) {\r\n                return;\r\n            }\r\n            if (_this.currentMarker && _this._editor.getPosition() && Range.containsPosition(_this.currentMarker, _this._editor.getPosition())) {\r\n                return;\r\n            }\r\n            _this._nextIdx = -1;\r\n        }));\r\n    }\r\n    Object.defineProperty(MarkerModel.prototype, \"onCurrentMarkerChanged\", {\r\n        get: function () {\r\n            return this._onCurrentMarkerChanged.event;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(MarkerModel.prototype, \"onMarkerSetChanged\", {\r\n        get: function () {\r\n            return this._onMarkerSetChanged.event;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    MarkerModel.prototype.setMarkers = function (markers) {\r\n        var oldMarker = this._nextIdx >= 0 ? this._markers[this._nextIdx] : undefined;\r\n        this._markers = markers || [];\r\n        this._markers.sort(MarkerNavigationAction.compareMarker);\r\n        if (!oldMarker) {\r\n            this._nextIdx = -1;\r\n        }\r\n        else {\r\n            this._nextIdx = Math.max(-1, binarySearch(this._markers, oldMarker, MarkerNavigationAction.compareMarker));\r\n        }\r\n        this._onMarkerSetChanged.fire(this);\r\n    };\r\n    MarkerModel.prototype.withoutWatchingEditorPosition = function (callback) {\r\n        this._ignoreSelectionChange = true;\r\n        try {\r\n            callback();\r\n        }\r\n        finally {\r\n            this._ignoreSelectionChange = false;\r\n        }\r\n    };\r\n    MarkerModel.prototype._initIdx = function (fwd) {\r\n        var found = false;\r\n        var position = this._editor.getPosition();\r\n        for (var i = 0; i < this._markers.length; i++) {\r\n            var range = Range.lift(this._markers[i]);\r\n            if (range.isEmpty() && this._editor.getModel()) {\r\n                var word = this._editor.getModel().getWordAtPosition(range.getStartPosition());\r\n                if (word) {\r\n                    range = new Range(range.startLineNumber, word.startColumn, range.startLineNumber, word.endColumn);\r\n                }\r\n            }\r\n            if (position && (range.containsPosition(position) || position.isBeforeOrEqual(range.getStartPosition()))) {\r\n                this._nextIdx = i;\r\n                found = true;\r\n                break;\r\n            }\r\n        }\r\n        if (!found) {\r\n            // after the last change\r\n            this._nextIdx = fwd ? 0 : this._markers.length - 1;\r\n        }\r\n        if (this._nextIdx < 0) {\r\n            this._nextIdx = this._markers.length - 1;\r\n        }\r\n    };\r\n    Object.defineProperty(MarkerModel.prototype, \"currentMarker\", {\r\n        get: function () {\r\n            return this.canNavigate() ? this._markers[this._nextIdx] : undefined;\r\n        },\r\n        set: function (marker) {\r\n            var idx = this._nextIdx;\r\n            this._nextIdx = -1;\r\n            if (marker) {\r\n                this._nextIdx = this.indexOf(marker);\r\n            }\r\n            if (this._nextIdx !== idx) {\r\n                this._onCurrentMarkerChanged.fire(marker);\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    MarkerModel.prototype.move = function (fwd, inCircles) {\r\n        if (!this.canNavigate()) {\r\n            this._onCurrentMarkerChanged.fire(undefined);\r\n            return !inCircles;\r\n        }\r\n        var oldIdx = this._nextIdx;\r\n        var atEdge = false;\r\n        if (this._nextIdx === -1) {\r\n            this._initIdx(fwd);\r\n        }\r\n        else if (fwd) {\r\n            if (inCircles || this._nextIdx + 1 < this._markers.length) {\r\n                this._nextIdx = (this._nextIdx + 1) % this._markers.length;\r\n            }\r\n            else {\r\n                atEdge = true;\r\n            }\r\n        }\r\n        else if (!fwd) {\r\n            if (inCircles || this._nextIdx > 0) {\r\n                this._nextIdx = (this._nextIdx - 1 + this._markers.length) % this._markers.length;\r\n            }\r\n            else {\r\n                atEdge = true;\r\n            }\r\n        }\r\n        if (oldIdx !== this._nextIdx) {\r\n            var marker = this._markers[this._nextIdx];\r\n            this._onCurrentMarkerChanged.fire(marker);\r\n        }\r\n        return atEdge;\r\n    };\r\n    MarkerModel.prototype.canNavigate = function () {\r\n        return this._markers.length > 0;\r\n    };\r\n    MarkerModel.prototype.findMarkerAtPosition = function (pos) {\r\n        return find(this._markers, function (marker) { return Range.containsPosition(marker, pos); });\r\n    };\r\n    Object.defineProperty(MarkerModel.prototype, \"total\", {\r\n        get: function () {\r\n            return this._markers.length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    MarkerModel.prototype.indexOf = function (marker) {\r\n        return 1 + this._markers.indexOf(marker);\r\n    };\r\n    MarkerModel.prototype.dispose = function () {\r\n        this._toUnbind.dispose();\r\n    };\r\n    return MarkerModel;\r\n}());\r\nvar MarkerController = /** @class */ (function () {\r\n    function MarkerController(editor, _markerService, _contextKeyService, _themeService, _editorService, _keybindingService) {\r\n        this._markerService = _markerService;\r\n        this._contextKeyService = _contextKeyService;\r\n        this._themeService = _themeService;\r\n        this._editorService = _editorService;\r\n        this._keybindingService = _keybindingService;\r\n        this._model = null;\r\n        this._widget = null;\r\n        this._disposeOnClose = new DisposableStore();\r\n        this._editor = editor;\r\n        this._widgetVisible = CONTEXT_MARKERS_NAVIGATION_VISIBLE.bindTo(this._contextKeyService);\r\n    }\r\n    MarkerController.get = function (editor) {\r\n        return editor.getContribution(MarkerController.ID);\r\n    };\r\n    MarkerController.prototype.dispose = function () {\r\n        this._cleanUp();\r\n        this._disposeOnClose.dispose();\r\n    };\r\n    MarkerController.prototype._cleanUp = function () {\r\n        this._widgetVisible.reset();\r\n        this._disposeOnClose.clear();\r\n        this._widget = null;\r\n        this._model = null;\r\n    };\r\n    MarkerController.prototype.getOrCreateModel = function () {\r\n        var _this = this;\r\n        if (this._model) {\r\n            return this._model;\r\n        }\r\n        var markers = this._getMarkers();\r\n        this._model = new MarkerModel(this._editor, markers);\r\n        this._markerService.onMarkerChanged(this._onMarkerChanged, this, this._disposeOnClose);\r\n        var prevMarkerKeybinding = this._keybindingService.lookupKeybinding(PrevMarkerAction.ID);\r\n        var nextMarkerKeybinding = this._keybindingService.lookupKeybinding(NextMarkerAction.ID);\r\n        var actions = [\r\n            new Action(PrevMarkerAction.ID, PrevMarkerAction.LABEL + (prevMarkerKeybinding ? \" (\" + prevMarkerKeybinding.getLabel() + \")\" : ''), 'show-previous-problem codicon-chevron-up', this._model.canNavigate(), function () { return __awaiter(_this, void 0, void 0, function () { return __generator(this, function (_a) {\r\n                if (this._model) {\r\n                    this._model.move(false, true);\r\n                }\r\n                return [2 /*return*/];\r\n            }); }); }),\r\n            new Action(NextMarkerAction.ID, NextMarkerAction.LABEL + (nextMarkerKeybinding ? \" (\" + nextMarkerKeybinding.getLabel() + \")\" : ''), 'show-next-problem codicon-chevron-down', this._model.canNavigate(), function () { return __awaiter(_this, void 0, void 0, function () { return __generator(this, function (_a) {\r\n                if (this._model) {\r\n                    this._model.move(true, true);\r\n                }\r\n                return [2 /*return*/];\r\n            }); }); })\r\n        ];\r\n        this._widget = new MarkerNavigationWidget(this._editor, actions, this._themeService);\r\n        this._widgetVisible.set(true);\r\n        this._widget.onDidClose(function () { return _this.closeMarkersNavigation(); }, this, this._disposeOnClose);\r\n        this._disposeOnClose.add(this._model);\r\n        this._disposeOnClose.add(this._widget);\r\n        for (var _i = 0, actions_1 = actions; _i < actions_1.length; _i++) {\r\n            var action = actions_1[_i];\r\n            this._disposeOnClose.add(action);\r\n        }\r\n        this._disposeOnClose.add(this._widget.onDidSelectRelatedInformation(function (related) {\r\n            _this._editorService.openCodeEditor({\r\n                resource: related.resource,\r\n                options: { pinned: true, revealIfOpened: true, selection: Range.lift(related).collapseToStart() }\r\n            }, _this._editor).then(undefined, onUnexpectedError);\r\n            _this.closeMarkersNavigation(false);\r\n        }));\r\n        this._disposeOnClose.add(this._editor.onDidChangeModel(function () { return _this._cleanUp(); }));\r\n        this._disposeOnClose.add(this._model.onCurrentMarkerChanged(function (marker) {\r\n            if (!marker || !_this._model) {\r\n                _this._cleanUp();\r\n            }\r\n            else {\r\n                _this._model.withoutWatchingEditorPosition(function () {\r\n                    if (!_this._widget || !_this._model) {\r\n                        return;\r\n                    }\r\n                    _this._widget.showAtMarker(marker, _this._model.indexOf(marker), _this._model.total);\r\n                });\r\n            }\r\n        }));\r\n        this._disposeOnClose.add(this._model.onMarkerSetChanged(function () {\r\n            if (!_this._widget || !_this._widget.position || !_this._model) {\r\n                return;\r\n            }\r\n            var marker = _this._model.findMarkerAtPosition(_this._widget.position);\r\n            if (marker) {\r\n                _this._widget.updateMarker(marker);\r\n            }\r\n            else {\r\n                _this._widget.showStale();\r\n            }\r\n        }));\r\n        return this._model;\r\n    };\r\n    MarkerController.prototype.closeMarkersNavigation = function (focusEditor) {\r\n        if (focusEditor === void 0) { focusEditor = true; }\r\n        this._cleanUp();\r\n        if (focusEditor) {\r\n            this._editor.focus();\r\n        }\r\n    };\r\n    MarkerController.prototype.show = function (marker) {\r\n        var model = this.getOrCreateModel();\r\n        model.currentMarker = marker;\r\n    };\r\n    MarkerController.prototype._onMarkerChanged = function (changedResources) {\r\n        var editorModel = this._editor.getModel();\r\n        if (!editorModel) {\r\n            return;\r\n        }\r\n        if (!this._model) {\r\n            return;\r\n        }\r\n        if (!changedResources.some(function (r) { return isEqual(editorModel.uri, r); })) {\r\n            return;\r\n        }\r\n        this._model.setMarkers(this._getMarkers());\r\n    };\r\n    MarkerController.prototype._getMarkers = function () {\r\n        var model = this._editor.getModel();\r\n        if (!model) {\r\n            return [];\r\n        }\r\n        return this._markerService.read({\r\n            resource: model.uri,\r\n            severities: MarkerSeverity.Error | MarkerSeverity.Warning | MarkerSeverity.Info\r\n        });\r\n    };\r\n    MarkerController.ID = 'editor.contrib.markerController';\r\n    MarkerController = __decorate([\r\n        __param(1, IMarkerService),\r\n        __param(2, IContextKeyService),\r\n        __param(3, IThemeService),\r\n        __param(4, ICodeEditorService),\r\n        __param(5, IKeybindingService)\r\n    ], MarkerController);\r\n    return MarkerController;\r\n}());\r\nexport { MarkerController };\r\nvar MarkerNavigationAction = /** @class */ (function (_super) {\r\n    __extends(MarkerNavigationAction, _super);\r\n    function MarkerNavigationAction(next, multiFile, opts) {\r\n        var _this = _super.call(this, opts) || this;\r\n        _this._isNext = next;\r\n        _this._multiFile = multiFile;\r\n        return _this;\r\n    }\r\n    MarkerNavigationAction.prototype.run = function (accessor, editor) {\r\n        var _this = this;\r\n        var markerService = accessor.get(IMarkerService);\r\n        var editorService = accessor.get(ICodeEditorService);\r\n        var controller = MarkerController.get(editor);\r\n        if (!controller) {\r\n            return Promise.resolve(undefined);\r\n        }\r\n        var model = controller.getOrCreateModel();\r\n        var atEdge = model.move(this._isNext, !this._multiFile);\r\n        if (!atEdge || !this._multiFile) {\r\n            return Promise.resolve(undefined);\r\n        }\r\n        // try with the next/prev file\r\n        var markers = markerService.read({ severities: MarkerSeverity.Error | MarkerSeverity.Warning | MarkerSeverity.Info }).sort(MarkerNavigationAction.compareMarker);\r\n        if (markers.length === 0) {\r\n            return Promise.resolve(undefined);\r\n        }\r\n        var editorModel = editor.getModel();\r\n        if (!editorModel) {\r\n            return Promise.resolve(undefined);\r\n        }\r\n        var oldMarker = model.currentMarker || { resource: editorModel.uri, severity: MarkerSeverity.Error, startLineNumber: 1, startColumn: 1, endLineNumber: 1, endColumn: 1 };\r\n        var idx = binarySearch(markers, oldMarker, MarkerNavigationAction.compareMarker);\r\n        if (idx < 0) {\r\n            // find best match...\r\n            idx = ~idx;\r\n            idx %= markers.length;\r\n        }\r\n        else if (this._isNext) {\r\n            idx = (idx + 1) % markers.length;\r\n        }\r\n        else {\r\n            idx = (idx + markers.length - 1) % markers.length;\r\n        }\r\n        var newMarker = markers[idx];\r\n        if (isEqual(newMarker.resource, editorModel.uri)) {\r\n            // the next `resource` is this resource which\r\n            // means we cycle within this file\r\n            model.move(this._isNext, true);\r\n            return Promise.resolve(undefined);\r\n        }\r\n        // close the widget for this editor-instance, open the resource\r\n        // for the next marker and re-start marker navigation in there\r\n        controller.closeMarkersNavigation();\r\n        return editorService.openCodeEditor({\r\n            resource: newMarker.resource,\r\n            options: { pinned: false, revealIfOpened: true, revealInCenterIfOutsideViewport: true, selection: newMarker }\r\n        }, editor).then(function (editor) {\r\n            if (!editor) {\r\n                return undefined;\r\n            }\r\n            return editor.getAction(_this.id).run();\r\n        });\r\n    };\r\n    MarkerNavigationAction.compareMarker = function (a, b) {\r\n        var res = compare(a.resource.toString(), b.resource.toString());\r\n        if (res === 0) {\r\n            res = MarkerSeverity.compare(a.severity, b.severity);\r\n        }\r\n        if (res === 0) {\r\n            res = Range.compareRangesUsingStarts(a, b);\r\n        }\r\n        return res;\r\n    };\r\n    return MarkerNavigationAction;\r\n}(EditorAction));\r\nvar NextMarkerAction = /** @class */ (function (_super) {\r\n    __extends(NextMarkerAction, _super);\r\n    function NextMarkerAction() {\r\n        return _super.call(this, true, false, {\r\n            id: NextMarkerAction.ID,\r\n            label: NextMarkerAction.LABEL,\r\n            alias: 'Go to Next Problem (Error, Warning, Info)',\r\n            precondition: EditorContextKeys.writable,\r\n            kbOpts: { kbExpr: EditorContextKeys.editorTextFocus, primary: 512 /* Alt */ | 66 /* F8 */, weight: 100 /* EditorContrib */ }\r\n        }) || this;\r\n    }\r\n    NextMarkerAction.ID = 'editor.action.marker.next';\r\n    NextMarkerAction.LABEL = nls.localize('markerAction.next.label', \"Go to Next Problem (Error, Warning, Info)\");\r\n    return NextMarkerAction;\r\n}(MarkerNavigationAction));\r\nexport { NextMarkerAction };\r\nvar PrevMarkerAction = /** @class */ (function (_super) {\r\n    __extends(PrevMarkerAction, _super);\r\n    function PrevMarkerAction() {\r\n        return _super.call(this, false, false, {\r\n            id: PrevMarkerAction.ID,\r\n            label: PrevMarkerAction.LABEL,\r\n            alias: 'Go to Previous Problem (Error, Warning, Info)',\r\n            precondition: EditorContextKeys.writable,\r\n            kbOpts: { kbExpr: EditorContextKeys.editorTextFocus, primary: 1024 /* Shift */ | 512 /* Alt */ | 66 /* F8 */, weight: 100 /* EditorContrib */ }\r\n        }) || this;\r\n    }\r\n    PrevMarkerAction.ID = 'editor.action.marker.prev';\r\n    PrevMarkerAction.LABEL = nls.localize('markerAction.previous.label', \"Go to Previous Problem (Error, Warning, Info)\");\r\n    return PrevMarkerAction;\r\n}(MarkerNavigationAction));\r\nvar NextMarkerInFilesAction = /** @class */ (function (_super) {\r\n    __extends(NextMarkerInFilesAction, _super);\r\n    function NextMarkerInFilesAction() {\r\n        return _super.call(this, true, true, {\r\n            id: 'editor.action.marker.nextInFiles',\r\n            label: nls.localize('markerAction.nextInFiles.label', \"Go to Next Problem in Files (Error, Warning, Info)\"),\r\n            alias: 'Go to Next Problem in Files (Error, Warning, Info)',\r\n            precondition: EditorContextKeys.writable,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: 66 /* F8 */,\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    return NextMarkerInFilesAction;\r\n}(MarkerNavigationAction));\r\nvar PrevMarkerInFilesAction = /** @class */ (function (_super) {\r\n    __extends(PrevMarkerInFilesAction, _super);\r\n    function PrevMarkerInFilesAction() {\r\n        return _super.call(this, false, true, {\r\n            id: 'editor.action.marker.prevInFiles',\r\n            label: nls.localize('markerAction.previousInFiles.label', \"Go to Previous Problem in Files (Error, Warning, Info)\"),\r\n            alias: 'Go to Previous Problem in Files (Error, Warning, Info)',\r\n            precondition: EditorContextKeys.writable,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.focus,\r\n                primary: 1024 /* Shift */ | 66 /* F8 */,\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    return PrevMarkerInFilesAction;\r\n}(MarkerNavigationAction));\r\nregisterEditorContribution(MarkerController.ID, MarkerController);\r\nregisterEditorAction(NextMarkerAction);\r\nregisterEditorAction(PrevMarkerAction);\r\nregisterEditorAction(NextMarkerInFilesAction);\r\nregisterEditorAction(PrevMarkerInFilesAction);\r\nvar CONTEXT_MARKERS_NAVIGATION_VISIBLE = new RawContextKey('markersNavigationVisible', false);\r\nvar MarkerCommand = EditorCommand.bindToContribution(MarkerController.get);\r\nregisterEditorCommand(new MarkerCommand({\r\n    id: 'closeMarkersNavigation',\r\n    precondition: CONTEXT_MARKERS_NAVIGATION_VISIBLE,\r\n    handler: function (x) { return x.closeMarkersNavigation(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */ + 50,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: 9 /* Escape */,\r\n        secondary: [1024 /* Shift */ | 9 /* Escape */]\r\n    }\r\n}));\r\n// Go to menu\r\nMenuRegistry.appendMenuItem(17 /* MenubarGoMenu */, {\r\n    group: '6_problem_nav',\r\n    command: {\r\n        id: 'editor.action.marker.nextInFiles',\r\n        title: nls.localize({ key: 'miGotoNextProblem', comment: ['&& denotes a mnemonic'] }, \"Next &&Problem\")\r\n    },\r\n    order: 1\r\n});\r\nMenuRegistry.appendMenuItem(17 /* MenubarGoMenu */, {\r\n    group: '6_problem_nav',\r\n    command: {\r\n        id: 'editor.action.marker.prevInFiles',\r\n        title: nls.localize({ key: 'miGotoPreviousProblem', comment: ['&& denotes a mnemonic'] }, \"Previous &&Problem\")\r\n    },\r\n    order: 2\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { startsWith } from '../../../base/common/strings.js';\r\nvar CodeActionKind = /** @class */ (function () {\r\n    function CodeActionKind(value) {\r\n        this.value = value;\r\n    }\r\n    CodeActionKind.prototype.equals = function (other) {\r\n        return this.value === other.value;\r\n    };\r\n    CodeActionKind.prototype.contains = function (other) {\r\n        return this.equals(other) || this.value === '' || startsWith(other.value, this.value + CodeActionKind.sep);\r\n    };\r\n    CodeActionKind.prototype.intersects = function (other) {\r\n        return this.contains(other) || other.contains(this);\r\n    };\r\n    CodeActionKind.prototype.append = function (part) {\r\n        return new CodeActionKind(this.value + CodeActionKind.sep + part);\r\n    };\r\n    CodeActionKind.sep = '.';\r\n    CodeActionKind.None = new CodeActionKind('@@none@@'); // Special code action that contains nothing\r\n    CodeActionKind.Empty = new CodeActionKind('');\r\n    CodeActionKind.QuickFix = new CodeActionKind('quickfix');\r\n    CodeActionKind.Refactor = new CodeActionKind('refactor');\r\n    CodeActionKind.Source = new CodeActionKind('source');\r\n    CodeActionKind.SourceOrganizeImports = CodeActionKind.Source.append('organizeImports');\r\n    CodeActionKind.SourceFixAll = CodeActionKind.Source.append('fixAll');\r\n    return CodeActionKind;\r\n}());\r\nexport { CodeActionKind };\r\nexport function mayIncludeActionsOfKind(filter, providedKind) {\r\n    // A provided kind may be a subset or superset of our filtered kind.\r\n    if (filter.include && !filter.include.intersects(providedKind)) {\r\n        return false;\r\n    }\r\n    // Don't return source actions unless they are explicitly requested\r\n    if (!filter.includeSourceActions && CodeActionKind.Source.contains(providedKind)) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\nexport function filtersAction(filter, action) {\r\n    var actionKind = action.kind ? new CodeActionKind(action.kind) : undefined;\r\n    // Filter out actions by kind\r\n    if (filter.include) {\r\n        if (!actionKind || !filter.include.contains(actionKind)) {\r\n            return false;\r\n        }\r\n    }\r\n    if (filter.excludes) {\r\n        if (actionKind && filter.excludes.some(function (exclude) {\r\n            // Excludes are overwritten by includes\r\n            return exclude.contains(actionKind) && (!filter.include || !filter.include.contains(actionKind));\r\n        })) {\r\n            return false;\r\n        }\r\n    }\r\n    // Don't return source actions unless they are explicitly requested\r\n    if (!filter.includeSourceActions) {\r\n        if (actionKind && CodeActionKind.Source.contains(actionKind)) {\r\n            return false;\r\n        }\r\n    }\r\n    if (filter.onlyIncludePreferredActions) {\r\n        if (!action.isPreferred) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nvar CodeActionCommandArgs = /** @class */ (function () {\r\n    function CodeActionCommandArgs(kind, apply, preferred) {\r\n        this.kind = kind;\r\n        this.apply = apply;\r\n        this.preferred = preferred;\r\n    }\r\n    CodeActionCommandArgs.fromUser = function (arg, defaults) {\r\n        if (!arg || typeof arg !== 'object') {\r\n            return new CodeActionCommandArgs(defaults.kind, defaults.apply, false);\r\n        }\r\n        return new CodeActionCommandArgs(CodeActionCommandArgs.getKindFromUser(arg, defaults.kind), CodeActionCommandArgs.getApplyFromUser(arg, defaults.apply), CodeActionCommandArgs.getPreferredUser(arg));\r\n    };\r\n    CodeActionCommandArgs.getApplyFromUser = function (arg, defaultAutoApply) {\r\n        switch (typeof arg.apply === 'string' ? arg.apply.toLowerCase() : '') {\r\n            case 'first': return \"first\" /* First */;\r\n            case 'never': return \"never\" /* Never */;\r\n            case 'ifsingle': return \"ifSingle\" /* IfSingle */;\r\n            default: return defaultAutoApply;\r\n        }\r\n    };\r\n    CodeActionCommandArgs.getKindFromUser = function (arg, defaultKind) {\r\n        return typeof arg.kind === 'string'\r\n            ? new CodeActionKind(arg.kind)\r\n            : defaultKind;\r\n    };\r\n    CodeActionCommandArgs.getPreferredUser = function (arg) {\r\n        return typeof arg.preferred === 'boolean'\r\n            ? arg.preferred\r\n            : false;\r\n    };\r\n    return CodeActionCommandArgs;\r\n}());\r\nexport { CodeActionCommandArgs };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nimport { equals, flatten, isNonEmptyArray, mergeSort } from '../../../base/common/arrays.js';\r\nimport { CancellationToken } from '../../../base/common/cancellation.js';\r\nimport { illegalArgument, isPromiseCanceledError, onUnexpectedExternalError } from '../../../base/common/errors.js';\r\nimport { URI } from '../../../base/common/uri.js';\r\nimport { registerLanguageCommand } from '../../browser/editorExtensions.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { Selection } from '../../common/core/selection.js';\r\nimport { CodeActionProviderRegistry } from '../../common/modes.js';\r\nimport { IModelService } from '../../common/services/modelService.js';\r\nimport { CodeActionKind, filtersAction, mayIncludeActionsOfKind } from './types.js';\r\nimport { TextModelCancellationTokenSource } from '../../browser/core/editorState.js';\r\nimport { DisposableStore, Disposable } from '../../../base/common/lifecycle.js';\r\nexport var codeActionCommandId = 'editor.action.codeAction';\r\nexport var refactorCommandId = 'editor.action.refactor';\r\nexport var sourceActionCommandId = 'editor.action.sourceAction';\r\nexport var organizeImportsCommandId = 'editor.action.organizeImports';\r\nexport var fixAllCommandId = 'editor.action.fixAll';\r\nvar ManagedCodeActionSet = /** @class */ (function (_super) {\r\n    __extends(ManagedCodeActionSet, _super);\r\n    function ManagedCodeActionSet(actions, disposables) {\r\n        var _this = _super.call(this) || this;\r\n        _this._register(disposables);\r\n        _this.allActions = mergeSort(__spreadArrays(actions), ManagedCodeActionSet.codeActionsComparator);\r\n        _this.validActions = _this.allActions.filter(function (action) { return !action.disabled; });\r\n        return _this;\r\n    }\r\n    ManagedCodeActionSet.codeActionsComparator = function (a, b) {\r\n        if (isNonEmptyArray(a.diagnostics)) {\r\n            if (isNonEmptyArray(b.diagnostics)) {\r\n                return a.diagnostics[0].message.localeCompare(b.diagnostics[0].message);\r\n            }\r\n            else {\r\n                return -1;\r\n            }\r\n        }\r\n        else if (isNonEmptyArray(b.diagnostics)) {\r\n            return 1;\r\n        }\r\n        else {\r\n            return 0; // both have no diagnostics\r\n        }\r\n    };\r\n    Object.defineProperty(ManagedCodeActionSet.prototype, \"hasAutoFix\", {\r\n        get: function () {\r\n            return this.validActions.some(function (fix) { return !!fix.kind && CodeActionKind.QuickFix.contains(new CodeActionKind(fix.kind)) && !!fix.isPreferred; });\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return ManagedCodeActionSet;\r\n}(Disposable));\r\nexport function getCodeActions(model, rangeOrSelection, trigger, token) {\r\n    var _this = this;\r\n    var _a;\r\n    var filter = trigger.filter || {};\r\n    var codeActionContext = {\r\n        only: (_a = filter.include) === null || _a === void 0 ? void 0 : _a.value,\r\n        trigger: trigger.type === 'manual' ? 2 /* Manual */ : 1 /* Automatic */\r\n    };\r\n    var cts = new TextModelCancellationTokenSource(model, token);\r\n    var providers = getCodeActionProviders(model, filter);\r\n    var disposables = new DisposableStore();\r\n    var promises = providers.map(function (provider) { return __awaiter(_this, void 0, void 0, function () {\r\n        var providedCodeActions, err_1;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    _a.trys.push([0, 2, , 3]);\r\n                    return [4 /*yield*/, provider.provideCodeActions(model, rangeOrSelection, codeActionContext, cts.token)];\r\n                case 1:\r\n                    providedCodeActions = _a.sent();\r\n                    if (cts.token.isCancellationRequested || !providedCodeActions) {\r\n                        return [2 /*return*/, []];\r\n                    }\r\n                    disposables.add(providedCodeActions);\r\n                    return [2 /*return*/, providedCodeActions.actions.filter(function (action) { return action && filtersAction(filter, action); })];\r\n                case 2:\r\n                    err_1 = _a.sent();\r\n                    if (isPromiseCanceledError(err_1)) {\r\n                        throw err_1;\r\n                    }\r\n                    onUnexpectedExternalError(err_1);\r\n                    return [2 /*return*/, []];\r\n                case 3: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); });\r\n    var listener = CodeActionProviderRegistry.onDidChange(function () {\r\n        var newProviders = CodeActionProviderRegistry.all(model);\r\n        if (!equals(newProviders, providers)) {\r\n            cts.cancel();\r\n        }\r\n    });\r\n    return Promise.all(promises)\r\n        .then(flatten)\r\n        .then(function (actions) { return new ManagedCodeActionSet(actions, disposables); })\r\n        .finally(function () {\r\n        listener.dispose();\r\n        cts.dispose();\r\n    });\r\n}\r\nfunction getCodeActionProviders(model, filter) {\r\n    return CodeActionProviderRegistry.all(model)\r\n        // Don't include providers that we know will not return code actions of interest\r\n        .filter(function (provider) {\r\n        if (!provider.providedCodeActionKinds) {\r\n            // We don't know what type of actions this provider will return.\r\n            return true;\r\n        }\r\n        return provider.providedCodeActionKinds.some(function (kind) { return mayIncludeActionsOfKind(filter, new CodeActionKind(kind)); });\r\n    });\r\n}\r\nregisterLanguageCommand('_executeCodeActionProvider', function (accessor, args) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var resource, rangeOrSelection, kind, model, validatedRangeOrSelection, codeActionSet;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    resource = args.resource, rangeOrSelection = args.rangeOrSelection, kind = args.kind;\r\n                    if (!(resource instanceof URI)) {\r\n                        throw illegalArgument();\r\n                    }\r\n                    model = accessor.get(IModelService).getModel(resource);\r\n                    if (!model) {\r\n                        throw illegalArgument();\r\n                    }\r\n                    validatedRangeOrSelection = Selection.isISelection(rangeOrSelection)\r\n                        ? Selection.liftSelection(rangeOrSelection)\r\n                        : Range.isIRange(rangeOrSelection)\r\n                            ? model.validateRange(rangeOrSelection)\r\n                            : undefined;\r\n                    if (!validatedRangeOrSelection) {\r\n                        throw illegalArgument();\r\n                    }\r\n                    return [4 /*yield*/, getCodeActions(model, validatedRangeOrSelection, { type: 'manual', filter: { includeSourceActions: true, include: kind && kind.value ? new CodeActionKind(kind.value) : undefined } }, CancellationToken.None)];\r\n                case 1:\r\n                    codeActionSet = _a.sent();\r\n                    setTimeout(function () { return codeActionSet.dispose(); }, 100);\r\n                    return [2 /*return*/, codeActionSet.validActions];\r\n            }\r\n        });\r\n    });\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar Lazy = /** @class */ (function () {\r\n    function Lazy(executor) {\r\n        this.executor = executor;\r\n        this._didRun = false;\r\n    }\r\n    /**\r\n     * Get the wrapped value.\r\n     *\r\n     * This will force evaluation of the lazy value if it has not been resolved yet. Lazy values are only\r\n     * resolved once. `getValue` will re-throw exceptions that are hit while resolving the value\r\n     */\r\n    Lazy.prototype.getValue = function () {\r\n        if (!this._didRun) {\r\n            try {\r\n                this._value = this.executor();\r\n            }\r\n            catch (err) {\r\n                this._error = err;\r\n            }\r\n            finally {\r\n                this._didRun = true;\r\n            }\r\n        }\r\n        if (this._error) {\r\n            throw this._error;\r\n        }\r\n        return this._value;\r\n    };\r\n    Object.defineProperty(Lazy.prototype, \"rawValue\", {\r\n        /**\r\n         * Get the wrapped value without forcing evaluation.\r\n         */\r\n        get: function () { return this._value; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return Lazy;\r\n}());\r\nexport { Lazy };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport './messageController.css';\r\nimport * as nls from '../../../nls.js';\r\nimport { TimeoutTimer } from '../../../base/common/async.js';\r\nimport { Disposable, DisposableStore, MutableDisposable } from '../../../base/common/lifecycle.js';\r\nimport { alert } from '../../../base/browser/ui/aria/aria.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { registerEditorContribution, EditorCommand, registerEditorCommand } from '../../browser/editorExtensions.js';\r\nimport { IContextKeyService, RawContextKey } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { registerThemingParticipant, HIGH_CONTRAST } from '../../../platform/theme/common/themeService.js';\r\nimport { inputValidationInfoBorder, inputValidationInfoBackground, inputValidationInfoForeground } from '../../../platform/theme/common/colorRegistry.js';\r\nvar MessageController = /** @class */ (function (_super) {\r\n    __extends(MessageController, _super);\r\n    function MessageController(editor, contextKeyService) {\r\n        var _this = _super.call(this) || this;\r\n        _this.closeTimeout = 3000; // close after 3s\r\n        _this._messageWidget = _this._register(new MutableDisposable());\r\n        _this._messageListeners = _this._register(new DisposableStore());\r\n        _this._editor = editor;\r\n        _this._visible = MessageController.MESSAGE_VISIBLE.bindTo(contextKeyService);\r\n        _this._register(_this._editor.onDidAttemptReadOnlyEdit(function () { return _this._onDidAttemptReadOnlyEdit(); }));\r\n        return _this;\r\n    }\r\n    MessageController.get = function (editor) {\r\n        return editor.getContribution(MessageController.ID);\r\n    };\r\n    MessageController.prototype.dispose = function () {\r\n        _super.prototype.dispose.call(this);\r\n        this._visible.reset();\r\n    };\r\n    MessageController.prototype.showMessage = function (message, position) {\r\n        var _this = this;\r\n        alert(message);\r\n        this._visible.set(true);\r\n        this._messageWidget.clear();\r\n        this._messageListeners.clear();\r\n        this._messageWidget.value = new MessageWidget(this._editor, position, message);\r\n        // close on blur, cursor, model change, dispose\r\n        this._messageListeners.add(this._editor.onDidBlurEditorText(function () { return _this.closeMessage(); }));\r\n        this._messageListeners.add(this._editor.onDidChangeCursorPosition(function () { return _this.closeMessage(); }));\r\n        this._messageListeners.add(this._editor.onDidDispose(function () { return _this.closeMessage(); }));\r\n        this._messageListeners.add(this._editor.onDidChangeModel(function () { return _this.closeMessage(); }));\r\n        this._messageListeners.add(new TimeoutTimer(function () { return _this.closeMessage(); }, this.closeTimeout));\r\n        // close on mouse move\r\n        var bounds;\r\n        this._messageListeners.add(this._editor.onMouseMove(function (e) {\r\n            // outside the text area\r\n            if (!e.target.position) {\r\n                return;\r\n            }\r\n            if (!bounds) {\r\n                // define bounding box around position and first mouse occurance\r\n                bounds = new Range(position.lineNumber - 3, 1, e.target.position.lineNumber + 3, 1);\r\n            }\r\n            else if (!bounds.containsPosition(e.target.position)) {\r\n                // check if position is still in bounds\r\n                _this.closeMessage();\r\n            }\r\n        }));\r\n    };\r\n    MessageController.prototype.closeMessage = function () {\r\n        this._visible.reset();\r\n        this._messageListeners.clear();\r\n        if (this._messageWidget.value) {\r\n            this._messageListeners.add(MessageWidget.fadeOut(this._messageWidget.value));\r\n        }\r\n    };\r\n    MessageController.prototype._onDidAttemptReadOnlyEdit = function () {\r\n        if (this._editor.hasModel()) {\r\n            this.showMessage(nls.localize('editor.readonly', \"Cannot edit in read-only editor\"), this._editor.getPosition());\r\n        }\r\n    };\r\n    MessageController.ID = 'editor.contrib.messageController';\r\n    MessageController.MESSAGE_VISIBLE = new RawContextKey('messageVisible', false);\r\n    MessageController = __decorate([\r\n        __param(1, IContextKeyService)\r\n    ], MessageController);\r\n    return MessageController;\r\n}(Disposable));\r\nexport { MessageController };\r\nvar MessageCommand = EditorCommand.bindToContribution(MessageController.get);\r\nregisterEditorCommand(new MessageCommand({\r\n    id: 'leaveEditorMessage',\r\n    precondition: MessageController.MESSAGE_VISIBLE,\r\n    handler: function (c) { return c.closeMessage(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */ + 30,\r\n        primary: 9 /* Escape */\r\n    }\r\n}));\r\nvar MessageWidget = /** @class */ (function () {\r\n    function MessageWidget(editor, _a, text) {\r\n        var lineNumber = _a.lineNumber, column = _a.column;\r\n        // Editor.IContentWidget.allowEditorOverflow\r\n        this.allowEditorOverflow = true;\r\n        this.suppressMouseDown = false;\r\n        this._editor = editor;\r\n        this._editor.revealLinesInCenterIfOutsideViewport(lineNumber, lineNumber, 0 /* Smooth */);\r\n        this._position = { lineNumber: lineNumber, column: column - 1 };\r\n        this._domNode = document.createElement('div');\r\n        this._domNode.classList.add('monaco-editor-overlaymessage');\r\n        var message = document.createElement('div');\r\n        message.classList.add('message');\r\n        message.textContent = text;\r\n        this._domNode.appendChild(message);\r\n        var anchor = document.createElement('div');\r\n        anchor.classList.add('anchor');\r\n        this._domNode.appendChild(anchor);\r\n        this._editor.addContentWidget(this);\r\n        this._domNode.classList.add('fadeIn');\r\n    }\r\n    MessageWidget.fadeOut = function (messageWidget) {\r\n        var handle;\r\n        var dispose = function () {\r\n            messageWidget.dispose();\r\n            clearTimeout(handle);\r\n            messageWidget.getDomNode().removeEventListener('animationend', dispose);\r\n        };\r\n        handle = setTimeout(dispose, 110);\r\n        messageWidget.getDomNode().addEventListener('animationend', dispose);\r\n        messageWidget.getDomNode().classList.add('fadeOut');\r\n        return { dispose: dispose };\r\n    };\r\n    MessageWidget.prototype.dispose = function () {\r\n        this._editor.removeContentWidget(this);\r\n    };\r\n    MessageWidget.prototype.getId = function () {\r\n        return 'messageoverlay';\r\n    };\r\n    MessageWidget.prototype.getDomNode = function () {\r\n        return this._domNode;\r\n    };\r\n    MessageWidget.prototype.getPosition = function () {\r\n        return { position: this._position, preference: [1 /* ABOVE */, 2 /* BELOW */] };\r\n    };\r\n    return MessageWidget;\r\n}());\r\nregisterEditorContribution(MessageController.ID, MessageController);\r\nregisterThemingParticipant(function (theme, collector) {\r\n    var border = theme.getColor(inputValidationInfoBorder);\r\n    if (border) {\r\n        var borderWidth = theme.type === HIGH_CONTRAST ? 2 : 1;\r\n        collector.addRule(\".monaco-editor .monaco-editor-overlaymessage .anchor { border-top-color: \" + border + \"; }\");\r\n        collector.addRule(\".monaco-editor .monaco-editor-overlaymessage .message { border: \" + borderWidth + \"px solid \" + border + \"; }\");\r\n    }\r\n    var background = theme.getColor(inputValidationInfoBackground);\r\n    if (background) {\r\n        collector.addRule(\".monaco-editor .monaco-editor-overlaymessage .message { background-color: \" + background + \"; }\");\r\n    }\r\n    var foreground = theme.getColor(inputValidationInfoForeground);\r\n    if (foreground) {\r\n        collector.addRule(\".monaco-editor .monaco-editor-overlaymessage .message { color: \" + foreground + \"; }\");\r\n    }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { getDomNodePagePosition } from '../../../base/browser/dom.js';\r\nimport { Action } from '../../../base/common/actions.js';\r\nimport { canceled } from '../../../base/common/errors.js';\r\nimport { Lazy } from '../../../base/common/lazy.js';\r\nimport { Disposable, MutableDisposable } from '../../../base/common/lifecycle.js';\r\nimport { Position } from '../../common/core/position.js';\r\nimport { refactorCommandId, sourceActionCommandId, codeActionCommandId, organizeImportsCommandId, fixAllCommandId } from './codeAction.js';\r\nimport { CodeActionCommandArgs, CodeActionKind } from './types.js';\r\nimport { IContextMenuService } from '../../../platform/contextview/browser/contextView.js';\r\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\r\nvar CodeActionAction = /** @class */ (function (_super) {\r\n    __extends(CodeActionAction, _super);\r\n    function CodeActionAction(action, callback) {\r\n        var _this = _super.call(this, action.command ? action.command.id : action.title, action.title, undefined, !action.disabled, callback) || this;\r\n        _this.action = action;\r\n        return _this;\r\n    }\r\n    return CodeActionAction;\r\n}(Action));\r\nvar CodeActionMenu = /** @class */ (function (_super) {\r\n    __extends(CodeActionMenu, _super);\r\n    function CodeActionMenu(_editor, _delegate, _contextMenuService, keybindingService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._editor = _editor;\r\n        _this._delegate = _delegate;\r\n        _this._contextMenuService = _contextMenuService;\r\n        _this._visible = false;\r\n        _this._showingActions = _this._register(new MutableDisposable());\r\n        _this._keybindingResolver = new CodeActionKeybindingResolver({\r\n            getKeybindings: function () { return keybindingService.getKeybindings(); }\r\n        });\r\n        return _this;\r\n    }\r\n    Object.defineProperty(CodeActionMenu.prototype, \"isVisible\", {\r\n        get: function () {\r\n            return this._visible;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    CodeActionMenu.prototype.show = function (codeActions, at, options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var actionsToShow, menuActions, anchor, resolver;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                actionsToShow = options.includeDisabledActions ? codeActions.allActions : codeActions.validActions;\r\n                if (!actionsToShow.length) {\r\n                    this._visible = false;\r\n                    return [2 /*return*/];\r\n                }\r\n                if (!this._editor.getDomNode()) {\r\n                    // cancel when editor went off-dom\r\n                    this._visible = false;\r\n                    throw canceled();\r\n                }\r\n                this._visible = true;\r\n                this._showingActions.value = codeActions;\r\n                menuActions = actionsToShow.map(function (action) {\r\n                    return new CodeActionAction(action, function () { return _this._delegate.onSelectCodeAction(action); });\r\n                });\r\n                anchor = Position.isIPosition(at) ? this._toCoords(at) : at || { x: 0, y: 0 };\r\n                resolver = this._keybindingResolver.getResolver();\r\n                this._contextMenuService.showContextMenu({\r\n                    getAnchor: function () { return anchor; },\r\n                    getActions: function () { return menuActions; },\r\n                    onHide: function () {\r\n                        _this._visible = false;\r\n                        _this._editor.focus();\r\n                    },\r\n                    autoSelectFirstItem: true,\r\n                    getKeyBinding: function (action) { return action instanceof CodeActionAction ? resolver(action.action) : undefined; },\r\n                });\r\n                return [2 /*return*/];\r\n            });\r\n        });\r\n    };\r\n    CodeActionMenu.prototype._toCoords = function (position) {\r\n        if (!this._editor.hasModel()) {\r\n            return { x: 0, y: 0 };\r\n        }\r\n        this._editor.revealPosition(position, 1 /* Immediate */);\r\n        this._editor.render();\r\n        // Translate to absolute editor position\r\n        var cursorCoords = this._editor.getScrolledVisiblePosition(position);\r\n        var editorCoords = getDomNodePagePosition(this._editor.getDomNode());\r\n        var x = editorCoords.left + cursorCoords.left;\r\n        var y = editorCoords.top + cursorCoords.top + cursorCoords.height;\r\n        return { x: x, y: y };\r\n    };\r\n    CodeActionMenu = __decorate([\r\n        __param(2, IContextMenuService),\r\n        __param(3, IKeybindingService)\r\n    ], CodeActionMenu);\r\n    return CodeActionMenu;\r\n}(Disposable));\r\nexport { CodeActionMenu };\r\nvar CodeActionKeybindingResolver = /** @class */ (function () {\r\n    function CodeActionKeybindingResolver(_keybindingProvider) {\r\n        this._keybindingProvider = _keybindingProvider;\r\n    }\r\n    CodeActionKeybindingResolver.prototype.getResolver = function () {\r\n        var _this = this;\r\n        // Lazy since we may not actually ever read the value\r\n        var allCodeActionBindings = new Lazy(function () {\r\n            return _this._keybindingProvider.getKeybindings()\r\n                .filter(function (item) { return CodeActionKeybindingResolver.codeActionCommands.indexOf(item.command) >= 0; })\r\n                .filter(function (item) { return item.resolvedKeybinding; })\r\n                .map(function (item) {\r\n                // Special case these commands since they come built-in with VS Code and don't use 'commandArgs'\r\n                var commandArgs = item.commandArgs;\r\n                if (item.command === organizeImportsCommandId) {\r\n                    commandArgs = { kind: CodeActionKind.SourceOrganizeImports.value };\r\n                }\r\n                else if (item.command === fixAllCommandId) {\r\n                    commandArgs = { kind: CodeActionKind.SourceFixAll.value };\r\n                }\r\n                return __assign({ resolvedKeybinding: item.resolvedKeybinding }, CodeActionCommandArgs.fromUser(commandArgs, {\r\n                    kind: CodeActionKind.None,\r\n                    apply: \"never\" /* Never */\r\n                }));\r\n            });\r\n        });\r\n        return function (action) {\r\n            var _a;\r\n            if (action.kind) {\r\n                var binding = _this.bestKeybindingForCodeAction(action, allCodeActionBindings.getValue());\r\n                return (_a = binding) === null || _a === void 0 ? void 0 : _a.resolvedKeybinding;\r\n            }\r\n            return undefined;\r\n        };\r\n    };\r\n    CodeActionKeybindingResolver.prototype.bestKeybindingForCodeAction = function (action, candidates) {\r\n        if (!action.kind) {\r\n            return undefined;\r\n        }\r\n        var kind = new CodeActionKind(action.kind);\r\n        return candidates\r\n            .filter(function (candidate) { return candidate.kind.contains(kind); })\r\n            .filter(function (candidate) {\r\n            if (candidate.preferred) {\r\n                // If the candidate keybinding only applies to preferred actions, the this action must also be preferred\r\n                return action.isPreferred;\r\n            }\r\n            return true;\r\n        })\r\n            .reduceRight(function (currentBest, candidate) {\r\n            if (!currentBest) {\r\n                return candidate;\r\n            }\r\n            // Select the more specific binding\r\n            return currentBest.kind.contains(candidate.kind) ? candidate : currentBest;\r\n        }, undefined);\r\n    };\r\n    CodeActionKeybindingResolver.codeActionCommands = [\r\n        refactorCommandId,\r\n        codeActionCommandId,\r\n        sourceActionCommandId,\r\n        organizeImportsCommandId,\r\n        fixAllCommandId\r\n    ];\r\n    return CodeActionKeybindingResolver;\r\n}());\r\nexport { CodeActionKeybindingResolver };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { GlobalMouseMoveMonitor, standardMouseMoveMerger } from '../../../base/browser/globalMouseMoveMonitor.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport './lightBulbWidget.css';\r\nimport { TextModel } from '../../common/model/textModel.js';\r\nimport * as nls from '../../../nls.js';\r\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\r\nimport { registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\r\nimport { editorLightBulbForeground, editorLightBulbAutoFixForeground } from '../../../platform/theme/common/colorRegistry.js';\r\nimport { Gesture } from '../../../base/browser/touch.js';\r\nvar LightBulbState;\r\n(function (LightBulbState) {\r\n    LightBulbState.Hidden = { type: 0 /* Hidden */ };\r\n    var Showing = /** @class */ (function () {\r\n        function Showing(actions, editorPosition, widgetPosition) {\r\n            this.actions = actions;\r\n            this.editorPosition = editorPosition;\r\n            this.widgetPosition = widgetPosition;\r\n            this.type = 1 /* Showing */;\r\n        }\r\n        return Showing;\r\n    }());\r\n    LightBulbState.Showing = Showing;\r\n})(LightBulbState || (LightBulbState = {}));\r\nvar LightBulbWidget = /** @class */ (function (_super) {\r\n    __extends(LightBulbWidget, _super);\r\n    function LightBulbWidget(_editor, _quickFixActionId, _preferredFixActionId, _keybindingService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._editor = _editor;\r\n        _this._quickFixActionId = _quickFixActionId;\r\n        _this._preferredFixActionId = _preferredFixActionId;\r\n        _this._keybindingService = _keybindingService;\r\n        _this._onClick = _this._register(new Emitter());\r\n        _this.onClick = _this._onClick.event;\r\n        _this._state = LightBulbState.Hidden;\r\n        _this._domNode = document.createElement('div');\r\n        _this._domNode.className = 'codicon codicon-lightbulb';\r\n        _this._editor.addContentWidget(_this);\r\n        _this._register(_this._editor.onDidChangeModelContent(function (_) {\r\n            // cancel when the line in question has been removed\r\n            var editorModel = _this._editor.getModel();\r\n            if (_this.state.type !== 1 /* Showing */ || !editorModel || _this.state.editorPosition.lineNumber >= editorModel.getLineCount()) {\r\n                _this.hide();\r\n            }\r\n        }));\r\n        Gesture.ignoreTarget(_this._domNode);\r\n        _this._register(dom.addStandardDisposableGenericMouseDownListner(_this._domNode, function (e) {\r\n            if (_this.state.type !== 1 /* Showing */) {\r\n                return;\r\n            }\r\n            // Make sure that focus / cursor location is not lost when clicking widget icon\r\n            _this._editor.focus();\r\n            e.preventDefault();\r\n            // a bit of extra work to make sure the menu\r\n            // doesn't cover the line-text\r\n            var _a = dom.getDomNodePagePosition(_this._domNode), top = _a.top, height = _a.height;\r\n            var lineHeight = _this._editor.getOption(47 /* lineHeight */);\r\n            var pad = Math.floor(lineHeight / 3);\r\n            if (_this.state.widgetPosition.position !== null && _this.state.widgetPosition.position.lineNumber < _this.state.editorPosition.lineNumber) {\r\n                pad += lineHeight;\r\n            }\r\n            _this._onClick.fire({\r\n                x: e.posx,\r\n                y: top + height + pad,\r\n                actions: _this.state.actions\r\n            });\r\n        }));\r\n        _this._register(dom.addDisposableListener(_this._domNode, 'mouseenter', function (e) {\r\n            if ((e.buttons & 1) !== 1) {\r\n                return;\r\n            }\r\n            // mouse enters lightbulb while the primary/left button\r\n            // is being pressed -> hide the lightbulb and block future\r\n            // showings until mouse is released\r\n            _this.hide();\r\n            var monitor = new GlobalMouseMoveMonitor();\r\n            monitor.startMonitoring(standardMouseMoveMerger, function () { }, function () {\r\n                monitor.dispose();\r\n            });\r\n        }));\r\n        _this._register(_this._editor.onDidChangeConfiguration(function (e) {\r\n            // hide when told to do so\r\n            if (e.hasChanged(45 /* lightbulb */) && !_this._editor.getOption(45 /* lightbulb */).enabled) {\r\n                _this.hide();\r\n            }\r\n        }));\r\n        _this._updateLightBulbTitle();\r\n        _this._register(_this._keybindingService.onDidUpdateKeybindings(_this._updateLightBulbTitle, _this));\r\n        return _this;\r\n    }\r\n    LightBulbWidget.prototype.dispose = function () {\r\n        _super.prototype.dispose.call(this);\r\n        this._editor.removeContentWidget(this);\r\n    };\r\n    LightBulbWidget.prototype.getId = function () {\r\n        return 'LightBulbWidget';\r\n    };\r\n    LightBulbWidget.prototype.getDomNode = function () {\r\n        return this._domNode;\r\n    };\r\n    LightBulbWidget.prototype.getPosition = function () {\r\n        return this._state.type === 1 /* Showing */ ? this._state.widgetPosition : null;\r\n    };\r\n    LightBulbWidget.prototype.update = function (actions, atPosition) {\r\n        var _this = this;\r\n        if (actions.validActions.length <= 0) {\r\n            return this.hide();\r\n        }\r\n        var options = this._editor.getOptions();\r\n        if (!options.get(45 /* lightbulb */).enabled) {\r\n            return this.hide();\r\n        }\r\n        var lineNumber = atPosition.lineNumber, column = atPosition.column;\r\n        var model = this._editor.getModel();\r\n        if (!model) {\r\n            return this.hide();\r\n        }\r\n        var tabSize = model.getOptions().tabSize;\r\n        var fontInfo = options.get(32 /* fontInfo */);\r\n        var lineContent = model.getLineContent(lineNumber);\r\n        var indent = TextModel.computeIndentLevel(lineContent, tabSize);\r\n        var lineHasSpace = fontInfo.spaceWidth * indent > 22;\r\n        var isFolded = function (lineNumber) {\r\n            return lineNumber > 2 && _this._editor.getTopForLineNumber(lineNumber) === _this._editor.getTopForLineNumber(lineNumber - 1);\r\n        };\r\n        var effectiveLineNumber = lineNumber;\r\n        if (!lineHasSpace) {\r\n            if (lineNumber > 1 && !isFolded(lineNumber - 1)) {\r\n                effectiveLineNumber -= 1;\r\n            }\r\n            else if (!isFolded(lineNumber + 1)) {\r\n                effectiveLineNumber += 1;\r\n            }\r\n            else if (column * fontInfo.spaceWidth < 22) {\r\n                // cannot show lightbulb above/below and showing\r\n                // it inline would overlay the cursor...\r\n                return this.hide();\r\n            }\r\n        }\r\n        this.state = new LightBulbState.Showing(actions, atPosition, {\r\n            position: { lineNumber: effectiveLineNumber, column: 1 },\r\n            preference: LightBulbWidget._posPref\r\n        });\r\n        dom.toggleClass(this._domNode, 'codicon-lightbulb-autofix', actions.hasAutoFix);\r\n        this._editor.layoutContentWidget(this);\r\n    };\r\n    LightBulbWidget.prototype.hide = function () {\r\n        this.state = LightBulbState.Hidden;\r\n        this._editor.layoutContentWidget(this);\r\n    };\r\n    Object.defineProperty(LightBulbWidget.prototype, \"state\", {\r\n        get: function () { return this._state; },\r\n        set: function (value) {\r\n            this._state = value;\r\n            this._updateLightBulbTitle();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    LightBulbWidget.prototype._updateLightBulbTitle = function () {\r\n        if (this.state.type === 1 /* Showing */ && this.state.actions.hasAutoFix) {\r\n            var preferredKb = this._keybindingService.lookupKeybinding(this._preferredFixActionId);\r\n            if (preferredKb) {\r\n                this.title = nls.localize('prefferedQuickFixWithKb', \"Show Fixes. Preferred Fix Available ({0})\", preferredKb.getLabel());\r\n                return;\r\n            }\r\n        }\r\n        var kb = this._keybindingService.lookupKeybinding(this._quickFixActionId);\r\n        if (kb) {\r\n            this.title = nls.localize('quickFixWithKb', \"Show Fixes ({0})\", kb.getLabel());\r\n        }\r\n        else {\r\n            this.title = nls.localize('quickFix', \"Show Fixes\");\r\n        }\r\n    };\r\n    Object.defineProperty(LightBulbWidget.prototype, \"title\", {\r\n        set: function (value) {\r\n            this._domNode.title = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    LightBulbWidget._posPref = [0 /* EXACT */];\r\n    LightBulbWidget = __decorate([\r\n        __param(3, IKeybindingService)\r\n    ], LightBulbWidget);\r\n    return LightBulbWidget;\r\n}(Disposable));\r\nexport { LightBulbWidget };\r\nregisterThemingParticipant(function (theme, collector) {\r\n    // Lightbulb Icon\r\n    var editorLightBulbForegroundColor = theme.getColor(editorLightBulbForeground);\r\n    if (editorLightBulbForegroundColor) {\r\n        collector.addRule(\"\\n\\t\\t.monaco-editor .contentWidgets .codicon-lightbulb,\\n\\t\\t.monaco-workbench .markers-panel-container .codicon-lightbulb {\\n\\t\\t\\tcolor: \" + editorLightBulbForegroundColor + \";\\n\\t\\t}\");\r\n    }\r\n    // Lightbulb Auto Fix Icon\r\n    var editorLightBulbAutoFixForegroundColor = theme.getColor(editorLightBulbAutoFixForeground);\r\n    if (editorLightBulbAutoFixForegroundColor) {\r\n        collector.addRule(\"\\n\\t\\t.monaco-editor .contentWidgets .codicon-lightbulb-autofix,\\n\\t\\t.monaco-workbench .markers-panel-container .codicon-lightbulb-autofix {\\n\\t\\t\\tcolor: \" + editorLightBulbAutoFixForegroundColor + \";\\n\\t\\t}\");\r\n    }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { find } from '../../../base/common/arrays.js';\r\nimport { onUnexpectedError } from '../../../base/common/errors.js';\r\nimport { Lazy } from '../../../base/common/lazy.js';\r\nimport { Disposable, MutableDisposable } from '../../../base/common/lifecycle.js';\r\nimport { MessageController } from '../message/messageController.js';\r\nimport { CodeActionMenu } from './codeActionMenu.js';\r\nimport { LightBulbWidget } from './lightBulbWidget.js';\r\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\r\nvar CodeActionUi = /** @class */ (function (_super) {\r\n    __extends(CodeActionUi, _super);\r\n    function CodeActionUi(_editor, quickFixActionId, preferredFixActionId, delegate, instantiationService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._editor = _editor;\r\n        _this.delegate = delegate;\r\n        _this._activeCodeActions = _this._register(new MutableDisposable());\r\n        _this._codeActionWidget = new Lazy(function () {\r\n            return _this._register(instantiationService.createInstance(CodeActionMenu, _this._editor, {\r\n                onSelectCodeAction: function (action) { return __awaiter(_this, void 0, void 0, function () {\r\n                    return __generator(this, function (_a) {\r\n                        this.delegate.applyCodeAction(action, /* retrigger */ true);\r\n                        return [2 /*return*/];\r\n                    });\r\n                }); }\r\n            }));\r\n        });\r\n        _this._lightBulbWidget = new Lazy(function () {\r\n            var widget = _this._register(instantiationService.createInstance(LightBulbWidget, _this._editor, quickFixActionId, preferredFixActionId));\r\n            _this._register(widget.onClick(function (e) { return _this.showCodeActionList(e.actions, e, { includeDisabledActions: false }); }));\r\n            return widget;\r\n        });\r\n        return _this;\r\n    }\r\n    CodeActionUi.prototype.update = function (newState) {\r\n        var _a, _b, _c;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var actions, e_1, validActionToApply, invalidAction, includeDisabledActions;\r\n            return __generator(this, function (_d) {\r\n                switch (_d.label) {\r\n                    case 0:\r\n                        if (newState.type !== 1 /* Triggered */) {\r\n                            (_a = this._lightBulbWidget.rawValue) === null || _a === void 0 ? void 0 : _a.hide();\r\n                            return [2 /*return*/];\r\n                        }\r\n                        _d.label = 1;\r\n                    case 1:\r\n                        _d.trys.push([1, 3, , 4]);\r\n                        return [4 /*yield*/, newState.actions];\r\n                    case 2:\r\n                        actions = _d.sent();\r\n                        return [3 /*break*/, 4];\r\n                    case 3:\r\n                        e_1 = _d.sent();\r\n                        onUnexpectedError(e_1);\r\n                        return [2 /*return*/];\r\n                    case 4:\r\n                        this._lightBulbWidget.getValue().update(actions, newState.position);\r\n                        if (!(newState.trigger.type === 'manual')) return [3 /*break*/, 11];\r\n                        if (!((_b = newState.trigger.filter) === null || _b === void 0 ? void 0 : _b.include)) return [3 /*break*/, 10];\r\n                        validActionToApply = this.tryGetValidActionToApply(newState.trigger, actions);\r\n                        if (!validActionToApply) return [3 /*break*/, 9];\r\n                        _d.label = 5;\r\n                    case 5:\r\n                        _d.trys.push([5, , 7, 8]);\r\n                        return [4 /*yield*/, this.delegate.applyCodeAction(validActionToApply, false)];\r\n                    case 6:\r\n                        _d.sent();\r\n                        return [3 /*break*/, 8];\r\n                    case 7:\r\n                        actions.dispose();\r\n                        return [7 /*endfinally*/];\r\n                    case 8: return [2 /*return*/];\r\n                    case 9:\r\n                        // Check to see if there is an action that we would have applied were it not invalid\r\n                        if (newState.trigger.context) {\r\n                            invalidAction = this.getInvalidActionThatWouldHaveBeenApplied(newState.trigger, actions);\r\n                            if (invalidAction && invalidAction.disabled) {\r\n                                MessageController.get(this._editor).showMessage(invalidAction.disabled, newState.trigger.context.position);\r\n                                actions.dispose();\r\n                                return [2 /*return*/];\r\n                            }\r\n                        }\r\n                        _d.label = 10;\r\n                    case 10:\r\n                        includeDisabledActions = !!((_c = newState.trigger.filter) === null || _c === void 0 ? void 0 : _c.include);\r\n                        if (newState.trigger.context) {\r\n                            if (!actions.allActions.length || !includeDisabledActions && !actions.validActions.length) {\r\n                                MessageController.get(this._editor).showMessage(newState.trigger.context.notAvailableMessage, newState.trigger.context.position);\r\n                                this._activeCodeActions.value = actions;\r\n                                actions.dispose();\r\n                                return [2 /*return*/];\r\n                            }\r\n                        }\r\n                        this._activeCodeActions.value = actions;\r\n                        this._codeActionWidget.getValue().show(actions, newState.position, { includeDisabledActions: includeDisabledActions });\r\n                        return [3 /*break*/, 12];\r\n                    case 11:\r\n                        // auto magically triggered\r\n                        if (this._codeActionWidget.getValue().isVisible) {\r\n                            // TODO: Figure out if we should update the showing menu?\r\n                            actions.dispose();\r\n                        }\r\n                        else {\r\n                            this._activeCodeActions.value = actions;\r\n                        }\r\n                        _d.label = 12;\r\n                    case 12: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    CodeActionUi.prototype.getInvalidActionThatWouldHaveBeenApplied = function (trigger, actions) {\r\n        if (!actions.allActions.length) {\r\n            return undefined;\r\n        }\r\n        if ((trigger.autoApply === \"first\" /* First */ && actions.validActions.length === 0)\r\n            || (trigger.autoApply === \"ifSingle\" /* IfSingle */ && actions.allActions.length === 1)) {\r\n            return find(actions.allActions, function (action) { return action.disabled; });\r\n        }\r\n        return undefined;\r\n    };\r\n    CodeActionUi.prototype.tryGetValidActionToApply = function (trigger, actions) {\r\n        if (!actions.validActions.length) {\r\n            return undefined;\r\n        }\r\n        if ((trigger.autoApply === \"first\" /* First */ && actions.validActions.length > 0)\r\n            || (trigger.autoApply === \"ifSingle\" /* IfSingle */ && actions.validActions.length === 1)) {\r\n            return actions.validActions[0];\r\n        }\r\n        return undefined;\r\n    };\r\n    CodeActionUi.prototype.showCodeActionList = function (actions, at, options) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                this._codeActionWidget.getValue().show(actions, at, options);\r\n                return [2 /*return*/];\r\n            });\r\n        });\r\n    };\r\n    CodeActionUi = __decorate([\r\n        __param(4, IInstantiationService)\r\n    ], CodeActionUi);\r\n    return CodeActionUi;\r\n}(Disposable));\r\nexport { CodeActionUi };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { createCancelablePromise, TimeoutTimer } from '../../../base/common/async.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { Disposable, MutableDisposable } from '../../../base/common/lifecycle.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { CodeActionProviderRegistry } from '../../common/modes.js';\r\nimport { RawContextKey } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { getCodeActions } from './codeAction.js';\r\nimport { isEqual } from '../../../base/common/resources.js';\r\nexport var SUPPORTED_CODE_ACTIONS = new RawContextKey('supportedCodeAction', '');\r\nvar CodeActionOracle = /** @class */ (function (_super) {\r\n    __extends(CodeActionOracle, _super);\r\n    function CodeActionOracle(_editor, _markerService, _signalChange, _delay) {\r\n        if (_delay === void 0) { _delay = 250; }\r\n        var _this = _super.call(this) || this;\r\n        _this._editor = _editor;\r\n        _this._markerService = _markerService;\r\n        _this._signalChange = _signalChange;\r\n        _this._delay = _delay;\r\n        _this._autoTriggerTimer = _this._register(new TimeoutTimer());\r\n        _this._register(_this._markerService.onMarkerChanged(function (e) { return _this._onMarkerChanges(e); }));\r\n        _this._register(_this._editor.onDidChangeCursorPosition(function () { return _this._onCursorChange(); }));\r\n        return _this;\r\n    }\r\n    CodeActionOracle.prototype.trigger = function (trigger) {\r\n        var selection = this._getRangeOfSelectionUnlessWhitespaceEnclosed(trigger);\r\n        return this._createEventAndSignalChange(trigger, selection);\r\n    };\r\n    CodeActionOracle.prototype._onMarkerChanges = function (resources) {\r\n        var _this = this;\r\n        var model = this._editor.getModel();\r\n        if (!model) {\r\n            return;\r\n        }\r\n        if (resources.some(function (resource) { return isEqual(resource, model.uri); })) {\r\n            this._autoTriggerTimer.cancelAndSet(function () {\r\n                _this.trigger({ type: 'auto' });\r\n            }, this._delay);\r\n        }\r\n    };\r\n    CodeActionOracle.prototype._onCursorChange = function () {\r\n        var _this = this;\r\n        this._autoTriggerTimer.cancelAndSet(function () {\r\n            _this.trigger({ type: 'auto' });\r\n        }, this._delay);\r\n    };\r\n    CodeActionOracle.prototype._getRangeOfMarker = function (selection) {\r\n        var model = this._editor.getModel();\r\n        if (!model) {\r\n            return undefined;\r\n        }\r\n        for (var _i = 0, _a = this._markerService.read({ resource: model.uri }); _i < _a.length; _i++) {\r\n            var marker = _a[_i];\r\n            var markerRange = model.validateRange(marker);\r\n            if (Range.intersectRanges(markerRange, selection)) {\r\n                return Range.lift(markerRange);\r\n            }\r\n        }\r\n        return undefined;\r\n    };\r\n    CodeActionOracle.prototype._getRangeOfSelectionUnlessWhitespaceEnclosed = function (trigger) {\r\n        if (!this._editor.hasModel()) {\r\n            return undefined;\r\n        }\r\n        var model = this._editor.getModel();\r\n        var selection = this._editor.getSelection();\r\n        if (selection.isEmpty() && trigger.type === 'auto') {\r\n            var _a = selection.getPosition(), lineNumber = _a.lineNumber, column = _a.column;\r\n            var line = model.getLineContent(lineNumber);\r\n            if (line.length === 0) {\r\n                // empty line\r\n                return undefined;\r\n            }\r\n            else if (column === 1) {\r\n                // look only right\r\n                if (/\\s/.test(line[0])) {\r\n                    return undefined;\r\n                }\r\n            }\r\n            else if (column === model.getLineMaxColumn(lineNumber)) {\r\n                // look only left\r\n                if (/\\s/.test(line[line.length - 1])) {\r\n                    return undefined;\r\n                }\r\n            }\r\n            else {\r\n                // look left and right\r\n                if (/\\s/.test(line[column - 2]) && /\\s/.test(line[column - 1])) {\r\n                    return undefined;\r\n                }\r\n            }\r\n        }\r\n        return selection;\r\n    };\r\n    CodeActionOracle.prototype._createEventAndSignalChange = function (trigger, selection) {\r\n        var model = this._editor.getModel();\r\n        if (!selection || !model) {\r\n            // cancel\r\n            this._signalChange(undefined);\r\n            return undefined;\r\n        }\r\n        var markerRange = this._getRangeOfMarker(selection);\r\n        var position = markerRange ? markerRange.getStartPosition() : selection.getStartPosition();\r\n        var e = {\r\n            trigger: trigger,\r\n            selection: selection,\r\n            position: position\r\n        };\r\n        this._signalChange(e);\r\n        return e;\r\n    };\r\n    return CodeActionOracle;\r\n}(Disposable));\r\nexport var CodeActionsState;\r\n(function (CodeActionsState) {\r\n    CodeActionsState.Empty = { type: 0 /* Empty */ };\r\n    var Triggered = /** @class */ (function () {\r\n        function Triggered(trigger, rangeOrSelection, position, actions) {\r\n            this.trigger = trigger;\r\n            this.rangeOrSelection = rangeOrSelection;\r\n            this.position = position;\r\n            this.actions = actions;\r\n            this.type = 1 /* Triggered */;\r\n        }\r\n        return Triggered;\r\n    }());\r\n    CodeActionsState.Triggered = Triggered;\r\n})(CodeActionsState || (CodeActionsState = {}));\r\nvar CodeActionModel = /** @class */ (function (_super) {\r\n    __extends(CodeActionModel, _super);\r\n    function CodeActionModel(_editor, _markerService, contextKeyService, _progressService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._editor = _editor;\r\n        _this._markerService = _markerService;\r\n        _this._progressService = _progressService;\r\n        _this._codeActionOracle = _this._register(new MutableDisposable());\r\n        _this._state = CodeActionsState.Empty;\r\n        _this._onDidChangeState = _this._register(new Emitter());\r\n        _this.onDidChangeState = _this._onDidChangeState.event;\r\n        _this._supportedCodeActions = SUPPORTED_CODE_ACTIONS.bindTo(contextKeyService);\r\n        _this._register(_this._editor.onDidChangeModel(function () { return _this._update(); }));\r\n        _this._register(_this._editor.onDidChangeModelLanguage(function () { return _this._update(); }));\r\n        _this._register(CodeActionProviderRegistry.onDidChange(function () { return _this._update(); }));\r\n        _this._update();\r\n        return _this;\r\n    }\r\n    CodeActionModel.prototype.dispose = function () {\r\n        _super.prototype.dispose.call(this);\r\n        this.setState(CodeActionsState.Empty, true);\r\n    };\r\n    CodeActionModel.prototype._update = function () {\r\n        var _this = this;\r\n        this._codeActionOracle.value = undefined;\r\n        this.setState(CodeActionsState.Empty);\r\n        var model = this._editor.getModel();\r\n        if (model\r\n            && CodeActionProviderRegistry.has(model)\r\n            && !this._editor.getOption(65 /* readOnly */)) {\r\n            var supportedActions = [];\r\n            for (var _i = 0, _a = CodeActionProviderRegistry.all(model); _i < _a.length; _i++) {\r\n                var provider = _a[_i];\r\n                if (Array.isArray(provider.providedCodeActionKinds)) {\r\n                    supportedActions.push.apply(supportedActions, provider.providedCodeActionKinds);\r\n                }\r\n            }\r\n            this._supportedCodeActions.set(supportedActions.join(' '));\r\n            this._codeActionOracle.value = new CodeActionOracle(this._editor, this._markerService, function (trigger) {\r\n                if (!trigger) {\r\n                    _this.setState(CodeActionsState.Empty);\r\n                    return;\r\n                }\r\n                var actions = createCancelablePromise(function (token) { return getCodeActions(model, trigger.selection, trigger.trigger, token); });\r\n                if (_this._progressService && trigger.trigger.type === 'manual') {\r\n                    _this._progressService.showWhile(actions, 250);\r\n                }\r\n                _this.setState(new CodeActionsState.Triggered(trigger.trigger, trigger.selection, trigger.position, actions));\r\n            }, undefined);\r\n            this._codeActionOracle.value.trigger({ type: 'auto' });\r\n        }\r\n        else {\r\n            this._supportedCodeActions.reset();\r\n        }\r\n    };\r\n    CodeActionModel.prototype.trigger = function (trigger) {\r\n        if (this._codeActionOracle.value) {\r\n            this._codeActionOracle.value.trigger(trigger);\r\n        }\r\n    };\r\n    CodeActionModel.prototype.setState = function (newState, skipNotify) {\r\n        if (newState === this._state) {\r\n            return;\r\n        }\r\n        // Cancel old request\r\n        if (this._state.type === 1 /* Triggered */) {\r\n            this._state.actions.cancel();\r\n        }\r\n        this._state = newState;\r\n        if (!skipNotify) {\r\n            this._onDidChangeState.fire(newState);\r\n        }\r\n    };\r\n    return CodeActionModel;\r\n}(Disposable));\r\nexport { CodeActionModel };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nimport { Lazy } from '../../../base/common/lazy.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport { escapeRegExpCharacters } from '../../../base/common/strings.js';\r\nimport { EditorAction, EditorCommand } from '../../browser/editorExtensions.js';\r\nimport { IBulkEditService } from '../../browser/services/bulkEditService.js';\r\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\r\nimport { refactorCommandId, sourceActionCommandId, codeActionCommandId, organizeImportsCommandId, fixAllCommandId } from './codeAction.js';\r\nimport { CodeActionUi } from './codeActionUi.js';\r\nimport { MessageController } from '../message/messageController.js';\r\nimport * as nls from '../../../nls.js';\r\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\r\nimport { ContextKeyExpr, IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { IContextMenuService } from '../../../platform/contextview/browser/contextView.js';\r\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\r\nimport { IMarkerService } from '../../../platform/markers/common/markers.js';\r\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\r\nimport { IEditorProgressService } from '../../../platform/progress/common/progress.js';\r\nimport { CodeActionModel, SUPPORTED_CODE_ACTIONS } from './codeActionModel.js';\r\nimport { CodeActionKind, CodeActionCommandArgs } from './types.js';\r\nfunction contextKeyForSupportedActions(kind) {\r\n    return ContextKeyExpr.regex(SUPPORTED_CODE_ACTIONS.keys()[0], new RegExp('(\\\\s|^)' + escapeRegExpCharacters(kind.value) + '\\\\b'));\r\n}\r\nvar argsSchema = {\r\n    type: 'object',\r\n    required: ['kind'],\r\n    defaultSnippets: [{ body: { kind: '' } }],\r\n    properties: {\r\n        'kind': {\r\n            type: 'string',\r\n            description: nls.localize('args.schema.kind', \"Kind of the code action to run.\"),\r\n        },\r\n        'apply': {\r\n            type: 'string',\r\n            description: nls.localize('args.schema.apply', \"Controls when the returned actions are applied.\"),\r\n            default: \"ifSingle\" /* IfSingle */,\r\n            enum: [\"first\" /* First */, \"ifSingle\" /* IfSingle */, \"never\" /* Never */],\r\n            enumDescriptions: [\r\n                nls.localize('args.schema.apply.first', \"Always apply the first returned code action.\"),\r\n                nls.localize('args.schema.apply.ifSingle', \"Apply the first returned code action if it is the only one.\"),\r\n                nls.localize('args.schema.apply.never', \"Do not apply the returned code actions.\"),\r\n            ]\r\n        },\r\n        'preferred': {\r\n            type: 'boolean',\r\n            default: false,\r\n            description: nls.localize('args.schema.preferred', \"Controls if only preferred code actions should be returned.\"),\r\n        }\r\n    }\r\n};\r\nvar QuickFixController = /** @class */ (function (_super) {\r\n    __extends(QuickFixController, _super);\r\n    function QuickFixController(editor, markerService, contextKeyService, progressService, contextMenuService, keybindingService, _commandService, _bulkEditService, _instantiationService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._commandService = _commandService;\r\n        _this._bulkEditService = _bulkEditService;\r\n        _this._instantiationService = _instantiationService;\r\n        _this._editor = editor;\r\n        _this._model = _this._register(new CodeActionModel(_this._editor, markerService, contextKeyService, progressService));\r\n        _this._register(_this._model.onDidChangeState(function (newState) { return _this.update(newState); }));\r\n        _this._ui = new Lazy(function () {\r\n            return _this._register(new CodeActionUi(editor, QuickFixAction.Id, AutoFixAction.Id, {\r\n                applyCodeAction: function (action, retrigger) { return __awaiter(_this, void 0, void 0, function () {\r\n                    return __generator(this, function (_a) {\r\n                        switch (_a.label) {\r\n                            case 0:\r\n                                _a.trys.push([0, , 2, 3]);\r\n                                return [4 /*yield*/, this._applyCodeAction(action)];\r\n                            case 1:\r\n                                _a.sent();\r\n                                return [3 /*break*/, 3];\r\n                            case 2:\r\n                                if (retrigger) {\r\n                                    this._trigger({ type: 'auto', filter: {} });\r\n                                }\r\n                                return [7 /*endfinally*/];\r\n                            case 3: return [2 /*return*/];\r\n                        }\r\n                    });\r\n                }); }\r\n            }, _this._instantiationService));\r\n        });\r\n        return _this;\r\n    }\r\n    QuickFixController.get = function (editor) {\r\n        return editor.getContribution(QuickFixController.ID);\r\n    };\r\n    QuickFixController.prototype.update = function (newState) {\r\n        this._ui.getValue().update(newState);\r\n    };\r\n    QuickFixController.prototype.showCodeActions = function (actions, at) {\r\n        return this._ui.getValue().showCodeActionList(actions, at, { includeDisabledActions: false });\r\n    };\r\n    QuickFixController.prototype.manualTriggerAtCurrentPosition = function (notAvailableMessage, filter, autoApply) {\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        MessageController.get(this._editor).closeMessage();\r\n        var triggerPosition = this._editor.getPosition();\r\n        this._trigger({ type: 'manual', filter: filter, autoApply: autoApply, context: { notAvailableMessage: notAvailableMessage, position: triggerPosition } });\r\n    };\r\n    QuickFixController.prototype._trigger = function (trigger) {\r\n        return this._model.trigger(trigger);\r\n    };\r\n    QuickFixController.prototype._applyCodeAction = function (action) {\r\n        return this._instantiationService.invokeFunction(applyCodeAction, action, this._bulkEditService, this._commandService, this._editor);\r\n    };\r\n    QuickFixController.ID = 'editor.contrib.quickFixController';\r\n    QuickFixController = __decorate([\r\n        __param(1, IMarkerService),\r\n        __param(2, IContextKeyService),\r\n        __param(3, IEditorProgressService),\r\n        __param(4, IContextMenuService),\r\n        __param(5, IKeybindingService),\r\n        __param(6, ICommandService),\r\n        __param(7, IBulkEditService),\r\n        __param(8, IInstantiationService)\r\n    ], QuickFixController);\r\n    return QuickFixController;\r\n}(Disposable));\r\nexport { QuickFixController };\r\nexport function applyCodeAction(accessor, action, bulkEditService, commandService, editor) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var notificationService, err_1, message;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    notificationService = accessor.get(INotificationService);\r\n                    if (!action.edit) return [3 /*break*/, 2];\r\n                    return [4 /*yield*/, bulkEditService.apply(action.edit, { editor: editor })];\r\n                case 1:\r\n                    _a.sent();\r\n                    _a.label = 2;\r\n                case 2:\r\n                    if (!action.command) return [3 /*break*/, 6];\r\n                    _a.label = 3;\r\n                case 3:\r\n                    _a.trys.push([3, 5, , 6]);\r\n                    return [4 /*yield*/, commandService.executeCommand.apply(commandService, __spreadArrays([action.command.id], (action.command.arguments || [])))];\r\n                case 4:\r\n                    _a.sent();\r\n                    return [3 /*break*/, 6];\r\n                case 5:\r\n                    err_1 = _a.sent();\r\n                    message = asMessage(err_1);\r\n                    notificationService.error(typeof message === 'string'\r\n                        ? message\r\n                        : nls.localize('applyCodeActionFailed', \"An unknown error occurred while applying the code action\"));\r\n                    return [3 /*break*/, 6];\r\n                case 6: return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\nfunction asMessage(err) {\r\n    if (typeof err === 'string') {\r\n        return err;\r\n    }\r\n    else if (err instanceof Error && typeof err.message === 'string') {\r\n        return err.message;\r\n    }\r\n    else {\r\n        return undefined;\r\n    }\r\n}\r\nfunction triggerCodeActionsForEditorSelection(editor, notAvailableMessage, filter, autoApply) {\r\n    if (editor.hasModel()) {\r\n        var controller = QuickFixController.get(editor);\r\n        if (controller) {\r\n            controller.manualTriggerAtCurrentPosition(notAvailableMessage, filter, autoApply);\r\n        }\r\n    }\r\n}\r\nvar QuickFixAction = /** @class */ (function (_super) {\r\n    __extends(QuickFixAction, _super);\r\n    function QuickFixAction() {\r\n        return _super.call(this, {\r\n            id: QuickFixAction.Id,\r\n            label: nls.localize('quickfix.trigger.label', \"Quick Fix...\"),\r\n            alias: 'Quick Fix...',\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 2048 /* CtrlCmd */ | 84 /* US_DOT */,\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    QuickFixAction.prototype.run = function (_accessor, editor) {\r\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.quickFix.noneMessage', \"No code actions available\"), undefined, undefined);\r\n    };\r\n    QuickFixAction.Id = 'editor.action.quickFix';\r\n    return QuickFixAction;\r\n}(EditorAction));\r\nexport { QuickFixAction };\r\nvar CodeActionCommand = /** @class */ (function (_super) {\r\n    __extends(CodeActionCommand, _super);\r\n    function CodeActionCommand() {\r\n        return _super.call(this, {\r\n            id: codeActionCommandId,\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\r\n            description: {\r\n                description: 'Trigger a code action',\r\n                args: [{ name: 'args', schema: argsSchema, }]\r\n            }\r\n        }) || this;\r\n    }\r\n    CodeActionCommand.prototype.runEditorCommand = function (_accessor, editor, userArgs) {\r\n        var _a;\r\n        var args = CodeActionCommandArgs.fromUser(userArgs, {\r\n            kind: CodeActionKind.Empty,\r\n            apply: \"ifSingle\" /* IfSingle */,\r\n        });\r\n        return triggerCodeActionsForEditorSelection(editor, typeof ((_a = userArgs) === null || _a === void 0 ? void 0 : _a.kind) === 'string'\r\n            ? args.preferred\r\n                ? nls.localize('editor.action.codeAction.noneMessage.preferred.kind', \"No preferred code actions for '{0}' available\", userArgs.kind)\r\n                : nls.localize('editor.action.codeAction.noneMessage.kind', \"No code actions for '{0}' available\", userArgs.kind)\r\n            : args.preferred\r\n                ? nls.localize('editor.action.codeAction.noneMessage.preferred', \"No preferred code actions available\")\r\n                : nls.localize('editor.action.codeAction.noneMessage', \"No code actions available\"), {\r\n            include: args.kind,\r\n            includeSourceActions: true,\r\n            onlyIncludePreferredActions: args.preferred,\r\n        }, args.apply);\r\n    };\r\n    return CodeActionCommand;\r\n}(EditorCommand));\r\nexport { CodeActionCommand };\r\nvar RefactorAction = /** @class */ (function (_super) {\r\n    __extends(RefactorAction, _super);\r\n    function RefactorAction() {\r\n        return _super.call(this, {\r\n            id: refactorCommandId,\r\n            label: nls.localize('refactor.label', \"Refactor...\"),\r\n            alias: 'Refactor...',\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 48 /* KEY_R */,\r\n                mac: {\r\n                    primary: 256 /* WinCtrl */ | 1024 /* Shift */ | 48 /* KEY_R */\r\n                },\r\n                weight: 100 /* EditorContrib */\r\n            },\r\n            contextMenuOpts: {\r\n                group: '1_modification',\r\n                order: 2,\r\n                when: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.Refactor)),\r\n            },\r\n            description: {\r\n                description: 'Refactor...',\r\n                args: [{ name: 'args', schema: argsSchema }]\r\n            }\r\n        }) || this;\r\n    }\r\n    RefactorAction.prototype.run = function (_accessor, editor, userArgs) {\r\n        var _a;\r\n        var args = CodeActionCommandArgs.fromUser(userArgs, {\r\n            kind: CodeActionKind.Refactor,\r\n            apply: \"never\" /* Never */\r\n        });\r\n        return triggerCodeActionsForEditorSelection(editor, typeof ((_a = userArgs) === null || _a === void 0 ? void 0 : _a.kind) === 'string'\r\n            ? args.preferred\r\n                ? nls.localize('editor.action.refactor.noneMessage.preferred.kind', \"No preferred refactorings for '{0}' available\", userArgs.kind)\r\n                : nls.localize('editor.action.refactor.noneMessage.kind', \"No refactorings for '{0}' available\", userArgs.kind)\r\n            : args.preferred\r\n                ? nls.localize('editor.action.refactor.noneMessage.preferred', \"No preferred refactorings available\")\r\n                : nls.localize('editor.action.refactor.noneMessage', \"No refactorings available\"), {\r\n            include: CodeActionKind.Refactor.contains(args.kind) ? args.kind : CodeActionKind.None,\r\n            onlyIncludePreferredActions: args.preferred,\r\n        }, args.apply);\r\n    };\r\n    return RefactorAction;\r\n}(EditorAction));\r\nexport { RefactorAction };\r\nvar SourceAction = /** @class */ (function (_super) {\r\n    __extends(SourceAction, _super);\r\n    function SourceAction() {\r\n        return _super.call(this, {\r\n            id: sourceActionCommandId,\r\n            label: nls.localize('source.label', \"Source Action...\"),\r\n            alias: 'Source Action...',\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\r\n            contextMenuOpts: {\r\n                group: '1_modification',\r\n                order: 2.1,\r\n                when: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.Source)),\r\n            },\r\n            description: {\r\n                description: 'Source Action...',\r\n                args: [{ name: 'args', schema: argsSchema }]\r\n            }\r\n        }) || this;\r\n    }\r\n    SourceAction.prototype.run = function (_accessor, editor, userArgs) {\r\n        var _a;\r\n        var args = CodeActionCommandArgs.fromUser(userArgs, {\r\n            kind: CodeActionKind.Source,\r\n            apply: \"never\" /* Never */\r\n        });\r\n        return triggerCodeActionsForEditorSelection(editor, typeof ((_a = userArgs) === null || _a === void 0 ? void 0 : _a.kind) === 'string'\r\n            ? args.preferred\r\n                ? nls.localize('editor.action.source.noneMessage.preferred.kind', \"No preferred source actions for '{0}' available\", userArgs.kind)\r\n                : nls.localize('editor.action.source.noneMessage.kind', \"No source actions for '{0}' available\", userArgs.kind)\r\n            : args.preferred\r\n                ? nls.localize('editor.action.source.noneMessage.preferred', \"No preferred source actions available\")\r\n                : nls.localize('editor.action.source.noneMessage', \"No source actions available\"), {\r\n            include: CodeActionKind.Source.contains(args.kind) ? args.kind : CodeActionKind.None,\r\n            includeSourceActions: true,\r\n            onlyIncludePreferredActions: args.preferred,\r\n        }, args.apply);\r\n    };\r\n    return SourceAction;\r\n}(EditorAction));\r\nexport { SourceAction };\r\nvar OrganizeImportsAction = /** @class */ (function (_super) {\r\n    __extends(OrganizeImportsAction, _super);\r\n    function OrganizeImportsAction() {\r\n        return _super.call(this, {\r\n            id: organizeImportsCommandId,\r\n            label: nls.localize('organizeImports.label', \"Organize Imports\"),\r\n            alias: 'Organize Imports',\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.SourceOrganizeImports)),\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 1024 /* Shift */ | 512 /* Alt */ | 45 /* KEY_O */,\r\n                weight: 100 /* EditorContrib */\r\n            },\r\n        }) || this;\r\n    }\r\n    OrganizeImportsAction.prototype.run = function (_accessor, editor) {\r\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.organize.noneMessage', \"No organize imports action available\"), { include: CodeActionKind.SourceOrganizeImports, includeSourceActions: true }, \"ifSingle\" /* IfSingle */);\r\n    };\r\n    return OrganizeImportsAction;\r\n}(EditorAction));\r\nexport { OrganizeImportsAction };\r\nvar FixAllAction = /** @class */ (function (_super) {\r\n    __extends(FixAllAction, _super);\r\n    function FixAllAction() {\r\n        return _super.call(this, {\r\n            id: fixAllCommandId,\r\n            label: nls.localize('fixAll.label', \"Fix All\"),\r\n            alias: 'Fix All',\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.SourceFixAll))\r\n        }) || this;\r\n    }\r\n    FixAllAction.prototype.run = function (_accessor, editor) {\r\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('fixAll.noneMessage', \"No fix all action available\"), { include: CodeActionKind.SourceFixAll, includeSourceActions: true }, \"ifSingle\" /* IfSingle */);\r\n    };\r\n    return FixAllAction;\r\n}(EditorAction));\r\nexport { FixAllAction };\r\nvar AutoFixAction = /** @class */ (function (_super) {\r\n    __extends(AutoFixAction, _super);\r\n    function AutoFixAction() {\r\n        return _super.call(this, {\r\n            id: AutoFixAction.Id,\r\n            label: nls.localize('autoFix.label', \"Auto Fix...\"),\r\n            alias: 'Auto Fix...',\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.QuickFix)),\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 512 /* Alt */ | 1024 /* Shift */ | 84 /* US_DOT */,\r\n                mac: {\r\n                    primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 84 /* US_DOT */\r\n                },\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    AutoFixAction.prototype.run = function (_accessor, editor) {\r\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.autoFix.noneMessage', \"No auto fixes available\"), {\r\n            include: CodeActionKind.QuickFix,\r\n            onlyIncludePreferredActions: true\r\n        }, \"ifSingle\" /* IfSingle */);\r\n    };\r\n    AutoFixAction.Id = 'editor.action.autoFix';\r\n    return AutoFixAction;\r\n}(EditorAction));\r\nexport { AutoFixAction };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nimport * as nls from '../../../nls.js';\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { CancellationToken } from '../../../base/common/cancellation.js';\r\nimport { Color, RGBA } from '../../../base/common/color.js';\r\nimport { MarkdownString, isEmptyMarkdownString, markedStringsEquals } from '../../../base/common/htmlContent.js';\r\nimport { toDisposable, DisposableStore, combinedDisposable, MutableDisposable } from '../../../base/common/lifecycle.js';\r\nimport { Position } from '../../common/core/position.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\r\nimport { HoverProviderRegistry, TokenizationRegistry } from '../../common/modes.js';\r\nimport { getColorPresentations } from '../colorPicker/color.js';\r\nimport { ColorDetector } from '../colorPicker/colorDetector.js';\r\nimport { ColorPickerModel } from '../colorPicker/colorPickerModel.js';\r\nimport { ColorPickerWidget } from '../colorPicker/colorPickerWidget.js';\r\nimport { getHover } from './getHover.js';\r\nimport { HoverOperation } from './hoverOperation.js';\r\nimport { ContentHoverWidget } from './hoverWidgets.js';\r\nimport { MarkdownRenderer } from '../markdown/markdownRenderer.js';\r\nimport { coalesce, isNonEmptyArray, asArray } from '../../../base/common/arrays.js';\r\nimport { IMarkerData, MarkerSeverity } from '../../../platform/markers/common/markers.js';\r\nimport { basename } from '../../../base/common/resources.js';\r\nimport { onUnexpectedError } from '../../../base/common/errors.js';\r\nimport { NullOpenerService } from '../../../platform/opener/common/opener.js';\r\nimport { MarkerController, NextMarkerAction } from '../gotoError/gotoError.js';\r\nimport { createCancelablePromise } from '../../../base/common/async.js';\r\nimport { getCodeActions } from '../codeAction/codeAction.js';\r\nimport { QuickFixAction, QuickFixController } from '../codeAction/codeActionCommands.js';\r\nimport { CodeActionKind } from '../codeAction/types.js';\r\nvar $ = dom.$;\r\nvar ColorHover = /** @class */ (function () {\r\n    function ColorHover(range, color, provider) {\r\n        this.range = range;\r\n        this.color = color;\r\n        this.provider = provider;\r\n    }\r\n    return ColorHover;\r\n}());\r\nvar MarkerHover = /** @class */ (function () {\r\n    function MarkerHover(range, marker) {\r\n        this.range = range;\r\n        this.marker = marker;\r\n    }\r\n    return MarkerHover;\r\n}());\r\nvar ModesContentComputer = /** @class */ (function () {\r\n    function ModesContentComputer(editor, _markerDecorationsService) {\r\n        this._markerDecorationsService = _markerDecorationsService;\r\n        this._editor = editor;\r\n        this._result = [];\r\n    }\r\n    ModesContentComputer.prototype.setRange = function (range) {\r\n        this._range = range;\r\n        this._result = [];\r\n    };\r\n    ModesContentComputer.prototype.clearResult = function () {\r\n        this._result = [];\r\n    };\r\n    ModesContentComputer.prototype.computeAsync = function (token) {\r\n        if (!this._editor.hasModel() || !this._range) {\r\n            return Promise.resolve([]);\r\n        }\r\n        var model = this._editor.getModel();\r\n        if (!HoverProviderRegistry.has(model)) {\r\n            return Promise.resolve([]);\r\n        }\r\n        return getHover(model, new Position(this._range.startLineNumber, this._range.startColumn), token);\r\n    };\r\n    ModesContentComputer.prototype.computeSync = function () {\r\n        var _this = this;\r\n        if (!this._editor.hasModel() || !this._range) {\r\n            return [];\r\n        }\r\n        var model = this._editor.getModel();\r\n        var lineNumber = this._range.startLineNumber;\r\n        if (lineNumber > this._editor.getModel().getLineCount()) {\r\n            // Illegal line number => no results\r\n            return [];\r\n        }\r\n        var colorDetector = ColorDetector.get(this._editor);\r\n        var maxColumn = model.getLineMaxColumn(lineNumber);\r\n        var lineDecorations = this._editor.getLineDecorations(lineNumber);\r\n        var didFindColor = false;\r\n        var hoverRange = this._range;\r\n        var result = lineDecorations.map(function (d) {\r\n            var startColumn = (d.range.startLineNumber === lineNumber) ? d.range.startColumn : 1;\r\n            var endColumn = (d.range.endLineNumber === lineNumber) ? d.range.endColumn : maxColumn;\r\n            if (startColumn > hoverRange.startColumn || hoverRange.endColumn > endColumn) {\r\n                return null;\r\n            }\r\n            var range = new Range(hoverRange.startLineNumber, startColumn, hoverRange.startLineNumber, endColumn);\r\n            var marker = _this._markerDecorationsService.getMarker(model, d);\r\n            if (marker) {\r\n                return new MarkerHover(range, marker);\r\n            }\r\n            var colorData = colorDetector.getColorData(d.range.getStartPosition());\r\n            if (!didFindColor && colorData) {\r\n                didFindColor = true;\r\n                var _a = colorData.colorInfo, color = _a.color, range_1 = _a.range;\r\n                return new ColorHover(range_1, color, colorData.provider);\r\n            }\r\n            else {\r\n                if (isEmptyMarkdownString(d.options.hoverMessage)) {\r\n                    return null;\r\n                }\r\n                var contents = d.options.hoverMessage ? asArray(d.options.hoverMessage) : [];\r\n                return { contents: contents, range: range };\r\n            }\r\n        });\r\n        return coalesce(result);\r\n    };\r\n    ModesContentComputer.prototype.onResult = function (result, isFromSynchronousComputation) {\r\n        // Always put synchronous messages before asynchronous ones\r\n        if (isFromSynchronousComputation) {\r\n            this._result = result.concat(this._result.sort(function (a, b) {\r\n                if (a instanceof ColorHover) { // sort picker messages at to the top\r\n                    return -1;\r\n                }\r\n                else if (b instanceof ColorHover) {\r\n                    return 1;\r\n                }\r\n                return 0;\r\n            }));\r\n        }\r\n        else {\r\n            this._result = this._result.concat(result);\r\n        }\r\n    };\r\n    ModesContentComputer.prototype.getResult = function () {\r\n        return this._result.slice(0);\r\n    };\r\n    ModesContentComputer.prototype.getResultWithLoadingMessage = function () {\r\n        return this._result.slice(0).concat([this._getLoadingMessage()]);\r\n    };\r\n    ModesContentComputer.prototype._getLoadingMessage = function () {\r\n        return {\r\n            range: this._range,\r\n            contents: [new MarkdownString().appendText(nls.localize('modesContentHover.loading', \"Loading...\"))]\r\n        };\r\n    };\r\n    return ModesContentComputer;\r\n}());\r\nvar ModesContentHoverWidget = /** @class */ (function (_super) {\r\n    __extends(ModesContentHoverWidget, _super);\r\n    function ModesContentHoverWidget(editor, markerDecorationsService, _themeService, _keybindingService, _modeService, _openerService) {\r\n        if (_openerService === void 0) { _openerService = NullOpenerService; }\r\n        var _this = _super.call(this, ModesContentHoverWidget.ID, editor) || this;\r\n        _this._themeService = _themeService;\r\n        _this._keybindingService = _keybindingService;\r\n        _this._modeService = _modeService;\r\n        _this._openerService = _openerService;\r\n        _this.renderDisposable = _this._register(new MutableDisposable());\r\n        _this._messages = [];\r\n        _this._lastRange = null;\r\n        _this._computer = new ModesContentComputer(_this._editor, markerDecorationsService);\r\n        _this._highlightDecorations = [];\r\n        _this._isChangingDecorations = false;\r\n        _this._shouldFocus = false;\r\n        _this._colorPicker = null;\r\n        _this._hoverOperation = new HoverOperation(_this._computer, function (result) { return _this._withResult(result, true); }, null, function (result) { return _this._withResult(result, false); }, _this._editor.getOption(42 /* hover */).delay);\r\n        _this._register(dom.addStandardDisposableListener(_this.getDomNode(), dom.EventType.FOCUS, function () {\r\n            if (_this._colorPicker) {\r\n                dom.addClass(_this.getDomNode(), 'colorpicker-hover');\r\n            }\r\n        }));\r\n        _this._register(dom.addStandardDisposableListener(_this.getDomNode(), dom.EventType.BLUR, function () {\r\n            dom.removeClass(_this.getDomNode(), 'colorpicker-hover');\r\n        }));\r\n        _this._register(editor.onDidChangeConfiguration(function (e) {\r\n            _this._hoverOperation.setHoverTime(_this._editor.getOption(42 /* hover */).delay);\r\n        }));\r\n        _this._register(TokenizationRegistry.onDidChange(function (e) {\r\n            if (_this.isVisible && _this._lastRange && _this._messages.length > 0) {\r\n                _this._domNode.textContent = '';\r\n                _this._renderMessages(_this._lastRange, _this._messages);\r\n            }\r\n        }));\r\n        return _this;\r\n    }\r\n    ModesContentHoverWidget.prototype.dispose = function () {\r\n        this._hoverOperation.cancel();\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    ModesContentHoverWidget.prototype.onModelDecorationsChanged = function () {\r\n        if (this._isChangingDecorations) {\r\n            return;\r\n        }\r\n        if (this.isVisible) {\r\n            // The decorations have changed and the hover is visible,\r\n            // we need to recompute the displayed text\r\n            this._hoverOperation.cancel();\r\n            this._computer.clearResult();\r\n            if (!this._colorPicker) { // TODO@Michel ensure that displayed text for other decorations is computed even if color picker is in place\r\n                this._hoverOperation.start(0 /* Delayed */);\r\n            }\r\n        }\r\n    };\r\n    ModesContentHoverWidget.prototype.startShowingAt = function (range, mode, focus) {\r\n        if (this._lastRange && this._lastRange.equalsRange(range)) {\r\n            // We have to show the widget at the exact same range as before, so no work is needed\r\n            return;\r\n        }\r\n        this._hoverOperation.cancel();\r\n        if (this.isVisible) {\r\n            // The range might have changed, but the hover is visible\r\n            // Instead of hiding it completely, filter out messages that are still in the new range and\r\n            // kick off a new computation\r\n            if (!this._showAtPosition || this._showAtPosition.lineNumber !== range.startLineNumber) {\r\n                this.hide();\r\n            }\r\n            else {\r\n                var filteredMessages = [];\r\n                for (var i = 0, len = this._messages.length; i < len; i++) {\r\n                    var msg = this._messages[i];\r\n                    var rng = msg.range;\r\n                    if (rng && rng.startColumn <= range.startColumn && rng.endColumn >= range.endColumn) {\r\n                        filteredMessages.push(msg);\r\n                    }\r\n                }\r\n                if (filteredMessages.length > 0) {\r\n                    if (hoverContentsEquals(filteredMessages, this._messages)) {\r\n                        return;\r\n                    }\r\n                    this._renderMessages(range, filteredMessages);\r\n                }\r\n                else {\r\n                    this.hide();\r\n                }\r\n            }\r\n        }\r\n        this._lastRange = range;\r\n        this._computer.setRange(range);\r\n        this._shouldFocus = focus;\r\n        this._hoverOperation.start(mode);\r\n    };\r\n    ModesContentHoverWidget.prototype.hide = function () {\r\n        this._lastRange = null;\r\n        this._hoverOperation.cancel();\r\n        _super.prototype.hide.call(this);\r\n        this._isChangingDecorations = true;\r\n        this._highlightDecorations = this._editor.deltaDecorations(this._highlightDecorations, []);\r\n        this._isChangingDecorations = false;\r\n        this.renderDisposable.clear();\r\n        this._colorPicker = null;\r\n    };\r\n    ModesContentHoverWidget.prototype.isColorPickerVisible = function () {\r\n        if (this._colorPicker) {\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    ModesContentHoverWidget.prototype._withResult = function (result, complete) {\r\n        this._messages = result;\r\n        if (this._lastRange && this._messages.length > 0) {\r\n            this._renderMessages(this._lastRange, this._messages);\r\n        }\r\n        else if (complete) {\r\n            this.hide();\r\n        }\r\n    };\r\n    ModesContentHoverWidget.prototype._renderMessages = function (renderRange, messages) {\r\n        var _this = this;\r\n        this.renderDisposable.dispose();\r\n        this._colorPicker = null;\r\n        // update column from which to show\r\n        var renderColumn = 1073741824 /* MAX_SAFE_SMALL_INTEGER */;\r\n        var highlightRange = messages[0].range ? Range.lift(messages[0].range) : null;\r\n        var fragment = document.createDocumentFragment();\r\n        var isEmptyHoverContent = true;\r\n        var containColorPicker = false;\r\n        var markdownDisposeables = new DisposableStore();\r\n        var markerMessages = [];\r\n        messages.forEach(function (msg) {\r\n            if (!msg.range) {\r\n                return;\r\n            }\r\n            renderColumn = Math.min(renderColumn, msg.range.startColumn);\r\n            highlightRange = highlightRange ? Range.plusRange(highlightRange, msg.range) : Range.lift(msg.range);\r\n            if (msg instanceof ColorHover) {\r\n                containColorPicker = true;\r\n                var _a = msg.color, red = _a.red, green = _a.green, blue = _a.blue, alpha = _a.alpha;\r\n                var rgba = new RGBA(Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255), alpha);\r\n                var color_1 = new Color(rgba);\r\n                if (!_this._editor.hasModel()) {\r\n                    return;\r\n                }\r\n                var editorModel_1 = _this._editor.getModel();\r\n                var range_2 = new Range(msg.range.startLineNumber, msg.range.startColumn, msg.range.endLineNumber, msg.range.endColumn);\r\n                var colorInfo = { range: msg.range, color: msg.color };\r\n                // create blank olor picker model and widget first to ensure it's positioned correctly.\r\n                var model_1 = new ColorPickerModel(color_1, [], 0);\r\n                var widget_1 = new ColorPickerWidget(fragment, model_1, _this._editor.getOption(101 /* pixelRatio */), _this._themeService);\r\n                getColorPresentations(editorModel_1, colorInfo, msg.provider, CancellationToken.None).then(function (colorPresentations) {\r\n                    model_1.colorPresentations = colorPresentations || [];\r\n                    if (!_this._editor.hasModel()) {\r\n                        // gone...\r\n                        return;\r\n                    }\r\n                    var originalText = _this._editor.getModel().getValueInRange(msg.range);\r\n                    model_1.guessColorPresentation(color_1, originalText);\r\n                    var updateEditorModel = function () {\r\n                        var textEdits;\r\n                        var newRange;\r\n                        if (model_1.presentation.textEdit) {\r\n                            textEdits = [model_1.presentation.textEdit];\r\n                            newRange = new Range(model_1.presentation.textEdit.range.startLineNumber, model_1.presentation.textEdit.range.startColumn, model_1.presentation.textEdit.range.endLineNumber, model_1.presentation.textEdit.range.endColumn);\r\n                            newRange = newRange.setEndPosition(newRange.endLineNumber, newRange.startColumn + model_1.presentation.textEdit.text.length);\r\n                        }\r\n                        else {\r\n                            textEdits = [{ identifier: null, range: range_2, text: model_1.presentation.label, forceMoveMarkers: false }];\r\n                            newRange = range_2.setEndPosition(range_2.endLineNumber, range_2.startColumn + model_1.presentation.label.length);\r\n                        }\r\n                        _this._editor.pushUndoStop();\r\n                        _this._editor.executeEdits('colorpicker', textEdits);\r\n                        if (model_1.presentation.additionalTextEdits) {\r\n                            textEdits = __spreadArrays(model_1.presentation.additionalTextEdits);\r\n                            _this._editor.executeEdits('colorpicker', textEdits);\r\n                            _this.hide();\r\n                        }\r\n                        _this._editor.pushUndoStop();\r\n                        range_2 = newRange;\r\n                    };\r\n                    var updateColorPresentations = function (color) {\r\n                        return getColorPresentations(editorModel_1, {\r\n                            range: range_2,\r\n                            color: {\r\n                                red: color.rgba.r / 255,\r\n                                green: color.rgba.g / 255,\r\n                                blue: color.rgba.b / 255,\r\n                                alpha: color.rgba.a\r\n                            }\r\n                        }, msg.provider, CancellationToken.None).then(function (colorPresentations) {\r\n                            model_1.colorPresentations = colorPresentations || [];\r\n                        });\r\n                    };\r\n                    var colorListener = model_1.onColorFlushed(function (color) {\r\n                        updateColorPresentations(color).then(updateEditorModel);\r\n                    });\r\n                    var colorChangeListener = model_1.onDidChangeColor(updateColorPresentations);\r\n                    _this._colorPicker = widget_1;\r\n                    _this.showAt(range_2.getStartPosition(), range_2, _this._shouldFocus);\r\n                    _this.updateContents(fragment);\r\n                    _this._colorPicker.layout();\r\n                    _this.renderDisposable.value = combinedDisposable(colorListener, colorChangeListener, widget_1, markdownDisposeables);\r\n                });\r\n            }\r\n            else {\r\n                if (msg instanceof MarkerHover) {\r\n                    markerMessages.push(msg);\r\n                    isEmptyHoverContent = false;\r\n                }\r\n                else {\r\n                    msg.contents\r\n                        .filter(function (contents) { return !isEmptyMarkdownString(contents); })\r\n                        .forEach(function (contents) {\r\n                        var markdownHoverElement = $('div.hover-row.markdown-hover');\r\n                        var hoverContentsElement = dom.append(markdownHoverElement, $('div.hover-contents'));\r\n                        var renderer = markdownDisposeables.add(new MarkdownRenderer(_this._editor, _this._modeService, _this._openerService));\r\n                        markdownDisposeables.add(renderer.onDidRenderCodeBlock(function () {\r\n                            hoverContentsElement.className = 'hover-contents code-hover-contents';\r\n                            _this.onContentsChange();\r\n                        }));\r\n                        var renderedContents = markdownDisposeables.add(renderer.render(contents));\r\n                        hoverContentsElement.appendChild(renderedContents.element);\r\n                        fragment.appendChild(markdownHoverElement);\r\n                        isEmptyHoverContent = false;\r\n                    });\r\n                }\r\n            }\r\n        });\r\n        if (markerMessages.length) {\r\n            markerMessages.forEach(function (msg) { return fragment.appendChild(_this.renderMarkerHover(msg)); });\r\n            var markerHoverForStatusbar = markerMessages.length === 1 ? markerMessages[0] : markerMessages.sort(function (a, b) { return MarkerSeverity.compare(a.marker.severity, b.marker.severity); })[0];\r\n            fragment.appendChild(this.renderMarkerStatusbar(markerHoverForStatusbar));\r\n        }\r\n        // show\r\n        if (!containColorPicker && !isEmptyHoverContent) {\r\n            this.showAt(new Position(renderRange.startLineNumber, renderColumn), highlightRange, this._shouldFocus);\r\n            this.updateContents(fragment);\r\n        }\r\n        this._isChangingDecorations = true;\r\n        this._highlightDecorations = this._editor.deltaDecorations(this._highlightDecorations, highlightRange ? [{\r\n                range: highlightRange,\r\n                options: ModesContentHoverWidget._DECORATION_OPTIONS\r\n            }] : []);\r\n        this._isChangingDecorations = false;\r\n    };\r\n    ModesContentHoverWidget.prototype.renderMarkerHover = function (markerHover) {\r\n        var _this = this;\r\n        var hoverElement = $('div.hover-row');\r\n        var markerElement = dom.append(hoverElement, $('div.marker.hover-contents'));\r\n        var _a = markerHover.marker, source = _a.source, message = _a.message, code = _a.code, relatedInformation = _a.relatedInformation;\r\n        this._editor.applyFontInfo(markerElement);\r\n        var messageElement = dom.append(markerElement, $('span'));\r\n        messageElement.style.whiteSpace = 'pre-wrap';\r\n        messageElement.innerText = message;\r\n        if (source || code) {\r\n            var detailsElement = dom.append(markerElement, $('span'));\r\n            detailsElement.style.opacity = '0.6';\r\n            detailsElement.style.paddingLeft = '6px';\r\n            detailsElement.innerText = source && code ? source + \"(\" + code + \")\" : source ? source : \"(\" + code + \")\";\r\n        }\r\n        if (isNonEmptyArray(relatedInformation)) {\r\n            var _loop_1 = function (message_1, resource, startLineNumber, startColumn) {\r\n                var relatedInfoContainer = dom.append(markerElement, $('div'));\r\n                relatedInfoContainer.style.marginTop = '8px';\r\n                var a = dom.append(relatedInfoContainer, $('a'));\r\n                a.innerText = basename(resource) + \"(\" + startLineNumber + \", \" + startColumn + \"): \";\r\n                a.style.cursor = 'pointer';\r\n                a.onclick = function (e) {\r\n                    e.stopPropagation();\r\n                    e.preventDefault();\r\n                    if (_this._openerService) {\r\n                        _this._openerService.open(resource.with({ fragment: startLineNumber + \",\" + startColumn }), { fromUserGesture: true }).catch(onUnexpectedError);\r\n                    }\r\n                };\r\n                var messageElement_1 = dom.append(relatedInfoContainer, $('span'));\r\n                messageElement_1.innerText = message_1;\r\n                this_1._editor.applyFontInfo(messageElement_1);\r\n            };\r\n            var this_1 = this;\r\n            for (var _i = 0, relatedInformation_1 = relatedInformation; _i < relatedInformation_1.length; _i++) {\r\n                var _b = relatedInformation_1[_i], message_1 = _b.message, resource = _b.resource, startLineNumber = _b.startLineNumber, startColumn = _b.startColumn;\r\n                _loop_1(message_1, resource, startLineNumber, startColumn);\r\n            }\r\n        }\r\n        return hoverElement;\r\n    };\r\n    ModesContentHoverWidget.prototype.renderMarkerStatusbar = function (markerHover) {\r\n        var _this = this;\r\n        var hoverElement = $('div.hover-row.status-bar');\r\n        var disposables = new DisposableStore();\r\n        var actionsElement = dom.append(hoverElement, $('div.actions'));\r\n        if (markerHover.marker.severity === MarkerSeverity.Error || markerHover.marker.severity === MarkerSeverity.Warning || markerHover.marker.severity === MarkerSeverity.Info) {\r\n            disposables.add(this.renderAction(actionsElement, {\r\n                label: nls.localize('peek problem', \"Peek Problem\"),\r\n                commandId: NextMarkerAction.ID,\r\n                run: function () {\r\n                    _this.hide();\r\n                    MarkerController.get(_this._editor).show(markerHover.marker);\r\n                    _this._editor.focus();\r\n                }\r\n            }));\r\n        }\r\n        var quickfixPlaceholderElement = dom.append(actionsElement, $('div'));\r\n        quickfixPlaceholderElement.style.opacity = '0';\r\n        quickfixPlaceholderElement.style.transition = 'opacity 0.2s';\r\n        setTimeout(function () { return quickfixPlaceholderElement.style.opacity = '1'; }, 200);\r\n        quickfixPlaceholderElement.textContent = nls.localize('checkingForQuickFixes', \"Checking for quick fixes...\");\r\n        disposables.add(toDisposable(function () { return quickfixPlaceholderElement.remove(); }));\r\n        var codeActionsPromise = this.getCodeActions(markerHover.marker);\r\n        disposables.add(toDisposable(function () { return codeActionsPromise.cancel(); }));\r\n        codeActionsPromise.then(function (actions) {\r\n            quickfixPlaceholderElement.style.transition = '';\r\n            quickfixPlaceholderElement.style.opacity = '1';\r\n            if (!actions.validActions.length) {\r\n                actions.dispose();\r\n                quickfixPlaceholderElement.textContent = nls.localize('noQuickFixes', \"No quick fixes available\");\r\n                return;\r\n            }\r\n            quickfixPlaceholderElement.remove();\r\n            var showing = false;\r\n            disposables.add(toDisposable(function () {\r\n                if (!showing) {\r\n                    actions.dispose();\r\n                }\r\n            }));\r\n            disposables.add(_this.renderAction(actionsElement, {\r\n                label: nls.localize('quick fixes', \"Quick Fix...\"),\r\n                commandId: QuickFixAction.Id,\r\n                run: function (target) {\r\n                    showing = true;\r\n                    var controller = QuickFixController.get(_this._editor);\r\n                    var elementPosition = dom.getDomNodePagePosition(target);\r\n                    controller.showCodeActions(actions, {\r\n                        x: elementPosition.left + 6,\r\n                        y: elementPosition.top + elementPosition.height + 6\r\n                    });\r\n                }\r\n            }));\r\n        });\r\n        this.renderDisposable.value = disposables;\r\n        return hoverElement;\r\n    };\r\n    ModesContentHoverWidget.prototype.getCodeActions = function (marker) {\r\n        var _this = this;\r\n        return createCancelablePromise(function (cancellationToken) {\r\n            return getCodeActions(_this._editor.getModel(), new Range(marker.startLineNumber, marker.startColumn, marker.endLineNumber, marker.endColumn), { type: 'manual', filter: { include: CodeActionKind.QuickFix } }, cancellationToken);\r\n        });\r\n    };\r\n    ModesContentHoverWidget.prototype.renderAction = function (parent, actionOptions) {\r\n        var actionContainer = dom.append(parent, $('div.action-container'));\r\n        var action = dom.append(actionContainer, $('a.action'));\r\n        if (actionOptions.iconClass) {\r\n            dom.append(action, $(\"span.icon.\" + actionOptions.iconClass));\r\n        }\r\n        var label = dom.append(action, $('span'));\r\n        label.textContent = actionOptions.label;\r\n        var keybinding = this._keybindingService.lookupKeybinding(actionOptions.commandId);\r\n        if (keybinding) {\r\n            label.title = actionOptions.label + \" (\" + keybinding.getLabel() + \")\";\r\n        }\r\n        return dom.addDisposableListener(actionContainer, dom.EventType.CLICK, function (e) {\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n            actionOptions.run(actionContainer);\r\n        });\r\n    };\r\n    ModesContentHoverWidget.ID = 'editor.contrib.modesContentHoverWidget';\r\n    ModesContentHoverWidget._DECORATION_OPTIONS = ModelDecorationOptions.register({\r\n        className: 'hoverHighlight'\r\n    });\r\n    return ModesContentHoverWidget;\r\n}(ContentHoverWidget));\r\nexport { ModesContentHoverWidget };\r\nfunction hoverContentsEquals(first, second) {\r\n    if ((!first && second) || (first && !second) || first.length !== second.length) {\r\n        return false;\r\n    }\r\n    for (var i = 0; i < first.length; i++) {\r\n        var firstElement = first[i];\r\n        var secondElement = second[i];\r\n        if (firstElement instanceof MarkerHover && secondElement instanceof MarkerHover) {\r\n            return IMarkerData.makeKey(firstElement.marker) === IMarkerData.makeKey(secondElement.marker);\r\n        }\r\n        if (firstElement instanceof ColorHover || secondElement instanceof ColorHover) {\r\n            return false;\r\n        }\r\n        if (firstElement instanceof MarkerHover || secondElement instanceof MarkerHover) {\r\n            return false;\r\n        }\r\n        if (!markedStringsEquals(firstElement.contents, secondElement.contents)) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { $ } from '../../../base/browser/dom.js';\r\nimport { isEmptyMarkdownString } from '../../../base/common/htmlContent.js';\r\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { HoverOperation } from './hoverOperation.js';\r\nimport { GlyphHoverWidget } from './hoverWidgets.js';\r\nimport { MarkdownRenderer } from '../markdown/markdownRenderer.js';\r\nimport { NullOpenerService } from '../../../platform/opener/common/opener.js';\r\nimport { asArray } from '../../../base/common/arrays.js';\r\nvar MarginComputer = /** @class */ (function () {\r\n    function MarginComputer(editor) {\r\n        this._editor = editor;\r\n        this._lineNumber = -1;\r\n        this._result = [];\r\n    }\r\n    MarginComputer.prototype.setLineNumber = function (lineNumber) {\r\n        this._lineNumber = lineNumber;\r\n        this._result = [];\r\n    };\r\n    MarginComputer.prototype.clearResult = function () {\r\n        this._result = [];\r\n    };\r\n    MarginComputer.prototype.computeSync = function () {\r\n        var toHoverMessage = function (contents) {\r\n            return {\r\n                value: contents\r\n            };\r\n        };\r\n        var lineDecorations = this._editor.getLineDecorations(this._lineNumber);\r\n        var result = [];\r\n        if (!lineDecorations) {\r\n            return result;\r\n        }\r\n        for (var _i = 0, lineDecorations_1 = lineDecorations; _i < lineDecorations_1.length; _i++) {\r\n            var d = lineDecorations_1[_i];\r\n            if (!d.options.glyphMarginClassName) {\r\n                continue;\r\n            }\r\n            var hoverMessage = d.options.glyphMarginHoverMessage;\r\n            if (!hoverMessage || isEmptyMarkdownString(hoverMessage)) {\r\n                continue;\r\n            }\r\n            result.push.apply(result, asArray(hoverMessage).map(toHoverMessage));\r\n        }\r\n        return result;\r\n    };\r\n    MarginComputer.prototype.onResult = function (result, isFromSynchronousComputation) {\r\n        this._result = this._result.concat(result);\r\n    };\r\n    MarginComputer.prototype.getResult = function () {\r\n        return this._result;\r\n    };\r\n    MarginComputer.prototype.getResultWithLoadingMessage = function () {\r\n        return this.getResult();\r\n    };\r\n    return MarginComputer;\r\n}());\r\nvar ModesGlyphHoverWidget = /** @class */ (function (_super) {\r\n    __extends(ModesGlyphHoverWidget, _super);\r\n    function ModesGlyphHoverWidget(editor, modeService, openerService) {\r\n        if (openerService === void 0) { openerService = NullOpenerService; }\r\n        var _this = _super.call(this, ModesGlyphHoverWidget.ID, editor) || this;\r\n        _this._renderDisposeables = _this._register(new DisposableStore());\r\n        _this._messages = [];\r\n        _this._lastLineNumber = -1;\r\n        _this._markdownRenderer = _this._register(new MarkdownRenderer(_this._editor, modeService, openerService));\r\n        _this._computer = new MarginComputer(_this._editor);\r\n        _this._hoverOperation = new HoverOperation(_this._computer, function (result) { return _this._withResult(result); }, undefined, function (result) { return _this._withResult(result); }, 300);\r\n        return _this;\r\n    }\r\n    ModesGlyphHoverWidget.prototype.dispose = function () {\r\n        this._hoverOperation.cancel();\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    ModesGlyphHoverWidget.prototype.onModelDecorationsChanged = function () {\r\n        if (this.isVisible) {\r\n            // The decorations have changed and the hover is visible,\r\n            // we need to recompute the displayed text\r\n            this._hoverOperation.cancel();\r\n            this._computer.clearResult();\r\n            this._hoverOperation.start(0 /* Delayed */);\r\n        }\r\n    };\r\n    ModesGlyphHoverWidget.prototype.startShowingAt = function (lineNumber) {\r\n        if (this._lastLineNumber === lineNumber) {\r\n            // We have to show the widget at the exact same line number as before, so no work is needed\r\n            return;\r\n        }\r\n        this._hoverOperation.cancel();\r\n        this.hide();\r\n        this._lastLineNumber = lineNumber;\r\n        this._computer.setLineNumber(lineNumber);\r\n        this._hoverOperation.start(0 /* Delayed */);\r\n    };\r\n    ModesGlyphHoverWidget.prototype.hide = function () {\r\n        this._lastLineNumber = -1;\r\n        this._hoverOperation.cancel();\r\n        _super.prototype.hide.call(this);\r\n    };\r\n    ModesGlyphHoverWidget.prototype._withResult = function (result) {\r\n        this._messages = result;\r\n        if (this._messages.length > 0) {\r\n            this._renderMessages(this._lastLineNumber, this._messages);\r\n        }\r\n        else {\r\n            this.hide();\r\n        }\r\n    };\r\n    ModesGlyphHoverWidget.prototype._renderMessages = function (lineNumber, messages) {\r\n        this._renderDisposeables.clear();\r\n        var fragment = document.createDocumentFragment();\r\n        for (var _i = 0, messages_1 = messages; _i < messages_1.length; _i++) {\r\n            var msg = messages_1[_i];\r\n            var renderedContents = this._markdownRenderer.render(msg.value);\r\n            this._renderDisposeables.add(renderedContents);\r\n            fragment.appendChild($('div.hover-row', undefined, renderedContents.element));\r\n        }\r\n        this.updateContents(fragment);\r\n        this.showAt(lineNumber);\r\n    };\r\n    ModesGlyphHoverWidget.ID = 'editor.contrib.modesGlyphHoverWidget';\r\n    return ModesGlyphHoverWidget;\r\n}(GlyphHoverWidget));\r\nexport { ModesGlyphHoverWidget };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { flatten, coalesce } from '../../../base/common/arrays.js';\r\nimport { CancellationToken } from '../../../base/common/cancellation.js';\r\nimport { onUnexpectedExternalError } from '../../../base/common/errors.js';\r\nimport { registerDefaultLanguageCommand } from '../../browser/editorExtensions.js';\r\nimport { DefinitionProviderRegistry, ImplementationProviderRegistry, TypeDefinitionProviderRegistry, DeclarationProviderRegistry, ReferenceProviderRegistry } from '../../common/modes.js';\r\nfunction getLocationLinks(model, position, registry, provide) {\r\n    var provider = registry.ordered(model);\r\n    // get results\r\n    var promises = provider.map(function (provider) {\r\n        return Promise.resolve(provide(provider, model, position)).then(undefined, function (err) {\r\n            onUnexpectedExternalError(err);\r\n            return undefined;\r\n        });\r\n    });\r\n    return Promise.all(promises)\r\n        .then(flatten)\r\n        .then(coalesce);\r\n}\r\nexport function getDefinitionsAtPosition(model, position, token) {\r\n    return getLocationLinks(model, position, DefinitionProviderRegistry, function (provider, model, position) {\r\n        return provider.provideDefinition(model, position, token);\r\n    });\r\n}\r\nexport function getDeclarationsAtPosition(model, position, token) {\r\n    return getLocationLinks(model, position, DeclarationProviderRegistry, function (provider, model, position) {\r\n        return provider.provideDeclaration(model, position, token);\r\n    });\r\n}\r\nexport function getImplementationsAtPosition(model, position, token) {\r\n    return getLocationLinks(model, position, ImplementationProviderRegistry, function (provider, model, position) {\r\n        return provider.provideImplementation(model, position, token);\r\n    });\r\n}\r\nexport function getTypeDefinitionsAtPosition(model, position, token) {\r\n    return getLocationLinks(model, position, TypeDefinitionProviderRegistry, function (provider, model, position) {\r\n        return provider.provideTypeDefinition(model, position, token);\r\n    });\r\n}\r\nexport function getReferencesAtPosition(model, position, compact, token) {\r\n    var _this = this;\r\n    return getLocationLinks(model, position, ReferenceProviderRegistry, function (provider, model, position) { return __awaiter(_this, void 0, void 0, function () {\r\n        var result, resultWithoutDeclaration;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, provider.provideReferences(model, position, { includeDeclaration: true }, token)];\r\n                case 1:\r\n                    result = _a.sent();\r\n                    if (!compact || !result || result.length !== 2) {\r\n                        return [2 /*return*/, result];\r\n                    }\r\n                    return [4 /*yield*/, provider.provideReferences(model, position, { includeDeclaration: false }, token)];\r\n                case 2:\r\n                    resultWithoutDeclaration = _a.sent();\r\n                    if (resultWithoutDeclaration && resultWithoutDeclaration.length === 1) {\r\n                        return [2 /*return*/, resultWithoutDeclaration];\r\n                    }\r\n                    return [2 /*return*/, result];\r\n            }\r\n        });\r\n    }); });\r\n}\r\nregisterDefaultLanguageCommand('_executeDefinitionProvider', function (model, position) { return getDefinitionsAtPosition(model, position, CancellationToken.None); });\r\nregisterDefaultLanguageCommand('_executeDeclarationProvider', function (model, position) { return getDeclarationsAtPosition(model, position, CancellationToken.None); });\r\nregisterDefaultLanguageCommand('_executeImplementationProvider', function (model, position) { return getImplementationsAtPosition(model, position, CancellationToken.None); });\r\nregisterDefaultLanguageCommand('_executeTypeDefinitionProvider', function (model, position) { return getTypeDefinitionsAtPosition(model, position, CancellationToken.None); });\r\nregisterDefaultLanguageCommand('_executeReferenceProvider', function (model, position) { return getReferencesAtPosition(model, position, false, CancellationToken.None); });\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { localize } from '../../../nls.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { basename } from '../../../base/common/resources.js';\r\nimport { dispose, DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport * as strings from '../../../base/common/strings.js';\r\nimport { defaultGenerator } from '../../../base/common/idGenerator.js';\r\nimport { Range } from '../../common/core/range.js';\r\nvar OneReference = /** @class */ (function () {\r\n    function OneReference(isProviderFirst, parent, _range, _rangeCallback) {\r\n        this.isProviderFirst = isProviderFirst;\r\n        this.parent = parent;\r\n        this._range = _range;\r\n        this._rangeCallback = _rangeCallback;\r\n        this.id = defaultGenerator.nextId();\r\n    }\r\n    Object.defineProperty(OneReference.prototype, \"uri\", {\r\n        get: function () {\r\n            return this.parent.uri;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(OneReference.prototype, \"range\", {\r\n        get: function () {\r\n            return this._range;\r\n        },\r\n        set: function (value) {\r\n            this._range = value;\r\n            this._rangeCallback(this);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(OneReference.prototype, \"ariaMessage\", {\r\n        get: function () {\r\n            return localize('aria.oneReference', \"symbol in {0} on line {1} at column {2}\", basename(this.uri), this.range.startLineNumber, this.range.startColumn);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return OneReference;\r\n}());\r\nexport { OneReference };\r\nvar FilePreview = /** @class */ (function () {\r\n    function FilePreview(_modelReference) {\r\n        this._modelReference = _modelReference;\r\n    }\r\n    FilePreview.prototype.dispose = function () {\r\n        this._modelReference.dispose();\r\n    };\r\n    FilePreview.prototype.preview = function (range, n) {\r\n        if (n === void 0) { n = 8; }\r\n        var model = this._modelReference.object.textEditorModel;\r\n        if (!model) {\r\n            return undefined;\r\n        }\r\n        var startLineNumber = range.startLineNumber, startColumn = range.startColumn, endLineNumber = range.endLineNumber, endColumn = range.endColumn;\r\n        var word = model.getWordUntilPosition({ lineNumber: startLineNumber, column: startColumn - n });\r\n        var beforeRange = new Range(startLineNumber, word.startColumn, startLineNumber, startColumn);\r\n        var afterRange = new Range(endLineNumber, endColumn, endLineNumber, 1073741824 /* MAX_SAFE_SMALL_INTEGER */);\r\n        var before = model.getValueInRange(beforeRange).replace(/^\\s+/, '');\r\n        var inside = model.getValueInRange(range);\r\n        var after = model.getValueInRange(afterRange).replace(/\\s+$/, '');\r\n        return {\r\n            value: before + inside + after,\r\n            highlight: { start: before.length, end: before.length + inside.length }\r\n        };\r\n    };\r\n    return FilePreview;\r\n}());\r\nexport { FilePreview };\r\nvar FileReferences = /** @class */ (function () {\r\n    function FileReferences(parent, uri) {\r\n        this.parent = parent;\r\n        this.uri = uri;\r\n        this.children = [];\r\n    }\r\n    FileReferences.prototype.dispose = function () {\r\n        dispose(this._preview);\r\n        this._preview = undefined;\r\n    };\r\n    Object.defineProperty(FileReferences.prototype, \"preview\", {\r\n        get: function () {\r\n            return this._preview;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FileReferences.prototype, \"failure\", {\r\n        get: function () {\r\n            return this._loadFailure;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FileReferences.prototype, \"ariaMessage\", {\r\n        get: function () {\r\n            var len = this.children.length;\r\n            if (len === 1) {\r\n                return localize('aria.fileReferences.1', \"1 symbol in {0}, full path {1}\", basename(this.uri), this.uri.fsPath);\r\n            }\r\n            else {\r\n                return localize('aria.fileReferences.N', \"{0} symbols in {1}, full path {2}\", len, basename(this.uri), this.uri.fsPath);\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    FileReferences.prototype.resolve = function (textModelResolverService) {\r\n        var _this = this;\r\n        if (this._resolved) {\r\n            return Promise.resolve(this);\r\n        }\r\n        return Promise.resolve(textModelResolverService.createModelReference(this.uri).then(function (modelReference) {\r\n            var model = modelReference.object;\r\n            if (!model) {\r\n                modelReference.dispose();\r\n                throw new Error();\r\n            }\r\n            _this._preview = new FilePreview(modelReference);\r\n            _this._resolved = true;\r\n            return _this;\r\n        }, function (err) {\r\n            // something wrong here\r\n            _this.children.length = 0;\r\n            _this._resolved = true;\r\n            _this._loadFailure = err;\r\n            return _this;\r\n        }));\r\n    };\r\n    return FileReferences;\r\n}());\r\nexport { FileReferences };\r\nvar ReferencesModel = /** @class */ (function () {\r\n    function ReferencesModel(links, title) {\r\n        var _this = this;\r\n        this._disposables = new DisposableStore();\r\n        this.groups = [];\r\n        this.references = [];\r\n        this._onDidChangeReferenceRange = new Emitter();\r\n        this.onDidChangeReferenceRange = this._onDidChangeReferenceRange.event;\r\n        this._links = links;\r\n        this._title = title;\r\n        // grouping and sorting\r\n        var providersFirst = links[0];\r\n        links.sort(ReferencesModel._compareReferences);\r\n        var current;\r\n        for (var _i = 0, links_1 = links; _i < links_1.length; _i++) {\r\n            var link = links_1[_i];\r\n            if (!current || current.uri.toString() !== link.uri.toString()) {\r\n                // new group\r\n                current = new FileReferences(this, link.uri);\r\n                this.groups.push(current);\r\n            }\r\n            // append, check for equality first!\r\n            if (current.children.length === 0 || !Range.equalsRange(link.range, current.children[current.children.length - 1].range)) {\r\n                var oneRef = new OneReference(providersFirst === link, current, link.targetSelectionRange || link.range, function (ref) { return _this._onDidChangeReferenceRange.fire(ref); });\r\n                this.references.push(oneRef);\r\n                current.children.push(oneRef);\r\n            }\r\n        }\r\n    }\r\n    ReferencesModel.prototype.dispose = function () {\r\n        dispose(this.groups);\r\n        this._disposables.dispose();\r\n        this._onDidChangeReferenceRange.dispose();\r\n        this.groups.length = 0;\r\n    };\r\n    ReferencesModel.prototype.clone = function () {\r\n        return new ReferencesModel(this._links, this._title);\r\n    };\r\n    Object.defineProperty(ReferencesModel.prototype, \"title\", {\r\n        get: function () {\r\n            return this._title;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReferencesModel.prototype, \"isEmpty\", {\r\n        get: function () {\r\n            return this.groups.length === 0;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ReferencesModel.prototype, \"ariaMessage\", {\r\n        get: function () {\r\n            if (this.isEmpty) {\r\n                return localize('aria.result.0', \"No results found\");\r\n            }\r\n            else if (this.references.length === 1) {\r\n                return localize('aria.result.1', \"Found 1 symbol in {0}\", this.references[0].uri.fsPath);\r\n            }\r\n            else if (this.groups.length === 1) {\r\n                return localize('aria.result.n1', \"Found {0} symbols in {1}\", this.references.length, this.groups[0].uri.fsPath);\r\n            }\r\n            else {\r\n                return localize('aria.result.nm', \"Found {0} symbols in {1} files\", this.references.length, this.groups.length);\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ReferencesModel.prototype.nextOrPreviousReference = function (reference, next) {\r\n        var parent = reference.parent;\r\n        var idx = parent.children.indexOf(reference);\r\n        var childCount = parent.children.length;\r\n        var groupCount = parent.parent.groups.length;\r\n        if (groupCount === 1 || next && idx + 1 < childCount || !next && idx > 0) {\r\n            // cycling within one file\r\n            if (next) {\r\n                idx = (idx + 1) % childCount;\r\n            }\r\n            else {\r\n                idx = (idx + childCount - 1) % childCount;\r\n            }\r\n            return parent.children[idx];\r\n        }\r\n        idx = parent.parent.groups.indexOf(parent);\r\n        if (next) {\r\n            idx = (idx + 1) % groupCount;\r\n            return parent.parent.groups[idx].children[0];\r\n        }\r\n        else {\r\n            idx = (idx + groupCount - 1) % groupCount;\r\n            return parent.parent.groups[idx].children[parent.parent.groups[idx].children.length - 1];\r\n        }\r\n    };\r\n    ReferencesModel.prototype.nearestReference = function (resource, position) {\r\n        var nearest = this.references.map(function (ref, idx) {\r\n            return {\r\n                idx: idx,\r\n                prefixLen: strings.commonPrefixLength(ref.uri.toString(), resource.toString()),\r\n                offsetDist: Math.abs(ref.range.startLineNumber - position.lineNumber) * 100 + Math.abs(ref.range.startColumn - position.column)\r\n            };\r\n        }).sort(function (a, b) {\r\n            if (a.prefixLen > b.prefixLen) {\r\n                return -1;\r\n            }\r\n            else if (a.prefixLen < b.prefixLen) {\r\n                return 1;\r\n            }\r\n            else if (a.offsetDist < b.offsetDist) {\r\n                return -1;\r\n            }\r\n            else if (a.offsetDist > b.offsetDist) {\r\n                return 1;\r\n            }\r\n            else {\r\n                return 0;\r\n            }\r\n        })[0];\r\n        if (nearest) {\r\n            return this.references[nearest.idx];\r\n        }\r\n        return undefined;\r\n    };\r\n    ReferencesModel.prototype.referenceAt = function (resource, position) {\r\n        for (var _i = 0, _a = this.references; _i < _a.length; _i++) {\r\n            var ref = _a[_i];\r\n            if (ref.uri.toString() === resource.toString()) {\r\n                if (Range.containsPosition(ref.range, position)) {\r\n                    return ref;\r\n                }\r\n            }\r\n        }\r\n        return undefined;\r\n    };\r\n    ReferencesModel.prototype.firstReference = function () {\r\n        for (var _i = 0, _a = this.references; _i < _a.length; _i++) {\r\n            var ref = _a[_i];\r\n            if (ref.isProviderFirst) {\r\n                return ref;\r\n            }\r\n        }\r\n        return this.references[0];\r\n    };\r\n    ReferencesModel._compareReferences = function (a, b) {\r\n        return strings.compare(a.uri.toString(), b.uri.toString()) || Range.compareRangesUsingStarts(a.range, b.range);\r\n    };\r\n    return ReferencesModel;\r\n}());\r\nexport { ReferencesModel };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport './codicon/codicon.css';\r\nimport './codicon/codicon-animations.css';\r\nimport { escape } from '../../../common/strings.js';\r\nfunction expand(text) {\r\n    return text.replace(/\\$\\((([a-z0-9\\-]+?)(~([a-z0-9\\-]*?))?)\\)/gi, function (_match, _g1, name, _g3, animation) {\r\n        return \"<span class=\\\"codicon codicon-\" + name + \" \" + (animation ? \"codicon-animation-\" + animation : '') + \"\\\"></span>\";\r\n    });\r\n}\r\nexport function renderCodicons(label) {\r\n    return expand(escape(label));\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport * as objects from '../../../common/objects.js';\r\nimport { renderCodicons } from '../codiconLabel/codiconLabel.js';\r\nimport { escape } from '../../../common/strings.js';\r\nvar HighlightedLabel = /** @class */ (function () {\r\n    function HighlightedLabel(container, supportCodicons) {\r\n        this.supportCodicons = supportCodicons;\r\n        this.text = '';\r\n        this.title = '';\r\n        this.highlights = [];\r\n        this.didEverRender = false;\r\n        this.domNode = document.createElement('span');\r\n        this.domNode.className = 'monaco-highlighted-label';\r\n        container.appendChild(this.domNode);\r\n    }\r\n    Object.defineProperty(HighlightedLabel.prototype, \"element\", {\r\n        get: function () {\r\n            return this.domNode;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    HighlightedLabel.prototype.set = function (text, highlights, title, escapeNewLines) {\r\n        if (highlights === void 0) { highlights = []; }\r\n        if (title === void 0) { title = ''; }\r\n        if (!text) {\r\n            text = '';\r\n        }\r\n        if (escapeNewLines) {\r\n            // adjusts highlights inplace\r\n            text = HighlightedLabel.escapeNewLines(text, highlights);\r\n        }\r\n        if (this.didEverRender && this.text === text && this.title === title && objects.equals(this.highlights, highlights)) {\r\n            return;\r\n        }\r\n        if (!Array.isArray(highlights)) {\r\n            highlights = [];\r\n        }\r\n        this.text = text;\r\n        this.title = title;\r\n        this.highlights = highlights;\r\n        this.render();\r\n    };\r\n    HighlightedLabel.prototype.render = function () {\r\n        var htmlContent = '';\r\n        var pos = 0;\r\n        for (var _i = 0, _a = this.highlights; _i < _a.length; _i++) {\r\n            var highlight = _a[_i];\r\n            if (highlight.end === highlight.start) {\r\n                continue;\r\n            }\r\n            if (pos < highlight.start) {\r\n                htmlContent += '<span>';\r\n                var substring_1 = this.text.substring(pos, highlight.start);\r\n                htmlContent += this.supportCodicons ? renderCodicons(substring_1) : escape(substring_1);\r\n                htmlContent += '</span>';\r\n                pos = highlight.end;\r\n            }\r\n            htmlContent += '<span class=\"highlight\">';\r\n            var substring = this.text.substring(highlight.start, highlight.end);\r\n            htmlContent += this.supportCodicons ? renderCodicons(substring) : escape(substring);\r\n            htmlContent += '</span>';\r\n            pos = highlight.end;\r\n        }\r\n        if (pos < this.text.length) {\r\n            htmlContent += '<span>';\r\n            var substring = this.text.substring(pos);\r\n            htmlContent += this.supportCodicons ? renderCodicons(substring) : escape(substring);\r\n            htmlContent += '</span>';\r\n        }\r\n        this.domNode.innerHTML = htmlContent;\r\n        if (this.title) {\r\n            this.domNode.title = this.title;\r\n        }\r\n        else {\r\n            this.domNode.removeAttribute('title');\r\n        }\r\n        this.didEverRender = true;\r\n    };\r\n    HighlightedLabel.escapeNewLines = function (text, highlights) {\r\n        var total = 0;\r\n        var extra = 0;\r\n        return text.replace(/\\r\\n|\\r|\\n/g, function (match, offset) {\r\n            extra = match === '\\r\\n' ? -1 : 0;\r\n            offset += total;\r\n            for (var _i = 0, highlights_1 = highlights; _i < highlights_1.length; _i++) {\r\n                var highlight = highlights_1[_i];\r\n                if (highlight.end <= offset) {\r\n                    continue;\r\n                }\r\n                if (highlight.start >= offset) {\r\n                    highlight.start += extra;\r\n                }\r\n                if (highlight.end >= offset) {\r\n                    highlight.end += extra;\r\n                }\r\n            }\r\n            total += extra;\r\n            return '\\u23CE';\r\n        });\r\n    };\r\n    return HighlightedLabel;\r\n}());\r\nexport { HighlightedLabel };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport './iconlabel.css';\r\nimport * as dom from '../../dom.js';\r\nimport { HighlightedLabel } from '../highlightedlabel/highlightedLabel.js';\r\nimport { Disposable } from '../../../common/lifecycle.js';\r\nimport { Range } from '../../../common/range.js';\r\nimport { equals } from '../../../common/objects.js';\r\nvar FastLabelNode = /** @class */ (function () {\r\n    function FastLabelNode(_element) {\r\n        this._element = _element;\r\n    }\r\n    Object.defineProperty(FastLabelNode.prototype, \"element\", {\r\n        get: function () {\r\n            return this._element;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FastLabelNode.prototype, \"textContent\", {\r\n        set: function (content) {\r\n            if (this.disposed || content === this._textContent) {\r\n                return;\r\n            }\r\n            this._textContent = content;\r\n            this._element.textContent = content;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FastLabelNode.prototype, \"className\", {\r\n        set: function (className) {\r\n            if (this.disposed || className === this._className) {\r\n                return;\r\n            }\r\n            this._className = className;\r\n            this._element.className = className;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FastLabelNode.prototype, \"title\", {\r\n        set: function (title) {\r\n            if (this.disposed || title === this._title) {\r\n                return;\r\n            }\r\n            this._title = title;\r\n            if (this._title) {\r\n                this._element.title = title;\r\n            }\r\n            else {\r\n                this._element.removeAttribute('title');\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FastLabelNode.prototype, \"empty\", {\r\n        set: function (empty) {\r\n            if (this.disposed || empty === this._empty) {\r\n                return;\r\n            }\r\n            this._empty = empty;\r\n            this._element.style.marginLeft = empty ? '0' : '';\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    FastLabelNode.prototype.dispose = function () {\r\n        this.disposed = true;\r\n    };\r\n    return FastLabelNode;\r\n}());\r\nvar IconLabel = /** @class */ (function (_super) {\r\n    __extends(IconLabel, _super);\r\n    function IconLabel(container, options) {\r\n        var _a, _b;\r\n        var _this = _super.call(this) || this;\r\n        _this.domNode = _this._register(new FastLabelNode(dom.append(container, dom.$('.monaco-icon-label'))));\r\n        var labelContainer = dom.append(_this.domNode.element, dom.$('.monaco-icon-label-container'));\r\n        var nameContainer = dom.append(labelContainer, dom.$('span.monaco-icon-name-container'));\r\n        _this.descriptionContainer = _this._register(new FastLabelNode(dom.append(labelContainer, dom.$('span.monaco-icon-description-container'))));\r\n        if ((_a = options) === null || _a === void 0 ? void 0 : _a.supportHighlights) {\r\n            _this.nameNode = new LabelWithHighlights(nameContainer, !!options.supportCodicons);\r\n        }\r\n        else {\r\n            _this.nameNode = new Label(nameContainer);\r\n        }\r\n        if ((_b = options) === null || _b === void 0 ? void 0 : _b.supportDescriptionHighlights) {\r\n            _this.descriptionNodeFactory = function () { return new HighlightedLabel(dom.append(_this.descriptionContainer.element, dom.$('span.label-description')), !!options.supportCodicons); };\r\n        }\r\n        else {\r\n            _this.descriptionNodeFactory = function () { return _this._register(new FastLabelNode(dom.append(_this.descriptionContainer.element, dom.$('span.label-description')))); };\r\n        }\r\n        return _this;\r\n    }\r\n    IconLabel.prototype.setLabel = function (label, description, options) {\r\n        var _a, _b, _c;\r\n        var classes = ['monaco-icon-label'];\r\n        if (options) {\r\n            if (options.extraClasses) {\r\n                classes.push.apply(classes, options.extraClasses);\r\n            }\r\n            if (options.italic) {\r\n                classes.push('italic');\r\n            }\r\n        }\r\n        this.domNode.className = classes.join(' ');\r\n        this.domNode.title = ((_a = options) === null || _a === void 0 ? void 0 : _a.title) || '';\r\n        this.nameNode.setLabel(label, options);\r\n        if (description || this.descriptionNode) {\r\n            if (!this.descriptionNode) {\r\n                this.descriptionNode = this.descriptionNodeFactory(); // description node is created lazily on demand\r\n            }\r\n            if (this.descriptionNode instanceof HighlightedLabel) {\r\n                this.descriptionNode.set(description || '', options ? options.descriptionMatches : undefined);\r\n                if ((_b = options) === null || _b === void 0 ? void 0 : _b.descriptionTitle) {\r\n                    this.descriptionNode.element.title = options.descriptionTitle;\r\n                }\r\n                else {\r\n                    this.descriptionNode.element.removeAttribute('title');\r\n                }\r\n            }\r\n            else {\r\n                this.descriptionNode.textContent = description || '';\r\n                this.descriptionNode.title = ((_c = options) === null || _c === void 0 ? void 0 : _c.descriptionTitle) || '';\r\n                this.descriptionNode.empty = !description;\r\n            }\r\n        }\r\n    };\r\n    return IconLabel;\r\n}(Disposable));\r\nexport { IconLabel };\r\nvar Label = /** @class */ (function () {\r\n    function Label(container) {\r\n        this.container = container;\r\n        this.label = undefined;\r\n        this.singleLabel = undefined;\r\n    }\r\n    Label.prototype.setLabel = function (label, options) {\r\n        var _a, _b, _c, _d;\r\n        if (this.label === label && equals(this.options, options)) {\r\n            return;\r\n        }\r\n        this.label = label;\r\n        this.options = options;\r\n        if (typeof label === 'string') {\r\n            if (!this.singleLabel) {\r\n                this.container.innerHTML = '';\r\n                dom.removeClass(this.container, 'multiple');\r\n                this.singleLabel = dom.append(this.container, dom.$('a.label-name', { id: (_a = options) === null || _a === void 0 ? void 0 : _a.domId }));\r\n            }\r\n            this.singleLabel.textContent = label;\r\n        }\r\n        else {\r\n            this.container.innerHTML = '';\r\n            dom.addClass(this.container, 'multiple');\r\n            this.singleLabel = undefined;\r\n            for (var i = 0; i < label.length; i++) {\r\n                var l = label[i];\r\n                var id = ((_b = options) === null || _b === void 0 ? void 0 : _b.domId) && ((_c = options) === null || _c === void 0 ? void 0 : _c.domId) + \"_\" + i;\r\n                dom.append(this.container, dom.$('a.label-name', { id: id, 'data-icon-label-count': label.length, 'data-icon-label-index': i }, l));\r\n                if (i < label.length - 1) {\r\n                    dom.append(this.container, dom.$('span.label-separator', undefined, ((_d = options) === null || _d === void 0 ? void 0 : _d.separator) || '/'));\r\n                }\r\n            }\r\n        }\r\n    };\r\n    return Label;\r\n}());\r\nfunction splitMatches(labels, separator, matches) {\r\n    if (!matches) {\r\n        return undefined;\r\n    }\r\n    var labelStart = 0;\r\n    return labels.map(function (label) {\r\n        var labelRange = { start: labelStart, end: labelStart + label.length };\r\n        var result = matches\r\n            .map(function (match) { return Range.intersect(labelRange, match); })\r\n            .filter(function (range) { return !Range.isEmpty(range); })\r\n            .map(function (_a) {\r\n            var start = _a.start, end = _a.end;\r\n            return ({ start: start - labelStart, end: end - labelStart });\r\n        });\r\n        labelStart = labelRange.end + separator.length;\r\n        return result;\r\n    });\r\n}\r\nvar LabelWithHighlights = /** @class */ (function () {\r\n    function LabelWithHighlights(container, supportCodicons) {\r\n        this.container = container;\r\n        this.supportCodicons = supportCodicons;\r\n        this.label = undefined;\r\n        this.singleLabel = undefined;\r\n    }\r\n    LabelWithHighlights.prototype.setLabel = function (label, options) {\r\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\r\n        if (this.label === label && equals(this.options, options)) {\r\n            return;\r\n        }\r\n        this.label = label;\r\n        this.options = options;\r\n        if (typeof label === 'string') {\r\n            if (!this.singleLabel) {\r\n                this.container.innerHTML = '';\r\n                dom.removeClass(this.container, 'multiple');\r\n                this.singleLabel = new HighlightedLabel(dom.append(this.container, dom.$('a.label-name', { id: (_a = options) === null || _a === void 0 ? void 0 : _a.domId })), this.supportCodicons);\r\n            }\r\n            this.singleLabel.set(label, (_b = options) === null || _b === void 0 ? void 0 : _b.matches, (_c = options) === null || _c === void 0 ? void 0 : _c.title, (_d = options) === null || _d === void 0 ? void 0 : _d.labelEscapeNewLines);\r\n        }\r\n        else {\r\n            this.container.innerHTML = '';\r\n            dom.addClass(this.container, 'multiple');\r\n            this.singleLabel = undefined;\r\n            var separator = ((_e = options) === null || _e === void 0 ? void 0 : _e.separator) || '/';\r\n            var matches = splitMatches(label, separator, (_f = options) === null || _f === void 0 ? void 0 : _f.matches);\r\n            for (var i = 0; i < label.length; i++) {\r\n                var l = label[i];\r\n                var m = matches ? matches[i] : undefined;\r\n                var id = ((_g = options) === null || _g === void 0 ? void 0 : _g.domId) && ((_h = options) === null || _h === void 0 ? void 0 : _h.domId) + \"_\" + i;\r\n                var name_1 = dom.$('a.label-name', { id: id, 'data-icon-label-count': label.length, 'data-icon-label-index': i });\r\n                var highlightedLabel = new HighlightedLabel(dom.append(this.container, name_1), this.supportCodicons);\r\n                highlightedLabel.set(l, m, (_j = options) === null || _j === void 0 ? void 0 : _j.title, (_k = options) === null || _k === void 0 ? void 0 : _k.labelEscapeNewLines);\r\n                if (i < label.length - 1) {\r\n                    dom.append(name_1, dom.$('span.label-separator', undefined, separator));\r\n                }\r\n            }\r\n        }\r\n    };\r\n    return LabelWithHighlights;\r\n}());\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nimport './splitview.css';\r\nimport { toDisposable, Disposable, combinedDisposable } from '../../../common/lifecycle.js';\r\nimport { Event, Emitter } from '../../../common/event.js';\r\nimport * as types from '../../../common/types.js';\r\nimport * as dom from '../../dom.js';\r\nimport { clamp } from '../../../common/numbers.js';\r\nimport { range, firstIndex, pushToStart, pushToEnd } from '../../../common/arrays.js';\r\nimport { Sash } from '../sash/sash.js';\r\nimport { Color } from '../../../common/color.js';\r\nimport { domEvent } from '../../event.js';\r\nvar defaultStyles = {\r\n    separatorBorder: Color.transparent\r\n};\r\nvar ViewItem = /** @class */ (function () {\r\n    function ViewItem(container, view, size, disposable) {\r\n        this.container = container;\r\n        this.view = view;\r\n        this.disposable = disposable;\r\n        this._cachedVisibleSize = undefined;\r\n        if (typeof size === 'number') {\r\n            this._size = size;\r\n            this._cachedVisibleSize = undefined;\r\n            dom.addClass(container, 'visible');\r\n        }\r\n        else {\r\n            this._size = 0;\r\n            this._cachedVisibleSize = size.cachedVisibleSize;\r\n        }\r\n    }\r\n    Object.defineProperty(ViewItem.prototype, \"size\", {\r\n        get: function () {\r\n            return this._size;\r\n        },\r\n        set: function (size) {\r\n            this._size = size;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewItem.prototype, \"visible\", {\r\n        get: function () {\r\n            return typeof this._cachedVisibleSize === 'undefined';\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ViewItem.prototype.setVisible = function (visible, size) {\r\n        if (visible === this.visible) {\r\n            return;\r\n        }\r\n        if (visible) {\r\n            this.size = clamp(this._cachedVisibleSize, this.viewMinimumSize, this.viewMaximumSize);\r\n            this._cachedVisibleSize = undefined;\r\n        }\r\n        else {\r\n            this._cachedVisibleSize = typeof size === 'number' ? size : this.size;\r\n            this.size = 0;\r\n        }\r\n        dom.toggleClass(this.container, 'visible', visible);\r\n        if (this.view.setVisible) {\r\n            this.view.setVisible(visible);\r\n        }\r\n    };\r\n    Object.defineProperty(ViewItem.prototype, \"minimumSize\", {\r\n        get: function () { return this.visible ? this.view.minimumSize : 0; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewItem.prototype, \"viewMinimumSize\", {\r\n        get: function () { return this.view.minimumSize; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewItem.prototype, \"maximumSize\", {\r\n        get: function () { return this.visible ? this.view.maximumSize : 0; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewItem.prototype, \"viewMaximumSize\", {\r\n        get: function () { return this.view.maximumSize; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewItem.prototype, \"priority\", {\r\n        get: function () { return this.view.priority; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewItem.prototype, \"snap\", {\r\n        get: function () { return !!this.view.snap; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewItem.prototype, \"enabled\", {\r\n        set: function (enabled) {\r\n            this.container.style.pointerEvents = enabled ? null : 'none';\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ViewItem.prototype.layout = function (offset, layoutContext) {\r\n        this.layoutContainer(offset);\r\n        this.view.layout(this.size, offset, layoutContext);\r\n    };\r\n    ViewItem.prototype.dispose = function () {\r\n        this.disposable.dispose();\r\n        return this.view;\r\n    };\r\n    return ViewItem;\r\n}());\r\nvar VerticalViewItem = /** @class */ (function (_super) {\r\n    __extends(VerticalViewItem, _super);\r\n    function VerticalViewItem() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    VerticalViewItem.prototype.layoutContainer = function (offset) {\r\n        this.container.style.top = offset + \"px\";\r\n        this.container.style.height = this.size + \"px\";\r\n    };\r\n    return VerticalViewItem;\r\n}(ViewItem));\r\nvar HorizontalViewItem = /** @class */ (function (_super) {\r\n    __extends(HorizontalViewItem, _super);\r\n    function HorizontalViewItem() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    HorizontalViewItem.prototype.layoutContainer = function (offset) {\r\n        this.container.style.left = offset + \"px\";\r\n        this.container.style.width = this.size + \"px\";\r\n    };\r\n    return HorizontalViewItem;\r\n}(ViewItem));\r\nvar State;\r\n(function (State) {\r\n    State[State[\"Idle\"] = 0] = \"Idle\";\r\n    State[State[\"Busy\"] = 1] = \"Busy\";\r\n})(State || (State = {}));\r\nexport var Sizing;\r\n(function (Sizing) {\r\n    Sizing.Distribute = { type: 'distribute' };\r\n    function Split(index) { return { type: 'split', index: index }; }\r\n    Sizing.Split = Split;\r\n    function Invisible(cachedVisibleSize) { return { type: 'invisible', cachedVisibleSize: cachedVisibleSize }; }\r\n    Sizing.Invisible = Invisible;\r\n})(Sizing || (Sizing = {}));\r\nvar SplitView = /** @class */ (function (_super) {\r\n    __extends(SplitView, _super);\r\n    function SplitView(container, options) {\r\n        if (options === void 0) { options = {}; }\r\n        var _this = _super.call(this) || this;\r\n        _this.size = 0;\r\n        _this.contentSize = 0;\r\n        _this.proportions = undefined;\r\n        _this.viewItems = [];\r\n        _this.sashItems = [];\r\n        _this.state = State.Idle;\r\n        _this._onDidSashChange = _this._register(new Emitter());\r\n        _this.onDidSashChange = _this._onDidSashChange.event;\r\n        _this._onDidSashReset = _this._register(new Emitter());\r\n        _this._startSnappingEnabled = true;\r\n        _this._endSnappingEnabled = true;\r\n        _this.orientation = types.isUndefined(options.orientation) ? 0 /* VERTICAL */ : options.orientation;\r\n        _this.inverseAltBehavior = !!options.inverseAltBehavior;\r\n        _this.proportionalLayout = types.isUndefined(options.proportionalLayout) ? true : !!options.proportionalLayout;\r\n        _this.el = document.createElement('div');\r\n        dom.addClass(_this.el, 'monaco-split-view2');\r\n        dom.addClass(_this.el, _this.orientation === 0 /* VERTICAL */ ? 'vertical' : 'horizontal');\r\n        container.appendChild(_this.el);\r\n        _this.sashContainer = dom.append(_this.el, dom.$('.sash-container'));\r\n        _this.viewContainer = dom.append(_this.el, dom.$('.split-view-container'));\r\n        _this.style(options.styles || defaultStyles);\r\n        // We have an existing set of view, add them now\r\n        if (options.descriptor) {\r\n            _this.size = options.descriptor.size;\r\n            options.descriptor.views.forEach(function (viewDescriptor, index) {\r\n                var sizing = types.isUndefined(viewDescriptor.visible) || viewDescriptor.visible ? viewDescriptor.size : { type: 'invisible', cachedVisibleSize: viewDescriptor.size };\r\n                var view = viewDescriptor.view;\r\n                _this.doAddView(view, sizing, index, true);\r\n            });\r\n            // Initialize content size and proportions for first layout\r\n            _this.contentSize = _this.viewItems.reduce(function (r, i) { return r + i.size; }, 0);\r\n            _this.saveProportions();\r\n        }\r\n        return _this;\r\n    }\r\n    Object.defineProperty(SplitView.prototype, \"orthogonalStartSash\", {\r\n        get: function () { return this._orthogonalStartSash; },\r\n        set: function (sash) {\r\n            for (var _i = 0, _a = this.sashItems; _i < _a.length; _i++) {\r\n                var sashItem = _a[_i];\r\n                sashItem.sash.orthogonalStartSash = sash;\r\n            }\r\n            this._orthogonalStartSash = sash;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SplitView.prototype, \"orthogonalEndSash\", {\r\n        get: function () { return this._orthogonalEndSash; },\r\n        set: function (sash) {\r\n            for (var _i = 0, _a = this.sashItems; _i < _a.length; _i++) {\r\n                var sashItem = _a[_i];\r\n                sashItem.sash.orthogonalEndSash = sash;\r\n            }\r\n            this._orthogonalEndSash = sash;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SplitView.prototype, \"startSnappingEnabled\", {\r\n        get: function () { return this._startSnappingEnabled; },\r\n        set: function (startSnappingEnabled) {\r\n            if (this._startSnappingEnabled === startSnappingEnabled) {\r\n                return;\r\n            }\r\n            this._startSnappingEnabled = startSnappingEnabled;\r\n            this.updateSashEnablement();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SplitView.prototype, \"endSnappingEnabled\", {\r\n        get: function () { return this._endSnappingEnabled; },\r\n        set: function (endSnappingEnabled) {\r\n            if (this._endSnappingEnabled === endSnappingEnabled) {\r\n                return;\r\n            }\r\n            this._endSnappingEnabled = endSnappingEnabled;\r\n            this.updateSashEnablement();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SplitView.prototype.style = function (styles) {\r\n        if (styles.separatorBorder.isTransparent()) {\r\n            dom.removeClass(this.el, 'separator-border');\r\n            this.el.style.removeProperty('--separator-border');\r\n        }\r\n        else {\r\n            dom.addClass(this.el, 'separator-border');\r\n            this.el.style.setProperty('--separator-border', styles.separatorBorder.toString());\r\n        }\r\n    };\r\n    SplitView.prototype.addView = function (view, size, index) {\r\n        if (index === void 0) { index = this.viewItems.length; }\r\n        this.doAddView(view, size, index, false);\r\n    };\r\n    SplitView.prototype.layout = function (size, layoutContext) {\r\n        var _this = this;\r\n        var previousSize = Math.max(this.size, this.contentSize);\r\n        this.size = size;\r\n        this.layoutContext = layoutContext;\r\n        if (!this.proportions) {\r\n            var indexes = range(this.viewItems.length);\r\n            var lowPriorityIndexes = indexes.filter(function (i) { return _this.viewItems[i].priority === 1 /* Low */; });\r\n            var highPriorityIndexes = indexes.filter(function (i) { return _this.viewItems[i].priority === 2 /* High */; });\r\n            this.resize(this.viewItems.length - 1, size - previousSize, undefined, lowPriorityIndexes, highPriorityIndexes);\r\n        }\r\n        else {\r\n            for (var i = 0; i < this.viewItems.length; i++) {\r\n                var item = this.viewItems[i];\r\n                item.size = clamp(Math.round(this.proportions[i] * size), item.minimumSize, item.maximumSize);\r\n            }\r\n        }\r\n        this.distributeEmptySpace();\r\n        this.layoutViews();\r\n    };\r\n    SplitView.prototype.saveProportions = function () {\r\n        var _this = this;\r\n        if (this.proportionalLayout && this.contentSize > 0) {\r\n            this.proportions = this.viewItems.map(function (i) { return i.size / _this.contentSize; });\r\n        }\r\n    };\r\n    SplitView.prototype.onSashStart = function (_a) {\r\n        var _this = this;\r\n        var sash = _a.sash, start = _a.start, alt = _a.alt;\r\n        for (var _i = 0, _b = this.viewItems; _i < _b.length; _i++) {\r\n            var item = _b[_i];\r\n            item.enabled = false;\r\n        }\r\n        var index = firstIndex(this.sashItems, function (item) { return item.sash === sash; });\r\n        // This way, we can press Alt while we resize a sash, macOS style!\r\n        var disposable = combinedDisposable(domEvent(document.body, 'keydown')(function (e) { return resetSashDragState(_this.sashDragState.current, e.altKey); }), domEvent(document.body, 'keyup')(function () { return resetSashDragState(_this.sashDragState.current, false); }));\r\n        var resetSashDragState = function (start, alt) {\r\n            var sizes = _this.viewItems.map(function (i) { return i.size; });\r\n            var minDelta = Number.NEGATIVE_INFINITY;\r\n            var maxDelta = Number.POSITIVE_INFINITY;\r\n            if (_this.inverseAltBehavior) {\r\n                alt = !alt;\r\n            }\r\n            if (alt) {\r\n                // When we're using the last sash with Alt, we're resizing\r\n                // the view to the left/up, instead of right/down as usual\r\n                // Thus, we must do the inverse of the usual\r\n                var isLastSash = index === _this.sashItems.length - 1;\r\n                if (isLastSash) {\r\n                    var viewItem = _this.viewItems[index];\r\n                    minDelta = (viewItem.minimumSize - viewItem.size) / 2;\r\n                    maxDelta = (viewItem.maximumSize - viewItem.size) / 2;\r\n                }\r\n                else {\r\n                    var viewItem = _this.viewItems[index + 1];\r\n                    minDelta = (viewItem.size - viewItem.maximumSize) / 2;\r\n                    maxDelta = (viewItem.size - viewItem.minimumSize) / 2;\r\n                }\r\n            }\r\n            var snapBefore;\r\n            var snapAfter;\r\n            if (!alt) {\r\n                var upIndexes = range(index, -1);\r\n                var downIndexes = range(index + 1, _this.viewItems.length);\r\n                var minDeltaUp = upIndexes.reduce(function (r, i) { return r + (_this.viewItems[i].minimumSize - sizes[i]); }, 0);\r\n                var maxDeltaUp = upIndexes.reduce(function (r, i) { return r + (_this.viewItems[i].viewMaximumSize - sizes[i]); }, 0);\r\n                var maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce(function (r, i) { return r + (sizes[i] - _this.viewItems[i].minimumSize); }, 0);\r\n                var minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce(function (r, i) { return r + (sizes[i] - _this.viewItems[i].viewMaximumSize); }, 0);\r\n                var minDelta_1 = Math.max(minDeltaUp, minDeltaDown);\r\n                var maxDelta_1 = Math.min(maxDeltaDown, maxDeltaUp);\r\n                var snapBeforeIndex = _this.findFirstSnapIndex(upIndexes);\r\n                var snapAfterIndex = _this.findFirstSnapIndex(downIndexes);\r\n                if (typeof snapBeforeIndex === 'number') {\r\n                    var viewItem = _this.viewItems[snapBeforeIndex];\r\n                    var halfSize = Math.floor(viewItem.viewMinimumSize / 2);\r\n                    snapBefore = {\r\n                        index: snapBeforeIndex,\r\n                        limitDelta: viewItem.visible ? minDelta_1 - halfSize : minDelta_1 + halfSize,\r\n                        size: viewItem.size\r\n                    };\r\n                }\r\n                if (typeof snapAfterIndex === 'number') {\r\n                    var viewItem = _this.viewItems[snapAfterIndex];\r\n                    var halfSize = Math.floor(viewItem.viewMinimumSize / 2);\r\n                    snapAfter = {\r\n                        index: snapAfterIndex,\r\n                        limitDelta: viewItem.visible ? maxDelta_1 + halfSize : maxDelta_1 - halfSize,\r\n                        size: viewItem.size\r\n                    };\r\n                }\r\n            }\r\n            _this.sashDragState = { start: start, current: start, index: index, sizes: sizes, minDelta: minDelta, maxDelta: maxDelta, alt: alt, snapBefore: snapBefore, snapAfter: snapAfter, disposable: disposable };\r\n        };\r\n        resetSashDragState(start, alt);\r\n    };\r\n    SplitView.prototype.onSashChange = function (_a) {\r\n        var current = _a.current;\r\n        var _b = this.sashDragState, index = _b.index, start = _b.start, sizes = _b.sizes, alt = _b.alt, minDelta = _b.minDelta, maxDelta = _b.maxDelta, snapBefore = _b.snapBefore, snapAfter = _b.snapAfter;\r\n        this.sashDragState.current = current;\r\n        var delta = current - start;\r\n        var newDelta = this.resize(index, delta, sizes, undefined, undefined, minDelta, maxDelta, snapBefore, snapAfter);\r\n        if (alt) {\r\n            var isLastSash = index === this.sashItems.length - 1;\r\n            var newSizes = this.viewItems.map(function (i) { return i.size; });\r\n            var viewItemIndex = isLastSash ? index : index + 1;\r\n            var viewItem = this.viewItems[viewItemIndex];\r\n            var newMinDelta = viewItem.size - viewItem.maximumSize;\r\n            var newMaxDelta = viewItem.size - viewItem.minimumSize;\r\n            var resizeIndex = isLastSash ? index - 1 : index + 1;\r\n            this.resize(resizeIndex, -newDelta, newSizes, undefined, undefined, newMinDelta, newMaxDelta);\r\n        }\r\n        this.distributeEmptySpace();\r\n        this.layoutViews();\r\n    };\r\n    SplitView.prototype.onSashEnd = function (index) {\r\n        this._onDidSashChange.fire(index);\r\n        this.sashDragState.disposable.dispose();\r\n        this.saveProportions();\r\n        for (var _i = 0, _a = this.viewItems; _i < _a.length; _i++) {\r\n            var item = _a[_i];\r\n            item.enabled = true;\r\n        }\r\n    };\r\n    SplitView.prototype.onViewChange = function (item, size) {\r\n        var index = this.viewItems.indexOf(item);\r\n        if (index < 0 || index >= this.viewItems.length) {\r\n            return;\r\n        }\r\n        size = typeof size === 'number' ? size : item.size;\r\n        size = clamp(size, item.minimumSize, item.maximumSize);\r\n        if (this.inverseAltBehavior && index > 0) {\r\n            // In this case, we want the view to grow or shrink both sides equally\r\n            // so we just resize the \"left\" side by half and let `resize` do the clamping magic\r\n            this.resize(index - 1, Math.floor((item.size - size) / 2));\r\n            this.distributeEmptySpace();\r\n            this.layoutViews();\r\n        }\r\n        else {\r\n            item.size = size;\r\n            this.relayout([index], undefined);\r\n        }\r\n    };\r\n    SplitView.prototype.resizeView = function (index, size) {\r\n        var _this = this;\r\n        if (this.state !== State.Idle) {\r\n            throw new Error('Cant modify splitview');\r\n        }\r\n        this.state = State.Busy;\r\n        if (index < 0 || index >= this.viewItems.length) {\r\n            return;\r\n        }\r\n        var indexes = range(this.viewItems.length).filter(function (i) { return i !== index; });\r\n        var lowPriorityIndexes = __spreadArrays(indexes.filter(function (i) { return _this.viewItems[i].priority === 1 /* Low */; }), [index]);\r\n        var highPriorityIndexes = indexes.filter(function (i) { return _this.viewItems[i].priority === 2 /* High */; });\r\n        var item = this.viewItems[index];\r\n        size = Math.round(size);\r\n        size = clamp(size, item.minimumSize, Math.min(item.maximumSize, this.size));\r\n        item.size = size;\r\n        this.relayout(lowPriorityIndexes, highPriorityIndexes);\r\n        this.state = State.Idle;\r\n    };\r\n    SplitView.prototype.distributeViewSizes = function () {\r\n        var _this = this;\r\n        var flexibleViewItems = [];\r\n        var flexibleSize = 0;\r\n        for (var _i = 0, _a = this.viewItems; _i < _a.length; _i++) {\r\n            var item = _a[_i];\r\n            if (item.maximumSize - item.minimumSize > 0) {\r\n                flexibleViewItems.push(item);\r\n                flexibleSize += item.size;\r\n            }\r\n        }\r\n        var size = Math.floor(flexibleSize / flexibleViewItems.length);\r\n        for (var _b = 0, flexibleViewItems_1 = flexibleViewItems; _b < flexibleViewItems_1.length; _b++) {\r\n            var item = flexibleViewItems_1[_b];\r\n            item.size = clamp(size, item.minimumSize, item.maximumSize);\r\n        }\r\n        var indexes = range(this.viewItems.length);\r\n        var lowPriorityIndexes = indexes.filter(function (i) { return _this.viewItems[i].priority === 1 /* Low */; });\r\n        var highPriorityIndexes = indexes.filter(function (i) { return _this.viewItems[i].priority === 2 /* High */; });\r\n        this.relayout(lowPriorityIndexes, highPriorityIndexes);\r\n    };\r\n    SplitView.prototype.getViewSize = function (index) {\r\n        if (index < 0 || index >= this.viewItems.length) {\r\n            return -1;\r\n        }\r\n        return this.viewItems[index].size;\r\n    };\r\n    SplitView.prototype.doAddView = function (view, size, index, skipLayout) {\r\n        var _this = this;\r\n        if (index === void 0) { index = this.viewItems.length; }\r\n        if (this.state !== State.Idle) {\r\n            throw new Error('Cant modify splitview');\r\n        }\r\n        this.state = State.Busy;\r\n        // Add view\r\n        var container = dom.$('.split-view-view');\r\n        if (index === this.viewItems.length) {\r\n            this.viewContainer.appendChild(container);\r\n        }\r\n        else {\r\n            this.viewContainer.insertBefore(container, this.viewContainer.children.item(index));\r\n        }\r\n        var onChangeDisposable = view.onDidChange(function (size) { return _this.onViewChange(item, size); });\r\n        var containerDisposable = toDisposable(function () { return _this.viewContainer.removeChild(container); });\r\n        var disposable = combinedDisposable(onChangeDisposable, containerDisposable);\r\n        var viewSize;\r\n        if (typeof size === 'number') {\r\n            viewSize = size;\r\n        }\r\n        else if (size.type === 'split') {\r\n            viewSize = this.getViewSize(size.index) / 2;\r\n        }\r\n        else if (size.type === 'invisible') {\r\n            viewSize = { cachedVisibleSize: size.cachedVisibleSize };\r\n        }\r\n        else {\r\n            viewSize = view.minimumSize;\r\n        }\r\n        var item = this.orientation === 0 /* VERTICAL */\r\n            ? new VerticalViewItem(container, view, viewSize, disposable)\r\n            : new HorizontalViewItem(container, view, viewSize, disposable);\r\n        this.viewItems.splice(index, 0, item);\r\n        // Add sash\r\n        if (this.viewItems.length > 1) {\r\n            var orientation_1 = this.orientation === 0 /* VERTICAL */ ? 1 /* HORIZONTAL */ : 0 /* VERTICAL */;\r\n            var layoutProvider = this.orientation === 0 /* VERTICAL */ ? { getHorizontalSashTop: function (sash) { return _this.getSashPosition(sash); } } : { getVerticalSashLeft: function (sash) { return _this.getSashPosition(sash); } };\r\n            var sash_1 = new Sash(this.sashContainer, layoutProvider, {\r\n                orientation: orientation_1,\r\n                orthogonalStartSash: this.orthogonalStartSash,\r\n                orthogonalEndSash: this.orthogonalEndSash\r\n            });\r\n            var sashEventMapper = this.orientation === 0 /* VERTICAL */\r\n                ? function (e) { return ({ sash: sash_1, start: e.startY, current: e.currentY, alt: e.altKey }); }\r\n                : function (e) { return ({ sash: sash_1, start: e.startX, current: e.currentX, alt: e.altKey }); };\r\n            var onStart = Event.map(sash_1.onDidStart, sashEventMapper);\r\n            var onStartDisposable = onStart(this.onSashStart, this);\r\n            var onChange = Event.map(sash_1.onDidChange, sashEventMapper);\r\n            var onChangeDisposable_1 = onChange(this.onSashChange, this);\r\n            var onEnd = Event.map(sash_1.onDidEnd, function () { return firstIndex(_this.sashItems, function (item) { return item.sash === sash_1; }); });\r\n            var onEndDisposable = onEnd(this.onSashEnd, this);\r\n            var onDidResetDisposable = sash_1.onDidReset(function () {\r\n                var index = firstIndex(_this.sashItems, function (item) { return item.sash === sash_1; });\r\n                var upIndexes = range(index, -1);\r\n                var downIndexes = range(index + 1, _this.viewItems.length);\r\n                var snapBeforeIndex = _this.findFirstSnapIndex(upIndexes);\r\n                var snapAfterIndex = _this.findFirstSnapIndex(downIndexes);\r\n                if (typeof snapBeforeIndex === 'number' && !_this.viewItems[snapBeforeIndex].visible) {\r\n                    return;\r\n                }\r\n                if (typeof snapAfterIndex === 'number' && !_this.viewItems[snapAfterIndex].visible) {\r\n                    return;\r\n                }\r\n                _this._onDidSashReset.fire(index);\r\n            });\r\n            var disposable_1 = combinedDisposable(onStartDisposable, onChangeDisposable_1, onEndDisposable, onDidResetDisposable, sash_1);\r\n            var sashItem = { sash: sash_1, disposable: disposable_1 };\r\n            this.sashItems.splice(index - 1, 0, sashItem);\r\n        }\r\n        container.appendChild(view.element);\r\n        var highPriorityIndexes;\r\n        if (typeof size !== 'number' && size.type === 'split') {\r\n            highPriorityIndexes = [size.index];\r\n        }\r\n        if (!skipLayout) {\r\n            this.relayout([index], highPriorityIndexes);\r\n        }\r\n        this.state = State.Idle;\r\n        if (!skipLayout && typeof size !== 'number' && size.type === 'distribute') {\r\n            this.distributeViewSizes();\r\n        }\r\n    };\r\n    SplitView.prototype.relayout = function (lowPriorityIndexes, highPriorityIndexes) {\r\n        var contentSize = this.viewItems.reduce(function (r, i) { return r + i.size; }, 0);\r\n        this.resize(this.viewItems.length - 1, this.size - contentSize, undefined, lowPriorityIndexes, highPriorityIndexes);\r\n        this.distributeEmptySpace();\r\n        this.layoutViews();\r\n        this.saveProportions();\r\n    };\r\n    SplitView.prototype.resize = function (index, delta, sizes, lowPriorityIndexes, highPriorityIndexes, overloadMinDelta, overloadMaxDelta, snapBefore, snapAfter) {\r\n        var _this = this;\r\n        if (sizes === void 0) { sizes = this.viewItems.map(function (i) { return i.size; }); }\r\n        if (overloadMinDelta === void 0) { overloadMinDelta = Number.NEGATIVE_INFINITY; }\r\n        if (overloadMaxDelta === void 0) { overloadMaxDelta = Number.POSITIVE_INFINITY; }\r\n        if (index < 0 || index >= this.viewItems.length) {\r\n            return 0;\r\n        }\r\n        var upIndexes = range(index, -1);\r\n        var downIndexes = range(index + 1, this.viewItems.length);\r\n        if (highPriorityIndexes) {\r\n            for (var _i = 0, highPriorityIndexes_1 = highPriorityIndexes; _i < highPriorityIndexes_1.length; _i++) {\r\n                var index_1 = highPriorityIndexes_1[_i];\r\n                pushToStart(upIndexes, index_1);\r\n                pushToStart(downIndexes, index_1);\r\n            }\r\n        }\r\n        if (lowPriorityIndexes) {\r\n            for (var _a = 0, lowPriorityIndexes_1 = lowPriorityIndexes; _a < lowPriorityIndexes_1.length; _a++) {\r\n                var index_2 = lowPriorityIndexes_1[_a];\r\n                pushToEnd(upIndexes, index_2);\r\n                pushToEnd(downIndexes, index_2);\r\n            }\r\n        }\r\n        var upItems = upIndexes.map(function (i) { return _this.viewItems[i]; });\r\n        var upSizes = upIndexes.map(function (i) { return sizes[i]; });\r\n        var downItems = downIndexes.map(function (i) { return _this.viewItems[i]; });\r\n        var downSizes = downIndexes.map(function (i) { return sizes[i]; });\r\n        var minDeltaUp = upIndexes.reduce(function (r, i) { return r + (_this.viewItems[i].minimumSize - sizes[i]); }, 0);\r\n        var maxDeltaUp = upIndexes.reduce(function (r, i) { return r + (_this.viewItems[i].maximumSize - sizes[i]); }, 0);\r\n        var maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce(function (r, i) { return r + (sizes[i] - _this.viewItems[i].minimumSize); }, 0);\r\n        var minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce(function (r, i) { return r + (sizes[i] - _this.viewItems[i].maximumSize); }, 0);\r\n        var minDelta = Math.max(minDeltaUp, minDeltaDown, overloadMinDelta);\r\n        var maxDelta = Math.min(maxDeltaDown, maxDeltaUp, overloadMaxDelta);\r\n        var snapped = false;\r\n        if (snapBefore) {\r\n            var snapView = this.viewItems[snapBefore.index];\r\n            var visible = delta >= snapBefore.limitDelta;\r\n            snapped = visible !== snapView.visible;\r\n            snapView.setVisible(visible, snapBefore.size);\r\n        }\r\n        if (!snapped && snapAfter) {\r\n            var snapView = this.viewItems[snapAfter.index];\r\n            var visible = delta < snapAfter.limitDelta;\r\n            snapped = visible !== snapView.visible;\r\n            snapView.setVisible(visible, snapAfter.size);\r\n        }\r\n        if (snapped) {\r\n            return this.resize(index, delta, sizes, lowPriorityIndexes, highPriorityIndexes, overloadMinDelta, overloadMaxDelta);\r\n        }\r\n        delta = clamp(delta, minDelta, maxDelta);\r\n        for (var i = 0, deltaUp = delta; i < upItems.length; i++) {\r\n            var item = upItems[i];\r\n            var size = clamp(upSizes[i] + deltaUp, item.minimumSize, item.maximumSize);\r\n            var viewDelta = size - upSizes[i];\r\n            deltaUp -= viewDelta;\r\n            item.size = size;\r\n        }\r\n        for (var i = 0, deltaDown = delta; i < downItems.length; i++) {\r\n            var item = downItems[i];\r\n            var size = clamp(downSizes[i] - deltaDown, item.minimumSize, item.maximumSize);\r\n            var viewDelta = size - downSizes[i];\r\n            deltaDown += viewDelta;\r\n            item.size = size;\r\n        }\r\n        return delta;\r\n    };\r\n    SplitView.prototype.distributeEmptySpace = function (lowPriorityIndex) {\r\n        var _this = this;\r\n        var contentSize = this.viewItems.reduce(function (r, i) { return r + i.size; }, 0);\r\n        var emptyDelta = this.size - contentSize;\r\n        var indexes = range(this.viewItems.length - 1, -1);\r\n        var lowPriorityIndexes = indexes.filter(function (i) { return _this.viewItems[i].priority === 1 /* Low */; });\r\n        var highPriorityIndexes = indexes.filter(function (i) { return _this.viewItems[i].priority === 2 /* High */; });\r\n        for (var _i = 0, highPriorityIndexes_2 = highPriorityIndexes; _i < highPriorityIndexes_2.length; _i++) {\r\n            var index = highPriorityIndexes_2[_i];\r\n            pushToStart(indexes, index);\r\n        }\r\n        for (var _a = 0, lowPriorityIndexes_2 = lowPriorityIndexes; _a < lowPriorityIndexes_2.length; _a++) {\r\n            var index = lowPriorityIndexes_2[_a];\r\n            pushToEnd(indexes, index);\r\n        }\r\n        if (typeof lowPriorityIndex === 'number') {\r\n            pushToEnd(indexes, lowPriorityIndex);\r\n        }\r\n        for (var i = 0; emptyDelta !== 0 && i < indexes.length; i++) {\r\n            var item = this.viewItems[indexes[i]];\r\n            var size = clamp(item.size + emptyDelta, item.minimumSize, item.maximumSize);\r\n            var viewDelta = size - item.size;\r\n            emptyDelta -= viewDelta;\r\n            item.size = size;\r\n        }\r\n    };\r\n    SplitView.prototype.layoutViews = function () {\r\n        // Save new content size\r\n        this.contentSize = this.viewItems.reduce(function (r, i) { return r + i.size; }, 0);\r\n        // Layout views\r\n        var offset = 0;\r\n        for (var _i = 0, _a = this.viewItems; _i < _a.length; _i++) {\r\n            var viewItem = _a[_i];\r\n            viewItem.layout(offset, this.layoutContext);\r\n            offset += viewItem.size;\r\n        }\r\n        // Layout sashes\r\n        this.sashItems.forEach(function (item) { return item.sash.layout(); });\r\n        this.updateSashEnablement();\r\n    };\r\n    SplitView.prototype.updateSashEnablement = function () {\r\n        var previous = false;\r\n        var collapsesDown = this.viewItems.map(function (i) { return previous = (i.size - i.minimumSize > 0) || previous; });\r\n        previous = false;\r\n        var expandsDown = this.viewItems.map(function (i) { return previous = (i.maximumSize - i.size > 0) || previous; });\r\n        var reverseViews = __spreadArrays(this.viewItems).reverse();\r\n        previous = false;\r\n        var collapsesUp = reverseViews.map(function (i) { return previous = (i.size - i.minimumSize > 0) || previous; }).reverse();\r\n        previous = false;\r\n        var expandsUp = reverseViews.map(function (i) { return previous = (i.maximumSize - i.size > 0) || previous; }).reverse();\r\n        var position = 0;\r\n        for (var index = 0; index < this.sashItems.length; index++) {\r\n            var sash = this.sashItems[index].sash;\r\n            var viewItem = this.viewItems[index];\r\n            position += viewItem.size;\r\n            var min = !(collapsesDown[index] && expandsUp[index + 1]);\r\n            var max = !(expandsDown[index] && collapsesUp[index + 1]);\r\n            if (min && max) {\r\n                var upIndexes = range(index, -1);\r\n                var downIndexes = range(index + 1, this.viewItems.length);\r\n                var snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\r\n                var snapAfterIndex = this.findFirstSnapIndex(downIndexes);\r\n                var snappedBefore = typeof snapBeforeIndex === 'number' && !this.viewItems[snapBeforeIndex].visible;\r\n                var snappedAfter = typeof snapAfterIndex === 'number' && !this.viewItems[snapAfterIndex].visible;\r\n                if (snappedBefore && collapsesUp[index] && (position > 0 || this.startSnappingEnabled)) {\r\n                    sash.state = 1 /* Minimum */;\r\n                }\r\n                else if (snappedAfter && collapsesDown[index] && (position < this.contentSize || this.endSnappingEnabled)) {\r\n                    sash.state = 2 /* Maximum */;\r\n                }\r\n                else {\r\n                    sash.state = 0 /* Disabled */;\r\n                }\r\n            }\r\n            else if (min && !max) {\r\n                sash.state = 1 /* Minimum */;\r\n            }\r\n            else if (!min && max) {\r\n                sash.state = 2 /* Maximum */;\r\n            }\r\n            else {\r\n                sash.state = 3 /* Enabled */;\r\n            }\r\n        }\r\n    };\r\n    SplitView.prototype.getSashPosition = function (sash) {\r\n        var position = 0;\r\n        for (var i = 0; i < this.sashItems.length; i++) {\r\n            position += this.viewItems[i].size;\r\n            if (this.sashItems[i].sash === sash) {\r\n                return Math.min(position, this.contentSize - 2);\r\n            }\r\n        }\r\n        return 0;\r\n    };\r\n    SplitView.prototype.findFirstSnapIndex = function (indexes) {\r\n        // visible views first\r\n        for (var _i = 0, indexes_1 = indexes; _i < indexes_1.length; _i++) {\r\n            var index = indexes_1[_i];\r\n            var viewItem = this.viewItems[index];\r\n            if (!viewItem.visible) {\r\n                continue;\r\n            }\r\n            if (viewItem.snap) {\r\n                return index;\r\n            }\r\n        }\r\n        // then, hidden views\r\n        for (var _a = 0, indexes_2 = indexes; _a < indexes_2.length; _a++) {\r\n            var index = indexes_2[_a];\r\n            var viewItem = this.viewItems[index];\r\n            if (viewItem.visible && viewItem.maximumSize - viewItem.minimumSize > 0) {\r\n                return undefined;\r\n            }\r\n            if (!viewItem.visible && viewItem.snap) {\r\n                return index;\r\n            }\r\n        }\r\n        return undefined;\r\n    };\r\n    SplitView.prototype.dispose = function () {\r\n        _super.prototype.dispose.call(this);\r\n        this.viewItems.forEach(function (i) { return i.dispose(); });\r\n        this.viewItems = [];\r\n        this.sashItems.forEach(function (i) { return i.disposable.dispose(); });\r\n        this.sashItems = [];\r\n    };\r\n    return SplitView;\r\n}(Disposable));\r\nexport { SplitView };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport './countBadge.css';\r\nimport { $, append } from '../../dom.js';\r\nimport { format } from '../../../common/strings.js';\r\nimport { Color } from '../../../common/color.js';\r\nimport { mixin } from '../../../common/objects.js';\r\nvar defaultOpts = {\r\n    badgeBackground: Color.fromHex('#4D4D4D'),\r\n    badgeForeground: Color.fromHex('#FFFFFF')\r\n};\r\nvar CountBadge = /** @class */ (function () {\r\n    function CountBadge(container, options) {\r\n        this.count = 0;\r\n        this.options = options || Object.create(null);\r\n        mixin(this.options, defaultOpts, false);\r\n        this.badgeBackground = this.options.badgeBackground;\r\n        this.badgeForeground = this.options.badgeForeground;\r\n        this.badgeBorder = this.options.badgeBorder;\r\n        this.element = append(container, $('.monaco-count-badge'));\r\n        this.countFormat = this.options.countFormat || '{0}';\r\n        this.titleFormat = this.options.titleFormat || '';\r\n        this.setCount(this.options.count || 0);\r\n    }\r\n    CountBadge.prototype.setCount = function (count) {\r\n        this.count = count;\r\n        this.render();\r\n    };\r\n    CountBadge.prototype.setTitleFormat = function (titleFormat) {\r\n        this.titleFormat = titleFormat;\r\n        this.render();\r\n    };\r\n    CountBadge.prototype.render = function () {\r\n        this.element.textContent = format(this.countFormat, this.count);\r\n        this.element.title = format(this.titleFormat, this.count);\r\n        this.applyStyles();\r\n    };\r\n    CountBadge.prototype.style = function (styles) {\r\n        this.badgeBackground = styles.badgeBackground;\r\n        this.badgeForeground = styles.badgeForeground;\r\n        this.badgeBorder = styles.badgeBorder;\r\n        this.applyStyles();\r\n    };\r\n    CountBadge.prototype.applyStyles = function () {\r\n        if (this.element) {\r\n            var background = this.badgeBackground ? this.badgeBackground.toString() : '';\r\n            var foreground = this.badgeForeground ? this.badgeForeground.toString() : '';\r\n            var border = this.badgeBorder ? this.badgeBorder.toString() : '';\r\n            this.element.style.backgroundColor = background;\r\n            this.element.style.color = foreground;\r\n            this.element.style.borderWidth = border ? '1px' : '';\r\n            this.element.style.borderStyle = border ? 'solid' : '';\r\n            this.element.style.borderColor = border;\r\n        }\r\n    };\r\n    return CountBadge;\r\n}());\r\nexport { CountBadge };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { ReferencesModel, FileReferences, OneReference } from '../referencesModel.js';\r\nimport { ITextModelService } from '../../../common/services/resolverService.js';\r\nimport { IconLabel } from '../../../../base/browser/ui/iconLabel/iconLabel.js';\r\nimport { CountBadge } from '../../../../base/browser/ui/countBadge/countBadge.js';\r\nimport { ILabelService } from '../../../../platform/label/common/label.js';\r\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\r\nimport { attachBadgeStyler } from '../../../../platform/theme/common/styler.js';\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport { localize } from '../../../../nls.js';\r\nimport { getBaseLabel } from '../../../../base/common/labels.js';\r\nimport { dirname, basename } from '../../../../base/common/resources.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\r\nimport { FuzzyScore, createMatches } from '../../../../base/common/filters.js';\r\nimport { HighlightedLabel } from '../../../../base/browser/ui/highlightedlabel/highlightedLabel.js';\r\nvar DataSource = /** @class */ (function () {\r\n    function DataSource(_resolverService) {\r\n        this._resolverService = _resolverService;\r\n    }\r\n    DataSource.prototype.hasChildren = function (element) {\r\n        if (element instanceof ReferencesModel) {\r\n            return true;\r\n        }\r\n        if (element instanceof FileReferences && !element.failure) {\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    DataSource.prototype.getChildren = function (element) {\r\n        if (element instanceof ReferencesModel) {\r\n            return element.groups;\r\n        }\r\n        if (element instanceof FileReferences) {\r\n            return element.resolve(this._resolverService).then(function (val) {\r\n                // if (element.failure) {\r\n                // \t// refresh the element on failure so that\r\n                // \t// we can update its rendering\r\n                // \treturn tree.refresh(element).then(() => val.children);\r\n                // }\r\n                return val.children;\r\n            });\r\n        }\r\n        throw new Error('bad tree');\r\n    };\r\n    DataSource = __decorate([\r\n        __param(0, ITextModelService)\r\n    ], DataSource);\r\n    return DataSource;\r\n}());\r\nexport { DataSource };\r\n//#endregion\r\nvar Delegate = /** @class */ (function () {\r\n    function Delegate() {\r\n    }\r\n    Delegate.prototype.getHeight = function () {\r\n        return 23;\r\n    };\r\n    Delegate.prototype.getTemplateId = function (element) {\r\n        if (element instanceof FileReferences) {\r\n            return FileReferencesRenderer.id;\r\n        }\r\n        else {\r\n            return OneReferenceRenderer.id;\r\n        }\r\n    };\r\n    return Delegate;\r\n}());\r\nexport { Delegate };\r\nvar StringRepresentationProvider = /** @class */ (function () {\r\n    function StringRepresentationProvider(_keybindingService) {\r\n        this._keybindingService = _keybindingService;\r\n    }\r\n    StringRepresentationProvider.prototype.getKeyboardNavigationLabel = function (element) {\r\n        if (element instanceof OneReference) {\r\n            var preview = element.parent.preview;\r\n            var parts = preview && preview.preview(element.range);\r\n            if (parts) {\r\n                return parts.value;\r\n            }\r\n        }\r\n        // FileReferences or unresolved OneReference\r\n        return basename(element.uri);\r\n    };\r\n    StringRepresentationProvider = __decorate([\r\n        __param(0, IKeybindingService)\r\n    ], StringRepresentationProvider);\r\n    return StringRepresentationProvider;\r\n}());\r\nexport { StringRepresentationProvider };\r\nvar IdentityProvider = /** @class */ (function () {\r\n    function IdentityProvider() {\r\n    }\r\n    IdentityProvider.prototype.getId = function (element) {\r\n        return element instanceof OneReference ? element.id : element.uri;\r\n    };\r\n    return IdentityProvider;\r\n}());\r\nexport { IdentityProvider };\r\n//#region render: File\r\nvar FileReferencesTemplate = /** @class */ (function (_super) {\r\n    __extends(FileReferencesTemplate, _super);\r\n    function FileReferencesTemplate(container, _uriLabel, themeService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._uriLabel = _uriLabel;\r\n        var parent = document.createElement('div');\r\n        dom.addClass(parent, 'reference-file');\r\n        _this.file = _this._register(new IconLabel(parent, { supportHighlights: true }));\r\n        _this.badge = new CountBadge(dom.append(parent, dom.$('.count')));\r\n        _this._register(attachBadgeStyler(_this.badge, themeService));\r\n        container.appendChild(parent);\r\n        return _this;\r\n    }\r\n    FileReferencesTemplate.prototype.set = function (element, matches) {\r\n        var parent = dirname(element.uri);\r\n        this.file.setLabel(getBaseLabel(element.uri), this._uriLabel.getUriLabel(parent, { relative: true }), { title: this._uriLabel.getUriLabel(element.uri), matches: matches });\r\n        var len = element.children.length;\r\n        this.badge.setCount(len);\r\n        if (element.failure) {\r\n            this.badge.setTitleFormat(localize('referencesFailre', \"Failed to resolve file.\"));\r\n        }\r\n        else if (len > 1) {\r\n            this.badge.setTitleFormat(localize('referencesCount', \"{0} references\", len));\r\n        }\r\n        else {\r\n            this.badge.setTitleFormat(localize('referenceCount', \"{0} reference\", len));\r\n        }\r\n    };\r\n    FileReferencesTemplate = __decorate([\r\n        __param(1, ILabelService),\r\n        __param(2, IThemeService)\r\n    ], FileReferencesTemplate);\r\n    return FileReferencesTemplate;\r\n}(Disposable));\r\nvar FileReferencesRenderer = /** @class */ (function () {\r\n    function FileReferencesRenderer(_instantiationService) {\r\n        this._instantiationService = _instantiationService;\r\n        this.templateId = FileReferencesRenderer.id;\r\n    }\r\n    FileReferencesRenderer.prototype.renderTemplate = function (container) {\r\n        return this._instantiationService.createInstance(FileReferencesTemplate, container);\r\n    };\r\n    FileReferencesRenderer.prototype.renderElement = function (node, index, template) {\r\n        template.set(node.element, createMatches(node.filterData));\r\n    };\r\n    FileReferencesRenderer.prototype.disposeTemplate = function (templateData) {\r\n        templateData.dispose();\r\n    };\r\n    FileReferencesRenderer.id = 'FileReferencesRenderer';\r\n    FileReferencesRenderer = __decorate([\r\n        __param(0, IInstantiationService)\r\n    ], FileReferencesRenderer);\r\n    return FileReferencesRenderer;\r\n}());\r\nexport { FileReferencesRenderer };\r\n//#endregion\r\n//#region render: Reference\r\nvar OneReferenceTemplate = /** @class */ (function () {\r\n    function OneReferenceTemplate(container) {\r\n        this.label = new HighlightedLabel(container, false);\r\n    }\r\n    OneReferenceTemplate.prototype.set = function (element, score) {\r\n        var filePreview = element.parent.preview;\r\n        var preview = filePreview && filePreview.preview(element.range);\r\n        if (!preview) {\r\n            // this means we FAILED to resolve the document...\r\n            this.label.set(basename(element.uri) + \":\" + (element.range.startLineNumber + 1) + \":\" + (element.range.startColumn + 1));\r\n        }\r\n        else {\r\n            // render search match as highlight unless\r\n            // we have score, then render the score\r\n            var value = preview.value, highlight = preview.highlight;\r\n            if (score && !FuzzyScore.isDefault(score)) {\r\n                dom.toggleClass(this.label.element, 'referenceMatch', false);\r\n                this.label.set(value, createMatches(score));\r\n            }\r\n            else {\r\n                dom.toggleClass(this.label.element, 'referenceMatch', true);\r\n                this.label.set(value, [highlight]);\r\n            }\r\n        }\r\n    };\r\n    return OneReferenceTemplate;\r\n}());\r\nvar OneReferenceRenderer = /** @class */ (function () {\r\n    function OneReferenceRenderer() {\r\n        this.templateId = OneReferenceRenderer.id;\r\n    }\r\n    OneReferenceRenderer.prototype.renderTemplate = function (container) {\r\n        return new OneReferenceTemplate(container);\r\n    };\r\n    OneReferenceRenderer.prototype.renderElement = function (node, index, templateData) {\r\n        templateData.set(node.element, node.filterData);\r\n    };\r\n    OneReferenceRenderer.prototype.disposeTemplate = function () {\r\n    };\r\n    OneReferenceRenderer.id = 'OneReferenceRenderer';\r\n    return OneReferenceRenderer;\r\n}());\r\nexport { OneReferenceRenderer };\r\n//#endregion\r\nvar AriaProvider = /** @class */ (function () {\r\n    function AriaProvider() {\r\n    }\r\n    AriaProvider.prototype.getAriaLabel = function (element) {\r\n        return element.ariaMessage;\r\n    };\r\n    return AriaProvider;\r\n}());\r\nexport { AriaProvider };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport './referencesWidget.css';\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport { Color } from '../../../../base/common/color.js';\r\nimport { Emitter, Event } from '../../../../base/common/event.js';\r\nimport { dispose, DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { Schemas } from '../../../../base/common/network.js';\r\nimport { basenameOrAuthority, dirname, isEqual } from '../../../../base/common/resources.js';\r\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { ModelDecorationOptions, TextModel } from '../../../common/model/textModel.js';\r\nimport { ITextModelService } from '../../../common/services/resolverService.js';\r\nimport { AriaProvider, DataSource, Delegate, FileReferencesRenderer, OneReferenceRenderer, StringRepresentationProvider, IdentityProvider } from './referencesTree.js';\r\nimport * as nls from '../../../../nls.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { ILabelService } from '../../../../platform/label/common/label.js';\r\nimport { WorkbenchAsyncDataTree } from '../../../../platform/list/browser/listService.js';\r\nimport { activeContrastBorder } from '../../../../platform/theme/common/colorRegistry.js';\r\nimport { IThemeService, registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\r\nimport * as peekView from '../../peekView/peekView.js';\r\nimport { FileReferences, OneReference } from '../referencesModel.js';\r\nimport { SplitView, Sizing } from '../../../../base/browser/ui/splitview/splitview.js';\r\nvar DecorationsManager = /** @class */ (function () {\r\n    function DecorationsManager(_editor, _model) {\r\n        var _this = this;\r\n        this._editor = _editor;\r\n        this._model = _model;\r\n        this._decorations = new Map();\r\n        this._decorationIgnoreSet = new Set();\r\n        this._callOnDispose = new DisposableStore();\r\n        this._callOnModelChange = new DisposableStore();\r\n        this._callOnDispose.add(this._editor.onDidChangeModel(function () { return _this._onModelChanged(); }));\r\n        this._onModelChanged();\r\n    }\r\n    DecorationsManager.prototype.dispose = function () {\r\n        this._callOnModelChange.dispose();\r\n        this._callOnDispose.dispose();\r\n        this.removeDecorations();\r\n    };\r\n    DecorationsManager.prototype._onModelChanged = function () {\r\n        this._callOnModelChange.clear();\r\n        var model = this._editor.getModel();\r\n        if (model) {\r\n            for (var _i = 0, _a = this._model.groups; _i < _a.length; _i++) {\r\n                var ref = _a[_i];\r\n                if (isEqual(ref.uri, model.uri)) {\r\n                    this._addDecorations(ref);\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    DecorationsManager.prototype._addDecorations = function (reference) {\r\n        var _this = this;\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(function (event) { return _this._onDecorationChanged(); }));\r\n        var newDecorations = [];\r\n        var newDecorationsActualIndex = [];\r\n        for (var i = 0, len = reference.children.length; i < len; i++) {\r\n            var oneReference = reference.children[i];\r\n            if (this._decorationIgnoreSet.has(oneReference.id)) {\r\n                continue;\r\n            }\r\n            newDecorations.push({\r\n                range: oneReference.range,\r\n                options: DecorationsManager.DecorationOptions\r\n            });\r\n            newDecorationsActualIndex.push(i);\r\n        }\r\n        var decorations = this._editor.deltaDecorations([], newDecorations);\r\n        for (var i = 0; i < decorations.length; i++) {\r\n            this._decorations.set(decorations[i], reference.children[newDecorationsActualIndex[i]]);\r\n        }\r\n    };\r\n    DecorationsManager.prototype._onDecorationChanged = function () {\r\n        var _this = this;\r\n        var toRemove = [];\r\n        var model = this._editor.getModel();\r\n        if (!model) {\r\n            return;\r\n        }\r\n        this._decorations.forEach(function (reference, decorationId) {\r\n            var newRange = model.getDecorationRange(decorationId);\r\n            if (!newRange) {\r\n                return;\r\n            }\r\n            var ignore = false;\r\n            if (Range.equalsRange(newRange, reference.range)) {\r\n                return;\r\n            }\r\n            else if (Range.spansMultipleLines(newRange)) {\r\n                ignore = true;\r\n            }\r\n            else {\r\n                var lineLength = reference.range.endColumn - reference.range.startColumn;\r\n                var newLineLength = newRange.endColumn - newRange.startColumn;\r\n                if (lineLength !== newLineLength) {\r\n                    ignore = true;\r\n                }\r\n            }\r\n            if (ignore) {\r\n                _this._decorationIgnoreSet.add(reference.id);\r\n                toRemove.push(decorationId);\r\n            }\r\n            else {\r\n                reference.range = newRange;\r\n            }\r\n        });\r\n        for (var i = 0, len = toRemove.length; i < len; i++) {\r\n            this._decorations.delete(toRemove[i]);\r\n        }\r\n        this._editor.deltaDecorations(toRemove, []);\r\n    };\r\n    DecorationsManager.prototype.removeDecorations = function () {\r\n        var toRemove = [];\r\n        this._decorations.forEach(function (value, key) {\r\n            toRemove.push(key);\r\n        });\r\n        this._editor.deltaDecorations(toRemove, []);\r\n        this._decorations.clear();\r\n    };\r\n    DecorationsManager.DecorationOptions = ModelDecorationOptions.register({\r\n        stickiness: 1 /* NeverGrowsWhenTypingAtEdges */,\r\n        className: 'reference-decoration'\r\n    });\r\n    return DecorationsManager;\r\n}());\r\nvar LayoutData = /** @class */ (function () {\r\n    function LayoutData() {\r\n        this.ratio = 0.7;\r\n        this.heightInLines = 18;\r\n    }\r\n    LayoutData.fromJSON = function (raw) {\r\n        var ratio;\r\n        var heightInLines;\r\n        try {\r\n            var data = JSON.parse(raw);\r\n            ratio = data.ratio;\r\n            heightInLines = data.heightInLines;\r\n        }\r\n        catch (_a) {\r\n            //\r\n        }\r\n        return {\r\n            ratio: ratio || 0.7,\r\n            heightInLines: heightInLines || 18\r\n        };\r\n    };\r\n    return LayoutData;\r\n}());\r\nexport { LayoutData };\r\n/**\r\n * ZoneWidget that is shown inside the editor\r\n */\r\nvar ReferenceWidget = /** @class */ (function (_super) {\r\n    __extends(ReferenceWidget, _super);\r\n    function ReferenceWidget(editor, _defaultTreeKeyboardSupport, layoutData, themeService, _textModelResolverService, _instantiationService, _peekViewService, _uriLabel) {\r\n        var _this = _super.call(this, editor, { showFrame: false, showArrow: true, isResizeable: true, isAccessible: true }) || this;\r\n        _this._defaultTreeKeyboardSupport = _defaultTreeKeyboardSupport;\r\n        _this.layoutData = layoutData;\r\n        _this._textModelResolverService = _textModelResolverService;\r\n        _this._instantiationService = _instantiationService;\r\n        _this._peekViewService = _peekViewService;\r\n        _this._uriLabel = _uriLabel;\r\n        _this._disposeOnNewModel = new DisposableStore();\r\n        _this._callOnDispose = new DisposableStore();\r\n        _this._onDidSelectReference = new Emitter();\r\n        _this.onDidSelectReference = _this._onDidSelectReference.event;\r\n        _this._dim = { height: 0, width: 0 };\r\n        _this._applyTheme(themeService.getTheme());\r\n        _this._callOnDispose.add(themeService.onThemeChange(_this._applyTheme.bind(_this)));\r\n        _this._peekViewService.addExclusiveWidget(editor, _this);\r\n        _this.create();\r\n        return _this;\r\n    }\r\n    ReferenceWidget.prototype.dispose = function () {\r\n        this.setModel(undefined);\r\n        this._callOnDispose.dispose();\r\n        this._disposeOnNewModel.dispose();\r\n        dispose(this._preview);\r\n        dispose(this._previewNotAvailableMessage);\r\n        dispose(this._tree);\r\n        dispose(this._previewModelReference);\r\n        this._splitView.dispose();\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    ReferenceWidget.prototype._applyTheme = function (theme) {\r\n        var borderColor = theme.getColor(peekView.peekViewBorder) || Color.transparent;\r\n        this.style({\r\n            arrowColor: borderColor,\r\n            frameColor: borderColor,\r\n            headerBackgroundColor: theme.getColor(peekView.peekViewTitleBackground) || Color.transparent,\r\n            primaryHeadingColor: theme.getColor(peekView.peekViewTitleForeground),\r\n            secondaryHeadingColor: theme.getColor(peekView.peekViewTitleInfoForeground)\r\n        });\r\n    };\r\n    ReferenceWidget.prototype.show = function (where) {\r\n        this.editor.revealRangeInCenterIfOutsideViewport(where, 0 /* Smooth */);\r\n        _super.prototype.show.call(this, where, this.layoutData.heightInLines || 18);\r\n    };\r\n    ReferenceWidget.prototype.focus = function () {\r\n        this._tree.domFocus();\r\n    };\r\n    ReferenceWidget.prototype._onTitleClick = function (e) {\r\n        if (this._preview && this._preview.getModel()) {\r\n            this._onDidSelectReference.fire({\r\n                element: this._getFocusedReference(),\r\n                kind: e.ctrlKey || e.metaKey || e.altKey ? 'side' : 'open',\r\n                source: 'title'\r\n            });\r\n        }\r\n    };\r\n    ReferenceWidget.prototype._fillBody = function (containerElement) {\r\n        var _this = this;\r\n        this.setCssClass('reference-zone-widget');\r\n        // message pane\r\n        this._messageContainer = dom.append(containerElement, dom.$('div.messages'));\r\n        dom.hide(this._messageContainer);\r\n        this._splitView = new SplitView(containerElement, { orientation: 1 /* HORIZONTAL */ });\r\n        // editor\r\n        this._previewContainer = dom.append(containerElement, dom.$('div.preview.inline'));\r\n        var options = {\r\n            scrollBeyondLastLine: false,\r\n            scrollbar: {\r\n                verticalScrollbarSize: 14,\r\n                horizontal: 'auto',\r\n                useShadows: true,\r\n                verticalHasArrows: false,\r\n                horizontalHasArrows: false,\r\n                alwaysConsumeMouseWheel: false\r\n            },\r\n            overviewRulerLanes: 2,\r\n            fixedOverflowWidgets: true,\r\n            minimap: {\r\n                enabled: false\r\n            }\r\n        };\r\n        this._preview = this._instantiationService.createInstance(EmbeddedCodeEditorWidget, this._previewContainer, options, this.editor);\r\n        dom.hide(this._previewContainer);\r\n        this._previewNotAvailableMessage = TextModel.createFromString(nls.localize('missingPreviewMessage', \"no preview available\"));\r\n        // tree\r\n        this._treeContainer = dom.append(containerElement, dom.$('div.ref-tree.inline'));\r\n        var treeOptions = {\r\n            ariaLabel: nls.localize('treeAriaLabel', \"References\"),\r\n            keyboardSupport: this._defaultTreeKeyboardSupport,\r\n            accessibilityProvider: new AriaProvider(),\r\n            keyboardNavigationLabelProvider: this._instantiationService.createInstance(StringRepresentationProvider),\r\n            identityProvider: new IdentityProvider(),\r\n            overrideStyles: {\r\n                listBackground: peekView.peekViewResultsBackground\r\n            }\r\n        };\r\n        this._tree = this._instantiationService.createInstance(WorkbenchAsyncDataTree, 'ReferencesWidget', this._treeContainer, new Delegate(), [\r\n            this._instantiationService.createInstance(FileReferencesRenderer),\r\n            this._instantiationService.createInstance(OneReferenceRenderer),\r\n        ], this._instantiationService.createInstance(DataSource), treeOptions);\r\n        // split stuff\r\n        this._splitView.addView({\r\n            onDidChange: Event.None,\r\n            element: this._previewContainer,\r\n            minimumSize: 200,\r\n            maximumSize: Number.MAX_VALUE,\r\n            layout: function (width) {\r\n                _this._preview.layout({ height: _this._dim.height, width: width });\r\n            }\r\n        }, Sizing.Distribute);\r\n        this._splitView.addView({\r\n            onDidChange: Event.None,\r\n            element: this._treeContainer,\r\n            minimumSize: 100,\r\n            maximumSize: Number.MAX_VALUE,\r\n            layout: function (width) {\r\n                _this._treeContainer.style.height = _this._dim.height + \"px\";\r\n                _this._treeContainer.style.width = width + \"px\";\r\n                _this._tree.layout(_this._dim.height, width);\r\n            }\r\n        }, Sizing.Distribute);\r\n        this._disposables.add(this._splitView.onDidSashChange(function () {\r\n            if (_this._dim.width) {\r\n                _this.layoutData.ratio = _this._splitView.getViewSize(0) / _this._dim.width;\r\n            }\r\n        }, undefined));\r\n        // listen on selection and focus\r\n        var onEvent = function (element, kind) {\r\n            if (element instanceof OneReference) {\r\n                if (kind === 'show') {\r\n                    _this._revealReference(element, false);\r\n                }\r\n                _this._onDidSelectReference.fire({ element: element, kind: kind, source: 'tree' });\r\n            }\r\n        };\r\n        this._tree.onDidChangeFocus(function (e) {\r\n            onEvent(e.elements[0], 'show');\r\n        });\r\n        this._tree.onDidOpen(function (e) {\r\n            if (e.browserEvent instanceof MouseEvent && (e.browserEvent.ctrlKey || e.browserEvent.metaKey || e.browserEvent.altKey)) {\r\n                // modifier-click -> open to the side\r\n                onEvent(e.elements[0], 'side');\r\n            }\r\n            else if (e.browserEvent instanceof KeyboardEvent || (e.browserEvent instanceof MouseEvent && e.browserEvent.detail === 2) || e.browserEvent.tapCount === 2) {\r\n                // keybinding (list service command)\r\n                // OR double click\r\n                // OR double tap\r\n                // -> close widget and goto target\r\n                onEvent(e.elements[0], 'goto');\r\n            }\r\n            else {\r\n                // preview location\r\n                onEvent(e.elements[0], 'show');\r\n            }\r\n        });\r\n        dom.hide(this._treeContainer);\r\n    };\r\n    ReferenceWidget.prototype._onWidth = function (width) {\r\n        if (this._dim) {\r\n            this._doLayoutBody(this._dim.height, width);\r\n        }\r\n    };\r\n    ReferenceWidget.prototype._doLayoutBody = function (heightInPixel, widthInPixel) {\r\n        _super.prototype._doLayoutBody.call(this, heightInPixel, widthInPixel);\r\n        this._dim = { height: heightInPixel, width: widthInPixel };\r\n        this.layoutData.heightInLines = this._viewZone ? this._viewZone.heightInLines : this.layoutData.heightInLines;\r\n        this._splitView.layout(widthInPixel);\r\n        this._splitView.resizeView(0, widthInPixel * this.layoutData.ratio);\r\n    };\r\n    ReferenceWidget.prototype.setSelection = function (selection) {\r\n        var _this = this;\r\n        return this._revealReference(selection, true).then(function () {\r\n            if (!_this._model) {\r\n                // disposed\r\n                return;\r\n            }\r\n            // show in tree\r\n            _this._tree.setSelection([selection]);\r\n            _this._tree.setFocus([selection]);\r\n        });\r\n    };\r\n    ReferenceWidget.prototype.setModel = function (newModel) {\r\n        // clean up\r\n        this._disposeOnNewModel.clear();\r\n        this._model = newModel;\r\n        if (this._model) {\r\n            return this._onNewModel();\r\n        }\r\n        return Promise.resolve();\r\n    };\r\n    ReferenceWidget.prototype._onNewModel = function () {\r\n        var _this = this;\r\n        if (!this._model) {\r\n            return Promise.resolve(undefined);\r\n        }\r\n        if (this._model.isEmpty) {\r\n            this.setTitle('');\r\n            this._messageContainer.innerHTML = nls.localize('noResults', \"No results\");\r\n            dom.show(this._messageContainer);\r\n            return Promise.resolve(undefined);\r\n        }\r\n        dom.hide(this._messageContainer);\r\n        this._decorationsManager = new DecorationsManager(this._preview, this._model);\r\n        this._disposeOnNewModel.add(this._decorationsManager);\r\n        // listen on model changes\r\n        this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(function (reference) { return _this._tree.rerender(reference); }));\r\n        // listen on editor\r\n        this._disposeOnNewModel.add(this._preview.onMouseDown(function (e) {\r\n            var event = e.event, target = e.target;\r\n            if (event.detail !== 2) {\r\n                return;\r\n            }\r\n            var element = _this._getFocusedReference();\r\n            if (!element) {\r\n                return;\r\n            }\r\n            _this._onDidSelectReference.fire({\r\n                element: { uri: element.uri, range: target.range },\r\n                kind: (event.ctrlKey || event.metaKey || event.altKey) ? 'side' : 'open',\r\n                source: 'editor'\r\n            });\r\n        }));\r\n        // make sure things are rendered\r\n        dom.addClass(this.container, 'results-loaded');\r\n        dom.show(this._treeContainer);\r\n        dom.show(this._previewContainer);\r\n        this._splitView.layout(this._dim.width);\r\n        this.focus();\r\n        // pick input and a reference to begin with\r\n        return this._tree.setInput(this._model.groups.length === 1 ? this._model.groups[0] : this._model);\r\n    };\r\n    ReferenceWidget.prototype._getFocusedReference = function () {\r\n        var element = this._tree.getFocus()[0];\r\n        if (element instanceof OneReference) {\r\n            return element;\r\n        }\r\n        else if (element instanceof FileReferences) {\r\n            if (element.children.length > 0) {\r\n                return element.children[0];\r\n            }\r\n        }\r\n        return undefined;\r\n    };\r\n    ReferenceWidget.prototype._revealReference = function (reference, revealParent) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var promise, ref, model, scrollType, sel;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        // check if there is anything to do...\r\n                        if (this._revealedReference === reference) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        this._revealedReference = reference;\r\n                        // Update widget header\r\n                        if (reference.uri.scheme !== Schemas.inMemory) {\r\n                            this.setTitle(basenameOrAuthority(reference.uri), this._uriLabel.getUriLabel(dirname(reference.uri)));\r\n                        }\r\n                        else {\r\n                            this.setTitle(nls.localize('peekView.alternateTitle', \"References\"));\r\n                        }\r\n                        promise = this._textModelResolverService.createModelReference(reference.uri);\r\n                        if (!(this._tree.getInput() === reference.parent)) return [3 /*break*/, 1];\r\n                        this._tree.reveal(reference);\r\n                        return [3 /*break*/, 3];\r\n                    case 1:\r\n                        if (revealParent) {\r\n                            this._tree.reveal(reference.parent);\r\n                        }\r\n                        return [4 /*yield*/, this._tree.expand(reference.parent)];\r\n                    case 2:\r\n                        _a.sent();\r\n                        this._tree.reveal(reference);\r\n                        _a.label = 3;\r\n                    case 3: return [4 /*yield*/, promise];\r\n                    case 4:\r\n                        ref = _a.sent();\r\n                        if (!this._model) {\r\n                            // disposed\r\n                            ref.dispose();\r\n                            return [2 /*return*/];\r\n                        }\r\n                        dispose(this._previewModelReference);\r\n                        model = ref.object;\r\n                        if (model) {\r\n                            scrollType = this._preview.getModel() === model.textEditorModel ? 0 /* Smooth */ : 1 /* Immediate */;\r\n                            sel = Range.lift(reference.range).collapseToStart();\r\n                            this._previewModelReference = ref;\r\n                            this._preview.setModel(model.textEditorModel);\r\n                            this._preview.setSelection(sel);\r\n                            this._preview.revealRangeInCenter(sel, scrollType);\r\n                        }\r\n                        else {\r\n                            this._preview.setModel(this._previewNotAvailableMessage);\r\n                            ref.dispose();\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ReferenceWidget = __decorate([\r\n        __param(3, IThemeService),\r\n        __param(4, ITextModelService),\r\n        __param(5, IInstantiationService),\r\n        __param(6, peekView.IPeekViewService),\r\n        __param(7, ILabelService)\r\n    ], ReferenceWidget);\r\n    return ReferenceWidget;\r\n}(peekView.PeekViewWidget));\r\nexport { ReferenceWidget };\r\n// theming\r\nregisterThemingParticipant(function (theme, collector) {\r\n    var findMatchHighlightColor = theme.getColor(peekView.peekViewResultsMatchHighlight);\r\n    if (findMatchHighlightColor) {\r\n        collector.addRule(\".monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight { background-color: \" + findMatchHighlightColor + \"; }\");\r\n    }\r\n    var referenceHighlightColor = theme.getColor(peekView.peekViewEditorMatchHighlight);\r\n    if (referenceHighlightColor) {\r\n        collector.addRule(\".monaco-editor .reference-zone-widget .preview .reference-decoration { background-color: \" + referenceHighlightColor + \"; }\");\r\n    }\r\n    var referenceHighlightBorder = theme.getColor(peekView.peekViewEditorMatchHighlightBorder);\r\n    if (referenceHighlightBorder) {\r\n        collector.addRule(\".monaco-editor .reference-zone-widget .preview .reference-decoration { border: 2px solid \" + referenceHighlightBorder + \"; box-sizing: border-box; }\");\r\n    }\r\n    var hcOutline = theme.getColor(activeContrastBorder);\r\n    if (hcOutline) {\r\n        collector.addRule(\".monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight { border: 1px dotted \" + hcOutline + \"; box-sizing: border-box; }\");\r\n    }\r\n    var resultsBackground = theme.getColor(peekView.peekViewResultsBackground);\r\n    if (resultsBackground) {\r\n        collector.addRule(\".monaco-editor .reference-zone-widget .ref-tree { background-color: \" + resultsBackground + \"; }\");\r\n    }\r\n    var resultsMatchForeground = theme.getColor(peekView.peekViewResultsMatchForeground);\r\n    if (resultsMatchForeground) {\r\n        collector.addRule(\".monaco-editor .reference-zone-widget .ref-tree { color: \" + resultsMatchForeground + \"; }\");\r\n    }\r\n    var resultsFileForeground = theme.getColor(peekView.peekViewResultsFileForeground);\r\n    if (resultsFileForeground) {\r\n        collector.addRule(\".monaco-editor .reference-zone-widget .ref-tree .reference-file { color: \" + resultsFileForeground + \"; }\");\r\n    }\r\n    var resultsSelectedBackground = theme.getColor(peekView.peekViewResultsSelectionBackground);\r\n    if (resultsSelectedBackground) {\r\n        collector.addRule(\".monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { background-color: \" + resultsSelectedBackground + \"; }\");\r\n    }\r\n    var resultsSelectedForeground = theme.getColor(peekView.peekViewResultsSelectionForeground);\r\n    if (resultsSelectedForeground) {\r\n        collector.addRule(\".monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { color: \" + resultsSelectedForeground + \" !important; }\");\r\n    }\r\n    var editorBackground = theme.getColor(peekView.peekViewEditorBackground);\r\n    if (editorBackground) {\r\n        collector.addRule(\".monaco-editor .reference-zone-widget .preview .monaco-editor .monaco-editor-background,\" +\r\n            \".monaco-editor .reference-zone-widget .preview .monaco-editor .inputarea.ime-input {\" +\r\n            (\"\\tbackground-color: \" + editorBackground + \";\") +\r\n            \"}\");\r\n    }\r\n    var editorGutterBackground = theme.getColor(peekView.peekViewEditorGutterBackground);\r\n    if (editorGutterBackground) {\r\n        collector.addRule(\".monaco-editor .reference-zone-widget .preview .monaco-editor .margin {\" +\r\n            (\"\\tbackground-color: \" + editorGutterBackground + \";\") +\r\n            \"}\");\r\n    }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport * as nls from '../../../../nls.js';\r\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\r\nimport { dispose, DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\r\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\r\nimport { IContextKeyService, RawContextKey, ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\r\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\r\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\r\nimport { OneReference } from '../referencesModel.js';\r\nimport { ReferenceWidget, LayoutData } from './referencesWidget.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\r\nimport { createCancelablePromise } from '../../../../base/common/async.js';\r\nimport { getOuterEditor, PeekContext } from '../../peekView/peekView.js';\r\nimport { IListService, WorkbenchListFocusContextKey } from '../../../../platform/list/browser/listService.js';\r\nimport { KeybindingsRegistry } from '../../../../platform/keybinding/common/keybindingsRegistry.js';\r\nexport var ctxReferenceSearchVisible = new RawContextKey('referenceSearchVisible', false);\r\nvar ReferencesController = /** @class */ (function () {\r\n    function ReferencesController(_defaultTreeKeyboardSupport, _editor, contextKeyService, _editorService, _notificationService, _instantiationService, _storageService, _configurationService) {\r\n        this._defaultTreeKeyboardSupport = _defaultTreeKeyboardSupport;\r\n        this._editor = _editor;\r\n        this._editorService = _editorService;\r\n        this._notificationService = _notificationService;\r\n        this._instantiationService = _instantiationService;\r\n        this._storageService = _storageService;\r\n        this._configurationService = _configurationService;\r\n        this._disposables = new DisposableStore();\r\n        this._requestIdPool = 0;\r\n        this._ignoreModelChangeEvent = false;\r\n        this._referenceSearchVisible = ctxReferenceSearchVisible.bindTo(contextKeyService);\r\n    }\r\n    ReferencesController.get = function (editor) {\r\n        return editor.getContribution(ReferencesController.ID);\r\n    };\r\n    ReferencesController.prototype.dispose = function () {\r\n        this._referenceSearchVisible.reset();\r\n        this._disposables.dispose();\r\n        dispose(this._widget);\r\n        dispose(this._model);\r\n        this._widget = undefined;\r\n        this._model = undefined;\r\n    };\r\n    ReferencesController.prototype.toggleWidget = function (range, modelPromise, peekMode) {\r\n        var _this = this;\r\n        // close current widget and return early is position didn't change\r\n        var widgetPosition;\r\n        if (this._widget) {\r\n            widgetPosition = this._widget.position;\r\n        }\r\n        this.closeWidget();\r\n        if (!!widgetPosition && range.containsPosition(widgetPosition)) {\r\n            return;\r\n        }\r\n        this._peekMode = peekMode;\r\n        this._referenceSearchVisible.set(true);\r\n        // close the widget on model/mode changes\r\n        this._disposables.add(this._editor.onDidChangeModelLanguage(function () { _this.closeWidget(); }));\r\n        this._disposables.add(this._editor.onDidChangeModel(function () {\r\n            if (!_this._ignoreModelChangeEvent) {\r\n                _this.closeWidget();\r\n            }\r\n        }));\r\n        var storageKey = 'peekViewLayout';\r\n        var data = LayoutData.fromJSON(this._storageService.get(storageKey, 0 /* GLOBAL */, '{}'));\r\n        this._widget = this._instantiationService.createInstance(ReferenceWidget, this._editor, this._defaultTreeKeyboardSupport, data);\r\n        this._widget.setTitle(nls.localize('labelLoading', \"Loading...\"));\r\n        this._widget.show(range);\r\n        this._disposables.add(this._widget.onDidClose(function () {\r\n            modelPromise.cancel();\r\n            if (_this._widget) {\r\n                _this._storageService.store(storageKey, JSON.stringify(_this._widget.layoutData), 0 /* GLOBAL */);\r\n                _this._widget = undefined;\r\n            }\r\n            _this.closeWidget();\r\n        }));\r\n        this._disposables.add(this._widget.onDidSelectReference(function (event) {\r\n            var element = event.element, kind = event.kind;\r\n            if (!element) {\r\n                return;\r\n            }\r\n            switch (kind) {\r\n                case 'open':\r\n                    if (event.source !== 'editor' || !_this._configurationService.getValue('editor.stablePeek')) {\r\n                        // when stable peek is configured we don't close\r\n                        // the peek window on selecting the editor\r\n                        _this.openReference(element, false);\r\n                    }\r\n                    break;\r\n                case 'side':\r\n                    _this.openReference(element, true);\r\n                    break;\r\n                case 'goto':\r\n                    if (peekMode) {\r\n                        _this._gotoReference(element);\r\n                    }\r\n                    else {\r\n                        _this.openReference(element, false);\r\n                    }\r\n                    break;\r\n            }\r\n        }));\r\n        var requestId = ++this._requestIdPool;\r\n        modelPromise.then(function (model) {\r\n            // still current request? widget still open?\r\n            if (requestId !== _this._requestIdPool || !_this._widget) {\r\n                return undefined;\r\n            }\r\n            if (_this._model) {\r\n                _this._model.dispose();\r\n            }\r\n            _this._model = model;\r\n            // show widget\r\n            return _this._widget.setModel(_this._model).then(function () {\r\n                if (_this._widget && _this._model && _this._editor.hasModel()) { // might have been closed\r\n                    // set title\r\n                    if (!_this._model.isEmpty) {\r\n                        _this._widget.setMetaTitle(nls.localize('metaTitle.N', \"{0} ({1})\", _this._model.title, _this._model.references.length));\r\n                    }\r\n                    else {\r\n                        _this._widget.setMetaTitle('');\r\n                    }\r\n                    // set 'best' selection\r\n                    var uri = _this._editor.getModel().uri;\r\n                    var pos = new Position(range.startLineNumber, range.startColumn);\r\n                    var selection = _this._model.nearestReference(uri, pos);\r\n                    if (selection) {\r\n                        return _this._widget.setSelection(selection);\r\n                    }\r\n                }\r\n                return undefined;\r\n            });\r\n        }, function (error) {\r\n            _this._notificationService.error(error);\r\n        });\r\n    };\r\n    ReferencesController.prototype.goToNextOrPreviousReference = function (fwd) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var currentPosition, source, target, editorFocus;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!this._editor.hasModel() || !this._model || !this._widget) {\r\n                            // can be called while still resolving...\r\n                            return [2 /*return*/];\r\n                        }\r\n                        currentPosition = this._widget.position;\r\n                        if (!currentPosition) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        source = this._model.nearestReference(this._editor.getModel().uri, currentPosition);\r\n                        if (!source) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        target = this._model.nextOrPreviousReference(source, fwd);\r\n                        editorFocus = this._editor.hasTextFocus();\r\n                        return [4 /*yield*/, this._widget.setSelection(target)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [4 /*yield*/, this._gotoReference(target)];\r\n                    case 2:\r\n                        _a.sent();\r\n                        if (editorFocus) {\r\n                            this._editor.focus();\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ReferencesController.prototype.closeWidget = function () {\r\n        this._referenceSearchVisible.reset();\r\n        this._disposables.clear();\r\n        dispose(this._widget);\r\n        dispose(this._model);\r\n        this._widget = undefined;\r\n        this._model = undefined;\r\n        this._editor.focus();\r\n        this._requestIdPool += 1; // Cancel pending requests\r\n    };\r\n    ReferencesController.prototype._gotoReference = function (ref) {\r\n        var _this = this;\r\n        if (this._widget) {\r\n            this._widget.hide();\r\n        }\r\n        this._ignoreModelChangeEvent = true;\r\n        var range = Range.lift(ref.range).collapseToStart();\r\n        return this._editorService.openCodeEditor({\r\n            resource: ref.uri,\r\n            options: { selection: range }\r\n        }, this._editor).then(function (openedEditor) {\r\n            var _a;\r\n            _this._ignoreModelChangeEvent = false;\r\n            if (!openedEditor || !_this._widget) {\r\n                // something went wrong...\r\n                _this.closeWidget();\r\n                return;\r\n            }\r\n            if (_this._editor === openedEditor) {\r\n                //\r\n                _this._widget.show(range);\r\n                _this._widget.focus();\r\n            }\r\n            else {\r\n                // we opened a different editor instance which means a different controller instance.\r\n                // therefore we stop with this controller and continue with the other\r\n                var other = ReferencesController.get(openedEditor);\r\n                var model_1 = _this._model.clone();\r\n                _this.closeWidget();\r\n                openedEditor.focus();\r\n                other.toggleWidget(range, createCancelablePromise(function (_) { return Promise.resolve(model_1); }), (_a = _this._peekMode, (_a !== null && _a !== void 0 ? _a : false)));\r\n            }\r\n        }, function (err) {\r\n            _this._ignoreModelChangeEvent = false;\r\n            onUnexpectedError(err);\r\n        });\r\n    };\r\n    ReferencesController.prototype.openReference = function (ref, sideBySide) {\r\n        // clear stage\r\n        if (!sideBySide) {\r\n            this.closeWidget();\r\n        }\r\n        var uri = ref.uri, range = ref.range;\r\n        this._editorService.openCodeEditor({\r\n            resource: uri,\r\n            options: { selection: range }\r\n        }, this._editor, sideBySide);\r\n    };\r\n    ReferencesController.ID = 'editor.contrib.referencesController';\r\n    ReferencesController = __decorate([\r\n        __param(2, IContextKeyService),\r\n        __param(3, ICodeEditorService),\r\n        __param(4, INotificationService),\r\n        __param(5, IInstantiationService),\r\n        __param(6, IStorageService),\r\n        __param(7, IConfigurationService)\r\n    ], ReferencesController);\r\n    return ReferencesController;\r\n}());\r\nexport { ReferencesController };\r\nfunction withController(accessor, fn) {\r\n    var outerEditor = getOuterEditor(accessor);\r\n    if (!outerEditor) {\r\n        return;\r\n    }\r\n    var controller = ReferencesController.get(outerEditor);\r\n    if (controller) {\r\n        fn(controller);\r\n    }\r\n}\r\nKeybindingsRegistry.registerCommandAndKeybindingRule({\r\n    id: 'goToNextReference',\r\n    weight: 200 /* WorkbenchContrib */ + 50,\r\n    primary: 62 /* F4 */,\r\n    secondary: [70 /* F12 */],\r\n    when: ctxReferenceSearchVisible,\r\n    handler: function (accessor) {\r\n        withController(accessor, function (controller) {\r\n            controller.goToNextOrPreviousReference(true);\r\n        });\r\n    }\r\n});\r\nKeybindingsRegistry.registerCommandAndKeybindingRule({\r\n    id: 'goToNextReferenceFromEmbeddedEditor',\r\n    weight: 100 /* EditorContrib */ + 50,\r\n    primary: 62 /* F4 */,\r\n    secondary: [70 /* F12 */],\r\n    when: PeekContext.inPeekEditor,\r\n    handler: function (accessor) {\r\n        withController(accessor, function (controller) {\r\n            controller.goToNextOrPreviousReference(true);\r\n        });\r\n    }\r\n});\r\nKeybindingsRegistry.registerCommandAndKeybindingRule({\r\n    id: 'goToPreviousReference',\r\n    weight: 200 /* WorkbenchContrib */ + 50,\r\n    primary: 1024 /* Shift */ | 62 /* F4 */,\r\n    secondary: [1024 /* Shift */ | 70 /* F12 */],\r\n    when: ctxReferenceSearchVisible,\r\n    handler: function (accessor) {\r\n        withController(accessor, function (controller) {\r\n            controller.goToNextOrPreviousReference(false);\r\n        });\r\n    }\r\n});\r\nKeybindingsRegistry.registerCommandAndKeybindingRule({\r\n    id: 'goToPreviousReferenceFromEmbeddedEditor',\r\n    weight: 100 /* EditorContrib */ + 50,\r\n    primary: 1024 /* Shift */ | 62 /* F4 */,\r\n    secondary: [1024 /* Shift */ | 70 /* F12 */],\r\n    when: PeekContext.inPeekEditor,\r\n    handler: function (accessor) {\r\n        withController(accessor, function (controller) {\r\n            controller.goToNextOrPreviousReference(false);\r\n        });\r\n    }\r\n});\r\nKeybindingsRegistry.registerCommandAndKeybindingRule({\r\n    id: 'closeReferenceSearch',\r\n    weight: 200 /* WorkbenchContrib */ + 50,\r\n    primary: 9 /* Escape */,\r\n    secondary: [1024 /* Shift */ | 9 /* Escape */],\r\n    when: ContextKeyExpr.and(ctxReferenceSearchVisible, ContextKeyExpr.not('config.editor.stablePeek')),\r\n    handler: function (accessor) {\r\n        withController(accessor, function (controller) { return controller.closeWidget(); });\r\n    }\r\n});\r\nKeybindingsRegistry.registerCommandAndKeybindingRule({\r\n    id: 'closeReferenceSearchEditor',\r\n    weight: 100 /* EditorContrib */ - 101,\r\n    primary: 9 /* Escape */,\r\n    secondary: [1024 /* Shift */ | 9 /* Escape */],\r\n    when: ContextKeyExpr.and(PeekContext.inPeekEditor, ContextKeyExpr.not('config.editor.stablePeek')),\r\n    handler: function (accessor) {\r\n        withController(accessor, function (controller) { return controller.closeWidget(); });\r\n    }\r\n});\r\nKeybindingsRegistry.registerCommandAndKeybindingRule({\r\n    id: 'openReferenceToSide',\r\n    weight: 100 /* EditorContrib */,\r\n    primary: 2048 /* CtrlCmd */ | 3 /* Enter */,\r\n    mac: {\r\n        primary: 256 /* WinCtrl */ | 3 /* Enter */\r\n    },\r\n    when: ContextKeyExpr.and(ctxReferenceSearchVisible, WorkbenchListFocusContextKey),\r\n    handler: function (accessor) {\r\n        var _a;\r\n        var listService = accessor.get(IListService);\r\n        var focus = (_a = listService.lastFocusedList) === null || _a === void 0 ? void 0 : _a.getFocus();\r\n        if (Array.isArray(focus) && focus[0] instanceof OneReference) {\r\n            withController(accessor, function (controller) { return controller.openReference(focus[0], true); });\r\n        }\r\n    }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { RawContextKey, IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { registerSingleton } from '../../../platform/instantiation/common/extensions.js';\r\nimport { KeybindingsRegistry } from '../../../platform/keybinding/common/keybindingsRegistry.js';\r\nimport { registerEditorCommand, EditorCommand } from '../../browser/editorExtensions.js';\r\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { dispose, combinedDisposable, DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { localize } from '../../../nls.js';\r\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\r\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\r\nimport { isEqual } from '../../../base/common/resources.js';\r\nexport var ctxHasSymbols = new RawContextKey('hasSymbols', false);\r\nexport var ISymbolNavigationService = createDecorator('ISymbolNavigationService');\r\nvar SymbolNavigationService = /** @class */ (function () {\r\n    function SymbolNavigationService(contextKeyService, _editorService, _notificationService, _keybindingService) {\r\n        this._editorService = _editorService;\r\n        this._notificationService = _notificationService;\r\n        this._keybindingService = _keybindingService;\r\n        this._currentModel = undefined;\r\n        this._currentIdx = -1;\r\n        this._ignoreEditorChange = false;\r\n        this._ctxHasSymbols = ctxHasSymbols.bindTo(contextKeyService);\r\n    }\r\n    SymbolNavigationService.prototype.reset = function () {\r\n        this._ctxHasSymbols.reset();\r\n        dispose(this._currentState);\r\n        dispose(this._currentMessage);\r\n        this._currentModel = undefined;\r\n        this._currentIdx = -1;\r\n    };\r\n    SymbolNavigationService.prototype.put = function (anchor) {\r\n        var _this = this;\r\n        var refModel = anchor.parent.parent;\r\n        if (refModel.references.length <= 1) {\r\n            this.reset();\r\n            return;\r\n        }\r\n        this._currentModel = refModel;\r\n        this._currentIdx = refModel.references.indexOf(anchor);\r\n        this._ctxHasSymbols.set(true);\r\n        this._showMessage();\r\n        var editorState = new EditorState(this._editorService);\r\n        var listener = editorState.onDidChange(function (_) {\r\n            if (_this._ignoreEditorChange) {\r\n                return;\r\n            }\r\n            var editor = _this._editorService.getActiveCodeEditor();\r\n            if (!editor) {\r\n                return;\r\n            }\r\n            var model = editor.getModel();\r\n            var position = editor.getPosition();\r\n            if (!model || !position) {\r\n                return;\r\n            }\r\n            var seenUri = false;\r\n            var seenPosition = false;\r\n            for (var _i = 0, _a = refModel.references; _i < _a.length; _i++) {\r\n                var reference = _a[_i];\r\n                if (isEqual(reference.uri, model.uri)) {\r\n                    seenUri = true;\r\n                    seenPosition = seenPosition || Range.containsPosition(reference.range, position);\r\n                }\r\n                else if (seenUri) {\r\n                    break;\r\n                }\r\n            }\r\n            if (!seenUri || !seenPosition) {\r\n                _this.reset();\r\n            }\r\n        });\r\n        this._currentState = combinedDisposable(editorState, listener);\r\n    };\r\n    SymbolNavigationService.prototype.revealNext = function (source) {\r\n        var _this = this;\r\n        if (!this._currentModel) {\r\n            return Promise.resolve();\r\n        }\r\n        // get next result and advance\r\n        this._currentIdx += 1;\r\n        this._currentIdx %= this._currentModel.references.length;\r\n        var reference = this._currentModel.references[this._currentIdx];\r\n        // status\r\n        this._showMessage();\r\n        // open editor, ignore events while that happens\r\n        this._ignoreEditorChange = true;\r\n        return this._editorService.openCodeEditor({\r\n            resource: reference.uri,\r\n            options: {\r\n                selection: Range.collapseToStart(reference.range),\r\n                revealInCenterIfOutsideViewport: true\r\n            }\r\n        }, source).finally(function () {\r\n            _this._ignoreEditorChange = false;\r\n        });\r\n    };\r\n    SymbolNavigationService.prototype._showMessage = function () {\r\n        dispose(this._currentMessage);\r\n        var kb = this._keybindingService.lookupKeybinding('editor.gotoNextSymbolFromResult');\r\n        var message = kb\r\n            ? localize('location.kb', \"Symbol {0} of {1}, {2} for next\", this._currentIdx + 1, this._currentModel.references.length, kb.getLabel())\r\n            : localize('location', \"Symbol {0} of {1}\", this._currentIdx + 1, this._currentModel.references.length);\r\n        this._currentMessage = this._notificationService.status(message);\r\n    };\r\n    SymbolNavigationService = __decorate([\r\n        __param(0, IContextKeyService),\r\n        __param(1, ICodeEditorService),\r\n        __param(2, INotificationService),\r\n        __param(3, IKeybindingService)\r\n    ], SymbolNavigationService);\r\n    return SymbolNavigationService;\r\n}());\r\nregisterSingleton(ISymbolNavigationService, SymbolNavigationService, true);\r\nregisterEditorCommand(new /** @class */ (function (_super) {\r\n    __extends(class_1, _super);\r\n    function class_1() {\r\n        return _super.call(this, {\r\n            id: 'editor.gotoNextSymbolFromResult',\r\n            precondition: ctxHasSymbols,\r\n            kbOpts: {\r\n                weight: 100 /* EditorContrib */,\r\n                primary: 70 /* F12 */\r\n            }\r\n        }) || this;\r\n    }\r\n    class_1.prototype.runEditorCommand = function (accessor, editor) {\r\n        return accessor.get(ISymbolNavigationService).revealNext(editor);\r\n    };\r\n    return class_1;\r\n}(EditorCommand)));\r\nKeybindingsRegistry.registerCommandAndKeybindingRule({\r\n    id: 'editor.gotoNextSymbolFromResult.cancel',\r\n    weight: 100 /* EditorContrib */,\r\n    when: ctxHasSymbols,\r\n    primary: 9 /* Escape */,\r\n    handler: function (accessor) {\r\n        accessor.get(ISymbolNavigationService).reset();\r\n    }\r\n});\r\n//\r\nvar EditorState = /** @class */ (function () {\r\n    function EditorState(editorService) {\r\n        this._listener = new Map();\r\n        this._disposables = new DisposableStore();\r\n        this._onDidChange = new Emitter();\r\n        this.onDidChange = this._onDidChange.event;\r\n        this._disposables.add(editorService.onCodeEditorRemove(this._onDidRemoveEditor, this));\r\n        this._disposables.add(editorService.onCodeEditorAdd(this._onDidAddEditor, this));\r\n        editorService.listCodeEditors().forEach(this._onDidAddEditor, this);\r\n    }\r\n    EditorState.prototype.dispose = function () {\r\n        this._disposables.dispose();\r\n        this._onDidChange.dispose();\r\n        this._listener.forEach(dispose);\r\n    };\r\n    EditorState.prototype._onDidAddEditor = function (editor) {\r\n        var _this = this;\r\n        this._listener.set(editor, combinedDisposable(editor.onDidChangeCursorPosition(function (_) { return _this._onDidChange.fire({ editor: editor }); }), editor.onDidChangeModelContent(function (_) { return _this._onDidChange.fire({ editor: editor }); })));\r\n    };\r\n    EditorState.prototype._onDidRemoveEditor = function (editor) {\r\n        dispose(this._listener.get(editor));\r\n        this._listener.delete(editor);\r\n    };\r\n    EditorState = __decorate([\r\n        __param(0, ICodeEditorService)\r\n    ], EditorState);\r\n    return EditorState;\r\n}());\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nvar _a, _b, _c, _d, _e, _f, _g, _h;\r\nimport { alert } from '../../../base/browser/ui/aria/aria.js';\r\nimport { createCancelablePromise, raceCancellation } from '../../../base/common/async.js';\r\nimport { KeyChord } from '../../../base/common/keyCodes.js';\r\nimport { isWeb } from '../../../base/common/platform.js';\r\nimport { isCodeEditor } from '../../browser/editorBrowser.js';\r\nimport { EditorAction, registerEditorAction } from '../../browser/editorExtensions.js';\r\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\r\nimport * as corePosition from '../../common/core/position.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\r\nimport { isLocationLink } from '../../common/modes.js';\r\nimport { MessageController } from '../message/messageController.js';\r\nimport { PeekContext } from '../peekView/peekView.js';\r\nimport { ReferencesController } from './peek/referencesController.js';\r\nimport { ReferencesModel } from './referencesModel.js';\r\nimport * as nls from '../../../nls.js';\r\nimport { MenuRegistry } from '../../../platform/actions/common/actions.js';\r\nimport { ContextKeyExpr } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\r\nimport { IEditorProgressService } from '../../../platform/progress/common/progress.js';\r\nimport { getDefinitionsAtPosition, getImplementationsAtPosition, getTypeDefinitionsAtPosition, getDeclarationsAtPosition, getReferencesAtPosition } from './goToSymbol.js';\r\nimport { CommandsRegistry } from '../../../platform/commands/common/commands.js';\r\nimport { EditorStateCancellationTokenSource } from '../../browser/core/editorState.js';\r\nimport { ISymbolNavigationService } from './symbolNavigation.js';\r\nimport { isStandalone } from '../../../base/browser/browser.js';\r\nimport { URI } from '../../../base/common/uri.js';\r\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { assertType } from '../../../base/common/types.js';\r\nMenuRegistry.appendMenuItem(7 /* EditorContext */, {\r\n    submenu: 8 /* EditorContextPeek */,\r\n    title: nls.localize('peek.submenu', \"Peek\"),\r\n    group: 'navigation',\r\n    order: 100\r\n});\r\nvar SymbolNavigationAction = /** @class */ (function (_super) {\r\n    __extends(SymbolNavigationAction, _super);\r\n    function SymbolNavigationAction(configuration, opts) {\r\n        var _this = _super.call(this, opts) || this;\r\n        _this._configuration = configuration;\r\n        return _this;\r\n    }\r\n    SymbolNavigationAction.prototype.run = function (accessor, editor) {\r\n        var _this = this;\r\n        if (!editor.hasModel()) {\r\n            return Promise.resolve(undefined);\r\n        }\r\n        var notificationService = accessor.get(INotificationService);\r\n        var editorService = accessor.get(ICodeEditorService);\r\n        var progressService = accessor.get(IEditorProgressService);\r\n        var symbolNavService = accessor.get(ISymbolNavigationService);\r\n        var model = editor.getModel();\r\n        var pos = editor.getPosition();\r\n        var cts = new EditorStateCancellationTokenSource(editor, 1 /* Value */ | 4 /* Position */);\r\n        var promise = raceCancellation(this._getLocationModel(model, pos, cts.token), cts.token).then(function (references) { return __awaiter(_this, void 0, void 0, function () {\r\n            var altAction, altActionId, referenceCount, info;\r\n            return __generator(this, function (_a) {\r\n                if (!references || cts.token.isCancellationRequested) {\r\n                    return [2 /*return*/];\r\n                }\r\n                alert(references.ariaMessage);\r\n                if (references.referenceAt(model.uri, pos)) {\r\n                    altActionId = this._getAlternativeCommand(editor);\r\n                    if (altActionId !== this.id) {\r\n                        altAction = editor.getAction(altActionId);\r\n                    }\r\n                }\r\n                referenceCount = references.references.length;\r\n                if (referenceCount === 0) {\r\n                    // no result -> show message\r\n                    if (!this._configuration.muteMessage) {\r\n                        info = model.getWordAtPosition(pos);\r\n                        MessageController.get(editor).showMessage(this._getNoResultFoundMessage(info), pos);\r\n                    }\r\n                }\r\n                else if (referenceCount === 1 && altAction) {\r\n                    // already at the only result, run alternative\r\n                    altAction.run();\r\n                }\r\n                else {\r\n                    // normal results handling\r\n                    return [2 /*return*/, this._onResult(editorService, symbolNavService, editor, references)];\r\n                }\r\n                return [2 /*return*/];\r\n            });\r\n        }); }, function (err) {\r\n            // report an error\r\n            notificationService.error(err);\r\n        }).finally(function () {\r\n            cts.dispose();\r\n        });\r\n        progressService.showWhile(promise, 250);\r\n        return promise;\r\n    };\r\n    SymbolNavigationAction.prototype._onResult = function (editorService, symbolNavService, editor, model) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var gotoLocation, next, peek, targetEditor;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        gotoLocation = this._getGoToPreference(editor);\r\n                        if (!(this._configuration.openInPeek || (gotoLocation === 'peek' && model.references.length > 1))) return [3 /*break*/, 1];\r\n                        this._openInPeek(editor, model);\r\n                        return [3 /*break*/, 3];\r\n                    case 1:\r\n                        next = model.firstReference();\r\n                        peek = model.references.length > 1 && gotoLocation === 'gotoAndPeek';\r\n                        return [4 /*yield*/, this._openReference(editor, editorService, next, this._configuration.openToSide, !peek)];\r\n                    case 2:\r\n                        targetEditor = _a.sent();\r\n                        if (peek && targetEditor) {\r\n                            this._openInPeek(targetEditor, model);\r\n                        }\r\n                        else {\r\n                            model.dispose();\r\n                        }\r\n                        // keep remaining locations around when using\r\n                        // 'goto'-mode\r\n                        if (gotoLocation === 'goto') {\r\n                            symbolNavService.put(next);\r\n                        }\r\n                        _a.label = 3;\r\n                    case 3: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    SymbolNavigationAction.prototype._openReference = function (editor, editorService, reference, sideBySide, highlight) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var range, targetEditor, modelNow_1, ids_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        range = undefined;\r\n                        if (isLocationLink(reference)) {\r\n                            range = reference.targetSelectionRange;\r\n                        }\r\n                        if (!range) {\r\n                            range = reference.range;\r\n                        }\r\n                        return [4 /*yield*/, editorService.openCodeEditor({\r\n                                resource: reference.uri,\r\n                                options: {\r\n                                    selection: Range.collapseToStart(range),\r\n                                    revealInCenterIfOutsideViewport: true\r\n                                }\r\n                            }, editor, sideBySide)];\r\n                    case 1:\r\n                        targetEditor = _a.sent();\r\n                        if (!targetEditor) {\r\n                            return [2 /*return*/, undefined];\r\n                        }\r\n                        if (highlight) {\r\n                            modelNow_1 = targetEditor.getModel();\r\n                            ids_1 = targetEditor.deltaDecorations([], [{ range: range, options: { className: 'symbolHighlight' } }]);\r\n                            setTimeout(function () {\r\n                                if (targetEditor.getModel() === modelNow_1) {\r\n                                    targetEditor.deltaDecorations(ids_1, []);\r\n                                }\r\n                            }, 350);\r\n                        }\r\n                        return [2 /*return*/, targetEditor];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    SymbolNavigationAction.prototype._openInPeek = function (target, model) {\r\n        var controller = ReferencesController.get(target);\r\n        if (controller && target.hasModel()) {\r\n            controller.toggleWidget(target.getSelection(), createCancelablePromise(function (_) { return Promise.resolve(model); }), this._configuration.openInPeek);\r\n        }\r\n        else {\r\n            model.dispose();\r\n        }\r\n    };\r\n    return SymbolNavigationAction;\r\n}(EditorAction));\r\n//#region --- DEFINITION\r\nvar DefinitionAction = /** @class */ (function (_super) {\r\n    __extends(DefinitionAction, _super);\r\n    function DefinitionAction() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    DefinitionAction.prototype._getLocationModel = function (model, position, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _a = ReferencesModel.bind;\r\n                        return [4 /*yield*/, getDefinitionsAtPosition(model, position, token)];\r\n                    case 1: return [2 /*return*/, new (_a.apply(ReferencesModel, [void 0, _b.sent(), nls.localize('def.title', 'Definitions')]))()];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    DefinitionAction.prototype._getNoResultFoundMessage = function (info) {\r\n        return info && info.word\r\n            ? nls.localize('noResultWord', \"No definition found for '{0}'\", info.word)\r\n            : nls.localize('generic.noResults', \"No definition found\");\r\n    };\r\n    DefinitionAction.prototype._getAlternativeCommand = function (editor) {\r\n        return editor.getOption(39 /* gotoLocation */).alternativeDefinitionCommand;\r\n    };\r\n    DefinitionAction.prototype._getGoToPreference = function (editor) {\r\n        return editor.getOption(39 /* gotoLocation */).multipleDefinitions;\r\n    };\r\n    return DefinitionAction;\r\n}(SymbolNavigationAction));\r\nexport { DefinitionAction };\r\nvar goToDefinitionKb = isWeb && !isStandalone\r\n    ? 2048 /* CtrlCmd */ | 70 /* F12 */\r\n    : 70 /* F12 */;\r\nregisterEditorAction((_a = /** @class */ (function (_super) {\r\n        __extends(GoToDefinitionAction, _super);\r\n        function GoToDefinitionAction() {\r\n            var _this = _super.call(this, {\r\n                openToSide: false,\r\n                openInPeek: false,\r\n                muteMessage: false\r\n            }, {\r\n                id: GoToDefinitionAction.id,\r\n                label: nls.localize('actions.goToDecl.label', \"Go to Definition\"),\r\n                alias: 'Go to Definition',\r\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, EditorContextKeys.isInEmbeddedEditor.toNegated()),\r\n                kbOpts: {\r\n                    kbExpr: EditorContextKeys.editorTextFocus,\r\n                    primary: goToDefinitionKb,\r\n                    weight: 100 /* EditorContrib */\r\n                },\r\n                contextMenuOpts: {\r\n                    group: 'navigation',\r\n                    order: 1.1\r\n                },\r\n                menuOpts: {\r\n                    menuId: 17 /* MenubarGoMenu */,\r\n                    group: '4_symbol_nav',\r\n                    order: 2,\r\n                    title: nls.localize({ key: 'miGotoDefinition', comment: ['&& denotes a mnemonic'] }, \"Go to &&Definition\")\r\n                }\r\n            }) || this;\r\n            CommandsRegistry.registerCommandAlias('editor.action.goToDeclaration', GoToDefinitionAction.id);\r\n            return _this;\r\n        }\r\n        return GoToDefinitionAction;\r\n    }(DefinitionAction)),\r\n    _a.id = 'editor.action.revealDefinition',\r\n    _a));\r\nregisterEditorAction((_b = /** @class */ (function (_super) {\r\n        __extends(OpenDefinitionToSideAction, _super);\r\n        function OpenDefinitionToSideAction() {\r\n            var _this = _super.call(this, {\r\n                openToSide: true,\r\n                openInPeek: false,\r\n                muteMessage: false\r\n            }, {\r\n                id: OpenDefinitionToSideAction.id,\r\n                label: nls.localize('actions.goToDeclToSide.label', \"Open Definition to the Side\"),\r\n                alias: 'Open Definition to the Side',\r\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, EditorContextKeys.isInEmbeddedEditor.toNegated()),\r\n                kbOpts: {\r\n                    kbExpr: EditorContextKeys.editorTextFocus,\r\n                    primary: KeyChord(2048 /* CtrlCmd */ | 41 /* KEY_K */, goToDefinitionKb),\r\n                    weight: 100 /* EditorContrib */\r\n                }\r\n            }) || this;\r\n            CommandsRegistry.registerCommandAlias('editor.action.openDeclarationToTheSide', OpenDefinitionToSideAction.id);\r\n            return _this;\r\n        }\r\n        return OpenDefinitionToSideAction;\r\n    }(DefinitionAction)),\r\n    _b.id = 'editor.action.revealDefinitionAside',\r\n    _b));\r\nregisterEditorAction((_c = /** @class */ (function (_super) {\r\n        __extends(PeekDefinitionAction, _super);\r\n        function PeekDefinitionAction() {\r\n            var _this = _super.call(this, {\r\n                openToSide: false,\r\n                openInPeek: true,\r\n                muteMessage: false\r\n            }, {\r\n                id: PeekDefinitionAction.id,\r\n                label: nls.localize('actions.previewDecl.label', \"Peek Definition\"),\r\n                alias: 'Peek Definition',\r\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInEmbeddedEditor.toNegated()),\r\n                kbOpts: {\r\n                    kbExpr: EditorContextKeys.editorTextFocus,\r\n                    primary: 512 /* Alt */ | 70 /* F12 */,\r\n                    linux: { primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 68 /* F10 */ },\r\n                    weight: 100 /* EditorContrib */\r\n                },\r\n                contextMenuOpts: {\r\n                    menuId: 8 /* EditorContextPeek */,\r\n                    group: 'peek',\r\n                    order: 2\r\n                }\r\n            }) || this;\r\n            CommandsRegistry.registerCommandAlias('editor.action.previewDeclaration', PeekDefinitionAction.id);\r\n            return _this;\r\n        }\r\n        return PeekDefinitionAction;\r\n    }(DefinitionAction)),\r\n    _c.id = 'editor.action.peekDefinition',\r\n    _c));\r\n//#endregion\r\n//#region --- DECLARATION\r\nvar DeclarationAction = /** @class */ (function (_super) {\r\n    __extends(DeclarationAction, _super);\r\n    function DeclarationAction() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    DeclarationAction.prototype._getLocationModel = function (model, position, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _a = ReferencesModel.bind;\r\n                        return [4 /*yield*/, getDeclarationsAtPosition(model, position, token)];\r\n                    case 1: return [2 /*return*/, new (_a.apply(ReferencesModel, [void 0, _b.sent(), nls.localize('decl.title', 'Declarations')]))()];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    DeclarationAction.prototype._getNoResultFoundMessage = function (info) {\r\n        return info && info.word\r\n            ? nls.localize('decl.noResultWord', \"No declaration found for '{0}'\", info.word)\r\n            : nls.localize('decl.generic.noResults', \"No declaration found\");\r\n    };\r\n    DeclarationAction.prototype._getAlternativeCommand = function (editor) {\r\n        return editor.getOption(39 /* gotoLocation */).alternativeDeclarationCommand;\r\n    };\r\n    DeclarationAction.prototype._getGoToPreference = function (editor) {\r\n        return editor.getOption(39 /* gotoLocation */).multipleDeclarations;\r\n    };\r\n    return DeclarationAction;\r\n}(SymbolNavigationAction));\r\nregisterEditorAction((_d = /** @class */ (function (_super) {\r\n        __extends(GoToDeclarationAction, _super);\r\n        function GoToDeclarationAction() {\r\n            return _super.call(this, {\r\n                openToSide: false,\r\n                openInPeek: false,\r\n                muteMessage: false\r\n            }, {\r\n                id: GoToDeclarationAction.id,\r\n                label: nls.localize('actions.goToDeclaration.label', \"Go to Declaration\"),\r\n                alias: 'Go to Declaration',\r\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDeclarationProvider, EditorContextKeys.isInEmbeddedEditor.toNegated()),\r\n                contextMenuOpts: {\r\n                    group: 'navigation',\r\n                    order: 1.3\r\n                },\r\n                menuOpts: {\r\n                    menuId: 17 /* MenubarGoMenu */,\r\n                    group: '4_symbol_nav',\r\n                    order: 3,\r\n                    title: nls.localize({ key: 'miGotoDeclaration', comment: ['&& denotes a mnemonic'] }, \"Go to &&Declaration\")\r\n                },\r\n            }) || this;\r\n        }\r\n        GoToDeclarationAction.prototype._getNoResultFoundMessage = function (info) {\r\n            return info && info.word\r\n                ? nls.localize('decl.noResultWord', \"No declaration found for '{0}'\", info.word)\r\n                : nls.localize('decl.generic.noResults', \"No declaration found\");\r\n        };\r\n        return GoToDeclarationAction;\r\n    }(DeclarationAction)),\r\n    _d.id = 'editor.action.revealDeclaration',\r\n    _d));\r\nregisterEditorAction(/** @class */ (function (_super) {\r\n    __extends(PeekDeclarationAction, _super);\r\n    function PeekDeclarationAction() {\r\n        return _super.call(this, {\r\n            openToSide: false,\r\n            openInPeek: true,\r\n            muteMessage: false\r\n        }, {\r\n            id: 'editor.action.peekDeclaration',\r\n            label: nls.localize('actions.peekDecl.label', \"Peek Declaration\"),\r\n            alias: 'Peek Declaration',\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.hasDeclarationProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInEmbeddedEditor.toNegated()),\r\n            contextMenuOpts: {\r\n                menuId: 8 /* EditorContextPeek */,\r\n                group: 'peek',\r\n                order: 3\r\n            }\r\n        }) || this;\r\n    }\r\n    return PeekDeclarationAction;\r\n}(DeclarationAction)));\r\n//#endregion\r\n//#region --- TYPE DEFINITION\r\nvar TypeDefinitionAction = /** @class */ (function (_super) {\r\n    __extends(TypeDefinitionAction, _super);\r\n    function TypeDefinitionAction() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    TypeDefinitionAction.prototype._getLocationModel = function (model, position, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _a = ReferencesModel.bind;\r\n                        return [4 /*yield*/, getTypeDefinitionsAtPosition(model, position, token)];\r\n                    case 1: return [2 /*return*/, new (_a.apply(ReferencesModel, [void 0, _b.sent(), nls.localize('typedef.title', 'Type Definitions')]))()];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    TypeDefinitionAction.prototype._getNoResultFoundMessage = function (info) {\r\n        return info && info.word\r\n            ? nls.localize('goToTypeDefinition.noResultWord', \"No type definition found for '{0}'\", info.word)\r\n            : nls.localize('goToTypeDefinition.generic.noResults', \"No type definition found\");\r\n    };\r\n    TypeDefinitionAction.prototype._getAlternativeCommand = function (editor) {\r\n        return editor.getOption(39 /* gotoLocation */).alternativeTypeDefinitionCommand;\r\n    };\r\n    TypeDefinitionAction.prototype._getGoToPreference = function (editor) {\r\n        return editor.getOption(39 /* gotoLocation */).multipleTypeDefinitions;\r\n    };\r\n    return TypeDefinitionAction;\r\n}(SymbolNavigationAction));\r\nregisterEditorAction((_e = /** @class */ (function (_super) {\r\n        __extends(GoToTypeDefinitionAction, _super);\r\n        function GoToTypeDefinitionAction() {\r\n            return _super.call(this, {\r\n                openToSide: false,\r\n                openInPeek: false,\r\n                muteMessage: false\r\n            }, {\r\n                id: GoToTypeDefinitionAction.ID,\r\n                label: nls.localize('actions.goToTypeDefinition.label', \"Go to Type Definition\"),\r\n                alias: 'Go to Type Definition',\r\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasTypeDefinitionProvider, EditorContextKeys.isInEmbeddedEditor.toNegated()),\r\n                kbOpts: {\r\n                    kbExpr: EditorContextKeys.editorTextFocus,\r\n                    primary: 0,\r\n                    weight: 100 /* EditorContrib */\r\n                },\r\n                contextMenuOpts: {\r\n                    group: 'navigation',\r\n                    order: 1.4\r\n                },\r\n                menuOpts: {\r\n                    menuId: 17 /* MenubarGoMenu */,\r\n                    group: '4_symbol_nav',\r\n                    order: 3,\r\n                    title: nls.localize({ key: 'miGotoTypeDefinition', comment: ['&& denotes a mnemonic'] }, \"Go to &&Type Definition\")\r\n                }\r\n            }) || this;\r\n        }\r\n        return GoToTypeDefinitionAction;\r\n    }(TypeDefinitionAction)),\r\n    _e.ID = 'editor.action.goToTypeDefinition',\r\n    _e));\r\nregisterEditorAction((_f = /** @class */ (function (_super) {\r\n        __extends(PeekTypeDefinitionAction, _super);\r\n        function PeekTypeDefinitionAction() {\r\n            return _super.call(this, {\r\n                openToSide: false,\r\n                openInPeek: true,\r\n                muteMessage: false\r\n            }, {\r\n                id: PeekTypeDefinitionAction.ID,\r\n                label: nls.localize('actions.peekTypeDefinition.label', \"Peek Type Definition\"),\r\n                alias: 'Peek Type Definition',\r\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasTypeDefinitionProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInEmbeddedEditor.toNegated()),\r\n                contextMenuOpts: {\r\n                    menuId: 8 /* EditorContextPeek */,\r\n                    group: 'peek',\r\n                    order: 4\r\n                }\r\n            }) || this;\r\n        }\r\n        return PeekTypeDefinitionAction;\r\n    }(TypeDefinitionAction)),\r\n    _f.ID = 'editor.action.peekTypeDefinition',\r\n    _f));\r\n//#endregion\r\n//#region --- IMPLEMENTATION\r\nvar ImplementationAction = /** @class */ (function (_super) {\r\n    __extends(ImplementationAction, _super);\r\n    function ImplementationAction() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    ImplementationAction.prototype._getLocationModel = function (model, position, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _a = ReferencesModel.bind;\r\n                        return [4 /*yield*/, getImplementationsAtPosition(model, position, token)];\r\n                    case 1: return [2 /*return*/, new (_a.apply(ReferencesModel, [void 0, _b.sent(), nls.localize('impl.title', 'Implementations')]))()];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    ImplementationAction.prototype._getNoResultFoundMessage = function (info) {\r\n        return info && info.word\r\n            ? nls.localize('goToImplementation.noResultWord', \"No implementation found for '{0}'\", info.word)\r\n            : nls.localize('goToImplementation.generic.noResults', \"No implementation found\");\r\n    };\r\n    ImplementationAction.prototype._getAlternativeCommand = function (editor) {\r\n        return editor.getOption(39 /* gotoLocation */).alternativeImplementationCommand;\r\n    };\r\n    ImplementationAction.prototype._getGoToPreference = function (editor) {\r\n        return editor.getOption(39 /* gotoLocation */).multipleImplementations;\r\n    };\r\n    return ImplementationAction;\r\n}(SymbolNavigationAction));\r\nregisterEditorAction((_g = /** @class */ (function (_super) {\r\n        __extends(GoToImplementationAction, _super);\r\n        function GoToImplementationAction() {\r\n            return _super.call(this, {\r\n                openToSide: false,\r\n                openInPeek: false,\r\n                muteMessage: false\r\n            }, {\r\n                id: GoToImplementationAction.ID,\r\n                label: nls.localize('actions.goToImplementation.label', \"Go to Implementations\"),\r\n                alias: 'Go to Implementations',\r\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasImplementationProvider, EditorContextKeys.isInEmbeddedEditor.toNegated()),\r\n                kbOpts: {\r\n                    kbExpr: EditorContextKeys.editorTextFocus,\r\n                    primary: 2048 /* CtrlCmd */ | 70 /* F12 */,\r\n                    weight: 100 /* EditorContrib */\r\n                },\r\n                menuOpts: {\r\n                    menuId: 17 /* MenubarGoMenu */,\r\n                    group: '4_symbol_nav',\r\n                    order: 4,\r\n                    title: nls.localize({ key: 'miGotoImplementation', comment: ['&& denotes a mnemonic'] }, \"Go to &&Implementations\")\r\n                },\r\n                contextMenuOpts: {\r\n                    group: 'navigation',\r\n                    order: 1.45\r\n                }\r\n            }) || this;\r\n        }\r\n        return GoToImplementationAction;\r\n    }(ImplementationAction)),\r\n    _g.ID = 'editor.action.goToImplementation',\r\n    _g));\r\nregisterEditorAction((_h = /** @class */ (function (_super) {\r\n        __extends(PeekImplementationAction, _super);\r\n        function PeekImplementationAction() {\r\n            return _super.call(this, {\r\n                openToSide: false,\r\n                openInPeek: true,\r\n                muteMessage: false\r\n            }, {\r\n                id: PeekImplementationAction.ID,\r\n                label: nls.localize('actions.peekImplementation.label', \"Peek Implementations\"),\r\n                alias: 'Peek Implementations',\r\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasImplementationProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInEmbeddedEditor.toNegated()),\r\n                kbOpts: {\r\n                    kbExpr: EditorContextKeys.editorTextFocus,\r\n                    primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 70 /* F12 */,\r\n                    weight: 100 /* EditorContrib */\r\n                },\r\n                contextMenuOpts: {\r\n                    menuId: 8 /* EditorContextPeek */,\r\n                    group: 'peek',\r\n                    order: 5\r\n                }\r\n            }) || this;\r\n        }\r\n        return PeekImplementationAction;\r\n    }(ImplementationAction)),\r\n    _h.ID = 'editor.action.peekImplementation',\r\n    _h));\r\n//#endregion\r\n//#region --- REFERENCES\r\nvar ReferencesAction = /** @class */ (function (_super) {\r\n    __extends(ReferencesAction, _super);\r\n    function ReferencesAction() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    ReferencesAction.prototype._getNoResultFoundMessage = function (info) {\r\n        return info\r\n            ? nls.localize('references.no', \"No references found for '{0}'\", info.word)\r\n            : nls.localize('references.noGeneric', \"No references found\");\r\n    };\r\n    ReferencesAction.prototype._getAlternativeCommand = function (editor) {\r\n        return editor.getOption(39 /* gotoLocation */).alternativeReferenceCommand;\r\n    };\r\n    ReferencesAction.prototype._getGoToPreference = function (editor) {\r\n        return editor.getOption(39 /* gotoLocation */).multipleReferences;\r\n    };\r\n    return ReferencesAction;\r\n}(SymbolNavigationAction));\r\nregisterEditorAction(/** @class */ (function (_super) {\r\n    __extends(GoToReferencesAction, _super);\r\n    function GoToReferencesAction() {\r\n        return _super.call(this, {\r\n            openToSide: false,\r\n            openInPeek: false,\r\n            muteMessage: false\r\n        }, {\r\n            id: 'editor.action.goToReferences',\r\n            label: nls.localize('goToReferences.label', \"Go to References\"),\r\n            alias: 'Go to References',\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.hasReferenceProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInEmbeddedEditor.toNegated()),\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 1024 /* Shift */ | 70 /* F12 */,\r\n                weight: 100 /* EditorContrib */\r\n            },\r\n            contextMenuOpts: {\r\n                group: 'navigation',\r\n                order: 1.45\r\n            },\r\n            menuOpts: {\r\n                menuId: 17 /* MenubarGoMenu */,\r\n                group: '4_symbol_nav',\r\n                order: 5,\r\n                title: nls.localize({ key: 'miGotoReference', comment: ['&& denotes a mnemonic'] }, \"Go to &&References\")\r\n            },\r\n        }) || this;\r\n    }\r\n    GoToReferencesAction.prototype._getLocationModel = function (model, position, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _a = ReferencesModel.bind;\r\n                        return [4 /*yield*/, getReferencesAtPosition(model, position, true, token)];\r\n                    case 1: return [2 /*return*/, new (_a.apply(ReferencesModel, [void 0, _b.sent(), nls.localize('ref.title', 'References')]))()];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return GoToReferencesAction;\r\n}(ReferencesAction)));\r\nregisterEditorAction(/** @class */ (function (_super) {\r\n    __extends(PeekReferencesAction, _super);\r\n    function PeekReferencesAction() {\r\n        return _super.call(this, {\r\n            openToSide: false,\r\n            openInPeek: true,\r\n            muteMessage: false\r\n        }, {\r\n            id: 'editor.action.referenceSearch.trigger',\r\n            label: nls.localize('references.action.label', \"Peek References\"),\r\n            alias: 'Peek References',\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.hasReferenceProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInEmbeddedEditor.toNegated()),\r\n            contextMenuOpts: {\r\n                menuId: 8 /* EditorContextPeek */,\r\n                group: 'peek',\r\n                order: 6\r\n            }\r\n        }) || this;\r\n    }\r\n    PeekReferencesAction.prototype._getLocationModel = function (model, position, token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var _a;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        _a = ReferencesModel.bind;\r\n                        return [4 /*yield*/, getReferencesAtPosition(model, position, false, token)];\r\n                    case 1: return [2 /*return*/, new (_a.apply(ReferencesModel, [void 0, _b.sent(), nls.localize('ref.title', 'References')]))()];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return PeekReferencesAction;\r\n}(ReferencesAction)));\r\n//#endregion\r\n//#region --- GENERIC goto symbols command\r\nvar GenericGoToLocationAction = /** @class */ (function (_super) {\r\n    __extends(GenericGoToLocationAction, _super);\r\n    function GenericGoToLocationAction(_references, _gotoMultipleBehaviour) {\r\n        var _this = _super.call(this, {\r\n            muteMessage: true,\r\n            openInPeek: false,\r\n            openToSide: false\r\n        }, {\r\n            id: 'editor.action.goToLocation',\r\n            label: nls.localize('label.generic', \"Go To Any Symbol\"),\r\n            alias: 'Go To Any Symbol',\r\n            precondition: ContextKeyExpr.and(PeekContext.notInPeekEditor, EditorContextKeys.isInEmbeddedEditor.toNegated()),\r\n        }) || this;\r\n        _this._references = _references;\r\n        _this._gotoMultipleBehaviour = _gotoMultipleBehaviour;\r\n        return _this;\r\n    }\r\n    GenericGoToLocationAction.prototype._getLocationModel = function (_model, _position, _token) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, new ReferencesModel(this._references, nls.localize('generic.title', 'Locations'))];\r\n            });\r\n        });\r\n    };\r\n    GenericGoToLocationAction.prototype._getNoResultFoundMessage = function (info) {\r\n        return info && nls.localize('generic.noResult', \"No results for '{0}'\", info.word) || '';\r\n    };\r\n    GenericGoToLocationAction.prototype._getGoToPreference = function (editor) {\r\n        var _a;\r\n        return _a = this._gotoMultipleBehaviour, (_a !== null && _a !== void 0 ? _a : editor.getOption(39 /* gotoLocation */).multipleReferences);\r\n    };\r\n    GenericGoToLocationAction.prototype._getAlternativeCommand = function () { return ''; };\r\n    return GenericGoToLocationAction;\r\n}(SymbolNavigationAction));\r\nCommandsRegistry.registerCommand({\r\n    id: 'editor.action.goToLocations',\r\n    description: {\r\n        description: 'Go to locations from a position in a file',\r\n        args: [\r\n            { name: 'uri', description: 'The text document in which to start', constraint: URI },\r\n            { name: 'position', description: 'The position at which to start', constraint: corePosition.Position.isIPosition },\r\n            { name: 'locations', description: 'An array of locations.', constraint: Array },\r\n            { name: 'multiple', description: 'Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto' },\r\n        ]\r\n    },\r\n    handler: function (accessor, resource, position, references, multiple) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var editorService, editor;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    assertType(URI.isUri(resource));\r\n                    assertType(corePosition.Position.isIPosition(position));\r\n                    assertType(Array.isArray(references));\r\n                    assertType(typeof multiple === 'undefined' || typeof multiple === 'string');\r\n                    editorService = accessor.get(ICodeEditorService);\r\n                    return [4 /*yield*/, editorService.openCodeEditor({ resource: resource }, editorService.getFocusedCodeEditor())];\r\n                case 1:\r\n                    editor = _a.sent();\r\n                    if (isCodeEditor(editor)) {\r\n                        editor.setPosition(position);\r\n                        editor.revealPositionInCenterIfOutsideViewport(position, 0 /* Smooth */);\r\n                        return [2 /*return*/, editor.invokeWithinContext(function (accessor) {\r\n                                var command = new GenericGoToLocationAction(references, multiple);\r\n                                accessor.get(IInstantiationService).invokeFunction(command.run.bind(command), editor);\r\n                            })];\r\n                    }\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    }); }\r\n});\r\n//#endregion\r\n//#region --- REFERENCE search special commands\r\nCommandsRegistry.registerCommand({\r\n    id: 'editor.action.findReferences',\r\n    handler: function (accessor, resource, position) {\r\n        assertType(URI.isUri(resource));\r\n        assertType(corePosition.Position.isIPosition(position));\r\n        var codeEditorService = accessor.get(ICodeEditorService);\r\n        return codeEditorService.openCodeEditor({ resource: resource }, codeEditorService.getFocusedCodeEditor()).then(function (control) {\r\n            if (!isCodeEditor(control) || !control.hasModel()) {\r\n                return undefined;\r\n            }\r\n            var controller = ReferencesController.get(control);\r\n            if (!controller) {\r\n                return undefined;\r\n            }\r\n            var references = createCancelablePromise(function (token) { return getReferencesAtPosition(control.getModel(), corePosition.Position.lift(position), false, token).then(function (references) { return new ReferencesModel(references, nls.localize('ref.title', 'References')); }); });\r\n            var range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\r\n            return Promise.resolve(controller.toggleWidget(range, references, false));\r\n        });\r\n    }\r\n});\r\n// use NEW command\r\nCommandsRegistry.registerCommandAlias('editor.action.showReferences', 'editor.action.goToLocations');\r\n//#endregion\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport * as browser from '../../../../base/browser/browser.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { Emitter } from '../../../../base/common/event.js';\r\nimport * as platform from '../../../../base/common/platform.js';\r\nfunction hasModifier(e, modifier) {\r\n    return !!e[modifier];\r\n}\r\n/**\r\n * An event that encapsulates the various trigger modifiers logic needed for go to definition.\r\n */\r\nvar ClickLinkMouseEvent = /** @class */ (function () {\r\n    function ClickLinkMouseEvent(source, opts) {\r\n        this.target = source.target;\r\n        this.hasTriggerModifier = hasModifier(source.event, opts.triggerModifier);\r\n        this.hasSideBySideModifier = hasModifier(source.event, opts.triggerSideBySideModifier);\r\n        this.isNoneOrSingleMouseDown = (browser.isIE || source.event.detail <= 1); // IE does not support event.detail properly\r\n    }\r\n    return ClickLinkMouseEvent;\r\n}());\r\nexport { ClickLinkMouseEvent };\r\n/**\r\n * An event that encapsulates the various trigger modifiers logic needed for go to definition.\r\n */\r\nvar ClickLinkKeyboardEvent = /** @class */ (function () {\r\n    function ClickLinkKeyboardEvent(source, opts) {\r\n        this.keyCodeIsTriggerKey = (source.keyCode === opts.triggerKey);\r\n        this.keyCodeIsSideBySideKey = (source.keyCode === opts.triggerSideBySideKey);\r\n        this.hasTriggerModifier = hasModifier(source, opts.triggerModifier);\r\n    }\r\n    return ClickLinkKeyboardEvent;\r\n}());\r\nexport { ClickLinkKeyboardEvent };\r\nvar ClickLinkOptions = /** @class */ (function () {\r\n    function ClickLinkOptions(triggerKey, triggerModifier, triggerSideBySideKey, triggerSideBySideModifier) {\r\n        this.triggerKey = triggerKey;\r\n        this.triggerModifier = triggerModifier;\r\n        this.triggerSideBySideKey = triggerSideBySideKey;\r\n        this.triggerSideBySideModifier = triggerSideBySideModifier;\r\n    }\r\n    ClickLinkOptions.prototype.equals = function (other) {\r\n        return (this.triggerKey === other.triggerKey\r\n            && this.triggerModifier === other.triggerModifier\r\n            && this.triggerSideBySideKey === other.triggerSideBySideKey\r\n            && this.triggerSideBySideModifier === other.triggerSideBySideModifier);\r\n    };\r\n    return ClickLinkOptions;\r\n}());\r\nexport { ClickLinkOptions };\r\nfunction createOptions(multiCursorModifier) {\r\n    if (multiCursorModifier === 'altKey') {\r\n        if (platform.isMacintosh) {\r\n            return new ClickLinkOptions(57 /* Meta */, 'metaKey', 6 /* Alt */, 'altKey');\r\n        }\r\n        return new ClickLinkOptions(5 /* Ctrl */, 'ctrlKey', 6 /* Alt */, 'altKey');\r\n    }\r\n    if (platform.isMacintosh) {\r\n        return new ClickLinkOptions(6 /* Alt */, 'altKey', 57 /* Meta */, 'metaKey');\r\n    }\r\n    return new ClickLinkOptions(6 /* Alt */, 'altKey', 5 /* Ctrl */, 'ctrlKey');\r\n}\r\nvar ClickLinkGesture = /** @class */ (function (_super) {\r\n    __extends(ClickLinkGesture, _super);\r\n    function ClickLinkGesture(editor) {\r\n        var _this = _super.call(this) || this;\r\n        _this._onMouseMoveOrRelevantKeyDown = _this._register(new Emitter());\r\n        _this.onMouseMoveOrRelevantKeyDown = _this._onMouseMoveOrRelevantKeyDown.event;\r\n        _this._onExecute = _this._register(new Emitter());\r\n        _this.onExecute = _this._onExecute.event;\r\n        _this._onCancel = _this._register(new Emitter());\r\n        _this.onCancel = _this._onCancel.event;\r\n        _this._editor = editor;\r\n        _this._opts = createOptions(_this._editor.getOption(57 /* multiCursorModifier */));\r\n        _this.lastMouseMoveEvent = null;\r\n        _this.hasTriggerKeyOnMouseDown = false;\r\n        _this._register(_this._editor.onDidChangeConfiguration(function (e) {\r\n            if (e.hasChanged(57 /* multiCursorModifier */)) {\r\n                var newOpts = createOptions(_this._editor.getOption(57 /* multiCursorModifier */));\r\n                if (_this._opts.equals(newOpts)) {\r\n                    return;\r\n                }\r\n                _this._opts = newOpts;\r\n                _this.lastMouseMoveEvent = null;\r\n                _this.hasTriggerKeyOnMouseDown = false;\r\n                _this._onCancel.fire();\r\n            }\r\n        }));\r\n        _this._register(_this._editor.onMouseMove(function (e) { return _this.onEditorMouseMove(new ClickLinkMouseEvent(e, _this._opts)); }));\r\n        _this._register(_this._editor.onMouseDown(function (e) { return _this.onEditorMouseDown(new ClickLinkMouseEvent(e, _this._opts)); }));\r\n        _this._register(_this._editor.onMouseUp(function (e) { return _this.onEditorMouseUp(new ClickLinkMouseEvent(e, _this._opts)); }));\r\n        _this._register(_this._editor.onKeyDown(function (e) { return _this.onEditorKeyDown(new ClickLinkKeyboardEvent(e, _this._opts)); }));\r\n        _this._register(_this._editor.onKeyUp(function (e) { return _this.onEditorKeyUp(new ClickLinkKeyboardEvent(e, _this._opts)); }));\r\n        _this._register(_this._editor.onMouseDrag(function () { return _this.resetHandler(); }));\r\n        _this._register(_this._editor.onDidChangeCursorSelection(function (e) { return _this.onDidChangeCursorSelection(e); }));\r\n        _this._register(_this._editor.onDidChangeModel(function (e) { return _this.resetHandler(); }));\r\n        _this._register(_this._editor.onDidChangeModelContent(function () { return _this.resetHandler(); }));\r\n        _this._register(_this._editor.onDidScrollChange(function (e) {\r\n            if (e.scrollTopChanged || e.scrollLeftChanged) {\r\n                _this.resetHandler();\r\n            }\r\n        }));\r\n        return _this;\r\n    }\r\n    ClickLinkGesture.prototype.onDidChangeCursorSelection = function (e) {\r\n        if (e.selection && e.selection.startColumn !== e.selection.endColumn) {\r\n            this.resetHandler(); // immediately stop this feature if the user starts to select (https://github.com/Microsoft/vscode/issues/7827)\r\n        }\r\n    };\r\n    ClickLinkGesture.prototype.onEditorMouseMove = function (mouseEvent) {\r\n        this.lastMouseMoveEvent = mouseEvent;\r\n        this._onMouseMoveOrRelevantKeyDown.fire([mouseEvent, null]);\r\n    };\r\n    ClickLinkGesture.prototype.onEditorMouseDown = function (mouseEvent) {\r\n        // We need to record if we had the trigger key on mouse down because someone might select something in the editor\r\n        // holding the mouse down and then while mouse is down start to press Ctrl/Cmd to start a copy operation and then\r\n        // release the mouse button without wanting to do the navigation.\r\n        // With this flag we prevent goto definition if the mouse was down before the trigger key was pressed.\r\n        this.hasTriggerKeyOnMouseDown = mouseEvent.hasTriggerModifier;\r\n    };\r\n    ClickLinkGesture.prototype.onEditorMouseUp = function (mouseEvent) {\r\n        if (this.hasTriggerKeyOnMouseDown) {\r\n            this._onExecute.fire(mouseEvent);\r\n        }\r\n    };\r\n    ClickLinkGesture.prototype.onEditorKeyDown = function (e) {\r\n        if (this.lastMouseMoveEvent\r\n            && (e.keyCodeIsTriggerKey // User just pressed Ctrl/Cmd (normal goto definition)\r\n                || (e.keyCodeIsSideBySideKey && e.hasTriggerModifier) // User pressed Ctrl/Cmd+Alt (goto definition to the side)\r\n            )) {\r\n            this._onMouseMoveOrRelevantKeyDown.fire([this.lastMouseMoveEvent, e]);\r\n        }\r\n        else if (e.hasTriggerModifier) {\r\n            this._onCancel.fire(); // remove decorations if user holds another key with ctrl/cmd to prevent accident goto declaration\r\n        }\r\n    };\r\n    ClickLinkGesture.prototype.onEditorKeyUp = function (e) {\r\n        if (e.keyCodeIsTriggerKey) {\r\n            this._onCancel.fire();\r\n        }\r\n    };\r\n    ClickLinkGesture.prototype.resetHandler = function () {\r\n        this.lastMouseMoveEvent = null;\r\n        this.hasTriggerKeyOnMouseDown = false;\r\n        this._onCancel.fire();\r\n    };\r\n    return ClickLinkGesture;\r\n}(Disposable));\r\nexport { ClickLinkGesture };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport './goToDefinitionAtPosition.css';\r\nimport * as nls from '../../../../nls.js';\r\nimport { createCancelablePromise } from '../../../../base/common/async.js';\r\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\r\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\r\nimport { IModeService } from '../../../common/services/modeService.js';\r\nimport { Range } from '../../../common/core/range.js';\r\nimport { DefinitionProviderRegistry } from '../../../common/modes.js';\r\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nimport { getDefinitionsAtPosition } from '../goToSymbol.js';\r\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\r\nimport { ITextModelService } from '../../../common/services/resolverService.js';\r\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\r\nimport { editorActiveLinkForeground } from '../../../../platform/theme/common/colorRegistry.js';\r\nimport { EditorState } from '../../../browser/core/editorState.js';\r\nimport { DefinitionAction } from '../goToCommands.js';\r\nimport { ClickLinkGesture } from './clickLinkGesture.js';\r\nimport { Position } from '../../../common/core/position.js';\r\nimport { withNullAsUndefined } from '../../../../base/common/types.js';\r\nvar GotoDefinitionAtPositionEditorContribution = /** @class */ (function () {\r\n    function GotoDefinitionAtPositionEditorContribution(editor, textModelResolverService, modeService) {\r\n        var _this = this;\r\n        this.textModelResolverService = textModelResolverService;\r\n        this.modeService = modeService;\r\n        this.toUnhook = new DisposableStore();\r\n        this.toUnhookForKeyboard = new DisposableStore();\r\n        this.linkDecorations = [];\r\n        this.currentWordAtPosition = null;\r\n        this.previousPromise = null;\r\n        this.editor = editor;\r\n        var linkGesture = new ClickLinkGesture(editor);\r\n        this.toUnhook.add(linkGesture);\r\n        this.toUnhook.add(linkGesture.onMouseMoveOrRelevantKeyDown(function (_a) {\r\n            var mouseEvent = _a[0], keyboardEvent = _a[1];\r\n            _this.startFindDefinitionFromMouse(mouseEvent, withNullAsUndefined(keyboardEvent));\r\n        }));\r\n        this.toUnhook.add(linkGesture.onExecute(function (mouseEvent) {\r\n            if (_this.isEnabled(mouseEvent)) {\r\n                _this.gotoDefinition(mouseEvent.target.position, mouseEvent.hasSideBySideModifier).then(function () {\r\n                    _this.removeLinkDecorations();\r\n                }, function (error) {\r\n                    _this.removeLinkDecorations();\r\n                    onUnexpectedError(error);\r\n                });\r\n            }\r\n        }));\r\n        this.toUnhook.add(linkGesture.onCancel(function () {\r\n            _this.removeLinkDecorations();\r\n            _this.currentWordAtPosition = null;\r\n        }));\r\n    }\r\n    GotoDefinitionAtPositionEditorContribution.get = function (editor) {\r\n        return editor.getContribution(GotoDefinitionAtPositionEditorContribution.ID);\r\n    };\r\n    GotoDefinitionAtPositionEditorContribution.prototype.startFindDefinitionFromCursor = function (position) {\r\n        // For issue: https://github.com/microsoft/vscode/issues/46257\r\n        // equivalent to mouse move with meta/ctrl key\r\n        var _this = this;\r\n        // First find the definition and add decorations\r\n        // to the editor to be shown with the content hover widget\r\n        return this.startFindDefinition(position).then(function () {\r\n            // Add listeners for editor cursor move and key down events\r\n            // Dismiss the \"extended\" editor decorations when the user hides\r\n            // the hover widget. There is no event for the widget itself so these\r\n            // serve as a best effort. After removing the link decorations, the hover\r\n            // widget is clean and will only show declarations per next request.\r\n            _this.toUnhookForKeyboard.add(_this.editor.onDidChangeCursorPosition(function () {\r\n                _this.currentWordAtPosition = null;\r\n                _this.removeLinkDecorations();\r\n                _this.toUnhookForKeyboard.clear();\r\n            }));\r\n            _this.toUnhookForKeyboard.add(_this.editor.onKeyDown(function (e) {\r\n                if (e) {\r\n                    _this.currentWordAtPosition = null;\r\n                    _this.removeLinkDecorations();\r\n                    _this.toUnhookForKeyboard.clear();\r\n                }\r\n            }));\r\n        });\r\n    };\r\n    GotoDefinitionAtPositionEditorContribution.prototype.startFindDefinitionFromMouse = function (mouseEvent, withKey) {\r\n        // check if we are active and on a content widget\r\n        if (mouseEvent.target.type === 9 /* CONTENT_WIDGET */ && this.linkDecorations.length > 0) {\r\n            return;\r\n        }\r\n        if (!this.editor.hasModel() || !this.isEnabled(mouseEvent, withKey)) {\r\n            this.currentWordAtPosition = null;\r\n            this.removeLinkDecorations();\r\n            return;\r\n        }\r\n        var position = mouseEvent.target.position;\r\n        this.startFindDefinition(position);\r\n    };\r\n    GotoDefinitionAtPositionEditorContribution.prototype.startFindDefinition = function (position) {\r\n        var _this = this;\r\n        var _a;\r\n        // Dispose listeners for updating decorations when using keyboard to show definition hover\r\n        this.toUnhookForKeyboard.clear();\r\n        // Find word at mouse position\r\n        var word = position ? (_a = this.editor.getModel()) === null || _a === void 0 ? void 0 : _a.getWordAtPosition(position) : null;\r\n        if (!word) {\r\n            this.currentWordAtPosition = null;\r\n            this.removeLinkDecorations();\r\n            return Promise.resolve(0);\r\n        }\r\n        // Return early if word at position is still the same\r\n        if (this.currentWordAtPosition && this.currentWordAtPosition.startColumn === word.startColumn && this.currentWordAtPosition.endColumn === word.endColumn && this.currentWordAtPosition.word === word.word) {\r\n            return Promise.resolve(0);\r\n        }\r\n        this.currentWordAtPosition = word;\r\n        // Find definition and decorate word if found\r\n        var state = new EditorState(this.editor, 4 /* Position */ | 1 /* Value */ | 2 /* Selection */ | 8 /* Scroll */);\r\n        if (this.previousPromise) {\r\n            this.previousPromise.cancel();\r\n            this.previousPromise = null;\r\n        }\r\n        this.previousPromise = createCancelablePromise(function (token) { return _this.findDefinition(position, token); });\r\n        return this.previousPromise.then(function (results) {\r\n            if (!results || !results.length || !state.validate(_this.editor)) {\r\n                _this.removeLinkDecorations();\r\n                return;\r\n            }\r\n            // Multiple results\r\n            if (results.length > 1) {\r\n                _this.addDecoration(new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn), new MarkdownString().appendText(nls.localize('multipleResults', \"Click to show {0} definitions.\", results.length)));\r\n            }\r\n            // Single result\r\n            else {\r\n                var result_1 = results[0];\r\n                if (!result_1.uri) {\r\n                    return;\r\n                }\r\n                _this.textModelResolverService.createModelReference(result_1.uri).then(function (ref) {\r\n                    if (!ref.object || !ref.object.textEditorModel) {\r\n                        ref.dispose();\r\n                        return;\r\n                    }\r\n                    var textEditorModel = ref.object.textEditorModel;\r\n                    var startLineNumber = result_1.range.startLineNumber;\r\n                    if (startLineNumber < 1 || startLineNumber > textEditorModel.getLineCount()) {\r\n                        // invalid range\r\n                        ref.dispose();\r\n                        return;\r\n                    }\r\n                    var previewValue = _this.getPreviewValue(textEditorModel, startLineNumber, result_1);\r\n                    var wordRange;\r\n                    if (result_1.originSelectionRange) {\r\n                        wordRange = Range.lift(result_1.originSelectionRange);\r\n                    }\r\n                    else {\r\n                        wordRange = new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn);\r\n                    }\r\n                    var modeId = _this.modeService.getModeIdByFilepathOrFirstLine(textEditorModel.uri);\r\n                    _this.addDecoration(wordRange, new MarkdownString().appendCodeblock(modeId ? modeId : '', previewValue));\r\n                    ref.dispose();\r\n                });\r\n            }\r\n        }).then(undefined, onUnexpectedError);\r\n    };\r\n    GotoDefinitionAtPositionEditorContribution.prototype.getPreviewValue = function (textEditorModel, startLineNumber, result) {\r\n        var rangeToUse = result.targetSelectionRange ? result.range : this.getPreviewRangeBasedOnBrackets(textEditorModel, startLineNumber);\r\n        var numberOfLinesInRange = rangeToUse.endLineNumber - rangeToUse.startLineNumber;\r\n        if (numberOfLinesInRange >= GotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES) {\r\n            rangeToUse = this.getPreviewRangeBasedOnIndentation(textEditorModel, startLineNumber);\r\n        }\r\n        var previewValue = this.stripIndentationFromPreviewRange(textEditorModel, startLineNumber, rangeToUse);\r\n        return previewValue;\r\n    };\r\n    GotoDefinitionAtPositionEditorContribution.prototype.stripIndentationFromPreviewRange = function (textEditorModel, startLineNumber, previewRange) {\r\n        var startIndent = textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\r\n        var minIndent = startIndent;\r\n        for (var endLineNumber = startLineNumber + 1; endLineNumber < previewRange.endLineNumber; endLineNumber++) {\r\n            var endIndent = textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\r\n            minIndent = Math.min(minIndent, endIndent);\r\n        }\r\n        var previewValue = textEditorModel.getValueInRange(previewRange).replace(new RegExp(\"^\\\\s{\" + (minIndent - 1) + \"}\", 'gm'), '').trim();\r\n        return previewValue;\r\n    };\r\n    GotoDefinitionAtPositionEditorContribution.prototype.getPreviewRangeBasedOnIndentation = function (textEditorModel, startLineNumber) {\r\n        var startIndent = textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\r\n        var maxLineNumber = Math.min(textEditorModel.getLineCount(), startLineNumber + GotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES);\r\n        var endLineNumber = startLineNumber + 1;\r\n        for (; endLineNumber < maxLineNumber; endLineNumber++) {\r\n            var endIndent = textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\r\n            if (startIndent === endIndent) {\r\n                break;\r\n            }\r\n        }\r\n        return new Range(startLineNumber, 1, endLineNumber + 1, 1);\r\n    };\r\n    GotoDefinitionAtPositionEditorContribution.prototype.getPreviewRangeBasedOnBrackets = function (textEditorModel, startLineNumber) {\r\n        var maxLineNumber = Math.min(textEditorModel.getLineCount(), startLineNumber + GotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES);\r\n        var brackets = [];\r\n        var ignoreFirstEmpty = true;\r\n        var currentBracket = textEditorModel.findNextBracket(new Position(startLineNumber, 1));\r\n        while (currentBracket !== null) {\r\n            if (brackets.length === 0) {\r\n                brackets.push(currentBracket);\r\n            }\r\n            else {\r\n                var lastBracket = brackets[brackets.length - 1];\r\n                if (lastBracket.open[0] === currentBracket.open[0] && lastBracket.isOpen && !currentBracket.isOpen) {\r\n                    brackets.pop();\r\n                }\r\n                else {\r\n                    brackets.push(currentBracket);\r\n                }\r\n                if (brackets.length === 0) {\r\n                    if (ignoreFirstEmpty) {\r\n                        ignoreFirstEmpty = false;\r\n                    }\r\n                    else {\r\n                        return new Range(startLineNumber, 1, currentBracket.range.endLineNumber + 1, 1);\r\n                    }\r\n                }\r\n            }\r\n            var maxColumn = textEditorModel.getLineMaxColumn(startLineNumber);\r\n            var nextLineNumber = currentBracket.range.endLineNumber;\r\n            var nextColumn = currentBracket.range.endColumn;\r\n            if (maxColumn === currentBracket.range.endColumn) {\r\n                nextLineNumber++;\r\n                nextColumn = 1;\r\n            }\r\n            if (nextLineNumber > maxLineNumber) {\r\n                return new Range(startLineNumber, 1, maxLineNumber + 1, 1);\r\n            }\r\n            currentBracket = textEditorModel.findNextBracket(new Position(nextLineNumber, nextColumn));\r\n        }\r\n        return new Range(startLineNumber, 1, maxLineNumber + 1, 1);\r\n    };\r\n    GotoDefinitionAtPositionEditorContribution.prototype.addDecoration = function (range, hoverMessage) {\r\n        var newDecorations = {\r\n            range: range,\r\n            options: {\r\n                inlineClassName: 'goto-definition-link',\r\n                hoverMessage: hoverMessage\r\n            }\r\n        };\r\n        this.linkDecorations = this.editor.deltaDecorations(this.linkDecorations, [newDecorations]);\r\n    };\r\n    GotoDefinitionAtPositionEditorContribution.prototype.removeLinkDecorations = function () {\r\n        if (this.linkDecorations.length > 0) {\r\n            this.linkDecorations = this.editor.deltaDecorations(this.linkDecorations, []);\r\n        }\r\n    };\r\n    GotoDefinitionAtPositionEditorContribution.prototype.isEnabled = function (mouseEvent, withKey) {\r\n        return this.editor.hasModel() &&\r\n            mouseEvent.isNoneOrSingleMouseDown &&\r\n            (mouseEvent.target.type === 6 /* CONTENT_TEXT */) &&\r\n            (mouseEvent.hasTriggerModifier || (withKey ? withKey.keyCodeIsTriggerKey : false)) &&\r\n            DefinitionProviderRegistry.has(this.editor.getModel());\r\n    };\r\n    GotoDefinitionAtPositionEditorContribution.prototype.findDefinition = function (position, token) {\r\n        var model = this.editor.getModel();\r\n        if (!model) {\r\n            return Promise.resolve(null);\r\n        }\r\n        return getDefinitionsAtPosition(model, position, token);\r\n    };\r\n    GotoDefinitionAtPositionEditorContribution.prototype.gotoDefinition = function (position, openToSide) {\r\n        var _this = this;\r\n        this.editor.setPosition(position);\r\n        var action = new DefinitionAction({ openToSide: openToSide, openInPeek: false, muteMessage: true }, { alias: '', label: '', id: '', precondition: undefined });\r\n        return this.editor.invokeWithinContext(function (accessor) { return action.run(accessor, _this.editor); });\r\n    };\r\n    GotoDefinitionAtPositionEditorContribution.prototype.dispose = function () {\r\n        this.toUnhook.dispose();\r\n    };\r\n    GotoDefinitionAtPositionEditorContribution.ID = 'editor.contrib.gotodefinitionatposition';\r\n    GotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES = 8;\r\n    GotoDefinitionAtPositionEditorContribution = __decorate([\r\n        __param(1, ITextModelService),\r\n        __param(2, IModeService)\r\n    ], GotoDefinitionAtPositionEditorContribution);\r\n    return GotoDefinitionAtPositionEditorContribution;\r\n}());\r\nexport { GotoDefinitionAtPositionEditorContribution };\r\nregisterEditorContribution(GotoDefinitionAtPositionEditorContribution.ID, GotoDefinitionAtPositionEditorContribution);\r\nregisterThemingParticipant(function (theme, collector) {\r\n    var activeLinkForeground = theme.getColor(editorActiveLinkForeground);\r\n    if (activeLinkForeground) {\r\n        collector.addRule(\".monaco-editor .goto-definition-link { color: \" + activeLinkForeground + \" !important; }\");\r\n    }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport './hover.css';\r\nimport * as nls from '../../../nls.js';\r\nimport { KeyChord } from '../../../base/common/keyCodes.js';\r\nimport { DisposableStore, MutableDisposable } from '../../../base/common/lifecycle.js';\r\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../browser/editorExtensions.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\r\nimport { IModeService } from '../../common/services/modeService.js';\r\nimport { ModesContentHoverWidget } from './modesContentHover.js';\r\nimport { ModesGlyphHoverWidget } from './modesGlyphHover.js';\r\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\r\nimport { editorHoverBackground, editorHoverBorder, editorHoverHighlight, textCodeBlockBackground, textLinkForeground, editorHoverStatusBarBackground, editorHoverForeground } from '../../../platform/theme/common/colorRegistry.js';\r\nimport { IThemeService, registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\r\nimport { IMarkerDecorationsService } from '../../common/services/markersDecorationService.js';\r\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\r\nimport { GotoDefinitionAtPositionEditorContribution } from '../gotoSymbol/link/goToDefinitionAtPosition.js';\r\nvar ModesHoverController = /** @class */ (function () {\r\n    function ModesHoverController(_editor, _openerService, _modeService, _markerDecorationsService, _keybindingService, _themeService) {\r\n        var _this = this;\r\n        this._editor = _editor;\r\n        this._openerService = _openerService;\r\n        this._modeService = _modeService;\r\n        this._markerDecorationsService = _markerDecorationsService;\r\n        this._keybindingService = _keybindingService;\r\n        this._themeService = _themeService;\r\n        this._toUnhook = new DisposableStore();\r\n        this._contentWidget = new MutableDisposable();\r\n        this._glyphWidget = new MutableDisposable();\r\n        this._isMouseDown = false;\r\n        this._hoverClicked = false;\r\n        this._hookEvents();\r\n        this._didChangeConfigurationHandler = this._editor.onDidChangeConfiguration(function (e) {\r\n            if (e.hasChanged(42 /* hover */)) {\r\n                _this._hideWidgets();\r\n                _this._unhookEvents();\r\n                _this._hookEvents();\r\n            }\r\n        });\r\n    }\r\n    Object.defineProperty(ModesHoverController.prototype, \"contentWidget\", {\r\n        get: function () {\r\n            if (!this._contentWidget.value) {\r\n                this._createHoverWidgets();\r\n            }\r\n            return this._contentWidget.value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ModesHoverController.prototype, \"glyphWidget\", {\r\n        get: function () {\r\n            if (!this._glyphWidget.value) {\r\n                this._createHoverWidgets();\r\n            }\r\n            return this._glyphWidget.value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ModesHoverController.get = function (editor) {\r\n        return editor.getContribution(ModesHoverController.ID);\r\n    };\r\n    ModesHoverController.prototype._hookEvents = function () {\r\n        var _this = this;\r\n        var hideWidgetsEventHandler = function () { return _this._hideWidgets(); };\r\n        var hoverOpts = this._editor.getOption(42 /* hover */);\r\n        this._isHoverEnabled = hoverOpts.enabled;\r\n        this._isHoverSticky = hoverOpts.sticky;\r\n        if (this._isHoverEnabled) {\r\n            this._toUnhook.add(this._editor.onMouseDown(function (e) { return _this._onEditorMouseDown(e); }));\r\n            this._toUnhook.add(this._editor.onMouseUp(function (e) { return _this._onEditorMouseUp(e); }));\r\n            this._toUnhook.add(this._editor.onMouseMove(function (e) { return _this._onEditorMouseMove(e); }));\r\n            this._toUnhook.add(this._editor.onKeyDown(function (e) { return _this._onKeyDown(e); }));\r\n            this._toUnhook.add(this._editor.onDidChangeModelDecorations(function () { return _this._onModelDecorationsChanged(); }));\r\n        }\r\n        else {\r\n            this._toUnhook.add(this._editor.onMouseMove(hideWidgetsEventHandler));\r\n        }\r\n        this._toUnhook.add(this._editor.onMouseLeave(hideWidgetsEventHandler));\r\n        this._toUnhook.add(this._editor.onDidChangeModel(hideWidgetsEventHandler));\r\n        this._toUnhook.add(this._editor.onDidScrollChange(function (e) { return _this._onEditorScrollChanged(e); }));\r\n    };\r\n    ModesHoverController.prototype._unhookEvents = function () {\r\n        this._toUnhook.clear();\r\n    };\r\n    ModesHoverController.prototype._onModelDecorationsChanged = function () {\r\n        this.contentWidget.onModelDecorationsChanged();\r\n        this.glyphWidget.onModelDecorationsChanged();\r\n    };\r\n    ModesHoverController.prototype._onEditorScrollChanged = function (e) {\r\n        if (e.scrollTopChanged || e.scrollLeftChanged) {\r\n            this._hideWidgets();\r\n        }\r\n    };\r\n    ModesHoverController.prototype._onEditorMouseDown = function (mouseEvent) {\r\n        this._isMouseDown = true;\r\n        var targetType = mouseEvent.target.type;\r\n        if (targetType === 9 /* CONTENT_WIDGET */ && mouseEvent.target.detail === ModesContentHoverWidget.ID) {\r\n            this._hoverClicked = true;\r\n            // mouse down on top of content hover widget\r\n            return;\r\n        }\r\n        if (targetType === 12 /* OVERLAY_WIDGET */ && mouseEvent.target.detail === ModesGlyphHoverWidget.ID) {\r\n            // mouse down on top of overlay hover widget\r\n            return;\r\n        }\r\n        if (targetType !== 12 /* OVERLAY_WIDGET */ && mouseEvent.target.detail !== ModesGlyphHoverWidget.ID) {\r\n            this._hoverClicked = false;\r\n        }\r\n        this._hideWidgets();\r\n    };\r\n    ModesHoverController.prototype._onEditorMouseUp = function (mouseEvent) {\r\n        this._isMouseDown = false;\r\n    };\r\n    ModesHoverController.prototype._onEditorMouseMove = function (mouseEvent) {\r\n        var targetType = mouseEvent.target.type;\r\n        if (this._isMouseDown && this._hoverClicked && this.contentWidget.isColorPickerVisible()) {\r\n            return;\r\n        }\r\n        if (this._isHoverSticky && targetType === 9 /* CONTENT_WIDGET */ && mouseEvent.target.detail === ModesContentHoverWidget.ID) {\r\n            // mouse moved on top of content hover widget\r\n            return;\r\n        }\r\n        if (this._isHoverSticky && targetType === 12 /* OVERLAY_WIDGET */ && mouseEvent.target.detail === ModesGlyphHoverWidget.ID) {\r\n            // mouse moved on top of overlay hover widget\r\n            return;\r\n        }\r\n        if (targetType === 7 /* CONTENT_EMPTY */) {\r\n            var epsilon = this._editor.getOption(32 /* fontInfo */).typicalHalfwidthCharacterWidth / 2;\r\n            var data = mouseEvent.target.detail;\r\n            if (data && !data.isAfterLines && typeof data.horizontalDistanceToText === 'number' && data.horizontalDistanceToText < epsilon) {\r\n                // Let hover kick in even when the mouse is technically in the empty area after a line, given the distance is small enough\r\n                targetType = 6 /* CONTENT_TEXT */;\r\n            }\r\n        }\r\n        if (targetType === 6 /* CONTENT_TEXT */) {\r\n            this.glyphWidget.hide();\r\n            if (this._isHoverEnabled && mouseEvent.target.range) {\r\n                this.contentWidget.startShowingAt(mouseEvent.target.range, 0 /* Delayed */, false);\r\n            }\r\n        }\r\n        else if (targetType === 2 /* GUTTER_GLYPH_MARGIN */) {\r\n            this.contentWidget.hide();\r\n            if (this._isHoverEnabled && mouseEvent.target.position) {\r\n                this.glyphWidget.startShowingAt(mouseEvent.target.position.lineNumber);\r\n            }\r\n        }\r\n        else {\r\n            this._hideWidgets();\r\n        }\r\n    };\r\n    ModesHoverController.prototype._onKeyDown = function (e) {\r\n        if (e.keyCode !== 5 /* Ctrl */ && e.keyCode !== 6 /* Alt */ && e.keyCode !== 57 /* Meta */ && e.keyCode !== 4 /* Shift */) {\r\n            // Do not hide hover when a modifier key is pressed\r\n            this._hideWidgets();\r\n        }\r\n    };\r\n    ModesHoverController.prototype._hideWidgets = function () {\r\n        if (!this._glyphWidget.value || !this._contentWidget.value || (this._isMouseDown && this._hoverClicked && this._contentWidget.value.isColorPickerVisible())) {\r\n            return;\r\n        }\r\n        this._glyphWidget.value.hide();\r\n        this._contentWidget.value.hide();\r\n    };\r\n    ModesHoverController.prototype._createHoverWidgets = function () {\r\n        this._contentWidget.value = new ModesContentHoverWidget(this._editor, this._markerDecorationsService, this._themeService, this._keybindingService, this._modeService, this._openerService);\r\n        this._glyphWidget.value = new ModesGlyphHoverWidget(this._editor, this._modeService, this._openerService);\r\n    };\r\n    ModesHoverController.prototype.showContentHover = function (range, mode, focus) {\r\n        this.contentWidget.startShowingAt(range, mode, focus);\r\n    };\r\n    ModesHoverController.prototype.dispose = function () {\r\n        this._unhookEvents();\r\n        this._toUnhook.dispose();\r\n        this._didChangeConfigurationHandler.dispose();\r\n        this._glyphWidget.dispose();\r\n        this._contentWidget.dispose();\r\n    };\r\n    ModesHoverController.ID = 'editor.contrib.hover';\r\n    ModesHoverController = __decorate([\r\n        __param(1, IOpenerService),\r\n        __param(2, IModeService),\r\n        __param(3, IMarkerDecorationsService),\r\n        __param(4, IKeybindingService),\r\n        __param(5, IThemeService)\r\n    ], ModesHoverController);\r\n    return ModesHoverController;\r\n}());\r\nexport { ModesHoverController };\r\nvar ShowHoverAction = /** @class */ (function (_super) {\r\n    __extends(ShowHoverAction, _super);\r\n    function ShowHoverAction() {\r\n        return _super.call(this, {\r\n            id: 'editor.action.showHover',\r\n            label: nls.localize({\r\n                key: 'showHover',\r\n                comment: [\r\n                    'Label for action that will trigger the showing of a hover in the editor.',\r\n                    'This allows for users to show the hover without using the mouse.'\r\n                ]\r\n            }, \"Show Hover\"),\r\n            alias: 'Show Hover',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: KeyChord(2048 /* CtrlCmd */ | 41 /* KEY_K */, 2048 /* CtrlCmd */ | 39 /* KEY_I */),\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    ShowHoverAction.prototype.run = function (accessor, editor) {\r\n        if (!editor.hasModel()) {\r\n            return;\r\n        }\r\n        var controller = ModesHoverController.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        var position = editor.getPosition();\r\n        var range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\r\n        var focus = editor.getOption(2 /* accessibilitySupport */) === 2 /* Enabled */;\r\n        controller.showContentHover(range, 1 /* Immediate */, focus);\r\n    };\r\n    return ShowHoverAction;\r\n}(EditorAction));\r\nvar ShowDefinitionPreviewHoverAction = /** @class */ (function (_super) {\r\n    __extends(ShowDefinitionPreviewHoverAction, _super);\r\n    function ShowDefinitionPreviewHoverAction() {\r\n        return _super.call(this, {\r\n            id: 'editor.action.showDefinitionPreviewHover',\r\n            label: nls.localize({\r\n                key: 'showDefinitionPreviewHover',\r\n                comment: [\r\n                    'Label for action that will trigger the showing of definition preview hover in the editor.',\r\n                    'This allows for users to show the definition preview hover without using the mouse.'\r\n                ]\r\n            }, \"Show Definition Preview Hover\"),\r\n            alias: 'Show Definition Preview Hover',\r\n            precondition: undefined\r\n        }) || this;\r\n    }\r\n    ShowDefinitionPreviewHoverAction.prototype.run = function (accessor, editor) {\r\n        var controller = ModesHoverController.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        var position = editor.getPosition();\r\n        if (!position) {\r\n            return;\r\n        }\r\n        var range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\r\n        var goto = GotoDefinitionAtPositionEditorContribution.get(editor);\r\n        var promise = goto.startFindDefinitionFromCursor(position);\r\n        if (promise) {\r\n            promise.then(function () {\r\n                controller.showContentHover(range, 1 /* Immediate */, true);\r\n            });\r\n        }\r\n        else {\r\n            controller.showContentHover(range, 1 /* Immediate */, true);\r\n        }\r\n    };\r\n    return ShowDefinitionPreviewHoverAction;\r\n}(EditorAction));\r\nregisterEditorContribution(ModesHoverController.ID, ModesHoverController);\r\nregisterEditorAction(ShowHoverAction);\r\nregisterEditorAction(ShowDefinitionPreviewHoverAction);\r\n// theming\r\nregisterThemingParticipant(function (theme, collector) {\r\n    var editorHoverHighlightColor = theme.getColor(editorHoverHighlight);\r\n    if (editorHoverHighlightColor) {\r\n        collector.addRule(\".monaco-editor .hoverHighlight { background-color: \" + editorHoverHighlightColor + \"; }\");\r\n    }\r\n    var hoverBackground = theme.getColor(editorHoverBackground);\r\n    if (hoverBackground) {\r\n        collector.addRule(\".monaco-editor .monaco-editor-hover { background-color: \" + hoverBackground + \"; }\");\r\n    }\r\n    var hoverBorder = theme.getColor(editorHoverBorder);\r\n    if (hoverBorder) {\r\n        collector.addRule(\".monaco-editor .monaco-editor-hover { border: 1px solid \" + hoverBorder + \"; }\");\r\n        collector.addRule(\".monaco-editor .monaco-editor-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid \" + hoverBorder.transparent(0.5) + \"; }\");\r\n        collector.addRule(\".monaco-editor .monaco-editor-hover hr { border-top: 1px solid \" + hoverBorder.transparent(0.5) + \"; }\");\r\n        collector.addRule(\".monaco-editor .monaco-editor-hover hr { border-bottom: 0px solid \" + hoverBorder.transparent(0.5) + \"; }\");\r\n    }\r\n    var link = theme.getColor(textLinkForeground);\r\n    if (link) {\r\n        collector.addRule(\".monaco-editor .monaco-editor-hover a { color: \" + link + \"; }\");\r\n    }\r\n    var hoverForeground = theme.getColor(editorHoverForeground);\r\n    if (hoverForeground) {\r\n        collector.addRule(\".monaco-editor .monaco-editor-hover { color: \" + hoverForeground + \"; }\");\r\n    }\r\n    var actionsBackground = theme.getColor(editorHoverStatusBarBackground);\r\n    if (actionsBackground) {\r\n        collector.addRule(\".monaco-editor .monaco-editor-hover .hover-row .actions { background-color: \" + actionsBackground + \"; }\");\r\n    }\r\n    var codeBackground = theme.getColor(textCodeBlockBackground);\r\n    if (codeBackground) {\r\n        collector.addRule(\".monaco-editor .monaco-editor-hover code { background-color: \" + codeBackground + \"; }\");\r\n    }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { first } from '../../../base/common/async.js';\r\nimport { onUnexpectedExternalError } from '../../../base/common/errors.js';\r\nimport { registerDefaultLanguageCommand } from '../../browser/editorExtensions.js';\r\nimport * as modes from '../../common/modes.js';\r\nimport { RawContextKey } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { CancellationToken } from '../../../base/common/cancellation.js';\r\nexport var Context = {\r\n    Visible: new RawContextKey('parameterHintsVisible', false),\r\n    MultipleSignatures: new RawContextKey('parameterHintsMultipleSignatures', false),\r\n};\r\nexport function provideSignatureHelp(model, position, context, token) {\r\n    var supports = modes.SignatureHelpProviderRegistry.ordered(model);\r\n    return first(supports.map(function (support) { return function () {\r\n        return Promise.resolve(support.provideSignatureHelp(model, position, token, context))\r\n            .catch(function (e) { return onUnexpectedExternalError(e); });\r\n    }; }));\r\n}\r\nregisterDefaultLanguageCommand('_executeSignatureHelpProvider', function (model, position, args) { return __awaiter(void 0, void 0, void 0, function () {\r\n    var result;\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0: return [4 /*yield*/, provideSignatureHelp(model, position, {\r\n                    triggerKind: modes.SignatureHelpTriggerKind.Invoke,\r\n                    isRetrigger: false,\r\n                    triggerCharacter: args['triggerCharacter']\r\n                }, CancellationToken.None)];\r\n            case 1:\r\n                result = _a.sent();\r\n                if (!result) {\r\n                    return [2 /*return*/, undefined];\r\n                }\r\n                setTimeout(function () { return result.dispose(); }, 0);\r\n                return [2 /*return*/, result.value];\r\n        }\r\n    });\r\n}); });\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { createCancelablePromise, Delayer } from '../../../base/common/async.js';\r\nimport { onUnexpectedError } from '../../../base/common/errors.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { Disposable, MutableDisposable } from '../../../base/common/lifecycle.js';\r\nimport { CharacterSet } from '../../common/core/characterClassifier.js';\r\nimport * as modes from '../../common/modes.js';\r\nimport { provideSignatureHelp } from './provideSignatureHelp.js';\r\nvar ParameterHintState;\r\n(function (ParameterHintState) {\r\n    ParameterHintState.Default = { type: 0 /* Default */ };\r\n    var Pending = /** @class */ (function () {\r\n        function Pending(request) {\r\n            this.request = request;\r\n            this.type = 2 /* Pending */;\r\n        }\r\n        return Pending;\r\n    }());\r\n    ParameterHintState.Pending = Pending;\r\n    var Active = /** @class */ (function () {\r\n        function Active(hints) {\r\n            this.hints = hints;\r\n            this.type = 1 /* Active */;\r\n        }\r\n        return Active;\r\n    }());\r\n    ParameterHintState.Active = Active;\r\n})(ParameterHintState || (ParameterHintState = {}));\r\nvar ParameterHintsModel = /** @class */ (function (_super) {\r\n    __extends(ParameterHintsModel, _super);\r\n    function ParameterHintsModel(editor, delay) {\r\n        if (delay === void 0) { delay = ParameterHintsModel.DEFAULT_DELAY; }\r\n        var _this = _super.call(this) || this;\r\n        _this._onChangedHints = _this._register(new Emitter());\r\n        _this.onChangedHints = _this._onChangedHints.event;\r\n        _this.triggerOnType = false;\r\n        _this._state = ParameterHintState.Default;\r\n        _this._pendingTriggers = [];\r\n        _this._lastSignatureHelpResult = _this._register(new MutableDisposable());\r\n        _this.triggerChars = new CharacterSet();\r\n        _this.retriggerChars = new CharacterSet();\r\n        _this.triggerId = 0;\r\n        _this.editor = editor;\r\n        _this.throttledDelayer = new Delayer(delay);\r\n        _this._register(_this.editor.onDidChangeConfiguration(function () { return _this.onEditorConfigurationChange(); }));\r\n        _this._register(_this.editor.onDidChangeModel(function (e) { return _this.onModelChanged(); }));\r\n        _this._register(_this.editor.onDidChangeModelLanguage(function (_) { return _this.onModelChanged(); }));\r\n        _this._register(_this.editor.onDidChangeCursorSelection(function (e) { return _this.onCursorChange(e); }));\r\n        _this._register(_this.editor.onDidChangeModelContent(function (e) { return _this.onModelContentChange(); }));\r\n        _this._register(modes.SignatureHelpProviderRegistry.onDidChange(_this.onModelChanged, _this));\r\n        _this._register(_this.editor.onDidType(function (text) { return _this.onDidType(text); }));\r\n        _this.onEditorConfigurationChange();\r\n        _this.onModelChanged();\r\n        return _this;\r\n    }\r\n    Object.defineProperty(ParameterHintsModel.prototype, \"state\", {\r\n        get: function () { return this._state; },\r\n        set: function (value) {\r\n            if (this._state.type === 2 /* Pending */) {\r\n                this._state.request.cancel();\r\n            }\r\n            this._state = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ParameterHintsModel.prototype.cancel = function (silent) {\r\n        if (silent === void 0) { silent = false; }\r\n        this.state = ParameterHintState.Default;\r\n        this.throttledDelayer.cancel();\r\n        if (!silent) {\r\n            this._onChangedHints.fire(undefined);\r\n        }\r\n    };\r\n    ParameterHintsModel.prototype.trigger = function (context, delay) {\r\n        var _this = this;\r\n        var model = this.editor.getModel();\r\n        if (!model || !modes.SignatureHelpProviderRegistry.has(model)) {\r\n            return;\r\n        }\r\n        var triggerId = ++this.triggerId;\r\n        this._pendingTriggers.push(context);\r\n        this.throttledDelayer.trigger(function () {\r\n            return _this.doTrigger(triggerId);\r\n        }, delay)\r\n            .catch(onUnexpectedError);\r\n    };\r\n    ParameterHintsModel.prototype.next = function () {\r\n        if (this.state.type !== 1 /* Active */) {\r\n            return;\r\n        }\r\n        var length = this.state.hints.signatures.length;\r\n        var activeSignature = this.state.hints.activeSignature;\r\n        var last = (activeSignature % length) === (length - 1);\r\n        var cycle = this.editor.getOption(62 /* parameterHints */).cycle;\r\n        // If there is only one signature, or we're on last signature of list\r\n        if ((length < 2 || last) && !cycle) {\r\n            this.cancel();\r\n            return;\r\n        }\r\n        this.updateActiveSignature(last && cycle ? 0 : activeSignature + 1);\r\n    };\r\n    ParameterHintsModel.prototype.previous = function () {\r\n        if (this.state.type !== 1 /* Active */) {\r\n            return;\r\n        }\r\n        var length = this.state.hints.signatures.length;\r\n        var activeSignature = this.state.hints.activeSignature;\r\n        var first = activeSignature === 0;\r\n        var cycle = this.editor.getOption(62 /* parameterHints */).cycle;\r\n        // If there is only one signature, or we're on first signature of list\r\n        if ((length < 2 || first) && !cycle) {\r\n            this.cancel();\r\n            return;\r\n        }\r\n        this.updateActiveSignature(first && cycle ? length - 1 : activeSignature - 1);\r\n    };\r\n    ParameterHintsModel.prototype.updateActiveSignature = function (activeSignature) {\r\n        if (this.state.type !== 1 /* Active */) {\r\n            return;\r\n        }\r\n        this.state = new ParameterHintState.Active(__assign(__assign({}, this.state.hints), { activeSignature: activeSignature }));\r\n        this._onChangedHints.fire(this.state.hints);\r\n    };\r\n    ParameterHintsModel.prototype.doTrigger = function (triggerId) {\r\n        var _a, _b;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var isRetrigger, activeSignatureHelp, context, triggerContext, model, position, result, error_1;\r\n            return __generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        isRetrigger = this.state.type === 1 /* Active */ || this.state.type === 2 /* Pending */;\r\n                        activeSignatureHelp = this.state.type === 1 /* Active */ ? this.state.hints : undefined;\r\n                        this.cancel(true);\r\n                        if (this._pendingTriggers.length === 0) {\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        context = this._pendingTriggers.reduce(mergeTriggerContexts);\r\n                        this._pendingTriggers = [];\r\n                        triggerContext = {\r\n                            triggerKind: context.triggerKind,\r\n                            triggerCharacter: context.triggerCharacter,\r\n                            isRetrigger: isRetrigger,\r\n                            activeSignatureHelp: activeSignatureHelp\r\n                        };\r\n                        if (!this.editor.hasModel()) {\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        model = this.editor.getModel();\r\n                        position = this.editor.getPosition();\r\n                        this.state = new ParameterHintState.Pending(createCancelablePromise(function (token) {\r\n                            return provideSignatureHelp(model, position, triggerContext, token);\r\n                        }));\r\n                        _c.label = 1;\r\n                    case 1:\r\n                        _c.trys.push([1, 3, , 4]);\r\n                        return [4 /*yield*/, this.state.request];\r\n                    case 2:\r\n                        result = _c.sent();\r\n                        // Check that we are still resolving the correct signature help\r\n                        if (triggerId !== this.triggerId) {\r\n                            (_a = result) === null || _a === void 0 ? void 0 : _a.dispose();\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        if (!result || !result.value.signatures || result.value.signatures.length === 0) {\r\n                            (_b = result) === null || _b === void 0 ? void 0 : _b.dispose();\r\n                            this._lastSignatureHelpResult.clear();\r\n                            this.cancel();\r\n                            return [2 /*return*/, false];\r\n                        }\r\n                        else {\r\n                            this.state = new ParameterHintState.Active(result.value);\r\n                            this._lastSignatureHelpResult.value = result;\r\n                            this._onChangedHints.fire(this.state.hints);\r\n                            return [2 /*return*/, true];\r\n                        }\r\n                        return [3 /*break*/, 4];\r\n                    case 3:\r\n                        error_1 = _c.sent();\r\n                        if (triggerId === this.triggerId) {\r\n                            this.state = ParameterHintState.Default;\r\n                        }\r\n                        onUnexpectedError(error_1);\r\n                        return [2 /*return*/, false];\r\n                    case 4: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    Object.defineProperty(ParameterHintsModel.prototype, \"isTriggered\", {\r\n        get: function () {\r\n            return this.state.type === 1 /* Active */\r\n                || this.state.type === 2 /* Pending */\r\n                || this.throttledDelayer.isTriggered();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ParameterHintsModel.prototype.onModelChanged = function () {\r\n        this.cancel();\r\n        // Update trigger characters\r\n        this.triggerChars = new CharacterSet();\r\n        this.retriggerChars = new CharacterSet();\r\n        var model = this.editor.getModel();\r\n        if (!model) {\r\n            return;\r\n        }\r\n        for (var _i = 0, _a = modes.SignatureHelpProviderRegistry.ordered(model); _i < _a.length; _i++) {\r\n            var support = _a[_i];\r\n            for (var _b = 0, _c = support.signatureHelpTriggerCharacters || []; _b < _c.length; _b++) {\r\n                var ch = _c[_b];\r\n                this.triggerChars.add(ch.charCodeAt(0));\r\n                // All trigger characters are also considered retrigger characters\r\n                this.retriggerChars.add(ch.charCodeAt(0));\r\n            }\r\n            for (var _d = 0, _e = support.signatureHelpRetriggerCharacters || []; _d < _e.length; _d++) {\r\n                var ch = _e[_d];\r\n                this.retriggerChars.add(ch.charCodeAt(0));\r\n            }\r\n        }\r\n    };\r\n    ParameterHintsModel.prototype.onDidType = function (text) {\r\n        if (!this.triggerOnType) {\r\n            return;\r\n        }\r\n        var lastCharIndex = text.length - 1;\r\n        var triggerCharCode = text.charCodeAt(lastCharIndex);\r\n        if (this.triggerChars.has(triggerCharCode) || this.isTriggered && this.retriggerChars.has(triggerCharCode)) {\r\n            this.trigger({\r\n                triggerKind: modes.SignatureHelpTriggerKind.TriggerCharacter,\r\n                triggerCharacter: text.charAt(lastCharIndex),\r\n            });\r\n        }\r\n    };\r\n    ParameterHintsModel.prototype.onCursorChange = function (e) {\r\n        if (e.source === 'mouse') {\r\n            this.cancel();\r\n        }\r\n        else if (this.isTriggered) {\r\n            this.trigger({ triggerKind: modes.SignatureHelpTriggerKind.ContentChange });\r\n        }\r\n    };\r\n    ParameterHintsModel.prototype.onModelContentChange = function () {\r\n        if (this.isTriggered) {\r\n            this.trigger({ triggerKind: modes.SignatureHelpTriggerKind.ContentChange });\r\n        }\r\n    };\r\n    ParameterHintsModel.prototype.onEditorConfigurationChange = function () {\r\n        this.triggerOnType = this.editor.getOption(62 /* parameterHints */).enabled;\r\n        if (!this.triggerOnType) {\r\n            this.cancel();\r\n        }\r\n    };\r\n    ParameterHintsModel.prototype.dispose = function () {\r\n        this.cancel(true);\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    ParameterHintsModel.DEFAULT_DELAY = 120; // ms\r\n    return ParameterHintsModel;\r\n}(Disposable));\r\nexport { ParameterHintsModel };\r\nfunction mergeTriggerContexts(previous, current) {\r\n    switch (current.triggerKind) {\r\n        case modes.SignatureHelpTriggerKind.Invoke:\r\n            // Invoke overrides previous triggers.\r\n            return current;\r\n        case modes.SignatureHelpTriggerKind.ContentChange:\r\n            // Ignore content changes triggers\r\n            return previous;\r\n        case modes.SignatureHelpTriggerKind.TriggerCharacter:\r\n        default:\r\n            return current;\r\n    }\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport * as dom from '../../../base/browser/dom.js';\r\nimport { domEvent, stop } from '../../../base/browser/event.js';\r\nimport * as aria from '../../../base/browser/ui/aria/aria.js';\r\nimport { DomScrollableElement } from '../../../base/browser/ui/scrollbar/scrollableElement.js';\r\nimport { Event } from '../../../base/common/event.js';\r\nimport { Disposable, DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport './parameterHints.css';\r\nimport { IModeService } from '../../common/services/modeService.js';\r\nimport { MarkdownRenderer } from '../markdown/markdownRenderer.js';\r\nimport { Context } from './provideSignatureHelp.js';\r\nimport * as nls from '../../../nls.js';\r\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\r\nimport { editorHoverBackground, editorHoverBorder, textCodeBlockBackground, textLinkForeground, editorHoverForeground } from '../../../platform/theme/common/colorRegistry.js';\r\nimport { HIGH_CONTRAST, registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\r\nimport { ParameterHintsModel } from './parameterHintsModel.js';\r\nimport { pad } from '../../../base/common/strings.js';\r\nvar $ = dom.$;\r\nvar ParameterHintsWidget = /** @class */ (function (_super) {\r\n    __extends(ParameterHintsWidget, _super);\r\n    function ParameterHintsWidget(editor, contextKeyService, openerService, modeService) {\r\n        var _this = _super.call(this) || this;\r\n        _this.editor = editor;\r\n        _this.renderDisposeables = _this._register(new DisposableStore());\r\n        _this.visible = false;\r\n        _this.announcedLabel = null;\r\n        // Editor.IContentWidget.allowEditorOverflow\r\n        _this.allowEditorOverflow = true;\r\n        _this.markdownRenderer = _this._register(new MarkdownRenderer(editor, modeService, openerService));\r\n        _this.model = _this._register(new ParameterHintsModel(editor));\r\n        _this.keyVisible = Context.Visible.bindTo(contextKeyService);\r\n        _this.keyMultipleSignatures = Context.MultipleSignatures.bindTo(contextKeyService);\r\n        _this._register(_this.model.onChangedHints(function (newParameterHints) {\r\n            if (newParameterHints) {\r\n                _this.show();\r\n                _this.render(newParameterHints);\r\n            }\r\n            else {\r\n                _this.hide();\r\n            }\r\n        }));\r\n        return _this;\r\n    }\r\n    ParameterHintsWidget.prototype.createParamaterHintDOMNodes = function () {\r\n        var _this = this;\r\n        var element = $('.editor-widget.parameter-hints-widget');\r\n        var wrapper = dom.append(element, $('.wrapper'));\r\n        wrapper.tabIndex = -1;\r\n        var controls = dom.append(wrapper, $('.controls'));\r\n        var previous = dom.append(controls, $('.button.previous'));\r\n        var overloads = dom.append(controls, $('.overloads'));\r\n        var next = dom.append(controls, $('.button.next'));\r\n        var onPreviousClick = stop(domEvent(previous, 'click'));\r\n        this._register(onPreviousClick(this.previous, this));\r\n        var onNextClick = stop(domEvent(next, 'click'));\r\n        this._register(onNextClick(this.next, this));\r\n        var body = $('.body');\r\n        var scrollbar = new DomScrollableElement(body, {});\r\n        this._register(scrollbar);\r\n        wrapper.appendChild(scrollbar.getDomNode());\r\n        var signature = dom.append(body, $('.signature'));\r\n        var docs = dom.append(body, $('.docs'));\r\n        element.style.userSelect = 'text';\r\n        this.domNodes = {\r\n            element: element,\r\n            signature: signature,\r\n            overloads: overloads,\r\n            docs: docs,\r\n            scrollbar: scrollbar,\r\n        };\r\n        this.editor.addContentWidget(this);\r\n        this.hide();\r\n        this._register(this.editor.onDidChangeCursorSelection(function (e) {\r\n            if (_this.visible) {\r\n                _this.editor.layoutContentWidget(_this);\r\n            }\r\n        }));\r\n        var updateFont = function () {\r\n            if (!_this.domNodes) {\r\n                return;\r\n            }\r\n            var fontInfo = _this.editor.getOption(32 /* fontInfo */);\r\n            _this.domNodes.element.style.fontSize = fontInfo.fontSize + \"px\";\r\n        };\r\n        updateFont();\r\n        this._register(Event.chain(this.editor.onDidChangeConfiguration.bind(this.editor))\r\n            .filter(function (e) { return e.hasChanged(32 /* fontInfo */); })\r\n            .on(updateFont, null));\r\n        this._register(this.editor.onDidLayoutChange(function (e) { return _this.updateMaxHeight(); }));\r\n        this.updateMaxHeight();\r\n    };\r\n    ParameterHintsWidget.prototype.show = function () {\r\n        var _this = this;\r\n        if (this.visible) {\r\n            return;\r\n        }\r\n        if (!this.domNodes) {\r\n            this.createParamaterHintDOMNodes();\r\n        }\r\n        this.keyVisible.set(true);\r\n        this.visible = true;\r\n        setTimeout(function () {\r\n            if (_this.domNodes) {\r\n                dom.addClass(_this.domNodes.element, 'visible');\r\n            }\r\n        }, 100);\r\n        this.editor.layoutContentWidget(this);\r\n    };\r\n    ParameterHintsWidget.prototype.hide = function () {\r\n        if (!this.visible) {\r\n            return;\r\n        }\r\n        this.keyVisible.reset();\r\n        this.visible = false;\r\n        this.announcedLabel = null;\r\n        if (this.domNodes) {\r\n            dom.removeClass(this.domNodes.element, 'visible');\r\n        }\r\n        this.editor.layoutContentWidget(this);\r\n    };\r\n    ParameterHintsWidget.prototype.getPosition = function () {\r\n        if (this.visible) {\r\n            return {\r\n                position: this.editor.getPosition(),\r\n                preference: [1 /* ABOVE */, 2 /* BELOW */]\r\n            };\r\n        }\r\n        return null;\r\n    };\r\n    ParameterHintsWidget.prototype.render = function (hints) {\r\n        if (!this.domNodes) {\r\n            return;\r\n        }\r\n        var multiple = hints.signatures.length > 1;\r\n        dom.toggleClass(this.domNodes.element, 'multiple', multiple);\r\n        this.keyMultipleSignatures.set(multiple);\r\n        this.domNodes.signature.innerHTML = '';\r\n        this.domNodes.docs.innerHTML = '';\r\n        var signature = hints.signatures[hints.activeSignature];\r\n        if (!signature) {\r\n            return;\r\n        }\r\n        var code = dom.append(this.domNodes.signature, $('.code'));\r\n        var hasParameters = signature.parameters.length > 0;\r\n        var fontInfo = this.editor.getOption(32 /* fontInfo */);\r\n        code.style.fontSize = fontInfo.fontSize + \"px\";\r\n        code.style.fontFamily = fontInfo.fontFamily;\r\n        if (!hasParameters) {\r\n            var label = dom.append(code, $('span'));\r\n            label.textContent = signature.label;\r\n        }\r\n        else {\r\n            this.renderParameters(code, signature, hints.activeParameter);\r\n        }\r\n        this.renderDisposeables.clear();\r\n        var activeParameter = signature.parameters[hints.activeParameter];\r\n        if (activeParameter && activeParameter.documentation) {\r\n            var documentation = $('span.documentation');\r\n            if (typeof activeParameter.documentation === 'string') {\r\n                documentation.textContent = activeParameter.documentation;\r\n            }\r\n            else {\r\n                var renderedContents = this.markdownRenderer.render(activeParameter.documentation);\r\n                dom.addClass(renderedContents.element, 'markdown-docs');\r\n                this.renderDisposeables.add(renderedContents);\r\n                documentation.appendChild(renderedContents.element);\r\n            }\r\n            dom.append(this.domNodes.docs, $('p', {}, documentation));\r\n        }\r\n        if (signature.documentation === undefined) { /** no op */ }\r\n        else if (typeof signature.documentation === 'string') {\r\n            dom.append(this.domNodes.docs, $('p', {}, signature.documentation));\r\n        }\r\n        else {\r\n            var renderedContents = this.markdownRenderer.render(signature.documentation);\r\n            dom.addClass(renderedContents.element, 'markdown-docs');\r\n            this.renderDisposeables.add(renderedContents);\r\n            dom.append(this.domNodes.docs, renderedContents.element);\r\n        }\r\n        var hasDocs = this.hasDocs(signature, activeParameter);\r\n        dom.toggleClass(this.domNodes.signature, 'has-docs', hasDocs);\r\n        dom.toggleClass(this.domNodes.docs, 'empty', !hasDocs);\r\n        this.domNodes.overloads.textContent =\r\n            pad(hints.activeSignature + 1, hints.signatures.length.toString().length) + '/' + hints.signatures.length;\r\n        if (activeParameter) {\r\n            var labelToAnnounce = this.getParameterLabel(signature, hints.activeParameter);\r\n            // Select method gets called on every user type while parameter hints are visible.\r\n            // We do not want to spam the user with same announcements, so we only announce if the current parameter changed.\r\n            if (this.announcedLabel !== labelToAnnounce) {\r\n                aria.alert(nls.localize('hint', \"{0}, hint\", labelToAnnounce));\r\n                this.announcedLabel = labelToAnnounce;\r\n            }\r\n        }\r\n        this.editor.layoutContentWidget(this);\r\n        this.domNodes.scrollbar.scanDomNode();\r\n    };\r\n    ParameterHintsWidget.prototype.hasDocs = function (signature, activeParameter) {\r\n        if (activeParameter && typeof (activeParameter.documentation) === 'string' && activeParameter.documentation.length > 0) {\r\n            return true;\r\n        }\r\n        if (activeParameter && typeof (activeParameter.documentation) === 'object' && activeParameter.documentation.value.length > 0) {\r\n            return true;\r\n        }\r\n        if (typeof (signature.documentation) === 'string' && signature.documentation.length > 0) {\r\n            return true;\r\n        }\r\n        if (typeof (signature.documentation) === 'object' && signature.documentation.value.length > 0) {\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    ParameterHintsWidget.prototype.renderParameters = function (parent, signature, currentParameter) {\r\n        var _a = this.getParameterLabelOffsets(signature, currentParameter), start = _a[0], end = _a[1];\r\n        var beforeSpan = document.createElement('span');\r\n        beforeSpan.textContent = signature.label.substring(0, start);\r\n        var paramSpan = document.createElement('span');\r\n        paramSpan.textContent = signature.label.substring(start, end);\r\n        paramSpan.className = 'parameter active';\r\n        var afterSpan = document.createElement('span');\r\n        afterSpan.textContent = signature.label.substring(end);\r\n        dom.append(parent, beforeSpan, paramSpan, afterSpan);\r\n    };\r\n    ParameterHintsWidget.prototype.getParameterLabel = function (signature, paramIdx) {\r\n        var param = signature.parameters[paramIdx];\r\n        if (typeof param.label === 'string') {\r\n            return param.label;\r\n        }\r\n        else {\r\n            return signature.label.substring(param.label[0], param.label[1]);\r\n        }\r\n    };\r\n    ParameterHintsWidget.prototype.getParameterLabelOffsets = function (signature, paramIdx) {\r\n        var param = signature.parameters[paramIdx];\r\n        if (!param) {\r\n            return [0, 0];\r\n        }\r\n        else if (Array.isArray(param.label)) {\r\n            return param.label;\r\n        }\r\n        else {\r\n            var idx = signature.label.lastIndexOf(param.label);\r\n            return idx >= 0\r\n                ? [idx, idx + param.label.length]\r\n                : [0, 0];\r\n        }\r\n    };\r\n    ParameterHintsWidget.prototype.next = function () {\r\n        this.editor.focus();\r\n        this.model.next();\r\n    };\r\n    ParameterHintsWidget.prototype.previous = function () {\r\n        this.editor.focus();\r\n        this.model.previous();\r\n    };\r\n    ParameterHintsWidget.prototype.cancel = function () {\r\n        this.model.cancel();\r\n    };\r\n    ParameterHintsWidget.prototype.getDomNode = function () {\r\n        if (!this.domNodes) {\r\n            this.createParamaterHintDOMNodes();\r\n        }\r\n        return this.domNodes.element;\r\n    };\r\n    ParameterHintsWidget.prototype.getId = function () {\r\n        return ParameterHintsWidget.ID;\r\n    };\r\n    ParameterHintsWidget.prototype.trigger = function (context) {\r\n        this.model.trigger(context, 0);\r\n    };\r\n    ParameterHintsWidget.prototype.updateMaxHeight = function () {\r\n        if (!this.domNodes) {\r\n            return;\r\n        }\r\n        var height = Math.max(this.editor.getLayoutInfo().height / 4, 250);\r\n        var maxHeight = height + \"px\";\r\n        this.domNodes.element.style.maxHeight = maxHeight;\r\n        var wrapper = this.domNodes.element.getElementsByClassName('wrapper');\r\n        if (wrapper.length) {\r\n            wrapper[0].style.maxHeight = maxHeight;\r\n        }\r\n    };\r\n    ParameterHintsWidget.ID = 'editor.widget.parameterHintsWidget';\r\n    ParameterHintsWidget = __decorate([\r\n        __param(1, IContextKeyService),\r\n        __param(2, IOpenerService),\r\n        __param(3, IModeService)\r\n    ], ParameterHintsWidget);\r\n    return ParameterHintsWidget;\r\n}(Disposable));\r\nexport { ParameterHintsWidget };\r\nregisterThemingParticipant(function (theme, collector) {\r\n    var border = theme.getColor(editorHoverBorder);\r\n    if (border) {\r\n        var borderWidth = theme.type === HIGH_CONTRAST ? 2 : 1;\r\n        collector.addRule(\".monaco-editor .parameter-hints-widget { border: \" + borderWidth + \"px solid \" + border + \"; }\");\r\n        collector.addRule(\".monaco-editor .parameter-hints-widget.multiple .body { border-left: 1px solid \" + border.transparent(0.5) + \"; }\");\r\n        collector.addRule(\".monaco-editor .parameter-hints-widget .signature.has-docs { border-bottom: 1px solid \" + border.transparent(0.5) + \"; }\");\r\n    }\r\n    var background = theme.getColor(editorHoverBackground);\r\n    if (background) {\r\n        collector.addRule(\".monaco-editor .parameter-hints-widget { background-color: \" + background + \"; }\");\r\n    }\r\n    var link = theme.getColor(textLinkForeground);\r\n    if (link) {\r\n        collector.addRule(\".monaco-editor .parameter-hints-widget a { color: \" + link + \"; }\");\r\n    }\r\n    var foreground = theme.getColor(editorHoverForeground);\r\n    if (foreground) {\r\n        collector.addRule(\".monaco-editor .parameter-hints-widget { color: \" + foreground + \"; }\");\r\n    }\r\n    var codeBackground = theme.getColor(textCodeBlockBackground);\r\n    if (codeBackground) {\r\n        collector.addRule(\".monaco-editor .parameter-hints-widget code { background-color: \" + codeBackground + \"; }\");\r\n    }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport * as nls from '../../../nls.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\r\nimport { ContextKeyExpr } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { registerEditorAction, registerEditorContribution, EditorAction, EditorCommand, registerEditorCommand } from '../../browser/editorExtensions.js';\r\nimport { ParameterHintsWidget } from './parameterHintsWidget.js';\r\nimport { Context } from './provideSignatureHelp.js';\r\nimport * as modes from '../../common/modes.js';\r\nvar ParameterHintsController = /** @class */ (function (_super) {\r\n    __extends(ParameterHintsController, _super);\r\n    function ParameterHintsController(editor, instantiationService) {\r\n        var _this = _super.call(this) || this;\r\n        _this.editor = editor;\r\n        _this.widget = _this._register(instantiationService.createInstance(ParameterHintsWidget, _this.editor));\r\n        return _this;\r\n    }\r\n    ParameterHintsController.get = function (editor) {\r\n        return editor.getContribution(ParameterHintsController.ID);\r\n    };\r\n    ParameterHintsController.prototype.cancel = function () {\r\n        this.widget.cancel();\r\n    };\r\n    ParameterHintsController.prototype.previous = function () {\r\n        this.widget.previous();\r\n    };\r\n    ParameterHintsController.prototype.next = function () {\r\n        this.widget.next();\r\n    };\r\n    ParameterHintsController.prototype.trigger = function (context) {\r\n        this.widget.trigger(context);\r\n    };\r\n    ParameterHintsController.ID = 'editor.controller.parameterHints';\r\n    ParameterHintsController = __decorate([\r\n        __param(1, IInstantiationService)\r\n    ], ParameterHintsController);\r\n    return ParameterHintsController;\r\n}(Disposable));\r\nvar TriggerParameterHintsAction = /** @class */ (function (_super) {\r\n    __extends(TriggerParameterHintsAction, _super);\r\n    function TriggerParameterHintsAction() {\r\n        return _super.call(this, {\r\n            id: 'editor.action.triggerParameterHints',\r\n            label: nls.localize('parameterHints.trigger.label', \"Trigger Parameter Hints\"),\r\n            alias: 'Trigger Parameter Hints',\r\n            precondition: EditorContextKeys.hasSignatureHelpProvider,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 2048 /* CtrlCmd */ | 1024 /* Shift */ | 10 /* Space */,\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    TriggerParameterHintsAction.prototype.run = function (accessor, editor) {\r\n        var controller = ParameterHintsController.get(editor);\r\n        if (controller) {\r\n            controller.trigger({\r\n                triggerKind: modes.SignatureHelpTriggerKind.Invoke\r\n            });\r\n        }\r\n    };\r\n    return TriggerParameterHintsAction;\r\n}(EditorAction));\r\nexport { TriggerParameterHintsAction };\r\nregisterEditorContribution(ParameterHintsController.ID, ParameterHintsController);\r\nregisterEditorAction(TriggerParameterHintsAction);\r\nvar weight = 100 /* EditorContrib */ + 75;\r\nvar ParameterHintsCommand = EditorCommand.bindToContribution(ParameterHintsController.get);\r\nregisterEditorCommand(new ParameterHintsCommand({\r\n    id: 'closeParameterHints',\r\n    precondition: Context.Visible,\r\n    handler: function (x) { return x.cancel(); },\r\n    kbOpts: {\r\n        weight: weight,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: 9 /* Escape */,\r\n        secondary: [1024 /* Shift */ | 9 /* Escape */]\r\n    }\r\n}));\r\nregisterEditorCommand(new ParameterHintsCommand({\r\n    id: 'showPrevParameterHint',\r\n    precondition: ContextKeyExpr.and(Context.Visible, Context.MultipleSignatures),\r\n    handler: function (x) { return x.previous(); },\r\n    kbOpts: {\r\n        weight: weight,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: 16 /* UpArrow */,\r\n        secondary: [512 /* Alt */ | 16 /* UpArrow */],\r\n        mac: { primary: 16 /* UpArrow */, secondary: [512 /* Alt */ | 16 /* UpArrow */, 256 /* WinCtrl */ | 46 /* KEY_P */] }\r\n    }\r\n}));\r\nregisterEditorCommand(new ParameterHintsCommand({\r\n    id: 'showNextParameterHint',\r\n    precondition: ContextKeyExpr.and(Context.Visible, Context.MultipleSignatures),\r\n    handler: function (x) { return x.next(); },\r\n    kbOpts: {\r\n        weight: weight,\r\n        kbExpr: EditorContextKeys.focus,\r\n        primary: 18 /* DownArrow */,\r\n        secondary: [512 /* Alt */ | 18 /* DownArrow */],\r\n        mac: { primary: 18 /* DownArrow */, secondary: [512 /* Alt */ | 18 /* DownArrow */, 256 /* WinCtrl */ | 44 /* KEY_N */] }\r\n    }\r\n}));\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Range } from '../../common/core/range.js';\r\nimport { isUpperAsciiLetter, isLowerAsciiLetter } from '../../../base/common/strings.js';\r\nvar WordSelectionRangeProvider = /** @class */ (function () {\r\n    function WordSelectionRangeProvider() {\r\n    }\r\n    WordSelectionRangeProvider.prototype.provideSelectionRanges = function (model, positions) {\r\n        var result = [];\r\n        for (var _i = 0, positions_1 = positions; _i < positions_1.length; _i++) {\r\n            var position = positions_1[_i];\r\n            var bucket = [];\r\n            result.push(bucket);\r\n            this._addInWordRanges(bucket, model, position);\r\n            this._addWordRanges(bucket, model, position);\r\n            this._addWhitespaceLine(bucket, model, position);\r\n            bucket.push({ range: model.getFullModelRange() });\r\n        }\r\n        return result;\r\n    };\r\n    WordSelectionRangeProvider.prototype._addInWordRanges = function (bucket, model, pos) {\r\n        var obj = model.getWordAtPosition(pos);\r\n        if (!obj) {\r\n            return;\r\n        }\r\n        var word = obj.word, startColumn = obj.startColumn;\r\n        var offset = pos.column - startColumn;\r\n        var start = offset;\r\n        var end = offset;\r\n        var lastCh = 0;\r\n        // LEFT anchor (start)\r\n        for (; start >= 0; start--) {\r\n            var ch = word.charCodeAt(start);\r\n            if (ch === 95 /* Underline */ || ch === 45 /* Dash */) {\r\n                // foo-bar OR foo_bar\r\n                break;\r\n            }\r\n            else if (isLowerAsciiLetter(ch) && isUpperAsciiLetter(lastCh)) {\r\n                // fooBar\r\n                break;\r\n            }\r\n            lastCh = ch;\r\n        }\r\n        start += 1;\r\n        // RIGHT anchor (end)\r\n        for (; end < word.length; end++) {\r\n            var ch = word.charCodeAt(end);\r\n            if (isUpperAsciiLetter(ch) && isLowerAsciiLetter(lastCh)) {\r\n                // fooBar\r\n                break;\r\n            }\r\n            else if (ch === 95 /* Underline */ || ch === 45 /* Dash */) {\r\n                // foo-bar OR foo_bar\r\n                break;\r\n            }\r\n            lastCh = ch;\r\n        }\r\n        if (start < end) {\r\n            bucket.push({ range: new Range(pos.lineNumber, startColumn + start, pos.lineNumber, startColumn + end) });\r\n        }\r\n    };\r\n    WordSelectionRangeProvider.prototype._addWordRanges = function (bucket, model, pos) {\r\n        var word = model.getWordAtPosition(pos);\r\n        if (word) {\r\n            bucket.push({ range: new Range(pos.lineNumber, word.startColumn, pos.lineNumber, word.endColumn) });\r\n        }\r\n    };\r\n    WordSelectionRangeProvider.prototype._addWhitespaceLine = function (bucket, model, pos) {\r\n        if (model.getLineLength(pos.lineNumber) > 0\r\n            && model.getLineFirstNonWhitespaceColumn(pos.lineNumber) === 0\r\n            && model.getLineLastNonWhitespaceColumn(pos.lineNumber) === 0) {\r\n            bucket.push({ range: new Range(pos.lineNumber, 1, pos.lineNumber, model.getLineMaxColumn(pos.lineNumber)) });\r\n        }\r\n    };\r\n    return WordSelectionRangeProvider;\r\n}());\r\nexport { WordSelectionRangeProvider };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { Position } from '../../common/core/position.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { LinkedList } from '../../../base/common/linkedList.js';\r\nvar BracketSelectionRangeProvider = /** @class */ (function () {\r\n    function BracketSelectionRangeProvider() {\r\n    }\r\n    BracketSelectionRangeProvider.prototype.provideSelectionRanges = function (model, positions) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, _loop_1, _i, positions_1, position;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        result = [];\r\n                        _loop_1 = function (position) {\r\n                            var bucket, ranges;\r\n                            return __generator(this, function (_a) {\r\n                                switch (_a.label) {\r\n                                    case 0:\r\n                                        bucket = [];\r\n                                        result.push(bucket);\r\n                                        ranges = new Map();\r\n                                        return [4 /*yield*/, new Promise(function (resolve) { return BracketSelectionRangeProvider._bracketsRightYield(resolve, 0, model, position, ranges); })];\r\n                                    case 1:\r\n                                        _a.sent();\r\n                                        return [4 /*yield*/, new Promise(function (resolve) { return BracketSelectionRangeProvider._bracketsLeftYield(resolve, 0, model, position, ranges, bucket); })];\r\n                                    case 2:\r\n                                        _a.sent();\r\n                                        return [2 /*return*/];\r\n                                }\r\n                            });\r\n                        };\r\n                        _i = 0, positions_1 = positions;\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        if (!(_i < positions_1.length)) return [3 /*break*/, 4];\r\n                        position = positions_1[_i];\r\n                        return [5 /*yield**/, _loop_1(position)];\r\n                    case 2:\r\n                        _a.sent();\r\n                        _a.label = 3;\r\n                    case 3:\r\n                        _i++;\r\n                        return [3 /*break*/, 1];\r\n                    case 4: return [2 /*return*/, result];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    BracketSelectionRangeProvider._bracketsRightYield = function (resolve, round, model, pos, ranges) {\r\n        var counts = new Map();\r\n        var t1 = Date.now();\r\n        while (true) {\r\n            if (round >= BracketSelectionRangeProvider._maxRounds) {\r\n                resolve();\r\n                break;\r\n            }\r\n            if (!pos) {\r\n                resolve();\r\n                break;\r\n            }\r\n            var bracket = model.findNextBracket(pos);\r\n            if (!bracket) {\r\n                resolve();\r\n                break;\r\n            }\r\n            var d = Date.now() - t1;\r\n            if (d > BracketSelectionRangeProvider._maxDuration) {\r\n                setTimeout(function () { return BracketSelectionRangeProvider._bracketsRightYield(resolve, round + 1, model, pos, ranges); });\r\n                break;\r\n            }\r\n            var key = bracket.close[0];\r\n            if (bracket.isOpen) {\r\n                // wait for closing\r\n                var val = counts.has(key) ? counts.get(key) : 0;\r\n                counts.set(key, val + 1);\r\n            }\r\n            else {\r\n                // process closing\r\n                var val = counts.has(key) ? counts.get(key) : 0;\r\n                val -= 1;\r\n                counts.set(key, Math.max(0, val));\r\n                if (val < 0) {\r\n                    var list = ranges.get(key);\r\n                    if (!list) {\r\n                        list = new LinkedList();\r\n                        ranges.set(key, list);\r\n                    }\r\n                    list.push(bracket.range);\r\n                }\r\n            }\r\n            pos = bracket.range.getEndPosition();\r\n        }\r\n    };\r\n    BracketSelectionRangeProvider._bracketsLeftYield = function (resolve, round, model, pos, ranges, bucket) {\r\n        var counts = new Map();\r\n        var t1 = Date.now();\r\n        while (true) {\r\n            if (round >= BracketSelectionRangeProvider._maxRounds && ranges.size === 0) {\r\n                resolve();\r\n                break;\r\n            }\r\n            if (!pos) {\r\n                resolve();\r\n                break;\r\n            }\r\n            var bracket = model.findPrevBracket(pos);\r\n            if (!bracket) {\r\n                resolve();\r\n                break;\r\n            }\r\n            var d = Date.now() - t1;\r\n            if (d > BracketSelectionRangeProvider._maxDuration) {\r\n                setTimeout(function () { return BracketSelectionRangeProvider._bracketsLeftYield(resolve, round + 1, model, pos, ranges, bucket); });\r\n                break;\r\n            }\r\n            var key = bracket.close[0];\r\n            if (!bracket.isOpen) {\r\n                // wait for opening\r\n                var val = counts.has(key) ? counts.get(key) : 0;\r\n                counts.set(key, val + 1);\r\n            }\r\n            else {\r\n                // opening\r\n                var val = counts.has(key) ? counts.get(key) : 0;\r\n                val -= 1;\r\n                counts.set(key, Math.max(0, val));\r\n                if (val < 0) {\r\n                    var list = ranges.get(key);\r\n                    if (list) {\r\n                        var closing = list.shift();\r\n                        if (list.size === 0) {\r\n                            ranges.delete(key);\r\n                        }\r\n                        var innerBracket = Range.fromPositions(bracket.range.getEndPosition(), closing.getStartPosition());\r\n                        var outerBracket = Range.fromPositions(bracket.range.getStartPosition(), closing.getEndPosition());\r\n                        bucket.push({ range: innerBracket });\r\n                        bucket.push({ range: outerBracket });\r\n                        BracketSelectionRangeProvider._addBracketLeading(model, outerBracket, bucket);\r\n                    }\r\n                }\r\n            }\r\n            pos = bracket.range.getStartPosition();\r\n        }\r\n    };\r\n    BracketSelectionRangeProvider._addBracketLeading = function (model, bracket, bucket) {\r\n        if (bracket.startLineNumber === bracket.endLineNumber) {\r\n            return;\r\n        }\r\n        // xxxxxxxx {\r\n        //\r\n        // }\r\n        var startLine = bracket.startLineNumber;\r\n        var column = model.getLineFirstNonWhitespaceColumn(startLine);\r\n        if (column !== 0 && column !== bracket.startColumn) {\r\n            bucket.push({ range: Range.fromPositions(new Position(startLine, column), bracket.getEndPosition()) });\r\n            bucket.push({ range: Range.fromPositions(new Position(startLine, 1), bracket.getEndPosition()) });\r\n        }\r\n        // xxxxxxxx\r\n        // {\r\n        //\r\n        // }\r\n        var aboveLine = startLine - 1;\r\n        if (aboveLine > 0) {\r\n            var column_1 = model.getLineFirstNonWhitespaceColumn(aboveLine);\r\n            if (column_1 === bracket.startColumn && column_1 !== model.getLineLastNonWhitespaceColumn(aboveLine)) {\r\n                bucket.push({ range: Range.fromPositions(new Position(aboveLine, column_1), bracket.getEndPosition()) });\r\n                bucket.push({ range: Range.fromPositions(new Position(aboveLine, 1), bracket.getEndPosition()) });\r\n            }\r\n        }\r\n    };\r\n    BracketSelectionRangeProvider._maxDuration = 30;\r\n    BracketSelectionRangeProvider._maxRounds = 2;\r\n    return BracketSelectionRangeProvider;\r\n}());\r\nexport { BracketSelectionRangeProvider };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport * as arrays from '../../../base/common/arrays.js';\r\nimport { CancellationToken } from '../../../base/common/cancellation.js';\r\nimport { EditorAction, registerEditorAction, registerEditorContribution, registerDefaultLanguageCommand } from '../../browser/editorExtensions.js';\r\nimport { Position } from '../../common/core/position.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { Selection } from '../../common/core/selection.js';\r\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\r\nimport * as modes from '../../common/modes.js';\r\nimport * as nls from '../../../nls.js';\r\nimport { dispose } from '../../../base/common/lifecycle.js';\r\nimport { WordSelectionRangeProvider } from './wordSelections.js';\r\nimport { BracketSelectionRangeProvider } from './bracketSelections.js';\r\nimport { CommandsRegistry } from '../../../platform/commands/common/commands.js';\r\nimport { onUnexpectedExternalError } from '../../../base/common/errors.js';\r\nvar SelectionRanges = /** @class */ (function () {\r\n    function SelectionRanges(index, ranges) {\r\n        this.index = index;\r\n        this.ranges = ranges;\r\n    }\r\n    SelectionRanges.prototype.mov = function (fwd) {\r\n        var index = this.index + (fwd ? 1 : -1);\r\n        if (index < 0 || index >= this.ranges.length) {\r\n            return this;\r\n        }\r\n        var res = new SelectionRanges(index, this.ranges);\r\n        if (res.ranges[index].equalsRange(this.ranges[this.index])) {\r\n            // next range equals this range, retry with next-next\r\n            return res.mov(fwd);\r\n        }\r\n        return res;\r\n    };\r\n    return SelectionRanges;\r\n}());\r\nvar SmartSelectController = /** @class */ (function () {\r\n    function SmartSelectController(editor) {\r\n        this._ignoreSelection = false;\r\n        this._editor = editor;\r\n    }\r\n    SmartSelectController.get = function (editor) {\r\n        return editor.getContribution(SmartSelectController.ID);\r\n    };\r\n    SmartSelectController.prototype.dispose = function () {\r\n        dispose(this._selectionListener);\r\n    };\r\n    SmartSelectController.prototype.run = function (forward) {\r\n        var _this = this;\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        var selections = this._editor.getSelections();\r\n        var model = this._editor.getModel();\r\n        if (!modes.SelectionRangeRegistry.has(model)) {\r\n            return;\r\n        }\r\n        var promise = Promise.resolve(undefined);\r\n        if (!this._state) {\r\n            promise = provideSelectionRanges(model, selections.map(function (s) { return s.getPosition(); }), CancellationToken.None).then(function (ranges) {\r\n                if (!arrays.isNonEmptyArray(ranges) || ranges.length !== selections.length) {\r\n                    // invalid result\r\n                    return;\r\n                }\r\n                if (!_this._editor.hasModel() || !arrays.equals(_this._editor.getSelections(), selections, function (a, b) { return a.equalsSelection(b); })) {\r\n                    // invalid editor state\r\n                    return;\r\n                }\r\n                var _loop_1 = function (i) {\r\n                    ranges[i] = ranges[i].filter(function (range) {\r\n                        // filter ranges inside the selection\r\n                        return range.containsPosition(selections[i].getStartPosition()) && range.containsPosition(selections[i].getEndPosition());\r\n                    });\r\n                    // prepend current selection\r\n                    ranges[i].unshift(selections[i]);\r\n                };\r\n                for (var i = 0; i < ranges.length; i++) {\r\n                    _loop_1(i);\r\n                }\r\n                _this._state = ranges.map(function (ranges) { return new SelectionRanges(0, ranges); });\r\n                // listen to caret move and forget about state\r\n                dispose(_this._selectionListener);\r\n                _this._selectionListener = _this._editor.onDidChangeCursorPosition(function () {\r\n                    if (!_this._ignoreSelection) {\r\n                        dispose(_this._selectionListener);\r\n                        _this._state = undefined;\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        return promise.then(function () {\r\n            if (!_this._state) {\r\n                // no state\r\n                return;\r\n            }\r\n            _this._state = _this._state.map(function (state) { return state.mov(forward); });\r\n            var selections = _this._state.map(function (state) { return Selection.fromPositions(state.ranges[state.index].getStartPosition(), state.ranges[state.index].getEndPosition()); });\r\n            _this._ignoreSelection = true;\r\n            try {\r\n                _this._editor.setSelections(selections);\r\n            }\r\n            finally {\r\n                _this._ignoreSelection = false;\r\n            }\r\n        });\r\n    };\r\n    SmartSelectController.ID = 'editor.contrib.smartSelectController';\r\n    return SmartSelectController;\r\n}());\r\nvar AbstractSmartSelect = /** @class */ (function (_super) {\r\n    __extends(AbstractSmartSelect, _super);\r\n    function AbstractSmartSelect(forward, opts) {\r\n        var _this = _super.call(this, opts) || this;\r\n        _this._forward = forward;\r\n        return _this;\r\n    }\r\n    AbstractSmartSelect.prototype.run = function (_accessor, editor) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var controller;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        controller = SmartSelectController.get(editor);\r\n                        if (!controller) return [3 /*break*/, 2];\r\n                        return [4 /*yield*/, controller.run(this._forward)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        _a.label = 2;\r\n                    case 2: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return AbstractSmartSelect;\r\n}(EditorAction));\r\nvar GrowSelectionAction = /** @class */ (function (_super) {\r\n    __extends(GrowSelectionAction, _super);\r\n    function GrowSelectionAction() {\r\n        return _super.call(this, true, {\r\n            id: 'editor.action.smartSelect.expand',\r\n            label: nls.localize('smartSelect.expand', \"Expand Selection\"),\r\n            alias: 'Expand Selection',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 1024 /* Shift */ | 512 /* Alt */ | 17 /* RightArrow */,\r\n                mac: {\r\n                    primary: 2048 /* CtrlCmd */ | 256 /* WinCtrl */ | 1024 /* Shift */ | 17 /* RightArrow */,\r\n                    secondary: [256 /* WinCtrl */ | 1024 /* Shift */ | 17 /* RightArrow */],\r\n                },\r\n                weight: 100 /* EditorContrib */\r\n            },\r\n            menuOpts: {\r\n                menuId: 23 /* MenubarSelectionMenu */,\r\n                group: '1_basic',\r\n                title: nls.localize({ key: 'miSmartSelectGrow', comment: ['&& denotes a mnemonic'] }, \"&&Expand Selection\"),\r\n                order: 2\r\n            }\r\n        }) || this;\r\n    }\r\n    return GrowSelectionAction;\r\n}(AbstractSmartSelect));\r\n// renamed command id\r\nCommandsRegistry.registerCommandAlias('editor.action.smartSelect.grow', 'editor.action.smartSelect.expand');\r\nvar ShrinkSelectionAction = /** @class */ (function (_super) {\r\n    __extends(ShrinkSelectionAction, _super);\r\n    function ShrinkSelectionAction() {\r\n        return _super.call(this, false, {\r\n            id: 'editor.action.smartSelect.shrink',\r\n            label: nls.localize('smartSelect.shrink', \"Shrink Selection\"),\r\n            alias: 'Shrink Selection',\r\n            precondition: undefined,\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.editorTextFocus,\r\n                primary: 1024 /* Shift */ | 512 /* Alt */ | 15 /* LeftArrow */,\r\n                mac: {\r\n                    primary: 2048 /* CtrlCmd */ | 256 /* WinCtrl */ | 1024 /* Shift */ | 15 /* LeftArrow */,\r\n                    secondary: [256 /* WinCtrl */ | 1024 /* Shift */ | 15 /* LeftArrow */],\r\n                },\r\n                weight: 100 /* EditorContrib */\r\n            },\r\n            menuOpts: {\r\n                menuId: 23 /* MenubarSelectionMenu */,\r\n                group: '1_basic',\r\n                title: nls.localize({ key: 'miSmartSelectShrink', comment: ['&& denotes a mnemonic'] }, \"&&Shrink Selection\"),\r\n                order: 3\r\n            }\r\n        }) || this;\r\n    }\r\n    return ShrinkSelectionAction;\r\n}(AbstractSmartSelect));\r\nregisterEditorContribution(SmartSelectController.ID, SmartSelectController);\r\nregisterEditorAction(GrowSelectionAction);\r\nregisterEditorAction(ShrinkSelectionAction);\r\n// word selection\r\nmodes.SelectionRangeRegistry.register('*', new WordSelectionRangeProvider());\r\nexport function provideSelectionRanges(model, positions, token) {\r\n    var providers = modes.SelectionRangeRegistry.all(model);\r\n    if (providers.length === 1) {\r\n        // add word selection and bracket selection when no provider exists\r\n        providers.unshift(new BracketSelectionRangeProvider());\r\n    }\r\n    var work = [];\r\n    var allRawRanges = [];\r\n    for (var _i = 0, providers_1 = providers; _i < providers_1.length; _i++) {\r\n        var provider = providers_1[_i];\r\n        work.push(Promise.resolve(provider.provideSelectionRanges(model, positions, token)).then(function (allProviderRanges) {\r\n            if (arrays.isNonEmptyArray(allProviderRanges) && allProviderRanges.length === positions.length) {\r\n                for (var i = 0; i < positions.length; i++) {\r\n                    if (!allRawRanges[i]) {\r\n                        allRawRanges[i] = [];\r\n                    }\r\n                    for (var _i = 0, _a = allProviderRanges[i]; _i < _a.length; _i++) {\r\n                        var oneProviderRanges = _a[_i];\r\n                        if (Range.isIRange(oneProviderRanges.range) && Range.containsPosition(oneProviderRanges.range, positions[i])) {\r\n                            allRawRanges[i].push(Range.lift(oneProviderRanges.range));\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }, onUnexpectedExternalError));\r\n    }\r\n    return Promise.all(work).then(function () {\r\n        return allRawRanges.map(function (oneRawRanges) {\r\n            if (oneRawRanges.length === 0) {\r\n                return [];\r\n            }\r\n            // sort all by start/end position\r\n            oneRawRanges.sort(function (a, b) {\r\n                if (Position.isBefore(a.getStartPosition(), b.getStartPosition())) {\r\n                    return 1;\r\n                }\r\n                else if (Position.isBefore(b.getStartPosition(), a.getStartPosition())) {\r\n                    return -1;\r\n                }\r\n                else if (Position.isBefore(a.getEndPosition(), b.getEndPosition())) {\r\n                    return -1;\r\n                }\r\n                else if (Position.isBefore(b.getEndPosition(), a.getEndPosition())) {\r\n                    return 1;\r\n                }\r\n                else {\r\n                    return 0;\r\n                }\r\n            });\r\n            // remove ranges that don't contain the former range or that are equal to the\r\n            // former range\r\n            var oneRanges = [];\r\n            var last;\r\n            for (var _i = 0, oneRawRanges_1 = oneRawRanges; _i < oneRawRanges_1.length; _i++) {\r\n                var range = oneRawRanges_1[_i];\r\n                if (!last || (Range.containsRange(range, last) && !Range.equalsRange(range, last))) {\r\n                    oneRanges.push(range);\r\n                    last = range;\r\n                }\r\n            }\r\n            // add ranges that expand trivia at line starts and ends whenever a range\r\n            // wraps onto the a new line\r\n            var oneRangesWithTrivia = [oneRanges[0]];\r\n            for (var i = 1; i < oneRanges.length; i++) {\r\n                var prev = oneRanges[i - 1];\r\n                var cur = oneRanges[i];\r\n                if (cur.startLineNumber !== prev.startLineNumber || cur.endLineNumber !== prev.endLineNumber) {\r\n                    // add line/block range without leading/failing whitespace\r\n                    var rangeNoWhitespace = new Range(prev.startLineNumber, model.getLineFirstNonWhitespaceColumn(prev.startLineNumber), prev.endLineNumber, model.getLineLastNonWhitespaceColumn(prev.endLineNumber));\r\n                    if (rangeNoWhitespace.containsRange(prev) && !rangeNoWhitespace.equalsRange(prev) && cur.containsRange(rangeNoWhitespace) && !cur.equalsRange(rangeNoWhitespace)) {\r\n                        oneRangesWithTrivia.push(rangeNoWhitespace);\r\n                    }\r\n                    // add line/block range\r\n                    var rangeFull = new Range(prev.startLineNumber, 1, prev.endLineNumber, model.getLineMaxColumn(prev.endLineNumber));\r\n                    if (rangeFull.containsRange(prev) && !rangeFull.equalsRange(rangeNoWhitespace) && cur.containsRange(rangeFull) && !cur.equalsRange(rangeFull)) {\r\n                        oneRangesWithTrivia.push(rangeFull);\r\n                    }\r\n                }\r\n                oneRangesWithTrivia.push(cur);\r\n            }\r\n            return oneRangesWithTrivia;\r\n        });\r\n    });\r\n}\r\nregisterDefaultLanguageCommand('_executeSelectionRangeProvider', function (model, _position, args) {\r\n    return provideSelectionRanges(model, args.positions, CancellationToken.None);\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { first } from '../../../base/common/async.js';\r\nimport { assign } from '../../../base/common/objects.js';\r\nimport { onUnexpectedExternalError, canceled, isPromiseCanceledError } from '../../../base/common/errors.js';\r\nimport { registerDefaultLanguageCommand } from '../../browser/editorExtensions.js';\r\nimport * as modes from '../../common/modes.js';\r\nimport { Position } from '../../common/core/position.js';\r\nimport { RawContextKey } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { CancellationToken } from '../../../base/common/cancellation.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { FuzzyScore } from '../../../base/common/filters.js';\r\nimport { isDisposable, DisposableStore } from '../../../base/common/lifecycle.js';\r\nexport var Context = {\r\n    Visible: new RawContextKey('suggestWidgetVisible', false),\r\n    MultipleSuggestions: new RawContextKey('suggestWidgetMultipleSuggestions', false),\r\n    MakesTextEdit: new RawContextKey('suggestionMakesTextEdit', true),\r\n    AcceptSuggestionsOnEnter: new RawContextKey('acceptSuggestionOnEnter', true)\r\n};\r\nvar CompletionItem = /** @class */ (function () {\r\n    function CompletionItem(position, completion, container, provider, model) {\r\n        this.position = position;\r\n        this.completion = completion;\r\n        this.container = container;\r\n        this.provider = provider;\r\n        // sorting, filtering\r\n        this.score = FuzzyScore.Default;\r\n        this.distance = 0;\r\n        // ensure lower-variants (perf)\r\n        this.labelLow = completion.label.toLowerCase();\r\n        this.sortTextLow = completion.sortText && completion.sortText.toLowerCase();\r\n        this.filterTextLow = completion.filterText && completion.filterText.toLowerCase();\r\n        // normalize ranges\r\n        if (Range.isIRange(completion.range)) {\r\n            this.editStart = new Position(completion.range.startLineNumber, completion.range.startColumn);\r\n            this.editInsertEnd = new Position(completion.range.endLineNumber, completion.range.endColumn);\r\n            this.editReplaceEnd = new Position(completion.range.endLineNumber, completion.range.endColumn);\r\n        }\r\n        else {\r\n            this.editStart = new Position(completion.range.insert.startLineNumber, completion.range.insert.startColumn);\r\n            this.editInsertEnd = new Position(completion.range.insert.endLineNumber, completion.range.insert.endColumn);\r\n            this.editReplaceEnd = new Position(completion.range.replace.endLineNumber, completion.range.replace.endColumn);\r\n        }\r\n        // create the suggestion resolver\r\n        var resolveCompletionItem = provider.resolveCompletionItem;\r\n        if (typeof resolveCompletionItem !== 'function') {\r\n            this.resolve = function () { return Promise.resolve(); };\r\n        }\r\n        else {\r\n            var cached_1;\r\n            this.resolve = function (token) {\r\n                if (!cached_1) {\r\n                    var isDone_1 = false;\r\n                    cached_1 = Promise.resolve(resolveCompletionItem.call(provider, model, position, completion, token)).then(function (value) {\r\n                        assign(completion, value);\r\n                        isDone_1 = true;\r\n                    }, function (err) {\r\n                        if (isPromiseCanceledError(err)) {\r\n                            // the IPC queue will reject the request with the\r\n                            // cancellation error -> reset cached\r\n                            cached_1 = undefined;\r\n                        }\r\n                    });\r\n                    token.onCancellationRequested(function () {\r\n                        if (!isDone_1) {\r\n                            // cancellation after the request has been\r\n                            // dispatched -> reset cache\r\n                            cached_1 = undefined;\r\n                        }\r\n                    });\r\n                }\r\n                return cached_1;\r\n            };\r\n        }\r\n    }\r\n    return CompletionItem;\r\n}());\r\nexport { CompletionItem };\r\nvar CompletionOptions = /** @class */ (function () {\r\n    function CompletionOptions(snippetSortOrder, kindFilter, providerFilter) {\r\n        if (snippetSortOrder === void 0) { snippetSortOrder = 2 /* Bottom */; }\r\n        if (kindFilter === void 0) { kindFilter = new Set(); }\r\n        if (providerFilter === void 0) { providerFilter = new Set(); }\r\n        this.snippetSortOrder = snippetSortOrder;\r\n        this.kindFilter = kindFilter;\r\n        this.providerFilter = providerFilter;\r\n    }\r\n    CompletionOptions.default = new CompletionOptions();\r\n    return CompletionOptions;\r\n}());\r\nexport { CompletionOptions };\r\nvar _snippetSuggestSupport;\r\nexport function getSnippetSuggestSupport() {\r\n    return _snippetSuggestSupport;\r\n}\r\nexport function provideSuggestionItems(model, position, options, context, token) {\r\n    if (options === void 0) { options = CompletionOptions.default; }\r\n    if (context === void 0) { context = { triggerKind: 0 /* Invoke */ }; }\r\n    if (token === void 0) { token = CancellationToken.None; }\r\n    var word = model.getWordAtPosition(position);\r\n    var defaultReplaceRange = word ? new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn) : Range.fromPositions(position);\r\n    var defaultInsertRange = defaultReplaceRange.setEndPosition(position.lineNumber, position.column);\r\n    // const wordUntil = model.getWordUntilPosition(position);\r\n    // const defaultRange = new Range(position.lineNumber, wordUntil.startColumn, position.lineNumber, wordUntil.endColumn);\r\n    position = position.clone();\r\n    // get provider groups, always add snippet suggestion provider\r\n    var supports = modes.CompletionProviderRegistry.orderedGroups(model);\r\n    // add snippets provider unless turned off\r\n    if (!options.kindFilter.has(25 /* Snippet */) && _snippetSuggestSupport) {\r\n        supports.unshift([_snippetSuggestSupport]);\r\n    }\r\n    var allSuggestions = [];\r\n    var disposables = new DisposableStore();\r\n    var hasResult = false;\r\n    // add suggestions from contributed providers - providers are ordered in groups of\r\n    // equal score and once a group produces a result the process stops\r\n    var factory = supports.map(function (supports) { return function () {\r\n        // for each support in the group ask for suggestions\r\n        return Promise.all(supports.map(function (provider) {\r\n            if (options.providerFilter.size > 0 && !options.providerFilter.has(provider)) {\r\n                return undefined;\r\n            }\r\n            return Promise.resolve(provider.provideCompletionItems(model, position, context, token)).then(function (container) {\r\n                var len = allSuggestions.length;\r\n                if (container) {\r\n                    for (var _i = 0, _a = container.suggestions || []; _i < _a.length; _i++) {\r\n                        var suggestion = _a[_i];\r\n                        if (!options.kindFilter.has(suggestion.kind)) {\r\n                            // fill in default range when missing\r\n                            if (!suggestion.range) {\r\n                                suggestion.range = { insert: defaultInsertRange, replace: defaultReplaceRange };\r\n                            }\r\n                            // fill in default sortText when missing\r\n                            if (!suggestion.sortText) {\r\n                                suggestion.sortText = suggestion.label;\r\n                            }\r\n                            allSuggestions.push(new CompletionItem(position, suggestion, container, provider, model));\r\n                        }\r\n                    }\r\n                    if (isDisposable(container)) {\r\n                        disposables.add(container);\r\n                    }\r\n                }\r\n                if (len !== allSuggestions.length && provider !== _snippetSuggestSupport) {\r\n                    hasResult = true;\r\n                }\r\n            }, onUnexpectedExternalError);\r\n        }));\r\n    }; });\r\n    var result = first(factory, function () {\r\n        // stop on result or cancellation\r\n        return hasResult || token.isCancellationRequested;\r\n    }).then(function () {\r\n        if (token.isCancellationRequested) {\r\n            disposables.dispose();\r\n            return Promise.reject(canceled());\r\n        }\r\n        return allSuggestions.sort(getSuggestionComparator(options.snippetSortOrder));\r\n    });\r\n    // result.then(items => {\r\n    // \tconsole.log(model.getWordUntilPosition(position), items.map(item => `${item.suggestion.label}, type=${item.suggestion.type}, incomplete?${item.container.incomplete}, overwriteBefore=${item.suggestion.overwriteBefore}`));\r\n    // \treturn items;\r\n    // }, err => {\r\n    // \tconsole.warn(model.getWordUntilPosition(position), err);\r\n    // });\r\n    return result;\r\n}\r\nfunction defaultComparator(a, b) {\r\n    // check with 'sortText'\r\n    if (a.sortTextLow && b.sortTextLow) {\r\n        if (a.sortTextLow < b.sortTextLow) {\r\n            return -1;\r\n        }\r\n        else if (a.sortTextLow > b.sortTextLow) {\r\n            return 1;\r\n        }\r\n    }\r\n    // check with 'label'\r\n    if (a.completion.label < b.completion.label) {\r\n        return -1;\r\n    }\r\n    else if (a.completion.label > b.completion.label) {\r\n        return 1;\r\n    }\r\n    // check with 'type'\r\n    return a.completion.kind - b.completion.kind;\r\n}\r\nfunction snippetUpComparator(a, b) {\r\n    if (a.completion.kind !== b.completion.kind) {\r\n        if (a.completion.kind === 25 /* Snippet */) {\r\n            return -1;\r\n        }\r\n        else if (b.completion.kind === 25 /* Snippet */) {\r\n            return 1;\r\n        }\r\n    }\r\n    return defaultComparator(a, b);\r\n}\r\nfunction snippetDownComparator(a, b) {\r\n    if (a.completion.kind !== b.completion.kind) {\r\n        if (a.completion.kind === 25 /* Snippet */) {\r\n            return 1;\r\n        }\r\n        else if (b.completion.kind === 25 /* Snippet */) {\r\n            return -1;\r\n        }\r\n    }\r\n    return defaultComparator(a, b);\r\n}\r\nvar _snippetComparators = new Map();\r\n_snippetComparators.set(0 /* Top */, snippetUpComparator);\r\n_snippetComparators.set(2 /* Bottom */, snippetDownComparator);\r\n_snippetComparators.set(1 /* Inline */, defaultComparator);\r\nexport function getSuggestionComparator(snippetConfig) {\r\n    return _snippetComparators.get(snippetConfig);\r\n}\r\nregisterDefaultLanguageCommand('_executeCompletionItemProvider', function (model, position, args) { return __awaiter(void 0, void 0, void 0, function () {\r\n    var result, disposables, resolving, maxItemsToResolve, items, _i, items_1, item;\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0:\r\n                result = {\r\n                    incomplete: false,\r\n                    suggestions: []\r\n                };\r\n                disposables = new DisposableStore();\r\n                resolving = [];\r\n                maxItemsToResolve = args['maxItemsToResolve'] || 0;\r\n                return [4 /*yield*/, provideSuggestionItems(model, position)];\r\n            case 1:\r\n                items = _a.sent();\r\n                for (_i = 0, items_1 = items; _i < items_1.length; _i++) {\r\n                    item = items_1[_i];\r\n                    if (resolving.length < maxItemsToResolve) {\r\n                        resolving.push(item.resolve(CancellationToken.None));\r\n                    }\r\n                    result.incomplete = result.incomplete || item.container.incomplete;\r\n                    result.suggestions.push(item.completion);\r\n                    if (isDisposable(item.container)) {\r\n                        disposables.add(item.container);\r\n                    }\r\n                }\r\n                _a.label = 2;\r\n            case 2:\r\n                _a.trys.push([2, , 4, 5]);\r\n                return [4 /*yield*/, Promise.all(resolving)];\r\n            case 3:\r\n                _a.sent();\r\n                return [2 /*return*/, result];\r\n            case 4:\r\n                setTimeout(function () { return disposables.dispose(); }, 100);\r\n                return [7 /*endfinally*/];\r\n            case 5: return [2 /*return*/];\r\n        }\r\n    });\r\n}); });\r\nvar _provider = new /** @class */ (function () {\r\n    function class_1() {\r\n        this.onlyOnceSuggestions = [];\r\n    }\r\n    class_1.prototype.provideCompletionItems = function () {\r\n        var suggestions = this.onlyOnceSuggestions.slice(0);\r\n        var result = { suggestions: suggestions };\r\n        this.onlyOnceSuggestions.length = 0;\r\n        return result;\r\n    };\r\n    return class_1;\r\n}());\r\nmodes.CompletionProviderRegistry.register('*', _provider);\r\nexport function showSimpleSuggestions(editor, suggestions) {\r\n    setTimeout(function () {\r\n        var _a;\r\n        (_a = _provider.onlyOnceSuggestions).push.apply(_a, suggestions);\r\n        editor.getContribution('editor.contrib.suggestController').triggerSuggest(new Set().add(_provider));\r\n    }, 0);\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nvar _a;\r\nvar Scanner = /** @class */ (function () {\r\n    function Scanner() {\r\n        this.value = '';\r\n        this.pos = 0;\r\n    }\r\n    Scanner.isDigitCharacter = function (ch) {\r\n        return ch >= 48 /* Digit0 */ && ch <= 57 /* Digit9 */;\r\n    };\r\n    Scanner.isVariableCharacter = function (ch) {\r\n        return ch === 95 /* Underline */\r\n            || (ch >= 97 /* a */ && ch <= 122 /* z */)\r\n            || (ch >= 65 /* A */ && ch <= 90 /* Z */);\r\n    };\r\n    Scanner.prototype.text = function (value) {\r\n        this.value = value;\r\n        this.pos = 0;\r\n    };\r\n    Scanner.prototype.tokenText = function (token) {\r\n        return this.value.substr(token.pos, token.len);\r\n    };\r\n    Scanner.prototype.next = function () {\r\n        if (this.pos >= this.value.length) {\r\n            return { type: 14 /* EOF */, pos: this.pos, len: 0 };\r\n        }\r\n        var pos = this.pos;\r\n        var len = 0;\r\n        var ch = this.value.charCodeAt(pos);\r\n        var type;\r\n        // static types\r\n        type = Scanner._table[ch];\r\n        if (typeof type === 'number') {\r\n            this.pos += 1;\r\n            return { type: type, pos: pos, len: 1 };\r\n        }\r\n        // number\r\n        if (Scanner.isDigitCharacter(ch)) {\r\n            type = 8 /* Int */;\r\n            do {\r\n                len += 1;\r\n                ch = this.value.charCodeAt(pos + len);\r\n            } while (Scanner.isDigitCharacter(ch));\r\n            this.pos += len;\r\n            return { type: type, pos: pos, len: len };\r\n        }\r\n        // variable name\r\n        if (Scanner.isVariableCharacter(ch)) {\r\n            type = 9 /* VariableName */;\r\n            do {\r\n                ch = this.value.charCodeAt(pos + (++len));\r\n            } while (Scanner.isVariableCharacter(ch) || Scanner.isDigitCharacter(ch));\r\n            this.pos += len;\r\n            return { type: type, pos: pos, len: len };\r\n        }\r\n        // format\r\n        type = 10 /* Format */;\r\n        do {\r\n            len += 1;\r\n            ch = this.value.charCodeAt(pos + len);\r\n        } while (!isNaN(ch)\r\n            && typeof Scanner._table[ch] === 'undefined' // not static token\r\n            && !Scanner.isDigitCharacter(ch) // not number\r\n            && !Scanner.isVariableCharacter(ch) // not variable\r\n        );\r\n        this.pos += len;\r\n        return { type: type, pos: pos, len: len };\r\n    };\r\n    Scanner._table = (_a = {},\r\n        _a[36 /* DollarSign */] = 0 /* Dollar */,\r\n        _a[58 /* Colon */] = 1 /* Colon */,\r\n        _a[44 /* Comma */] = 2 /* Comma */,\r\n        _a[123 /* OpenCurlyBrace */] = 3 /* CurlyOpen */,\r\n        _a[125 /* CloseCurlyBrace */] = 4 /* CurlyClose */,\r\n        _a[92 /* Backslash */] = 5 /* Backslash */,\r\n        _a[47 /* Slash */] = 6 /* Forwardslash */,\r\n        _a[124 /* Pipe */] = 7 /* Pipe */,\r\n        _a[43 /* Plus */] = 11 /* Plus */,\r\n        _a[45 /* Dash */] = 12 /* Dash */,\r\n        _a[63 /* QuestionMark */] = 13 /* QuestionMark */,\r\n        _a);\r\n    return Scanner;\r\n}());\r\nexport { Scanner };\r\nvar Marker = /** @class */ (function () {\r\n    function Marker() {\r\n        this._children = [];\r\n    }\r\n    Marker.prototype.appendChild = function (child) {\r\n        if (child instanceof Text && this._children[this._children.length - 1] instanceof Text) {\r\n            // this and previous child are text -> merge them\r\n            this._children[this._children.length - 1].value += child.value;\r\n        }\r\n        else {\r\n            // normal adoption of child\r\n            child.parent = this;\r\n            this._children.push(child);\r\n        }\r\n        return this;\r\n    };\r\n    Marker.prototype.replace = function (child, others) {\r\n        var parent = child.parent;\r\n        var idx = parent.children.indexOf(child);\r\n        var newChildren = parent.children.slice(0);\r\n        newChildren.splice.apply(newChildren, __spreadArrays([idx, 1], others));\r\n        parent._children = newChildren;\r\n        (function _fixParent(children, parent) {\r\n            for (var _i = 0, children_1 = children; _i < children_1.length; _i++) {\r\n                var child_1 = children_1[_i];\r\n                child_1.parent = parent;\r\n                _fixParent(child_1.children, child_1);\r\n            }\r\n        })(others, parent);\r\n    };\r\n    Object.defineProperty(Marker.prototype, \"children\", {\r\n        get: function () {\r\n            return this._children;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Marker.prototype, \"snippet\", {\r\n        get: function () {\r\n            var candidate = this;\r\n            while (true) {\r\n                if (!candidate) {\r\n                    return undefined;\r\n                }\r\n                if (candidate instanceof TextmateSnippet) {\r\n                    return candidate;\r\n                }\r\n                candidate = candidate.parent;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Marker.prototype.toString = function () {\r\n        return this.children.reduce(function (prev, cur) { return prev + cur.toString(); }, '');\r\n    };\r\n    Marker.prototype.len = function () {\r\n        return 0;\r\n    };\r\n    return Marker;\r\n}());\r\nexport { Marker };\r\nvar Text = /** @class */ (function (_super) {\r\n    __extends(Text, _super);\r\n    function Text(value) {\r\n        var _this_1 = _super.call(this) || this;\r\n        _this_1.value = value;\r\n        return _this_1;\r\n    }\r\n    Text.prototype.toString = function () {\r\n        return this.value;\r\n    };\r\n    Text.prototype.len = function () {\r\n        return this.value.length;\r\n    };\r\n    Text.prototype.clone = function () {\r\n        return new Text(this.value);\r\n    };\r\n    return Text;\r\n}(Marker));\r\nexport { Text };\r\nvar TransformableMarker = /** @class */ (function (_super) {\r\n    __extends(TransformableMarker, _super);\r\n    function TransformableMarker() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    return TransformableMarker;\r\n}(Marker));\r\nexport { TransformableMarker };\r\nvar Placeholder = /** @class */ (function (_super) {\r\n    __extends(Placeholder, _super);\r\n    function Placeholder(index) {\r\n        var _this_1 = _super.call(this) || this;\r\n        _this_1.index = index;\r\n        return _this_1;\r\n    }\r\n    Placeholder.compareByIndex = function (a, b) {\r\n        if (a.index === b.index) {\r\n            return 0;\r\n        }\r\n        else if (a.isFinalTabstop) {\r\n            return 1;\r\n        }\r\n        else if (b.isFinalTabstop) {\r\n            return -1;\r\n        }\r\n        else if (a.index < b.index) {\r\n            return -1;\r\n        }\r\n        else if (a.index > b.index) {\r\n            return 1;\r\n        }\r\n        else {\r\n            return 0;\r\n        }\r\n    };\r\n    Object.defineProperty(Placeholder.prototype, \"isFinalTabstop\", {\r\n        get: function () {\r\n            return this.index === 0;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Placeholder.prototype, \"choice\", {\r\n        get: function () {\r\n            return this._children.length === 1 && this._children[0] instanceof Choice\r\n                ? this._children[0]\r\n                : undefined;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Placeholder.prototype.clone = function () {\r\n        var ret = new Placeholder(this.index);\r\n        if (this.transform) {\r\n            ret.transform = this.transform.clone();\r\n        }\r\n        ret._children = this.children.map(function (child) { return child.clone(); });\r\n        return ret;\r\n    };\r\n    return Placeholder;\r\n}(TransformableMarker));\r\nexport { Placeholder };\r\nvar Choice = /** @class */ (function (_super) {\r\n    __extends(Choice, _super);\r\n    function Choice() {\r\n        var _this_1 = _super !== null && _super.apply(this, arguments) || this;\r\n        _this_1.options = [];\r\n        return _this_1;\r\n    }\r\n    Choice.prototype.appendChild = function (marker) {\r\n        if (marker instanceof Text) {\r\n            marker.parent = this;\r\n            this.options.push(marker);\r\n        }\r\n        return this;\r\n    };\r\n    Choice.prototype.toString = function () {\r\n        return this.options[0].value;\r\n    };\r\n    Choice.prototype.len = function () {\r\n        return this.options[0].len();\r\n    };\r\n    Choice.prototype.clone = function () {\r\n        var ret = new Choice();\r\n        this.options.forEach(ret.appendChild, ret);\r\n        return ret;\r\n    };\r\n    return Choice;\r\n}(Marker));\r\nexport { Choice };\r\nvar Transform = /** @class */ (function (_super) {\r\n    __extends(Transform, _super);\r\n    function Transform() {\r\n        var _this_1 = _super !== null && _super.apply(this, arguments) || this;\r\n        _this_1.regexp = new RegExp('');\r\n        return _this_1;\r\n    }\r\n    Transform.prototype.resolve = function (value) {\r\n        var _this = this;\r\n        var didMatch = false;\r\n        var ret = value.replace(this.regexp, function () {\r\n            didMatch = true;\r\n            return _this._replace(Array.prototype.slice.call(arguments, 0, -2));\r\n        });\r\n        // when the regex didn't match and when the transform has\r\n        // else branches, then run those\r\n        if (!didMatch && this._children.some(function (child) { return child instanceof FormatString && Boolean(child.elseValue); })) {\r\n            ret = this._replace([]);\r\n        }\r\n        return ret;\r\n    };\r\n    Transform.prototype._replace = function (groups) {\r\n        var ret = '';\r\n        for (var _i = 0, _a = this._children; _i < _a.length; _i++) {\r\n            var marker = _a[_i];\r\n            if (marker instanceof FormatString) {\r\n                var value = groups[marker.index] || '';\r\n                value = marker.resolve(value);\r\n                ret += value;\r\n            }\r\n            else {\r\n                ret += marker.toString();\r\n            }\r\n        }\r\n        return ret;\r\n    };\r\n    Transform.prototype.toString = function () {\r\n        return '';\r\n    };\r\n    Transform.prototype.clone = function () {\r\n        var ret = new Transform();\r\n        ret.regexp = new RegExp(this.regexp.source, '' + (this.regexp.ignoreCase ? 'i' : '') + (this.regexp.global ? 'g' : ''));\r\n        ret._children = this.children.map(function (child) { return child.clone(); });\r\n        return ret;\r\n    };\r\n    return Transform;\r\n}(Marker));\r\nexport { Transform };\r\nvar FormatString = /** @class */ (function (_super) {\r\n    __extends(FormatString, _super);\r\n    function FormatString(index, shorthandName, ifValue, elseValue) {\r\n        var _this_1 = _super.call(this) || this;\r\n        _this_1.index = index;\r\n        _this_1.shorthandName = shorthandName;\r\n        _this_1.ifValue = ifValue;\r\n        _this_1.elseValue = elseValue;\r\n        return _this_1;\r\n    }\r\n    FormatString.prototype.resolve = function (value) {\r\n        if (this.shorthandName === 'upcase') {\r\n            return !value ? '' : value.toLocaleUpperCase();\r\n        }\r\n        else if (this.shorthandName === 'downcase') {\r\n            return !value ? '' : value.toLocaleLowerCase();\r\n        }\r\n        else if (this.shorthandName === 'capitalize') {\r\n            return !value ? '' : (value[0].toLocaleUpperCase() + value.substr(1));\r\n        }\r\n        else if (this.shorthandName === 'pascalcase') {\r\n            return !value ? '' : this._toPascalCase(value);\r\n        }\r\n        else if (Boolean(value) && typeof this.ifValue === 'string') {\r\n            return this.ifValue;\r\n        }\r\n        else if (!Boolean(value) && typeof this.elseValue === 'string') {\r\n            return this.elseValue;\r\n        }\r\n        else {\r\n            return value || '';\r\n        }\r\n    };\r\n    FormatString.prototype._toPascalCase = function (value) {\r\n        var match = value.match(/[a-z]+/gi);\r\n        if (!match) {\r\n            return value;\r\n        }\r\n        return match.map(function (word) {\r\n            return word.charAt(0).toUpperCase()\r\n                + word.substr(1).toLowerCase();\r\n        })\r\n            .join('');\r\n    };\r\n    FormatString.prototype.clone = function () {\r\n        var ret = new FormatString(this.index, this.shorthandName, this.ifValue, this.elseValue);\r\n        return ret;\r\n    };\r\n    return FormatString;\r\n}(Marker));\r\nexport { FormatString };\r\nvar Variable = /** @class */ (function (_super) {\r\n    __extends(Variable, _super);\r\n    function Variable(name) {\r\n        var _this_1 = _super.call(this) || this;\r\n        _this_1.name = name;\r\n        return _this_1;\r\n    }\r\n    Variable.prototype.resolve = function (resolver) {\r\n        var value = resolver.resolve(this);\r\n        if (this.transform) {\r\n            value = this.transform.resolve(value || '');\r\n        }\r\n        if (value !== undefined) {\r\n            this._children = [new Text(value)];\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    Variable.prototype.clone = function () {\r\n        var ret = new Variable(this.name);\r\n        if (this.transform) {\r\n            ret.transform = this.transform.clone();\r\n        }\r\n        ret._children = this.children.map(function (child) { return child.clone(); });\r\n        return ret;\r\n    };\r\n    return Variable;\r\n}(TransformableMarker));\r\nexport { Variable };\r\nfunction walk(marker, visitor) {\r\n    var stack = __spreadArrays(marker);\r\n    while (stack.length > 0) {\r\n        var marker_1 = stack.shift();\r\n        var recurse = visitor(marker_1);\r\n        if (!recurse) {\r\n            break;\r\n        }\r\n        stack.unshift.apply(stack, marker_1.children);\r\n    }\r\n}\r\nvar TextmateSnippet = /** @class */ (function (_super) {\r\n    __extends(TextmateSnippet, _super);\r\n    function TextmateSnippet() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Object.defineProperty(TextmateSnippet.prototype, \"placeholderInfo\", {\r\n        get: function () {\r\n            if (!this._placeholders) {\r\n                // fill in placeholders\r\n                var all_1 = [];\r\n                var last_1;\r\n                this.walk(function (candidate) {\r\n                    if (candidate instanceof Placeholder) {\r\n                        all_1.push(candidate);\r\n                        last_1 = !last_1 || last_1.index < candidate.index ? candidate : last_1;\r\n                    }\r\n                    return true;\r\n                });\r\n                this._placeholders = { all: all_1, last: last_1 };\r\n            }\r\n            return this._placeholders;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(TextmateSnippet.prototype, \"placeholders\", {\r\n        get: function () {\r\n            var all = this.placeholderInfo.all;\r\n            return all;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    TextmateSnippet.prototype.offset = function (marker) {\r\n        var pos = 0;\r\n        var found = false;\r\n        this.walk(function (candidate) {\r\n            if (candidate === marker) {\r\n                found = true;\r\n                return false;\r\n            }\r\n            pos += candidate.len();\r\n            return true;\r\n        });\r\n        if (!found) {\r\n            return -1;\r\n        }\r\n        return pos;\r\n    };\r\n    TextmateSnippet.prototype.fullLen = function (marker) {\r\n        var ret = 0;\r\n        walk([marker], function (marker) {\r\n            ret += marker.len();\r\n            return true;\r\n        });\r\n        return ret;\r\n    };\r\n    TextmateSnippet.prototype.enclosingPlaceholders = function (placeholder) {\r\n        var ret = [];\r\n        var parent = placeholder.parent;\r\n        while (parent) {\r\n            if (parent instanceof Placeholder) {\r\n                ret.push(parent);\r\n            }\r\n            parent = parent.parent;\r\n        }\r\n        return ret;\r\n    };\r\n    TextmateSnippet.prototype.resolveVariables = function (resolver) {\r\n        var _this_1 = this;\r\n        this.walk(function (candidate) {\r\n            if (candidate instanceof Variable) {\r\n                if (candidate.resolve(resolver)) {\r\n                    _this_1._placeholders = undefined;\r\n                }\r\n            }\r\n            return true;\r\n        });\r\n        return this;\r\n    };\r\n    TextmateSnippet.prototype.appendChild = function (child) {\r\n        this._placeholders = undefined;\r\n        return _super.prototype.appendChild.call(this, child);\r\n    };\r\n    TextmateSnippet.prototype.replace = function (child, others) {\r\n        this._placeholders = undefined;\r\n        return _super.prototype.replace.call(this, child, others);\r\n    };\r\n    TextmateSnippet.prototype.clone = function () {\r\n        var ret = new TextmateSnippet();\r\n        this._children = this.children.map(function (child) { return child.clone(); });\r\n        return ret;\r\n    };\r\n    TextmateSnippet.prototype.walk = function (visitor) {\r\n        walk(this.children, visitor);\r\n    };\r\n    return TextmateSnippet;\r\n}(Marker));\r\nexport { TextmateSnippet };\r\nvar SnippetParser = /** @class */ (function () {\r\n    function SnippetParser() {\r\n        this._scanner = new Scanner();\r\n        this._token = { type: 14 /* EOF */, pos: 0, len: 0 };\r\n    }\r\n    SnippetParser.escape = function (value) {\r\n        return value.replace(/\\$|}|\\\\/g, '\\\\$&');\r\n    };\r\n    SnippetParser.prototype.parse = function (value, insertFinalTabstop, enforceFinalTabstop) {\r\n        this._scanner.text(value);\r\n        this._token = this._scanner.next();\r\n        var snippet = new TextmateSnippet();\r\n        while (this._parse(snippet)) {\r\n            // nothing\r\n        }\r\n        // fill in values for placeholders. the first placeholder of an index\r\n        // that has a value defines the value for all placeholders with that index\r\n        var placeholderDefaultValues = new Map();\r\n        var incompletePlaceholders = [];\r\n        var placeholderCount = 0;\r\n        snippet.walk(function (marker) {\r\n            if (marker instanceof Placeholder) {\r\n                placeholderCount += 1;\r\n                if (marker.isFinalTabstop) {\r\n                    placeholderDefaultValues.set(0, undefined);\r\n                }\r\n                else if (!placeholderDefaultValues.has(marker.index) && marker.children.length > 0) {\r\n                    placeholderDefaultValues.set(marker.index, marker.children);\r\n                }\r\n                else {\r\n                    incompletePlaceholders.push(marker);\r\n                }\r\n            }\r\n            return true;\r\n        });\r\n        for (var _i = 0, incompletePlaceholders_1 = incompletePlaceholders; _i < incompletePlaceholders_1.length; _i++) {\r\n            var placeholder = incompletePlaceholders_1[_i];\r\n            var defaultValues = placeholderDefaultValues.get(placeholder.index);\r\n            if (defaultValues) {\r\n                var clone = new Placeholder(placeholder.index);\r\n                clone.transform = placeholder.transform;\r\n                for (var _a = 0, defaultValues_1 = defaultValues; _a < defaultValues_1.length; _a++) {\r\n                    var child = defaultValues_1[_a];\r\n                    clone.appendChild(child.clone());\r\n                }\r\n                snippet.replace(placeholder, [clone]);\r\n            }\r\n        }\r\n        if (!enforceFinalTabstop) {\r\n            enforceFinalTabstop = placeholderCount > 0 && insertFinalTabstop;\r\n        }\r\n        if (!placeholderDefaultValues.has(0) && enforceFinalTabstop) {\r\n            // the snippet uses placeholders but has no\r\n            // final tabstop defined -> insert at the end\r\n            snippet.appendChild(new Placeholder(0));\r\n        }\r\n        return snippet;\r\n    };\r\n    SnippetParser.prototype._accept = function (type, value) {\r\n        if (type === undefined || this._token.type === type) {\r\n            var ret = !value ? true : this._scanner.tokenText(this._token);\r\n            this._token = this._scanner.next();\r\n            return ret;\r\n        }\r\n        return false;\r\n    };\r\n    SnippetParser.prototype._backTo = function (token) {\r\n        this._scanner.pos = token.pos + token.len;\r\n        this._token = token;\r\n        return false;\r\n    };\r\n    SnippetParser.prototype._until = function (type) {\r\n        var start = this._token;\r\n        while (this._token.type !== type) {\r\n            if (this._token.type === 14 /* EOF */) {\r\n                return false;\r\n            }\r\n            else if (this._token.type === 5 /* Backslash */) {\r\n                var nextToken = this._scanner.next();\r\n                if (nextToken.type !== 0 /* Dollar */\r\n                    && nextToken.type !== 4 /* CurlyClose */\r\n                    && nextToken.type !== 5 /* Backslash */) {\r\n                    return false;\r\n                }\r\n            }\r\n            this._token = this._scanner.next();\r\n        }\r\n        var value = this._scanner.value.substring(start.pos, this._token.pos).replace(/\\\\(\\$|}|\\\\)/g, '$1');\r\n        this._token = this._scanner.next();\r\n        return value;\r\n    };\r\n    SnippetParser.prototype._parse = function (marker) {\r\n        return this._parseEscaped(marker)\r\n            || this._parseTabstopOrVariableName(marker)\r\n            || this._parseComplexPlaceholder(marker)\r\n            || this._parseComplexVariable(marker)\r\n            || this._parseAnything(marker);\r\n    };\r\n    // \\$, \\\\, \\} -> just text\r\n    SnippetParser.prototype._parseEscaped = function (marker) {\r\n        var value;\r\n        if (value = this._accept(5 /* Backslash */, true)) {\r\n            // saw a backslash, append escaped token or that backslash\r\n            value = this._accept(0 /* Dollar */, true)\r\n                || this._accept(4 /* CurlyClose */, true)\r\n                || this._accept(5 /* Backslash */, true)\r\n                || value;\r\n            marker.appendChild(new Text(value));\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    // $foo -> variable, $1 -> tabstop\r\n    SnippetParser.prototype._parseTabstopOrVariableName = function (parent) {\r\n        var value;\r\n        var token = this._token;\r\n        var match = this._accept(0 /* Dollar */)\r\n            && (value = this._accept(9 /* VariableName */, true) || this._accept(8 /* Int */, true));\r\n        if (!match) {\r\n            return this._backTo(token);\r\n        }\r\n        parent.appendChild(/^\\d+$/.test(value)\r\n            ? new Placeholder(Number(value))\r\n            : new Variable(value));\r\n        return true;\r\n    };\r\n    // ${1:<children>}, ${1} -> placeholder\r\n    SnippetParser.prototype._parseComplexPlaceholder = function (parent) {\r\n        var index;\r\n        var token = this._token;\r\n        var match = this._accept(0 /* Dollar */)\r\n            && this._accept(3 /* CurlyOpen */)\r\n            && (index = this._accept(8 /* Int */, true));\r\n        if (!match) {\r\n            return this._backTo(token);\r\n        }\r\n        var placeholder = new Placeholder(Number(index));\r\n        if (this._accept(1 /* Colon */)) {\r\n            // ${1:<children>}\r\n            while (true) {\r\n                // ...} -> done\r\n                if (this._accept(4 /* CurlyClose */)) {\r\n                    parent.appendChild(placeholder);\r\n                    return true;\r\n                }\r\n                if (this._parse(placeholder)) {\r\n                    continue;\r\n                }\r\n                // fallback\r\n                parent.appendChild(new Text('${' + index + ':'));\r\n                placeholder.children.forEach(parent.appendChild, parent);\r\n                return true;\r\n            }\r\n        }\r\n        else if (placeholder.index > 0 && this._accept(7 /* Pipe */)) {\r\n            // ${1|one,two,three|}\r\n            var choice = new Choice();\r\n            while (true) {\r\n                if (this._parseChoiceElement(choice)) {\r\n                    if (this._accept(2 /* Comma */)) {\r\n                        // opt, -> more\r\n                        continue;\r\n                    }\r\n                    if (this._accept(7 /* Pipe */)) {\r\n                        placeholder.appendChild(choice);\r\n                        if (this._accept(4 /* CurlyClose */)) {\r\n                            // ..|} -> done\r\n                            parent.appendChild(placeholder);\r\n                            return true;\r\n                        }\r\n                    }\r\n                }\r\n                this._backTo(token);\r\n                return false;\r\n            }\r\n        }\r\n        else if (this._accept(6 /* Forwardslash */)) {\r\n            // ${1/<regex>/<format>/<options>}\r\n            if (this._parseTransform(placeholder)) {\r\n                parent.appendChild(placeholder);\r\n                return true;\r\n            }\r\n            this._backTo(token);\r\n            return false;\r\n        }\r\n        else if (this._accept(4 /* CurlyClose */)) {\r\n            // ${1}\r\n            parent.appendChild(placeholder);\r\n            return true;\r\n        }\r\n        else {\r\n            // ${1 <- missing curly or colon\r\n            return this._backTo(token);\r\n        }\r\n    };\r\n    SnippetParser.prototype._parseChoiceElement = function (parent) {\r\n        var token = this._token;\r\n        var values = [];\r\n        while (true) {\r\n            if (this._token.type === 2 /* Comma */ || this._token.type === 7 /* Pipe */) {\r\n                break;\r\n            }\r\n            var value = void 0;\r\n            if (value = this._accept(5 /* Backslash */, true)) {\r\n                // \\, \\|, or \\\\\r\n                value = this._accept(2 /* Comma */, true)\r\n                    || this._accept(7 /* Pipe */, true)\r\n                    || this._accept(5 /* Backslash */, true)\r\n                    || value;\r\n            }\r\n            else {\r\n                value = this._accept(undefined, true);\r\n            }\r\n            if (!value) {\r\n                // EOF\r\n                this._backTo(token);\r\n                return false;\r\n            }\r\n            values.push(value);\r\n        }\r\n        if (values.length === 0) {\r\n            this._backTo(token);\r\n            return false;\r\n        }\r\n        parent.appendChild(new Text(values.join('')));\r\n        return true;\r\n    };\r\n    // ${foo:<children>}, ${foo} -> variable\r\n    SnippetParser.prototype._parseComplexVariable = function (parent) {\r\n        var name;\r\n        var token = this._token;\r\n        var match = this._accept(0 /* Dollar */)\r\n            && this._accept(3 /* CurlyOpen */)\r\n            && (name = this._accept(9 /* VariableName */, true));\r\n        if (!match) {\r\n            return this._backTo(token);\r\n        }\r\n        var variable = new Variable(name);\r\n        if (this._accept(1 /* Colon */)) {\r\n            // ${foo:<children>}\r\n            while (true) {\r\n                // ...} -> done\r\n                if (this._accept(4 /* CurlyClose */)) {\r\n                    parent.appendChild(variable);\r\n                    return true;\r\n                }\r\n                if (this._parse(variable)) {\r\n                    continue;\r\n                }\r\n                // fallback\r\n                parent.appendChild(new Text('${' + name + ':'));\r\n                variable.children.forEach(parent.appendChild, parent);\r\n                return true;\r\n            }\r\n        }\r\n        else if (this._accept(6 /* Forwardslash */)) {\r\n            // ${foo/<regex>/<format>/<options>}\r\n            if (this._parseTransform(variable)) {\r\n                parent.appendChild(variable);\r\n                return true;\r\n            }\r\n            this._backTo(token);\r\n            return false;\r\n        }\r\n        else if (this._accept(4 /* CurlyClose */)) {\r\n            // ${foo}\r\n            parent.appendChild(variable);\r\n            return true;\r\n        }\r\n        else {\r\n            // ${foo <- missing curly or colon\r\n            return this._backTo(token);\r\n        }\r\n    };\r\n    SnippetParser.prototype._parseTransform = function (parent) {\r\n        // ...<regex>/<format>/<options>}\r\n        var transform = new Transform();\r\n        var regexValue = '';\r\n        var regexOptions = '';\r\n        // (1) /regex\r\n        while (true) {\r\n            if (this._accept(6 /* Forwardslash */)) {\r\n                break;\r\n            }\r\n            var escaped = void 0;\r\n            if (escaped = this._accept(5 /* Backslash */, true)) {\r\n                escaped = this._accept(6 /* Forwardslash */, true) || escaped;\r\n                regexValue += escaped;\r\n                continue;\r\n            }\r\n            if (this._token.type !== 14 /* EOF */) {\r\n                regexValue += this._accept(undefined, true);\r\n                continue;\r\n            }\r\n            return false;\r\n        }\r\n        // (2) /format\r\n        while (true) {\r\n            if (this._accept(6 /* Forwardslash */)) {\r\n                break;\r\n            }\r\n            var escaped = void 0;\r\n            if (escaped = this._accept(5 /* Backslash */, true)) {\r\n                escaped = this._accept(5 /* Backslash */, true) || this._accept(6 /* Forwardslash */, true) || escaped;\r\n                transform.appendChild(new Text(escaped));\r\n                continue;\r\n            }\r\n            if (this._parseFormatString(transform) || this._parseAnything(transform)) {\r\n                continue;\r\n            }\r\n            return false;\r\n        }\r\n        // (3) /option\r\n        while (true) {\r\n            if (this._accept(4 /* CurlyClose */)) {\r\n                break;\r\n            }\r\n            if (this._token.type !== 14 /* EOF */) {\r\n                regexOptions += this._accept(undefined, true);\r\n                continue;\r\n            }\r\n            return false;\r\n        }\r\n        try {\r\n            transform.regexp = new RegExp(regexValue, regexOptions);\r\n        }\r\n        catch (e) {\r\n            // invalid regexp\r\n            return false;\r\n        }\r\n        parent.transform = transform;\r\n        return true;\r\n    };\r\n    SnippetParser.prototype._parseFormatString = function (parent) {\r\n        var token = this._token;\r\n        if (!this._accept(0 /* Dollar */)) {\r\n            return false;\r\n        }\r\n        var complex = false;\r\n        if (this._accept(3 /* CurlyOpen */)) {\r\n            complex = true;\r\n        }\r\n        var index = this._accept(8 /* Int */, true);\r\n        if (!index) {\r\n            this._backTo(token);\r\n            return false;\r\n        }\r\n        else if (!complex) {\r\n            // $1\r\n            parent.appendChild(new FormatString(Number(index)));\r\n            return true;\r\n        }\r\n        else if (this._accept(4 /* CurlyClose */)) {\r\n            // ${1}\r\n            parent.appendChild(new FormatString(Number(index)));\r\n            return true;\r\n        }\r\n        else if (!this._accept(1 /* Colon */)) {\r\n            this._backTo(token);\r\n            return false;\r\n        }\r\n        if (this._accept(6 /* Forwardslash */)) {\r\n            // ${1:/upcase}\r\n            var shorthand = this._accept(9 /* VariableName */, true);\r\n            if (!shorthand || !this._accept(4 /* CurlyClose */)) {\r\n                this._backTo(token);\r\n                return false;\r\n            }\r\n            else {\r\n                parent.appendChild(new FormatString(Number(index), shorthand));\r\n                return true;\r\n            }\r\n        }\r\n        else if (this._accept(11 /* Plus */)) {\r\n            // ${1:+<if>}\r\n            var ifValue = this._until(4 /* CurlyClose */);\r\n            if (ifValue) {\r\n                parent.appendChild(new FormatString(Number(index), undefined, ifValue, undefined));\r\n                return true;\r\n            }\r\n        }\r\n        else if (this._accept(12 /* Dash */)) {\r\n            // ${2:-<else>}\r\n            var elseValue = this._until(4 /* CurlyClose */);\r\n            if (elseValue) {\r\n                parent.appendChild(new FormatString(Number(index), undefined, undefined, elseValue));\r\n                return true;\r\n            }\r\n        }\r\n        else if (this._accept(13 /* QuestionMark */)) {\r\n            // ${2:?<if>:<else>}\r\n            var ifValue = this._until(1 /* Colon */);\r\n            if (ifValue) {\r\n                var elseValue = this._until(4 /* CurlyClose */);\r\n                if (elseValue) {\r\n                    parent.appendChild(new FormatString(Number(index), undefined, ifValue, elseValue));\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            // ${1:<else>}\r\n            var elseValue = this._until(4 /* CurlyClose */);\r\n            if (elseValue) {\r\n                parent.appendChild(new FormatString(Number(index), undefined, undefined, elseValue));\r\n                return true;\r\n            }\r\n        }\r\n        this._backTo(token);\r\n        return false;\r\n    };\r\n    SnippetParser.prototype._parseAnything = function (marker) {\r\n        if (this._token.type !== 14 /* EOF */) {\r\n            marker.appendChild(new Text(this._scanner.tokenText(this._token)));\r\n            this._accept(undefined);\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    return SnippetParser;\r\n}());\r\nexport { SnippetParser };\r\n","import { URI } from '../../../base/common/uri.js';\r\nexport var WORKSPACE_EXTENSION = 'code-workspace';\r\nexport function isSingleFolderWorkspaceIdentifier(obj) {\r\n    return obj instanceof URI;\r\n}\r\nexport function toWorkspaceIdentifier(workspace) {\r\n    if (workspace.configuration) {\r\n        return {\r\n            configPath: workspace.configuration,\r\n            id: workspace.id\r\n        };\r\n    }\r\n    if (workspace.folders.length === 1) {\r\n        return workspace.folders[0].uri;\r\n    }\r\n    // Empty workspace\r\n    return undefined;\r\n}\r\n//#endregion\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport * as nls from '../../../nls.js';\r\nimport * as path from '../../../base/common/path.js';\r\nimport { dirname } from '../../../base/common/resources.js';\r\nimport { Text } from './snippetParser.js';\r\nimport { LanguageConfigurationRegistry } from '../../common/modes/languageConfigurationRegistry.js';\r\nimport { getLeadingWhitespace, commonPrefixLength, isFalsyOrWhitespace, pad, endsWith } from '../../../base/common/strings.js';\r\nimport { isSingleFolderWorkspaceIdentifier, toWorkspaceIdentifier, WORKSPACE_EXTENSION } from '../../../platform/workspaces/common/workspaces.js';\r\nimport { normalizeDriveLetter } from '../../../base/common/labels.js';\r\nvar CompositeSnippetVariableResolver = /** @class */ (function () {\r\n    function CompositeSnippetVariableResolver(_delegates) {\r\n        this._delegates = _delegates;\r\n        //\r\n    }\r\n    CompositeSnippetVariableResolver.prototype.resolve = function (variable) {\r\n        for (var _i = 0, _a = this._delegates; _i < _a.length; _i++) {\r\n            var delegate = _a[_i];\r\n            var value = delegate.resolve(variable);\r\n            if (value !== undefined) {\r\n                return value;\r\n            }\r\n        }\r\n        return undefined;\r\n    };\r\n    return CompositeSnippetVariableResolver;\r\n}());\r\nexport { CompositeSnippetVariableResolver };\r\nvar SelectionBasedVariableResolver = /** @class */ (function () {\r\n    function SelectionBasedVariableResolver(_model, _selection) {\r\n        this._model = _model;\r\n        this._selection = _selection;\r\n        //\r\n    }\r\n    SelectionBasedVariableResolver.prototype.resolve = function (variable) {\r\n        var name = variable.name;\r\n        if (name === 'SELECTION' || name === 'TM_SELECTED_TEXT') {\r\n            var value = this._model.getValueInRange(this._selection) || undefined;\r\n            if (value && this._selection.startLineNumber !== this._selection.endLineNumber && variable.snippet) {\r\n                // Selection is a multiline string which we indentation we now\r\n                // need to adjust. We compare the indentation of this variable\r\n                // with the indentation at the editor position and add potential\r\n                // extra indentation to the value\r\n                var line = this._model.getLineContent(this._selection.startLineNumber);\r\n                var lineLeadingWhitespace = getLeadingWhitespace(line, 0, this._selection.startColumn - 1);\r\n                var varLeadingWhitespace_1 = lineLeadingWhitespace;\r\n                variable.snippet.walk(function (marker) {\r\n                    if (marker === variable) {\r\n                        return false;\r\n                    }\r\n                    if (marker instanceof Text) {\r\n                        varLeadingWhitespace_1 = getLeadingWhitespace(marker.value.split(/\\r\\n|\\r|\\n/).pop());\r\n                    }\r\n                    return true;\r\n                });\r\n                var whitespaceCommonLength_1 = commonPrefixLength(varLeadingWhitespace_1, lineLeadingWhitespace);\r\n                value = value.replace(/(\\r\\n|\\r|\\n)(.*)/g, function (m, newline, rest) { return \"\" + newline + varLeadingWhitespace_1.substr(whitespaceCommonLength_1) + rest; });\r\n            }\r\n            return value;\r\n        }\r\n        else if (name === 'TM_CURRENT_LINE') {\r\n            return this._model.getLineContent(this._selection.positionLineNumber);\r\n        }\r\n        else if (name === 'TM_CURRENT_WORD') {\r\n            var info = this._model.getWordAtPosition({\r\n                lineNumber: this._selection.positionLineNumber,\r\n                column: this._selection.positionColumn\r\n            });\r\n            return info && info.word || undefined;\r\n        }\r\n        else if (name === 'TM_LINE_INDEX') {\r\n            return String(this._selection.positionLineNumber - 1);\r\n        }\r\n        else if (name === 'TM_LINE_NUMBER') {\r\n            return String(this._selection.positionLineNumber);\r\n        }\r\n        return undefined;\r\n    };\r\n    return SelectionBasedVariableResolver;\r\n}());\r\nexport { SelectionBasedVariableResolver };\r\nvar ModelBasedVariableResolver = /** @class */ (function () {\r\n    function ModelBasedVariableResolver(_labelService, _model) {\r\n        this._labelService = _labelService;\r\n        this._model = _model;\r\n        //\r\n    }\r\n    ModelBasedVariableResolver.prototype.resolve = function (variable) {\r\n        var name = variable.name;\r\n        if (name === 'TM_FILENAME') {\r\n            return path.basename(this._model.uri.fsPath);\r\n        }\r\n        else if (name === 'TM_FILENAME_BASE') {\r\n            var name_1 = path.basename(this._model.uri.fsPath);\r\n            var idx = name_1.lastIndexOf('.');\r\n            if (idx <= 0) {\r\n                return name_1;\r\n            }\r\n            else {\r\n                return name_1.slice(0, idx);\r\n            }\r\n        }\r\n        else if (name === 'TM_DIRECTORY' && this._labelService) {\r\n            if (path.dirname(this._model.uri.fsPath) === '.') {\r\n                return '';\r\n            }\r\n            return this._labelService.getUriLabel(dirname(this._model.uri));\r\n        }\r\n        else if (name === 'TM_FILEPATH' && this._labelService) {\r\n            return this._labelService.getUriLabel(this._model.uri);\r\n        }\r\n        return undefined;\r\n    };\r\n    return ModelBasedVariableResolver;\r\n}());\r\nexport { ModelBasedVariableResolver };\r\nvar ClipboardBasedVariableResolver = /** @class */ (function () {\r\n    function ClipboardBasedVariableResolver(_readClipboardText, _selectionIdx, _selectionCount, _spread) {\r\n        this._readClipboardText = _readClipboardText;\r\n        this._selectionIdx = _selectionIdx;\r\n        this._selectionCount = _selectionCount;\r\n        this._spread = _spread;\r\n        //\r\n    }\r\n    ClipboardBasedVariableResolver.prototype.resolve = function (variable) {\r\n        if (variable.name !== 'CLIPBOARD') {\r\n            return undefined;\r\n        }\r\n        var clipboardText = this._readClipboardText();\r\n        if (!clipboardText) {\r\n            return undefined;\r\n        }\r\n        // `spread` is assigning each cursor a line of the clipboard\r\n        // text whenever there the line count equals the cursor count\r\n        // and when enabled\r\n        if (this._spread) {\r\n            var lines = clipboardText.split(/\\r\\n|\\n|\\r/).filter(function (s) { return !isFalsyOrWhitespace(s); });\r\n            if (lines.length === this._selectionCount) {\r\n                return lines[this._selectionIdx];\r\n            }\r\n        }\r\n        return clipboardText;\r\n    };\r\n    return ClipboardBasedVariableResolver;\r\n}());\r\nexport { ClipboardBasedVariableResolver };\r\nvar CommentBasedVariableResolver = /** @class */ (function () {\r\n    function CommentBasedVariableResolver(_model) {\r\n        this._model = _model;\r\n        //\r\n    }\r\n    CommentBasedVariableResolver.prototype.resolve = function (variable) {\r\n        var name = variable.name;\r\n        var language = this._model.getLanguageIdentifier();\r\n        var config = LanguageConfigurationRegistry.getComments(language.id);\r\n        if (!config) {\r\n            return undefined;\r\n        }\r\n        if (name === 'LINE_COMMENT') {\r\n            return config.lineCommentToken || undefined;\r\n        }\r\n        else if (name === 'BLOCK_COMMENT_START') {\r\n            return config.blockCommentStartToken || undefined;\r\n        }\r\n        else if (name === 'BLOCK_COMMENT_END') {\r\n            return config.blockCommentEndToken || undefined;\r\n        }\r\n        return undefined;\r\n    };\r\n    return CommentBasedVariableResolver;\r\n}());\r\nexport { CommentBasedVariableResolver };\r\nvar TimeBasedVariableResolver = /** @class */ (function () {\r\n    function TimeBasedVariableResolver() {\r\n    }\r\n    TimeBasedVariableResolver.prototype.resolve = function (variable) {\r\n        var name = variable.name;\r\n        if (name === 'CURRENT_YEAR') {\r\n            return String(new Date().getFullYear());\r\n        }\r\n        else if (name === 'CURRENT_YEAR_SHORT') {\r\n            return String(new Date().getFullYear()).slice(-2);\r\n        }\r\n        else if (name === 'CURRENT_MONTH') {\r\n            return pad((new Date().getMonth().valueOf() + 1), 2);\r\n        }\r\n        else if (name === 'CURRENT_DATE') {\r\n            return pad(new Date().getDate().valueOf(), 2);\r\n        }\r\n        else if (name === 'CURRENT_HOUR') {\r\n            return pad(new Date().getHours().valueOf(), 2);\r\n        }\r\n        else if (name === 'CURRENT_MINUTE') {\r\n            return pad(new Date().getMinutes().valueOf(), 2);\r\n        }\r\n        else if (name === 'CURRENT_SECOND') {\r\n            return pad(new Date().getSeconds().valueOf(), 2);\r\n        }\r\n        else if (name === 'CURRENT_DAY_NAME') {\r\n            return TimeBasedVariableResolver.dayNames[new Date().getDay()];\r\n        }\r\n        else if (name === 'CURRENT_DAY_NAME_SHORT') {\r\n            return TimeBasedVariableResolver.dayNamesShort[new Date().getDay()];\r\n        }\r\n        else if (name === 'CURRENT_MONTH_NAME') {\r\n            return TimeBasedVariableResolver.monthNames[new Date().getMonth()];\r\n        }\r\n        else if (name === 'CURRENT_MONTH_NAME_SHORT') {\r\n            return TimeBasedVariableResolver.monthNamesShort[new Date().getMonth()];\r\n        }\r\n        else if (name === 'CURRENT_SECONDS_UNIX') {\r\n            return String(Math.floor(Date.now() / 1000));\r\n        }\r\n        return undefined;\r\n    };\r\n    TimeBasedVariableResolver.dayNames = [nls.localize('Sunday', \"Sunday\"), nls.localize('Monday', \"Monday\"), nls.localize('Tuesday', \"Tuesday\"), nls.localize('Wednesday', \"Wednesday\"), nls.localize('Thursday', \"Thursday\"), nls.localize('Friday', \"Friday\"), nls.localize('Saturday', \"Saturday\")];\r\n    TimeBasedVariableResolver.dayNamesShort = [nls.localize('SundayShort', \"Sun\"), nls.localize('MondayShort', \"Mon\"), nls.localize('TuesdayShort', \"Tue\"), nls.localize('WednesdayShort', \"Wed\"), nls.localize('ThursdayShort', \"Thu\"), nls.localize('FridayShort', \"Fri\"), nls.localize('SaturdayShort', \"Sat\")];\r\n    TimeBasedVariableResolver.monthNames = [nls.localize('January', \"January\"), nls.localize('February', \"February\"), nls.localize('March', \"March\"), nls.localize('April', \"April\"), nls.localize('May', \"May\"), nls.localize('June', \"June\"), nls.localize('July', \"July\"), nls.localize('August', \"August\"), nls.localize('September', \"September\"), nls.localize('October', \"October\"), nls.localize('November', \"November\"), nls.localize('December', \"December\")];\r\n    TimeBasedVariableResolver.monthNamesShort = [nls.localize('JanuaryShort', \"Jan\"), nls.localize('FebruaryShort', \"Feb\"), nls.localize('MarchShort', \"Mar\"), nls.localize('AprilShort', \"Apr\"), nls.localize('MayShort', \"May\"), nls.localize('JuneShort', \"Jun\"), nls.localize('JulyShort', \"Jul\"), nls.localize('AugustShort', \"Aug\"), nls.localize('SeptemberShort', \"Sep\"), nls.localize('OctoberShort', \"Oct\"), nls.localize('NovemberShort', \"Nov\"), nls.localize('DecemberShort', \"Dec\")];\r\n    return TimeBasedVariableResolver;\r\n}());\r\nexport { TimeBasedVariableResolver };\r\nvar WorkspaceBasedVariableResolver = /** @class */ (function () {\r\n    function WorkspaceBasedVariableResolver(_workspaceService) {\r\n        this._workspaceService = _workspaceService;\r\n        //\r\n    }\r\n    WorkspaceBasedVariableResolver.prototype.resolve = function (variable) {\r\n        if (!this._workspaceService) {\r\n            return undefined;\r\n        }\r\n        var workspaceIdentifier = toWorkspaceIdentifier(this._workspaceService.getWorkspace());\r\n        if (!workspaceIdentifier) {\r\n            return undefined;\r\n        }\r\n        if (variable.name === 'WORKSPACE_NAME') {\r\n            return this._resolveWorkspaceName(workspaceIdentifier);\r\n        }\r\n        else if (variable.name === 'WORKSPACE_FOLDER') {\r\n            return this._resoveWorkspacePath(workspaceIdentifier);\r\n        }\r\n        return undefined;\r\n    };\r\n    WorkspaceBasedVariableResolver.prototype._resolveWorkspaceName = function (workspaceIdentifier) {\r\n        if (isSingleFolderWorkspaceIdentifier(workspaceIdentifier)) {\r\n            return path.basename(workspaceIdentifier.path);\r\n        }\r\n        var filename = path.basename(workspaceIdentifier.configPath.path);\r\n        if (endsWith(filename, WORKSPACE_EXTENSION)) {\r\n            filename = filename.substr(0, filename.length - WORKSPACE_EXTENSION.length - 1);\r\n        }\r\n        return filename;\r\n    };\r\n    WorkspaceBasedVariableResolver.prototype._resoveWorkspacePath = function (workspaceIdentifier) {\r\n        if (isSingleFolderWorkspaceIdentifier(workspaceIdentifier)) {\r\n            return normalizeDriveLetter(workspaceIdentifier.fsPath);\r\n        }\r\n        var filename = path.basename(workspaceIdentifier.configPath.path);\r\n        var folderpath = workspaceIdentifier.configPath.fsPath;\r\n        if (endsWith(folderpath, filename)) {\r\n            folderpath = folderpath.substr(0, folderpath.length - filename.length - 1);\r\n        }\r\n        return (folderpath ? normalizeDriveLetter(folderpath) : '/');\r\n    };\r\n    return WorkspaceBasedVariableResolver;\r\n}());\r\nexport { WorkspaceBasedVariableResolver };\r\nvar RandomBasedVariableResolver = /** @class */ (function () {\r\n    function RandomBasedVariableResolver() {\r\n    }\r\n    RandomBasedVariableResolver.prototype.resolve = function (variable) {\r\n        var name = variable.name;\r\n        if (name === 'RANDOM') {\r\n            return Math.random().toString().slice(-6);\r\n        }\r\n        else if (name === 'RANDOM_HEX') {\r\n            return Math.random().toString(16).slice(-6);\r\n        }\r\n        return undefined;\r\n    };\r\n    return RandomBasedVariableResolver;\r\n}());\r\nexport { RandomBasedVariableResolver };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { groupBy } from '../../../base/common/arrays.js';\r\nimport { dispose } from '../../../base/common/lifecycle.js';\r\nimport { getLeadingWhitespace } from '../../../base/common/strings.js';\r\nimport './snippetSession.css';\r\nimport { EditOperation } from '../../common/core/editOperation.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { Selection } from '../../common/core/selection.js';\r\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\r\nimport { IClipboardService } from '../../../platform/clipboard/common/clipboardService.js';\r\nimport { IWorkspaceContextService } from '../../../platform/workspace/common/workspace.js';\r\nimport { optional } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { Choice, Placeholder, SnippetParser, Text } from './snippetParser.js';\r\nimport { ClipboardBasedVariableResolver, CompositeSnippetVariableResolver, ModelBasedVariableResolver, SelectionBasedVariableResolver, TimeBasedVariableResolver, CommentBasedVariableResolver, WorkspaceBasedVariableResolver, RandomBasedVariableResolver } from './snippetVariables.js';\r\nimport { registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\r\nimport * as colors from '../../../platform/theme/common/colorRegistry.js';\r\nimport { ILabelService } from '../../../platform/label/common/label.js';\r\nregisterThemingParticipant(function (theme, collector) {\r\n    function getColorGraceful(name) {\r\n        var color = theme.getColor(name);\r\n        return color ? color.toString() : 'transparent';\r\n    }\r\n    collector.addRule(\".monaco-editor .snippet-placeholder { background-color: \" + getColorGraceful(colors.snippetTabstopHighlightBackground) + \"; outline-color: \" + getColorGraceful(colors.snippetTabstopHighlightBorder) + \"; }\");\r\n    collector.addRule(\".monaco-editor .finish-snippet-placeholder { background-color: \" + getColorGraceful(colors.snippetFinalTabstopHighlightBackground) + \"; outline-color: \" + getColorGraceful(colors.snippetFinalTabstopHighlightBorder) + \"; }\");\r\n});\r\nvar OneSnippet = /** @class */ (function () {\r\n    function OneSnippet(editor, snippet, offset) {\r\n        this._nestingLevel = 1;\r\n        this._editor = editor;\r\n        this._snippet = snippet;\r\n        this._offset = offset;\r\n        this._placeholderGroups = groupBy(snippet.placeholders, Placeholder.compareByIndex);\r\n        this._placeholderGroupsIdx = -1;\r\n    }\r\n    OneSnippet.prototype.dispose = function () {\r\n        if (this._placeholderDecorations) {\r\n            var toRemove_1 = [];\r\n            this._placeholderDecorations.forEach(function (handle) { return toRemove_1.push(handle); });\r\n            this._editor.deltaDecorations(toRemove_1, []);\r\n        }\r\n        this._placeholderGroups.length = 0;\r\n    };\r\n    OneSnippet.prototype._initDecorations = function () {\r\n        var _this = this;\r\n        if (this._placeholderDecorations) {\r\n            // already initialized\r\n            return;\r\n        }\r\n        this._placeholderDecorations = new Map();\r\n        var model = this._editor.getModel();\r\n        this._editor.changeDecorations(function (accessor) {\r\n            // create a decoration for each placeholder\r\n            for (var _i = 0, _a = _this._snippet.placeholders; _i < _a.length; _i++) {\r\n                var placeholder = _a[_i];\r\n                var placeholderOffset = _this._snippet.offset(placeholder);\r\n                var placeholderLen = _this._snippet.fullLen(placeholder);\r\n                var range = Range.fromPositions(model.getPositionAt(_this._offset + placeholderOffset), model.getPositionAt(_this._offset + placeholderOffset + placeholderLen));\r\n                var options = placeholder.isFinalTabstop ? OneSnippet._decor.inactiveFinal : OneSnippet._decor.inactive;\r\n                var handle = accessor.addDecoration(range, options);\r\n                _this._placeholderDecorations.set(placeholder, handle);\r\n            }\r\n        });\r\n    };\r\n    OneSnippet.prototype.move = function (fwd) {\r\n        var _this = this;\r\n        if (!this._editor.hasModel()) {\r\n            return [];\r\n        }\r\n        this._initDecorations();\r\n        // Transform placeholder text if necessary\r\n        if (this._placeholderGroupsIdx >= 0) {\r\n            var operations = [];\r\n            for (var _i = 0, _a = this._placeholderGroups[this._placeholderGroupsIdx]; _i < _a.length; _i++) {\r\n                var placeholder = _a[_i];\r\n                // Check if the placeholder has a transformation\r\n                if (placeholder.transform) {\r\n                    var id = this._placeholderDecorations.get(placeholder);\r\n                    var range = this._editor.getModel().getDecorationRange(id);\r\n                    var currentValue = this._editor.getModel().getValueInRange(range);\r\n                    operations.push(EditOperation.replaceMove(range, placeholder.transform.resolve(currentValue)));\r\n                }\r\n            }\r\n            if (operations.length > 0) {\r\n                this._editor.executeEdits('snippet.placeholderTransform', operations);\r\n            }\r\n        }\r\n        var couldSkipThisPlaceholder = false;\r\n        if (fwd === true && this._placeholderGroupsIdx < this._placeholderGroups.length - 1) {\r\n            this._placeholderGroupsIdx += 1;\r\n            couldSkipThisPlaceholder = true;\r\n        }\r\n        else if (fwd === false && this._placeholderGroupsIdx > 0) {\r\n            this._placeholderGroupsIdx -= 1;\r\n            couldSkipThisPlaceholder = true;\r\n        }\r\n        else {\r\n            // the selection of the current placeholder might\r\n            // not acurate any more -> simply restore it\r\n        }\r\n        var newSelections = this._editor.getModel().changeDecorations(function (accessor) {\r\n            var activePlaceholders = new Set();\r\n            // change stickiness to always grow when typing at its edges\r\n            // because these decorations represent the currently active\r\n            // tabstop.\r\n            // Special case #1: reaching the final tabstop\r\n            // Special case #2: placeholders enclosing active placeholders\r\n            var selections = [];\r\n            for (var _i = 0, _a = _this._placeholderGroups[_this._placeholderGroupsIdx]; _i < _a.length; _i++) {\r\n                var placeholder = _a[_i];\r\n                var id = _this._placeholderDecorations.get(placeholder);\r\n                var range = _this._editor.getModel().getDecorationRange(id);\r\n                selections.push(new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn));\r\n                // consider to skip this placeholder index when the decoration\r\n                // range is empty but when the placeholder wasn't. that's a strong\r\n                // hint that the placeholder has been deleted. (all placeholder must match this)\r\n                couldSkipThisPlaceholder = couldSkipThisPlaceholder && _this._hasPlaceholderBeenCollapsed(placeholder);\r\n                accessor.changeDecorationOptions(id, placeholder.isFinalTabstop ? OneSnippet._decor.activeFinal : OneSnippet._decor.active);\r\n                activePlaceholders.add(placeholder);\r\n                for (var _b = 0, _c = _this._snippet.enclosingPlaceholders(placeholder); _b < _c.length; _b++) {\r\n                    var enclosingPlaceholder = _c[_b];\r\n                    var id_1 = _this._placeholderDecorations.get(enclosingPlaceholder);\r\n                    accessor.changeDecorationOptions(id_1, enclosingPlaceholder.isFinalTabstop ? OneSnippet._decor.activeFinal : OneSnippet._decor.active);\r\n                    activePlaceholders.add(enclosingPlaceholder);\r\n                }\r\n            }\r\n            // change stickness to never grow when typing at its edges\r\n            // so that in-active tabstops never grow\r\n            _this._placeholderDecorations.forEach(function (id, placeholder) {\r\n                if (!activePlaceholders.has(placeholder)) {\r\n                    accessor.changeDecorationOptions(id, placeholder.isFinalTabstop ? OneSnippet._decor.inactiveFinal : OneSnippet._decor.inactive);\r\n                }\r\n            });\r\n            return selections;\r\n        });\r\n        return !couldSkipThisPlaceholder ? newSelections : this.move(fwd);\r\n    };\r\n    OneSnippet.prototype._hasPlaceholderBeenCollapsed = function (placeholder) {\r\n        // A placeholder is empty when it wasn't empty when authored but\r\n        // when its tracking decoration is empty. This also applies to all\r\n        // potential parent placeholders\r\n        var marker = placeholder;\r\n        while (marker) {\r\n            if (marker instanceof Placeholder) {\r\n                var id = this._placeholderDecorations.get(marker);\r\n                var range = this._editor.getModel().getDecorationRange(id);\r\n                if (range.isEmpty() && marker.toString().length > 0) {\r\n                    return true;\r\n                }\r\n            }\r\n            marker = marker.parent;\r\n        }\r\n        return false;\r\n    };\r\n    Object.defineProperty(OneSnippet.prototype, \"isAtFirstPlaceholder\", {\r\n        get: function () {\r\n            return this._placeholderGroupsIdx <= 0 || this._placeholderGroups.length === 0;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(OneSnippet.prototype, \"isAtLastPlaceholder\", {\r\n        get: function () {\r\n            return this._placeholderGroupsIdx === this._placeholderGroups.length - 1;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(OneSnippet.prototype, \"hasPlaceholder\", {\r\n        get: function () {\r\n            return this._snippet.placeholders.length > 0;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    OneSnippet.prototype.computePossibleSelections = function () {\r\n        var result = new Map();\r\n        for (var _i = 0, _a = this._placeholderGroups; _i < _a.length; _i++) {\r\n            var placeholdersWithEqualIndex = _a[_i];\r\n            var ranges = void 0;\r\n            for (var _b = 0, placeholdersWithEqualIndex_1 = placeholdersWithEqualIndex; _b < placeholdersWithEqualIndex_1.length; _b++) {\r\n                var placeholder = placeholdersWithEqualIndex_1[_b];\r\n                if (placeholder.isFinalTabstop) {\r\n                    // ignore those\r\n                    break;\r\n                }\r\n                if (!ranges) {\r\n                    ranges = [];\r\n                    result.set(placeholder.index, ranges);\r\n                }\r\n                var id = this._placeholderDecorations.get(placeholder);\r\n                var range = this._editor.getModel().getDecorationRange(id);\r\n                if (!range) {\r\n                    // one of the placeholder lost its decoration and\r\n                    // therefore we bail out and pretend the placeholder\r\n                    // (with its mirrors) doesn't exist anymore.\r\n                    result.delete(placeholder.index);\r\n                    break;\r\n                }\r\n                ranges.push(range);\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    Object.defineProperty(OneSnippet.prototype, \"choice\", {\r\n        get: function () {\r\n            return this._placeholderGroups[this._placeholderGroupsIdx][0].choice;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    OneSnippet.prototype.merge = function (others) {\r\n        var _this = this;\r\n        var model = this._editor.getModel();\r\n        this._nestingLevel *= 10;\r\n        this._editor.changeDecorations(function (accessor) {\r\n            // For each active placeholder take one snippet and merge it\r\n            // in that the placeholder (can be many for `$1foo$1foo`). Because\r\n            // everything is sorted by editor selection we can simply remove\r\n            // elements from the beginning of the array\r\n            for (var _i = 0, _a = _this._placeholderGroups[_this._placeholderGroupsIdx]; _i < _a.length; _i++) {\r\n                var placeholder = _a[_i];\r\n                var nested = others.shift();\r\n                console.assert(!nested._placeholderDecorations);\r\n                // Massage placeholder-indicies of the nested snippet to be\r\n                // sorted right after the insertion point. This ensures we move\r\n                // through the placeholders in the correct order\r\n                var indexLastPlaceholder = nested._snippet.placeholderInfo.last.index;\r\n                for (var _b = 0, _c = nested._snippet.placeholderInfo.all; _b < _c.length; _b++) {\r\n                    var nestedPlaceholder = _c[_b];\r\n                    if (nestedPlaceholder.isFinalTabstop) {\r\n                        nestedPlaceholder.index = placeholder.index + ((indexLastPlaceholder + 1) / _this._nestingLevel);\r\n                    }\r\n                    else {\r\n                        nestedPlaceholder.index = placeholder.index + (nestedPlaceholder.index / _this._nestingLevel);\r\n                    }\r\n                }\r\n                _this._snippet.replace(placeholder, nested._snippet.children);\r\n                // Remove the placeholder at which position are inserting\r\n                // the snippet and also remove its decoration.\r\n                var id = _this._placeholderDecorations.get(placeholder);\r\n                accessor.removeDecoration(id);\r\n                _this._placeholderDecorations.delete(placeholder);\r\n                // For each *new* placeholder we create decoration to monitor\r\n                // how and if it grows/shrinks.\r\n                for (var _d = 0, _e = nested._snippet.placeholders; _d < _e.length; _d++) {\r\n                    var placeholder_1 = _e[_d];\r\n                    var placeholderOffset = nested._snippet.offset(placeholder_1);\r\n                    var placeholderLen = nested._snippet.fullLen(placeholder_1);\r\n                    var range = Range.fromPositions(model.getPositionAt(nested._offset + placeholderOffset), model.getPositionAt(nested._offset + placeholderOffset + placeholderLen));\r\n                    var handle = accessor.addDecoration(range, OneSnippet._decor.inactive);\r\n                    _this._placeholderDecorations.set(placeholder_1, handle);\r\n                }\r\n            }\r\n            // Last, re-create the placeholder groups by sorting placeholders by their index.\r\n            _this._placeholderGroups = groupBy(_this._snippet.placeholders, Placeholder.compareByIndex);\r\n        });\r\n    };\r\n    OneSnippet._decor = {\r\n        active: ModelDecorationOptions.register({ stickiness: 0 /* AlwaysGrowsWhenTypingAtEdges */, className: 'snippet-placeholder' }),\r\n        inactive: ModelDecorationOptions.register({ stickiness: 1 /* NeverGrowsWhenTypingAtEdges */, className: 'snippet-placeholder' }),\r\n        activeFinal: ModelDecorationOptions.register({ stickiness: 1 /* NeverGrowsWhenTypingAtEdges */, className: 'finish-snippet-placeholder' }),\r\n        inactiveFinal: ModelDecorationOptions.register({ stickiness: 1 /* NeverGrowsWhenTypingAtEdges */, className: 'finish-snippet-placeholder' }),\r\n    };\r\n    return OneSnippet;\r\n}());\r\nexport { OneSnippet };\r\nvar _defaultOptions = {\r\n    overwriteBefore: 0,\r\n    overwriteAfter: 0,\r\n    adjustWhitespace: true,\r\n    clipboardText: undefined\r\n};\r\nvar SnippetSession = /** @class */ (function () {\r\n    function SnippetSession(editor, template, options) {\r\n        if (options === void 0) { options = _defaultOptions; }\r\n        this._templateMerges = [];\r\n        this._snippets = [];\r\n        this._editor = editor;\r\n        this._template = template;\r\n        this._options = options;\r\n    }\r\n    SnippetSession.adjustWhitespace = function (model, position, snippet, adjustIndentation, adjustNewlines) {\r\n        var line = model.getLineContent(position.lineNumber);\r\n        var lineLeadingWhitespace = getLeadingWhitespace(line, 0, position.column - 1);\r\n        snippet.walk(function (marker) {\r\n            if (marker instanceof Text && !(marker.parent instanceof Choice)) {\r\n                // adjust indentation of text markers, except for choise elements\r\n                // which get adjusted when being selected\r\n                var lines = marker.value.split(/\\r\\n|\\r|\\n/);\r\n                if (adjustIndentation) {\r\n                    for (var i = 1; i < lines.length; i++) {\r\n                        var templateLeadingWhitespace = getLeadingWhitespace(lines[i]);\r\n                        lines[i] = model.normalizeIndentation(lineLeadingWhitespace + templateLeadingWhitespace) + lines[i].substr(templateLeadingWhitespace.length);\r\n                    }\r\n                }\r\n                if (adjustNewlines) {\r\n                    var newValue = lines.join(model.getEOL());\r\n                    if (newValue !== marker.value) {\r\n                        marker.parent.replace(marker, [new Text(newValue)]);\r\n                    }\r\n                }\r\n            }\r\n            return true;\r\n        });\r\n    };\r\n    SnippetSession.adjustSelection = function (model, selection, overwriteBefore, overwriteAfter) {\r\n        if (overwriteBefore !== 0 || overwriteAfter !== 0) {\r\n            // overwrite[Before|After] is compute using the position, not the whole\r\n            // selection. therefore we adjust the selection around that position\r\n            var positionLineNumber = selection.positionLineNumber, positionColumn = selection.positionColumn;\r\n            var positionColumnBefore = positionColumn - overwriteBefore;\r\n            var positionColumnAfter = positionColumn + overwriteAfter;\r\n            var range = model.validateRange({\r\n                startLineNumber: positionLineNumber,\r\n                startColumn: positionColumnBefore,\r\n                endLineNumber: positionLineNumber,\r\n                endColumn: positionColumnAfter\r\n            });\r\n            selection = Selection.createWithDirection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn, selection.getDirection());\r\n        }\r\n        return selection;\r\n    };\r\n    SnippetSession.createEditsAndSnippets = function (editor, template, overwriteBefore, overwriteAfter, enforceFinalTabstop, adjustWhitespace, clipboardText) {\r\n        var edits = [];\r\n        var snippets = [];\r\n        if (!editor.hasModel()) {\r\n            return { edits: edits, snippets: snippets };\r\n        }\r\n        var model = editor.getModel();\r\n        var workspaceService = editor.invokeWithinContext(function (accessor) { return accessor.get(IWorkspaceContextService, optional); });\r\n        var modelBasedVariableResolver = editor.invokeWithinContext(function (accessor) { return new ModelBasedVariableResolver(accessor.get(ILabelService, optional), model); });\r\n        var clipboardService = editor.invokeWithinContext(function (accessor) { return accessor.get(IClipboardService, optional); });\r\n        var readClipboardText = function () { return clipboardText || clipboardService && clipboardService.readTextSync(); };\r\n        var delta = 0;\r\n        // know what text the overwrite[Before|After] extensions\r\n        // of the primary curser have selected because only when\r\n        // secondary selections extend to the same text we can grow them\r\n        var firstBeforeText = model.getValueInRange(SnippetSession.adjustSelection(model, editor.getSelection(), overwriteBefore, 0));\r\n        var firstAfterText = model.getValueInRange(SnippetSession.adjustSelection(model, editor.getSelection(), 0, overwriteAfter));\r\n        // remember the first non-whitespace column to decide if\r\n        // `keepWhitespace` should be overruled for secondary selections\r\n        var firstLineFirstNonWhitespace = model.getLineFirstNonWhitespaceColumn(editor.getSelection().positionLineNumber);\r\n        // sort selections by their start position but remeber\r\n        // the original index. that allows you to create correct\r\n        // offset-based selection logic without changing the\r\n        // primary selection\r\n        var indexedSelections = editor.getSelections()\r\n            .map(function (selection, idx) { return ({ selection: selection, idx: idx }); })\r\n            .sort(function (a, b) { return Range.compareRangesUsingStarts(a.selection, b.selection); });\r\n        for (var _i = 0, indexedSelections_1 = indexedSelections; _i < indexedSelections_1.length; _i++) {\r\n            var _a = indexedSelections_1[_i], selection = _a.selection, idx = _a.idx;\r\n            // extend selection with the `overwriteBefore` and `overwriteAfter` and then\r\n            // compare if this matches the extensions of the primary selection\r\n            var extensionBefore = SnippetSession.adjustSelection(model, selection, overwriteBefore, 0);\r\n            var extensionAfter = SnippetSession.adjustSelection(model, selection, 0, overwriteAfter);\r\n            if (firstBeforeText !== model.getValueInRange(extensionBefore)) {\r\n                extensionBefore = selection;\r\n            }\r\n            if (firstAfterText !== model.getValueInRange(extensionAfter)) {\r\n                extensionAfter = selection;\r\n            }\r\n            // merge the before and after selection into one\r\n            var snippetSelection = selection\r\n                .setStartPosition(extensionBefore.startLineNumber, extensionBefore.startColumn)\r\n                .setEndPosition(extensionAfter.endLineNumber, extensionAfter.endColumn);\r\n            var snippet = new SnippetParser().parse(template, true, enforceFinalTabstop);\r\n            // adjust the template string to match the indentation and\r\n            // whitespace rules of this insert location (can be different for each cursor)\r\n            // happens when being asked for (default) or when this is a secondary\r\n            // cursor and the leading whitespace is different\r\n            var start = snippetSelection.getStartPosition();\r\n            SnippetSession.adjustWhitespace(model, start, snippet, adjustWhitespace || (idx > 0 && firstLineFirstNonWhitespace !== model.getLineFirstNonWhitespaceColumn(selection.positionLineNumber)), true);\r\n            snippet.resolveVariables(new CompositeSnippetVariableResolver([\r\n                modelBasedVariableResolver,\r\n                new ClipboardBasedVariableResolver(readClipboardText, idx, indexedSelections.length, editor.getOption(58 /* multiCursorPaste */) === 'spread'),\r\n                new SelectionBasedVariableResolver(model, selection),\r\n                new CommentBasedVariableResolver(model),\r\n                new TimeBasedVariableResolver,\r\n                new WorkspaceBasedVariableResolver(workspaceService),\r\n                new RandomBasedVariableResolver,\r\n            ]));\r\n            var offset = model.getOffsetAt(start) + delta;\r\n            delta += snippet.toString().length - model.getValueLengthInRange(snippetSelection);\r\n            // store snippets with the index of their originating selection.\r\n            // that ensures the primiary cursor stays primary despite not being\r\n            // the one with lowest start position\r\n            edits[idx] = EditOperation.replace(snippetSelection, snippet.toString());\r\n            snippets[idx] = new OneSnippet(editor, snippet, offset);\r\n        }\r\n        return { edits: edits, snippets: snippets };\r\n    };\r\n    SnippetSession.prototype.dispose = function () {\r\n        dispose(this._snippets);\r\n    };\r\n    SnippetSession.prototype._logInfo = function () {\r\n        return \"template=\\\"\" + this._template + \"\\\", merged_templates=\\\"\" + this._templateMerges.join(' -> ') + \"\\\"\";\r\n    };\r\n    SnippetSession.prototype.insert = function () {\r\n        var _this = this;\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        // make insert edit and start with first selections\r\n        var _a = SnippetSession.createEditsAndSnippets(this._editor, this._template, this._options.overwriteBefore, this._options.overwriteAfter, false, this._options.adjustWhitespace, this._options.clipboardText), edits = _a.edits, snippets = _a.snippets;\r\n        this._snippets = snippets;\r\n        this._editor.executeEdits('snippet', edits, function (undoEdits) {\r\n            if (_this._snippets[0].hasPlaceholder) {\r\n                return _this._move(true);\r\n            }\r\n            else {\r\n                return undoEdits.map(function (edit) { return Selection.fromPositions(edit.range.getEndPosition()); });\r\n            }\r\n        });\r\n        this._editor.revealRange(this._editor.getSelections()[0]);\r\n    };\r\n    SnippetSession.prototype.merge = function (template, options) {\r\n        var _this = this;\r\n        if (options === void 0) { options = _defaultOptions; }\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        this._templateMerges.push([this._snippets[0]._nestingLevel, this._snippets[0]._placeholderGroupsIdx, template]);\r\n        var _a = SnippetSession.createEditsAndSnippets(this._editor, template, options.overwriteBefore, options.overwriteAfter, true, options.adjustWhitespace, options.clipboardText), edits = _a.edits, snippets = _a.snippets;\r\n        this._editor.executeEdits('snippet', edits, function (undoEdits) {\r\n            for (var _i = 0, _a = _this._snippets; _i < _a.length; _i++) {\r\n                var snippet = _a[_i];\r\n                snippet.merge(snippets);\r\n            }\r\n            console.assert(snippets.length === 0);\r\n            if (_this._snippets[0].hasPlaceholder) {\r\n                return _this._move(undefined);\r\n            }\r\n            else {\r\n                return undoEdits.map(function (edit) { return Selection.fromPositions(edit.range.getEndPosition()); });\r\n            }\r\n        });\r\n    };\r\n    SnippetSession.prototype.next = function () {\r\n        var newSelections = this._move(true);\r\n        this._editor.setSelections(newSelections);\r\n        this._editor.revealPositionInCenterIfOutsideViewport(newSelections[0].getPosition());\r\n    };\r\n    SnippetSession.prototype.prev = function () {\r\n        var newSelections = this._move(false);\r\n        this._editor.setSelections(newSelections);\r\n        this._editor.revealPositionInCenterIfOutsideViewport(newSelections[0].getPosition());\r\n    };\r\n    SnippetSession.prototype._move = function (fwd) {\r\n        var selections = [];\r\n        for (var _i = 0, _a = this._snippets; _i < _a.length; _i++) {\r\n            var snippet = _a[_i];\r\n            var oneSelection = snippet.move(fwd);\r\n            selections.push.apply(selections, oneSelection);\r\n        }\r\n        return selections;\r\n    };\r\n    Object.defineProperty(SnippetSession.prototype, \"isAtFirstPlaceholder\", {\r\n        get: function () {\r\n            return this._snippets[0].isAtFirstPlaceholder;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SnippetSession.prototype, \"isAtLastPlaceholder\", {\r\n        get: function () {\r\n            return this._snippets[0].isAtLastPlaceholder;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SnippetSession.prototype, \"hasPlaceholder\", {\r\n        get: function () {\r\n            return this._snippets[0].hasPlaceholder;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SnippetSession.prototype, \"choice\", {\r\n        get: function () {\r\n            return this._snippets[0].choice;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SnippetSession.prototype.isSelectionWithinPlaceholders = function () {\r\n        if (!this.hasPlaceholder) {\r\n            return false;\r\n        }\r\n        var selections = this._editor.getSelections();\r\n        if (selections.length < this._snippets.length) {\r\n            // this means we started snippet mode with N\r\n            // selections and have M (N > M) selections.\r\n            // So one snippet is without selection -> cancel\r\n            return false;\r\n        }\r\n        var allPossibleSelections = new Map();\r\n        var _loop_1 = function (snippet) {\r\n            var possibleSelections = snippet.computePossibleSelections();\r\n            // for the first snippet find the placeholder (and its ranges)\r\n            // that contain at least one selection. for all remaining snippets\r\n            // the same placeholder (and their ranges) must be used.\r\n            if (allPossibleSelections.size === 0) {\r\n                possibleSelections.forEach(function (ranges, index) {\r\n                    ranges.sort(Range.compareRangesUsingStarts);\r\n                    for (var _i = 0, selections_1 = selections; _i < selections_1.length; _i++) {\r\n                        var selection = selections_1[_i];\r\n                        if (ranges[0].containsRange(selection)) {\r\n                            allPossibleSelections.set(index, []);\r\n                            break;\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n            if (allPossibleSelections.size === 0) {\r\n                return { value: false };\r\n            }\r\n            // add selections from 'this' snippet so that we know all\r\n            // selections for this placeholder\r\n            allPossibleSelections.forEach(function (array, index) {\r\n                array.push.apply(array, possibleSelections.get(index));\r\n            });\r\n        };\r\n        for (var _i = 0, _a = this._snippets; _i < _a.length; _i++) {\r\n            var snippet = _a[_i];\r\n            var state_1 = _loop_1(snippet);\r\n            if (typeof state_1 === \"object\")\r\n                return state_1.value;\r\n        }\r\n        // sort selections (and later placeholder-ranges). then walk both\r\n        // arrays and make sure the placeholder-ranges contain the corresponding\r\n        // selection\r\n        selections.sort(Range.compareRangesUsingStarts);\r\n        allPossibleSelections.forEach(function (ranges, index) {\r\n            if (ranges.length !== selections.length) {\r\n                allPossibleSelections.delete(index);\r\n                return;\r\n            }\r\n            ranges.sort(Range.compareRangesUsingStarts);\r\n            for (var i = 0; i < ranges.length; i++) {\r\n                if (!ranges[i].containsRange(selections[i])) {\r\n                    allPossibleSelections.delete(index);\r\n                    return;\r\n                }\r\n            }\r\n        });\r\n        // from all possible selections we have deleted those\r\n        // that don't match with the current selection. if we don't\r\n        // have any left, we don't have a selection anymore\r\n        return allPossibleSelections.size > 0;\r\n    };\r\n    return SnippetSession;\r\n}());\r\nexport { SnippetSession };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { dispose, DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { repeat } from '../../../base/common/strings.js';\r\nimport { EditorCommand, registerEditorCommand, registerEditorContribution } from '../../browser/editorExtensions.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { Selection } from '../../common/core/selection.js';\r\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\r\nimport { showSimpleSuggestions } from '../suggest/suggest.js';\r\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { ILogService } from '../../../platform/log/common/log.js';\r\nimport { SnippetSession } from './snippetSession.js';\r\nvar _defaultOptions = {\r\n    overwriteBefore: 0,\r\n    overwriteAfter: 0,\r\n    undoStopBefore: true,\r\n    undoStopAfter: true,\r\n    adjustWhitespace: true,\r\n    clipboardText: undefined\r\n};\r\nvar SnippetController2 = /** @class */ (function () {\r\n    function SnippetController2(_editor, _logService, contextKeyService) {\r\n        this._editor = _editor;\r\n        this._logService = _logService;\r\n        this._snippetListener = new DisposableStore();\r\n        this._modelVersionId = -1;\r\n        this._inSnippet = SnippetController2.InSnippetMode.bindTo(contextKeyService);\r\n        this._hasNextTabstop = SnippetController2.HasNextTabstop.bindTo(contextKeyService);\r\n        this._hasPrevTabstop = SnippetController2.HasPrevTabstop.bindTo(contextKeyService);\r\n    }\r\n    SnippetController2.get = function (editor) {\r\n        return editor.getContribution(SnippetController2.ID);\r\n    };\r\n    SnippetController2.prototype.dispose = function () {\r\n        this._inSnippet.reset();\r\n        this._hasPrevTabstop.reset();\r\n        this._hasNextTabstop.reset();\r\n        dispose(this._session);\r\n        this._snippetListener.dispose();\r\n    };\r\n    SnippetController2.prototype.insert = function (template, opts) {\r\n        // this is here to find out more about the yet-not-understood\r\n        // error that sometimes happens when we fail to inserted a nested\r\n        // snippet\r\n        try {\r\n            this._doInsert(template, typeof opts === 'undefined' ? _defaultOptions : __assign(__assign({}, _defaultOptions), opts));\r\n        }\r\n        catch (e) {\r\n            this.cancel();\r\n            this._logService.error(e);\r\n            this._logService.error('snippet_error');\r\n            this._logService.error('insert_template=', template);\r\n            this._logService.error('existing_template=', this._session ? this._session._logInfo() : '<no_session>');\r\n        }\r\n    };\r\n    SnippetController2.prototype._doInsert = function (template, opts) {\r\n        var _this = this;\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        // don't listen while inserting the snippet\r\n        // as that is the inflight state causing cancelation\r\n        this._snippetListener.clear();\r\n        if (opts.undoStopBefore) {\r\n            this._editor.getModel().pushStackElement();\r\n        }\r\n        if (!this._session) {\r\n            this._modelVersionId = this._editor.getModel().getAlternativeVersionId();\r\n            this._session = new SnippetSession(this._editor, template, opts);\r\n            this._session.insert();\r\n        }\r\n        else {\r\n            this._session.merge(template, opts);\r\n        }\r\n        if (opts.undoStopAfter) {\r\n            this._editor.getModel().pushStackElement();\r\n        }\r\n        this._updateState();\r\n        this._snippetListener.add(this._editor.onDidChangeModelContent(function (e) { return e.isFlush && _this.cancel(); }));\r\n        this._snippetListener.add(this._editor.onDidChangeModel(function () { return _this.cancel(); }));\r\n        this._snippetListener.add(this._editor.onDidChangeCursorSelection(function () { return _this._updateState(); }));\r\n    };\r\n    SnippetController2.prototype._updateState = function () {\r\n        if (!this._session || !this._editor.hasModel()) {\r\n            // canceled in the meanwhile\r\n            return;\r\n        }\r\n        if (this._modelVersionId === this._editor.getModel().getAlternativeVersionId()) {\r\n            // undo until the 'before' state happened\r\n            // and makes use cancel snippet mode\r\n            return this.cancel();\r\n        }\r\n        if (!this._session.hasPlaceholder) {\r\n            // don't listen for selection changes and don't\r\n            // update context keys when the snippet is plain text\r\n            return this.cancel();\r\n        }\r\n        if (this._session.isAtLastPlaceholder || !this._session.isSelectionWithinPlaceholders()) {\r\n            return this.cancel();\r\n        }\r\n        this._inSnippet.set(true);\r\n        this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder);\r\n        this._hasNextTabstop.set(!this._session.isAtLastPlaceholder);\r\n        this._handleChoice();\r\n    };\r\n    SnippetController2.prototype._handleChoice = function () {\r\n        var _this = this;\r\n        if (!this._session || !this._editor.hasModel()) {\r\n            this._currentChoice = undefined;\r\n            return;\r\n        }\r\n        var choice = this._session.choice;\r\n        if (!choice) {\r\n            this._currentChoice = undefined;\r\n            return;\r\n        }\r\n        if (this._currentChoice !== choice) {\r\n            this._currentChoice = choice;\r\n            this._editor.setSelections(this._editor.getSelections()\r\n                .map(function (s) { return Selection.fromPositions(s.getStartPosition()); }));\r\n            var first_1 = choice.options[0];\r\n            showSimpleSuggestions(this._editor, choice.options.map(function (option, i) {\r\n                // let before = choice.options.slice(0, i);\r\n                // let after = choice.options.slice(i);\r\n                return {\r\n                    kind: 13 /* Value */,\r\n                    label: option.value,\r\n                    insertText: option.value,\r\n                    // insertText: `\\${1|${after.concat(before).join(',')}|}$0`,\r\n                    // snippetType: 'textmate',\r\n                    sortText: repeat('a', i + 1),\r\n                    range: Range.fromPositions(_this._editor.getPosition(), _this._editor.getPosition().delta(0, first_1.value.length))\r\n                };\r\n            }));\r\n        }\r\n    };\r\n    SnippetController2.prototype.finish = function () {\r\n        while (this._inSnippet.get()) {\r\n            this.next();\r\n        }\r\n    };\r\n    SnippetController2.prototype.cancel = function (resetSelection) {\r\n        if (resetSelection === void 0) { resetSelection = false; }\r\n        this._inSnippet.reset();\r\n        this._hasPrevTabstop.reset();\r\n        this._hasNextTabstop.reset();\r\n        this._snippetListener.clear();\r\n        dispose(this._session);\r\n        this._session = undefined;\r\n        this._modelVersionId = -1;\r\n        if (resetSelection) {\r\n            // reset selection to the primary cursor when being asked\r\n            // for. this happens when explicitly cancelling snippet mode,\r\n            // e.g. when pressing ESC\r\n            this._editor.setSelections([this._editor.getSelection()]);\r\n        }\r\n    };\r\n    SnippetController2.prototype.prev = function () {\r\n        if (this._session) {\r\n            this._session.prev();\r\n        }\r\n        this._updateState();\r\n    };\r\n    SnippetController2.prototype.next = function () {\r\n        if (this._session) {\r\n            this._session.next();\r\n        }\r\n        this._updateState();\r\n    };\r\n    SnippetController2.prototype.isInSnippet = function () {\r\n        return Boolean(this._inSnippet.get());\r\n    };\r\n    SnippetController2.ID = 'snippetController2';\r\n    SnippetController2.InSnippetMode = new RawContextKey('inSnippetMode', false);\r\n    SnippetController2.HasNextTabstop = new RawContextKey('hasNextTabstop', false);\r\n    SnippetController2.HasPrevTabstop = new RawContextKey('hasPrevTabstop', false);\r\n    SnippetController2 = __decorate([\r\n        __param(1, ILogService),\r\n        __param(2, IContextKeyService)\r\n    ], SnippetController2);\r\n    return SnippetController2;\r\n}());\r\nexport { SnippetController2 };\r\nregisterEditorContribution(SnippetController2.ID, SnippetController2);\r\nvar CommandCtor = EditorCommand.bindToContribution(SnippetController2.get);\r\nregisterEditorCommand(new CommandCtor({\r\n    id: 'jumpToNextSnippetPlaceholder',\r\n    precondition: ContextKeyExpr.and(SnippetController2.InSnippetMode, SnippetController2.HasNextTabstop),\r\n    handler: function (ctrl) { return ctrl.next(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */ + 30,\r\n        kbExpr: EditorContextKeys.editorTextFocus,\r\n        primary: 2 /* Tab */\r\n    }\r\n}));\r\nregisterEditorCommand(new CommandCtor({\r\n    id: 'jumpToPrevSnippetPlaceholder',\r\n    precondition: ContextKeyExpr.and(SnippetController2.InSnippetMode, SnippetController2.HasPrevTabstop),\r\n    handler: function (ctrl) { return ctrl.prev(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */ + 30,\r\n        kbExpr: EditorContextKeys.editorTextFocus,\r\n        primary: 1024 /* Shift */ | 2 /* Tab */\r\n    }\r\n}));\r\nregisterEditorCommand(new CommandCtor({\r\n    id: 'leaveSnippet',\r\n    precondition: SnippetController2.InSnippetMode,\r\n    handler: function (ctrl) { return ctrl.cancel(true); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */ + 30,\r\n        kbExpr: EditorContextKeys.editorTextFocus,\r\n        primary: 9 /* Escape */,\r\n        secondary: [1024 /* Shift */ | 9 /* Escape */]\r\n    }\r\n}));\r\nregisterEditorCommand(new CommandCtor({\r\n    id: 'acceptSnippet',\r\n    precondition: SnippetController2.InSnippetMode,\r\n    handler: function (ctrl) { return ctrl.finish(); },\r\n}));\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { LRUCache, TernarySearchTree } from '../../../base/common/map.js';\r\nimport { IStorageService, WillSaveStateReason } from '../../../platform/storage/common/storage.js';\r\nimport { completionKindFromString } from '../../common/modes.js';\r\nimport { Disposable } from '../../../base/common/lifecycle.js';\r\nimport { RunOnceScheduler } from '../../../base/common/async.js';\r\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\r\nimport { registerSingleton } from '../../../platform/instantiation/common/extensions.js';\r\nvar Memory = /** @class */ (function () {\r\n    function Memory() {\r\n    }\r\n    Memory.prototype.select = function (model, pos, items) {\r\n        if (items.length === 0) {\r\n            return 0;\r\n        }\r\n        var topScore = items[0].score[0];\r\n        for (var i = 1; i < items.length; i++) {\r\n            var _a = items[i], score = _a.score, suggestion = _a.completion;\r\n            if (score[0] !== topScore) {\r\n                // stop when leaving the group of top matches\r\n                break;\r\n            }\r\n            if (suggestion.preselect) {\r\n                // stop when seeing an auto-select-item\r\n                return i;\r\n            }\r\n        }\r\n        return 0;\r\n    };\r\n    return Memory;\r\n}());\r\nexport { Memory };\r\nvar NoMemory = /** @class */ (function (_super) {\r\n    __extends(NoMemory, _super);\r\n    function NoMemory() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    NoMemory.prototype.memorize = function (model, pos, item) {\r\n        // no-op\r\n    };\r\n    NoMemory.prototype.toJSON = function () {\r\n        return undefined;\r\n    };\r\n    NoMemory.prototype.fromJSON = function () {\r\n        //\r\n    };\r\n    return NoMemory;\r\n}(Memory));\r\nexport { NoMemory };\r\nvar LRUMemory = /** @class */ (function (_super) {\r\n    __extends(LRUMemory, _super);\r\n    function LRUMemory() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._cache = new LRUCache(300, 0.66);\r\n        _this._seq = 0;\r\n        return _this;\r\n    }\r\n    LRUMemory.prototype.memorize = function (model, pos, item) {\r\n        var label = item.completion.label;\r\n        var key = model.getLanguageIdentifier().language + \"/\" + label;\r\n        this._cache.set(key, {\r\n            touch: this._seq++,\r\n            type: item.completion.kind,\r\n            insertText: item.completion.insertText\r\n        });\r\n    };\r\n    LRUMemory.prototype.select = function (model, pos, items) {\r\n        if (items.length === 0) {\r\n            return 0;\r\n        }\r\n        var lineSuffix = model.getLineContent(pos.lineNumber).substr(pos.column - 10, pos.column - 1);\r\n        if (/\\s$/.test(lineSuffix)) {\r\n            return _super.prototype.select.call(this, model, pos, items);\r\n        }\r\n        var topScore = items[0].score[0];\r\n        var indexPreselect = -1;\r\n        var indexRecency = -1;\r\n        var seq = -1;\r\n        for (var i = 0; i < items.length; i++) {\r\n            if (items[i].score[0] !== topScore) {\r\n                // consider only top items\r\n                break;\r\n            }\r\n            var key = model.getLanguageIdentifier().language + \"/\" + items[i].completion.label;\r\n            var item = this._cache.peek(key);\r\n            if (item && item.touch > seq && item.type === items[i].completion.kind && item.insertText === items[i].completion.insertText) {\r\n                seq = item.touch;\r\n                indexRecency = i;\r\n            }\r\n            if (items[i].completion.preselect && indexPreselect === -1) {\r\n                // stop when seeing an auto-select-item\r\n                return indexPreselect = i;\r\n            }\r\n        }\r\n        if (indexRecency !== -1) {\r\n            return indexRecency;\r\n        }\r\n        else if (indexPreselect !== -1) {\r\n            return indexPreselect;\r\n        }\r\n        else {\r\n            return 0;\r\n        }\r\n    };\r\n    LRUMemory.prototype.toJSON = function () {\r\n        var data = [];\r\n        this._cache.forEach(function (value, key) {\r\n            data.push([key, value]);\r\n        });\r\n        return data;\r\n    };\r\n    LRUMemory.prototype.fromJSON = function (data) {\r\n        this._cache.clear();\r\n        var seq = 0;\r\n        for (var _i = 0, data_1 = data; _i < data_1.length; _i++) {\r\n            var _a = data_1[_i], key = _a[0], value = _a[1];\r\n            value.touch = seq;\r\n            value.type = typeof value.type === 'number' ? value.type : completionKindFromString(value.type);\r\n            this._cache.set(key, value);\r\n        }\r\n        this._seq = this._cache.size;\r\n    };\r\n    return LRUMemory;\r\n}(Memory));\r\nexport { LRUMemory };\r\nvar PrefixMemory = /** @class */ (function (_super) {\r\n    __extends(PrefixMemory, _super);\r\n    function PrefixMemory() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this._trie = TernarySearchTree.forStrings();\r\n        _this._seq = 0;\r\n        return _this;\r\n    }\r\n    PrefixMemory.prototype.memorize = function (model, pos, item) {\r\n        var word = model.getWordUntilPosition(pos).word;\r\n        var key = model.getLanguageIdentifier().language + \"/\" + word;\r\n        this._trie.set(key, {\r\n            type: item.completion.kind,\r\n            insertText: item.completion.insertText,\r\n            touch: this._seq++\r\n        });\r\n    };\r\n    PrefixMemory.prototype.select = function (model, pos, items) {\r\n        var word = model.getWordUntilPosition(pos).word;\r\n        if (!word) {\r\n            return _super.prototype.select.call(this, model, pos, items);\r\n        }\r\n        var key = model.getLanguageIdentifier().language + \"/\" + word;\r\n        var item = this._trie.get(key);\r\n        if (!item) {\r\n            item = this._trie.findSubstr(key);\r\n        }\r\n        if (item) {\r\n            for (var i = 0; i < items.length; i++) {\r\n                var _a = items[i].completion, kind = _a.kind, insertText = _a.insertText;\r\n                if (kind === item.type && insertText === item.insertText) {\r\n                    return i;\r\n                }\r\n            }\r\n        }\r\n        return _super.prototype.select.call(this, model, pos, items);\r\n    };\r\n    PrefixMemory.prototype.toJSON = function () {\r\n        var entries = [];\r\n        this._trie.forEach(function (value, key) { return entries.push([key, value]); });\r\n        // sort by last recently used (touch), then\r\n        // take the top 200 item and normalize their\r\n        // touch\r\n        entries\r\n            .sort(function (a, b) { return -(a[1].touch - b[1].touch); })\r\n            .forEach(function (value, i) { return value[1].touch = i; });\r\n        return entries.slice(0, 200);\r\n    };\r\n    PrefixMemory.prototype.fromJSON = function (data) {\r\n        this._trie.clear();\r\n        if (data.length > 0) {\r\n            this._seq = data[0][1].touch + 1;\r\n            for (var _i = 0, data_2 = data; _i < data_2.length; _i++) {\r\n                var _a = data_2[_i], key = _a[0], value = _a[1];\r\n                value.type = typeof value.type === 'number' ? value.type : completionKindFromString(value.type);\r\n                this._trie.set(key, value);\r\n            }\r\n        }\r\n    };\r\n    return PrefixMemory;\r\n}(Memory));\r\nexport { PrefixMemory };\r\nvar SuggestMemoryService = /** @class */ (function (_super) {\r\n    __extends(SuggestMemoryService, _super);\r\n    function SuggestMemoryService(_storageService, _configService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._storageService = _storageService;\r\n        _this._configService = _configService;\r\n        _this._storagePrefix = 'suggest/memories';\r\n        var update = function () {\r\n            var mode = _this._configService.getValue('editor.suggestSelection');\r\n            var share = _this._configService.getValue('editor.suggest.shareSuggestSelections');\r\n            _this._update(mode, share, false);\r\n        };\r\n        _this._persistSoon = _this._register(new RunOnceScheduler(function () { return _this._saveState(); }, 500));\r\n        _this._register(_storageService.onWillSaveState(function (e) {\r\n            if (e.reason === WillSaveStateReason.SHUTDOWN) {\r\n                _this._saveState();\r\n            }\r\n        }));\r\n        _this._register(_this._configService.onDidChangeConfiguration(function (e) {\r\n            if (e.affectsConfiguration('editor.suggestSelection') || e.affectsConfiguration('editor.suggest.shareSuggestSelections')) {\r\n                update();\r\n            }\r\n        }));\r\n        _this._register(_this._storageService.onDidChangeStorage(function (e) {\r\n            if (e.scope === 0 /* GLOBAL */ && e.key.indexOf(_this._storagePrefix) === 0) {\r\n                if (!document.hasFocus()) {\r\n                    // windows that aren't focused have to drop their current\r\n                    // storage value and accept what's stored now\r\n                    _this._update(_this._mode, _this._shareMem, true);\r\n                }\r\n            }\r\n        }));\r\n        update();\r\n        return _this;\r\n    }\r\n    SuggestMemoryService.prototype._update = function (mode, shareMem, force) {\r\n        if (!force && this._mode === mode && this._shareMem === shareMem) {\r\n            return;\r\n        }\r\n        this._shareMem = shareMem;\r\n        this._mode = mode;\r\n        this._strategy = mode === 'recentlyUsedByPrefix' ? new PrefixMemory() : mode === 'recentlyUsed' ? new LRUMemory() : new NoMemory();\r\n        try {\r\n            var scope = shareMem ? 0 /* GLOBAL */ : 1 /* WORKSPACE */;\r\n            var raw = this._storageService.get(this._storagePrefix + \"/\" + this._mode, scope);\r\n            if (raw) {\r\n                this._strategy.fromJSON(JSON.parse(raw));\r\n            }\r\n        }\r\n        catch (e) {\r\n            // things can go wrong with JSON...\r\n        }\r\n    };\r\n    SuggestMemoryService.prototype.memorize = function (model, pos, item) {\r\n        this._strategy.memorize(model, pos, item);\r\n        this._persistSoon.schedule();\r\n    };\r\n    SuggestMemoryService.prototype.select = function (model, pos, items) {\r\n        return this._strategy.select(model, pos, items);\r\n    };\r\n    SuggestMemoryService.prototype._saveState = function () {\r\n        var raw = JSON.stringify(this._strategy);\r\n        var scope = this._shareMem ? 0 /* GLOBAL */ : 1 /* WORKSPACE */;\r\n        this._storageService.store(this._storagePrefix + \"/\" + this._mode, raw, scope);\r\n    };\r\n    SuggestMemoryService = __decorate([\r\n        __param(0, IStorageService),\r\n        __param(1, IConfigurationService)\r\n    ], SuggestMemoryService);\r\n    return SuggestMemoryService;\r\n}(Disposable));\r\nexport { SuggestMemoryService };\r\nexport var ISuggestMemoryService = createDecorator('ISuggestMemories');\r\nregisterSingleton(ISuggestMemoryService, SuggestMemoryService, true);\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { dispose } from '../../../base/common/lifecycle.js';\r\nimport { IContextKeyService, RawContextKey } from '../../../platform/contextkey/common/contextkey.js';\r\nvar SuggestAlternatives = /** @class */ (function () {\r\n    function SuggestAlternatives(_editor, contextKeyService) {\r\n        this._editor = _editor;\r\n        this._index = 0;\r\n        this._ckOtherSuggestions = SuggestAlternatives.OtherSuggestions.bindTo(contextKeyService);\r\n    }\r\n    SuggestAlternatives.prototype.dispose = function () {\r\n        this.reset();\r\n    };\r\n    SuggestAlternatives.prototype.reset = function () {\r\n        this._ckOtherSuggestions.reset();\r\n        dispose(this._listener);\r\n        this._model = undefined;\r\n        this._acceptNext = undefined;\r\n        this._ignore = false;\r\n    };\r\n    SuggestAlternatives.prototype.set = function (_a, acceptNext) {\r\n        var _this = this;\r\n        var model = _a.model, index = _a.index;\r\n        // no suggestions -> nothing to do\r\n        if (model.items.length === 0) {\r\n            this.reset();\r\n            return;\r\n        }\r\n        // no alternative suggestions -> nothing to do\r\n        var nextIndex = SuggestAlternatives._moveIndex(true, model, index);\r\n        if (nextIndex === index) {\r\n            this.reset();\r\n            return;\r\n        }\r\n        this._acceptNext = acceptNext;\r\n        this._model = model;\r\n        this._index = index;\r\n        this._listener = this._editor.onDidChangeCursorPosition(function () {\r\n            if (!_this._ignore) {\r\n                _this.reset();\r\n            }\r\n        });\r\n        this._ckOtherSuggestions.set(true);\r\n    };\r\n    SuggestAlternatives._moveIndex = function (fwd, model, index) {\r\n        var newIndex = index;\r\n        while (true) {\r\n            newIndex = (newIndex + model.items.length + (fwd ? +1 : -1)) % model.items.length;\r\n            if (newIndex === index) {\r\n                break;\r\n            }\r\n            if (!model.items[newIndex].completion.additionalTextEdits) {\r\n                break;\r\n            }\r\n        }\r\n        return newIndex;\r\n    };\r\n    SuggestAlternatives.prototype.next = function () {\r\n        this._move(true);\r\n    };\r\n    SuggestAlternatives.prototype.prev = function () {\r\n        this._move(false);\r\n    };\r\n    SuggestAlternatives.prototype._move = function (fwd) {\r\n        if (!this._model) {\r\n            // nothing to reason about\r\n            return;\r\n        }\r\n        try {\r\n            this._ignore = true;\r\n            this._index = SuggestAlternatives._moveIndex(fwd, this._model, this._index);\r\n            this._acceptNext({ index: this._index, item: this._model.items[this._index], model: this._model });\r\n        }\r\n        finally {\r\n            this._ignore = false;\r\n        }\r\n    };\r\n    SuggestAlternatives.OtherSuggestions = new RawContextKey('hasOtherSuggestions', false);\r\n    SuggestAlternatives = __decorate([\r\n        __param(1, IContextKeyService)\r\n    ], SuggestAlternatives);\r\n    return SuggestAlternatives;\r\n}());\r\nexport { SuggestAlternatives };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { fuzzyScore, fuzzyScoreGracefulAggressive, FuzzyScore, anyScore } from '../../../base/common/filters.js';\r\nimport { compareIgnoreCase } from '../../../base/common/strings.js';\r\nvar LineContext = /** @class */ (function () {\r\n    function LineContext(leadingLineContent, characterCountDelta) {\r\n        this.leadingLineContent = leadingLineContent;\r\n        this.characterCountDelta = characterCountDelta;\r\n    }\r\n    return LineContext;\r\n}());\r\nexport { LineContext };\r\nvar CompletionModel = /** @class */ (function () {\r\n    function CompletionModel(items, column, lineContext, wordDistance, options, snippetSuggestions) {\r\n        this._snippetCompareFn = CompletionModel._compareCompletionItems;\r\n        this._items = items;\r\n        this._column = column;\r\n        this._wordDistance = wordDistance;\r\n        this._options = options;\r\n        this._refilterKind = 1 /* All */;\r\n        this._lineContext = lineContext;\r\n        if (snippetSuggestions === 'top') {\r\n            this._snippetCompareFn = CompletionModel._compareCompletionItemsSnippetsUp;\r\n        }\r\n        else if (snippetSuggestions === 'bottom') {\r\n            this._snippetCompareFn = CompletionModel._compareCompletionItemsSnippetsDown;\r\n        }\r\n    }\r\n    Object.defineProperty(CompletionModel.prototype, \"lineContext\", {\r\n        get: function () {\r\n            return this._lineContext;\r\n        },\r\n        set: function (value) {\r\n            if (this._lineContext.leadingLineContent !== value.leadingLineContent\r\n                || this._lineContext.characterCountDelta !== value.characterCountDelta) {\r\n                this._refilterKind = this._lineContext.characterCountDelta < value.characterCountDelta && this._filteredItems ? 2 /* Incr */ : 1 /* All */;\r\n                this._lineContext = value;\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CompletionModel.prototype, \"items\", {\r\n        get: function () {\r\n            this._ensureCachedState();\r\n            return this._filteredItems;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(CompletionModel.prototype, \"incomplete\", {\r\n        get: function () {\r\n            this._ensureCachedState();\r\n            return this._isIncomplete;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    CompletionModel.prototype.adopt = function (except) {\r\n        var res = new Array();\r\n        for (var i = 0; i < this._items.length;) {\r\n            if (!except.has(this._items[i].provider)) {\r\n                res.push(this._items[i]);\r\n                // unordered removed\r\n                this._items[i] = this._items[this._items.length - 1];\r\n                this._items.pop();\r\n            }\r\n            else {\r\n                // continue with next item\r\n                i++;\r\n            }\r\n        }\r\n        this._refilterKind = 1 /* All */;\r\n        return res;\r\n    };\r\n    Object.defineProperty(CompletionModel.prototype, \"stats\", {\r\n        get: function () {\r\n            this._ensureCachedState();\r\n            return this._stats;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    CompletionModel.prototype._ensureCachedState = function () {\r\n        if (this._refilterKind !== 0 /* Nothing */) {\r\n            this._createCachedState();\r\n        }\r\n    };\r\n    CompletionModel.prototype._createCachedState = function () {\r\n        this._isIncomplete = new Set();\r\n        this._stats = { suggestionCount: 0, snippetCount: 0, textCount: 0 };\r\n        var _a = this._lineContext, leadingLineContent = _a.leadingLineContent, characterCountDelta = _a.characterCountDelta;\r\n        var word = '';\r\n        var wordLow = '';\r\n        // incrementally filter less\r\n        var source = this._refilterKind === 1 /* All */ ? this._items : this._filteredItems;\r\n        var target = [];\r\n        // picks a score function based on the number of\r\n        // items that we have to score/filter and based on the\r\n        // user-configuration\r\n        var scoreFn = (!this._options.filterGraceful || source.length > 2000) ? fuzzyScore : fuzzyScoreGracefulAggressive;\r\n        for (var i = 0; i < source.length; i++) {\r\n            var item = source[i];\r\n            // collect those supports that signaled having\r\n            // an incomplete result\r\n            if (item.container.incomplete) {\r\n                this._isIncomplete.add(item.provider);\r\n            }\r\n            // 'word' is that remainder of the current line that we\r\n            // filter and score against. In theory each suggestion uses a\r\n            // different word, but in practice not - that's why we cache\r\n            var overwriteBefore = item.position.column - item.editStart.column;\r\n            var wordLen = overwriteBefore + characterCountDelta - (item.position.column - this._column);\r\n            if (word.length !== wordLen) {\r\n                word = wordLen === 0 ? '' : leadingLineContent.slice(-wordLen);\r\n                wordLow = word.toLowerCase();\r\n            }\r\n            // remember the word against which this item was\r\n            // scored\r\n            item.word = word;\r\n            if (wordLen === 0) {\r\n                // when there is nothing to score against, don't\r\n                // event try to do. Use a const rank and rely on\r\n                // the fallback-sort using the initial sort order.\r\n                // use a score of `-100` because that is out of the\r\n                // bound of values `fuzzyScore` will return\r\n                item.score = FuzzyScore.Default;\r\n            }\r\n            else {\r\n                // skip word characters that are whitespace until\r\n                // we have hit the replace range (overwriteBefore)\r\n                var wordPos = 0;\r\n                while (wordPos < overwriteBefore) {\r\n                    var ch = word.charCodeAt(wordPos);\r\n                    if (ch === 32 /* Space */ || ch === 9 /* Tab */) {\r\n                        wordPos += 1;\r\n                    }\r\n                    else {\r\n                        break;\r\n                    }\r\n                }\r\n                if (wordPos >= wordLen) {\r\n                    // the wordPos at which scoring starts is the whole word\r\n                    // and therefore the same rules as not having a word apply\r\n                    item.score = FuzzyScore.Default;\r\n                }\r\n                else if (typeof item.completion.filterText === 'string') {\r\n                    // when there is a `filterText` it must match the `word`.\r\n                    // if it matches we check with the label to compute highlights\r\n                    // and if that doesn't yield a result we have no highlights,\r\n                    // despite having the match\r\n                    var match = scoreFn(word, wordLow, wordPos, item.completion.filterText, item.filterTextLow, 0, false);\r\n                    if (!match) {\r\n                        continue; // NO match\r\n                    }\r\n                    if (compareIgnoreCase(item.completion.filterText, item.completion.label) === 0) {\r\n                        // filterText and label are actually the same -> use good highlights\r\n                        item.score = match;\r\n                    }\r\n                    else {\r\n                        // re-run the scorer on the label in the hope of a result BUT use the rank\r\n                        // of the filterText-match\r\n                        item.score = anyScore(word, wordLow, wordPos, item.completion.label, item.labelLow, 0);\r\n                        item.score[0] = match[0]; // use score from filterText\r\n                    }\r\n                }\r\n                else {\r\n                    // by default match `word` against the `label`\r\n                    var match = scoreFn(word, wordLow, wordPos, item.completion.label, item.labelLow, 0, false);\r\n                    if (!match) {\r\n                        continue; // NO match\r\n                    }\r\n                    item.score = match;\r\n                }\r\n            }\r\n            item.idx = i;\r\n            item.distance = this._wordDistance.distance(item.position, item.completion);\r\n            target.push(item);\r\n            // update stats\r\n            this._stats.suggestionCount++;\r\n            switch (item.completion.kind) {\r\n                case 25 /* Snippet */:\r\n                    this._stats.snippetCount++;\r\n                    break;\r\n                case 18 /* Text */:\r\n                    this._stats.textCount++;\r\n                    break;\r\n            }\r\n        }\r\n        this._filteredItems = target.sort(this._snippetCompareFn);\r\n        this._refilterKind = 0 /* Nothing */;\r\n    };\r\n    CompletionModel._compareCompletionItems = function (a, b) {\r\n        if (a.score[0] > b.score[0]) {\r\n            return -1;\r\n        }\r\n        else if (a.score[0] < b.score[0]) {\r\n            return 1;\r\n        }\r\n        else if (a.distance < b.distance) {\r\n            return -1;\r\n        }\r\n        else if (a.distance > b.distance) {\r\n            return 1;\r\n        }\r\n        else if (a.idx < b.idx) {\r\n            return -1;\r\n        }\r\n        else if (a.idx > b.idx) {\r\n            return 1;\r\n        }\r\n        else {\r\n            return 0;\r\n        }\r\n    };\r\n    CompletionModel._compareCompletionItemsSnippetsDown = function (a, b) {\r\n        if (a.completion.kind !== b.completion.kind) {\r\n            if (a.completion.kind === 25 /* Snippet */) {\r\n                return 1;\r\n            }\r\n            else if (b.completion.kind === 25 /* Snippet */) {\r\n                return -1;\r\n            }\r\n        }\r\n        return CompletionModel._compareCompletionItems(a, b);\r\n    };\r\n    CompletionModel._compareCompletionItemsSnippetsUp = function (a, b) {\r\n        if (a.completion.kind !== b.completion.kind) {\r\n            if (a.completion.kind === 25 /* Snippet */) {\r\n                return -1;\r\n            }\r\n            else if (b.completion.kind === 25 /* Snippet */) {\r\n                return 1;\r\n            }\r\n        }\r\n        return CompletionModel._compareCompletionItems(a, b);\r\n    };\r\n    return CompletionModel;\r\n}());\r\nexport { CompletionModel };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport { binarySearch, isFalsyOrEmpty } from '../../../base/common/arrays.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { BracketSelectionRangeProvider } from '../smartSelect/bracketSelections.js';\r\nvar WordDistance = /** @class */ (function () {\r\n    function WordDistance() {\r\n    }\r\n    WordDistance.create = function (service, editor) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var model, position, ranges, wordRanges;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!editor.getOption(85 /* suggest */).localityBonus) {\r\n                            return [2 /*return*/, WordDistance.None];\r\n                        }\r\n                        if (!editor.hasModel()) {\r\n                            return [2 /*return*/, WordDistance.None];\r\n                        }\r\n                        model = editor.getModel();\r\n                        position = editor.getPosition();\r\n                        if (!service.canComputeWordRanges(model.uri)) {\r\n                            return [2 /*return*/, WordDistance.None];\r\n                        }\r\n                        return [4 /*yield*/, new BracketSelectionRangeProvider().provideSelectionRanges(model, [position])];\r\n                    case 1:\r\n                        ranges = _a.sent();\r\n                        if (!ranges || ranges.length === 0 || ranges[0].length === 0) {\r\n                            return [2 /*return*/, WordDistance.None];\r\n                        }\r\n                        return [4 /*yield*/, service.computeWordRanges(model.uri, ranges[0][0].range)];\r\n                    case 2:\r\n                        wordRanges = _a.sent();\r\n                        return [2 /*return*/, new /** @class */ (function (_super) {\r\n                                __extends(class_1, _super);\r\n                                function class_1() {\r\n                                    return _super !== null && _super.apply(this, arguments) || this;\r\n                                }\r\n                                class_1.prototype.distance = function (anchor, suggestion) {\r\n                                    if (!wordRanges || !position.equals(editor.getPosition())) {\r\n                                        return 0;\r\n                                    }\r\n                                    if (suggestion.kind === 17 /* Keyword */) {\r\n                                        return 2 << 20;\r\n                                    }\r\n                                    var word = suggestion.label;\r\n                                    var wordLines = wordRanges[word];\r\n                                    if (isFalsyOrEmpty(wordLines)) {\r\n                                        return 2 << 20;\r\n                                    }\r\n                                    var idx = binarySearch(wordLines, Range.fromPositions(anchor), Range.compareRangesUsingStarts);\r\n                                    var bestWordRange = idx >= 0 ? wordLines[idx] : wordLines[Math.max(0, ~idx - 1)];\r\n                                    var blockDistance = ranges.length;\r\n                                    for (var _i = 0, _a = ranges[0]; _i < _a.length; _i++) {\r\n                                        var range = _a[_i];\r\n                                        if (!Range.containsRange(range.range, bestWordRange)) {\r\n                                            break;\r\n                                        }\r\n                                        blockDistance -= 1;\r\n                                    }\r\n                                    return blockDistance;\r\n                                };\r\n                                return class_1;\r\n                            }(WordDistance))];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    WordDistance.None = new /** @class */ (function (_super) {\r\n        __extends(class_2, _super);\r\n        function class_2() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        class_2.prototype.distance = function () { return 0; };\r\n        return class_2;\r\n    }(WordDistance));\r\n    return WordDistance;\r\n}());\r\nexport { WordDistance };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { isNonEmptyArray } from '../../../base/common/arrays.js';\r\nimport { TimeoutTimer } from '../../../base/common/async.js';\r\nimport { onUnexpectedError } from '../../../base/common/errors.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { dispose, DisposableStore, isDisposable } from '../../../base/common/lifecycle.js';\r\nimport { Selection } from '../../common/core/selection.js';\r\nimport { CompletionProviderRegistry } from '../../common/modes.js';\r\nimport { CompletionModel } from './completionModel.js';\r\nimport { getSuggestionComparator, provideSuggestionItems, getSnippetSuggestSupport, CompletionOptions } from './suggest.js';\r\nimport { SnippetController2 } from '../snippet/snippetController2.js';\r\nimport { CancellationTokenSource } from '../../../base/common/cancellation.js';\r\nimport { WordDistance } from './wordDistance.js';\r\nvar LineContext = /** @class */ (function () {\r\n    function LineContext(model, position, auto, shy) {\r\n        this.leadingLineContent = model.getLineContent(position.lineNumber).substr(0, position.column - 1);\r\n        this.leadingWord = model.getWordUntilPosition(position);\r\n        this.lineNumber = position.lineNumber;\r\n        this.column = position.column;\r\n        this.auto = auto;\r\n        this.shy = shy;\r\n    }\r\n    LineContext.shouldAutoTrigger = function (editor) {\r\n        if (!editor.hasModel()) {\r\n            return false;\r\n        }\r\n        var model = editor.getModel();\r\n        var pos = editor.getPosition();\r\n        model.tokenizeIfCheap(pos.lineNumber);\r\n        var word = model.getWordAtPosition(pos);\r\n        if (!word) {\r\n            return false;\r\n        }\r\n        if (word.endColumn !== pos.column) {\r\n            return false;\r\n        }\r\n        if (!isNaN(Number(word.word))) {\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    return LineContext;\r\n}());\r\nexport { LineContext };\r\nvar SuggestModel = /** @class */ (function () {\r\n    function SuggestModel(_editor, _editorWorker) {\r\n        var _this = this;\r\n        this._editor = _editor;\r\n        this._editorWorker = _editorWorker;\r\n        this._toDispose = new DisposableStore();\r\n        this._quickSuggestDelay = 10;\r\n        this._triggerQuickSuggest = new TimeoutTimer();\r\n        this._state = 0 /* Idle */;\r\n        this._completionDisposables = new DisposableStore();\r\n        this._onDidCancel = new Emitter();\r\n        this._onDidTrigger = new Emitter();\r\n        this._onDidSuggest = new Emitter();\r\n        this.onDidCancel = this._onDidCancel.event;\r\n        this.onDidTrigger = this._onDidTrigger.event;\r\n        this.onDidSuggest = this._onDidSuggest.event;\r\n        this._currentSelection = this._editor.getSelection() || new Selection(1, 1, 1, 1);\r\n        // wire up various listeners\r\n        this._toDispose.add(this._editor.onDidChangeModel(function () {\r\n            _this._updateTriggerCharacters();\r\n            _this.cancel();\r\n        }));\r\n        this._toDispose.add(this._editor.onDidChangeModelLanguage(function () {\r\n            _this._updateTriggerCharacters();\r\n            _this.cancel();\r\n        }));\r\n        this._toDispose.add(this._editor.onDidChangeConfiguration(function () {\r\n            _this._updateTriggerCharacters();\r\n            _this._updateQuickSuggest();\r\n        }));\r\n        this._toDispose.add(CompletionProviderRegistry.onDidChange(function () {\r\n            _this._updateTriggerCharacters();\r\n            _this._updateActiveSuggestSession();\r\n        }));\r\n        this._toDispose.add(this._editor.onDidChangeCursorSelection(function (e) {\r\n            _this._onCursorChange(e);\r\n        }));\r\n        var editorIsComposing = false;\r\n        this._toDispose.add(this._editor.onCompositionStart(function () {\r\n            editorIsComposing = true;\r\n        }));\r\n        this._toDispose.add(this._editor.onCompositionEnd(function () {\r\n            // refilter when composition ends\r\n            editorIsComposing = false;\r\n            _this._refilterCompletionItems();\r\n        }));\r\n        this._toDispose.add(this._editor.onDidChangeModelContent(function () {\r\n            // only filter completions when the editor isn't\r\n            // composing a character, e.g. ¨ + u makes ü but just\r\n            // ¨ cannot be used for filtering\r\n            if (!editorIsComposing) {\r\n                _this._refilterCompletionItems();\r\n            }\r\n        }));\r\n        this._updateTriggerCharacters();\r\n        this._updateQuickSuggest();\r\n    }\r\n    SuggestModel.prototype.dispose = function () {\r\n        dispose(this._triggerCharacterListener);\r\n        dispose([this._onDidCancel, this._onDidSuggest, this._onDidTrigger, this._triggerQuickSuggest]);\r\n        this._toDispose.dispose();\r\n        this._completionDisposables.dispose();\r\n        this.cancel();\r\n    };\r\n    // --- handle configuration & precondition changes\r\n    SuggestModel.prototype._updateQuickSuggest = function () {\r\n        this._quickSuggestDelay = this._editor.getOption(64 /* quickSuggestionsDelay */);\r\n        if (isNaN(this._quickSuggestDelay) || (!this._quickSuggestDelay && this._quickSuggestDelay !== 0) || this._quickSuggestDelay < 0) {\r\n            this._quickSuggestDelay = 10;\r\n        }\r\n    };\r\n    SuggestModel.prototype._updateTriggerCharacters = function () {\r\n        var _this = this;\r\n        dispose(this._triggerCharacterListener);\r\n        if (this._editor.getOption(65 /* readOnly */)\r\n            || !this._editor.hasModel()\r\n            || !this._editor.getOption(88 /* suggestOnTriggerCharacters */)) {\r\n            return;\r\n        }\r\n        var supportsByTriggerCharacter = Object.create(null);\r\n        for (var _i = 0, _a = CompletionProviderRegistry.all(this._editor.getModel()); _i < _a.length; _i++) {\r\n            var support = _a[_i];\r\n            for (var _b = 0, _c = support.triggerCharacters || []; _b < _c.length; _b++) {\r\n                var ch = _c[_b];\r\n                var set = supportsByTriggerCharacter[ch];\r\n                if (!set) {\r\n                    set = supportsByTriggerCharacter[ch] = new Set();\r\n                    set.add(getSnippetSuggestSupport());\r\n                }\r\n                set.add(support);\r\n            }\r\n        }\r\n        this._triggerCharacterListener = this._editor.onDidType(function (text) {\r\n            var lastChar = text.charAt(text.length - 1);\r\n            var supports = supportsByTriggerCharacter[lastChar];\r\n            if (supports) {\r\n                // keep existing items that where not computed by the\r\n                // supports/providers that want to trigger now\r\n                var items = _this._completionModel ? _this._completionModel.adopt(supports) : undefined;\r\n                _this.trigger({ auto: true, shy: false, triggerCharacter: lastChar }, Boolean(_this._completionModel), supports, items);\r\n            }\r\n        });\r\n    };\r\n    Object.defineProperty(SuggestModel.prototype, \"state\", {\r\n        // --- trigger/retrigger/cancel suggest\r\n        get: function () {\r\n            return this._state;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SuggestModel.prototype.cancel = function (retrigger) {\r\n        if (retrigger === void 0) { retrigger = false; }\r\n        if (this._state !== 0 /* Idle */) {\r\n            this._triggerQuickSuggest.cancel();\r\n            if (this._requestToken) {\r\n                this._requestToken.cancel();\r\n                this._requestToken = undefined;\r\n            }\r\n            this._state = 0 /* Idle */;\r\n            this._completionModel = undefined;\r\n            this._context = undefined;\r\n            this._onDidCancel.fire({ retrigger: retrigger });\r\n        }\r\n    };\r\n    SuggestModel.prototype.clear = function () {\r\n        this._completionDisposables.clear();\r\n    };\r\n    SuggestModel.prototype._updateActiveSuggestSession = function () {\r\n        if (this._state !== 0 /* Idle */) {\r\n            if (!this._editor.hasModel() || !CompletionProviderRegistry.has(this._editor.getModel())) {\r\n                this.cancel();\r\n            }\r\n            else {\r\n                this.trigger({ auto: this._state === 2 /* Auto */, shy: false }, true);\r\n            }\r\n        }\r\n    };\r\n    SuggestModel.prototype._onCursorChange = function (e) {\r\n        var _this = this;\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        var model = this._editor.getModel();\r\n        var prevSelection = this._currentSelection;\r\n        this._currentSelection = this._editor.getSelection();\r\n        if (!e.selection.isEmpty()\r\n            || e.reason !== 0 /* NotSet */\r\n            || (e.source !== 'keyboard' && e.source !== 'deleteLeft')) {\r\n            // Early exit if nothing needs to be done!\r\n            // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\r\n            if (this._state !== 0 /* Idle */) {\r\n                this.cancel();\r\n            }\r\n            return;\r\n        }\r\n        if (!CompletionProviderRegistry.has(model)) {\r\n            return;\r\n        }\r\n        if (this._state === 0 /* Idle */) {\r\n            if (this._editor.getOption(63 /* quickSuggestions */) === false) {\r\n                // not enabled\r\n                return;\r\n            }\r\n            if (!prevSelection.containsRange(this._currentSelection) && !prevSelection.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition())) {\r\n                // cursor didn't move RIGHT\r\n                return;\r\n            }\r\n            if (this._editor.getOption(85 /* suggest */).snippetsPreventQuickSuggestions && SnippetController2.get(this._editor).isInSnippet()) {\r\n                // no quick suggestion when in snippet mode\r\n                return;\r\n            }\r\n            this.cancel();\r\n            this._triggerQuickSuggest.cancelAndSet(function () {\r\n                if (_this._state !== 0 /* Idle */) {\r\n                    return;\r\n                }\r\n                if (!LineContext.shouldAutoTrigger(_this._editor)) {\r\n                    return;\r\n                }\r\n                if (!_this._editor.hasModel()) {\r\n                    return;\r\n                }\r\n                var model = _this._editor.getModel();\r\n                var pos = _this._editor.getPosition();\r\n                // validate enabled now\r\n                var quickSuggestions = _this._editor.getOption(63 /* quickSuggestions */);\r\n                if (quickSuggestions === false) {\r\n                    return;\r\n                }\r\n                else if (quickSuggestions === true) {\r\n                    // all good\r\n                }\r\n                else {\r\n                    // Check the type of the token that triggered this\r\n                    model.tokenizeIfCheap(pos.lineNumber);\r\n                    var lineTokens = model.getLineTokens(pos.lineNumber);\r\n                    var tokenType = lineTokens.getStandardTokenType(lineTokens.findTokenIndexAtOffset(Math.max(pos.column - 1 - 1, 0)));\r\n                    var inValidScope = quickSuggestions.other && tokenType === 0 /* Other */\r\n                        || quickSuggestions.comments && tokenType === 1 /* Comment */\r\n                        || quickSuggestions.strings && tokenType === 2 /* String */;\r\n                    if (!inValidScope) {\r\n                        return;\r\n                    }\r\n                }\r\n                // we made it till here -> trigger now\r\n                _this.trigger({ auto: true, shy: false });\r\n            }, this._quickSuggestDelay);\r\n        }\r\n    };\r\n    SuggestModel.prototype._refilterCompletionItems = function () {\r\n        var _this = this;\r\n        // Re-filter suggestions. This MUST run async because filtering/scoring\r\n        // uses the model content AND the cursor position. The latter is NOT\r\n        // updated when the document has changed (the event which drives this method)\r\n        // and therefore a little pause (next mirco task) is needed. See:\r\n        // https://stackoverflow.com/questions/25915634/difference-between-microtask-and-macrotask-within-an-event-loop-context#25933985\r\n        Promise.resolve().then(function () {\r\n            if (_this._state === 0 /* Idle */) {\r\n                return;\r\n            }\r\n            if (!_this._editor.hasModel()) {\r\n                return;\r\n            }\r\n            var model = _this._editor.getModel();\r\n            var position = _this._editor.getPosition();\r\n            var ctx = new LineContext(model, position, _this._state === 2 /* Auto */, false);\r\n            _this._onNewContext(ctx);\r\n        });\r\n    };\r\n    SuggestModel.prototype.trigger = function (context, retrigger, onlyFrom, existingItems) {\r\n        var _this = this;\r\n        if (retrigger === void 0) { retrigger = false; }\r\n        if (!this._editor.hasModel()) {\r\n            return;\r\n        }\r\n        var model = this._editor.getModel();\r\n        var auto = context.auto;\r\n        var ctx = new LineContext(model, this._editor.getPosition(), auto, context.shy);\r\n        // Cancel previous requests, change state & update UI\r\n        this.cancel(retrigger);\r\n        this._state = auto ? 2 /* Auto */ : 1 /* Manual */;\r\n        this._onDidTrigger.fire({ auto: auto, shy: context.shy, position: this._editor.getPosition() });\r\n        // Capture context when request was sent\r\n        this._context = ctx;\r\n        // Build context for request\r\n        var suggestCtx;\r\n        if (context.triggerCharacter) {\r\n            suggestCtx = {\r\n                triggerKind: 1 /* TriggerCharacter */,\r\n                triggerCharacter: context.triggerCharacter\r\n            };\r\n        }\r\n        else if (onlyFrom && onlyFrom.size > 0) {\r\n            suggestCtx = { triggerKind: 2 /* TriggerForIncompleteCompletions */ };\r\n        }\r\n        else {\r\n            suggestCtx = { triggerKind: 0 /* Invoke */ };\r\n        }\r\n        this._requestToken = new CancellationTokenSource();\r\n        // kind filter and snippet sort rules\r\n        var snippetSuggestions = this._editor.getOption(82 /* snippetSuggestions */);\r\n        var snippetSortOrder = 1 /* Inline */;\r\n        switch (snippetSuggestions) {\r\n            case 'top':\r\n                snippetSortOrder = 0 /* Top */;\r\n                break;\r\n            // \t↓ that's the default anyways...\r\n            // case 'inline':\r\n            // \tsnippetSortOrder = SnippetSortOrder.Inline;\r\n            // \tbreak;\r\n            case 'bottom':\r\n                snippetSortOrder = 2 /* Bottom */;\r\n                break;\r\n        }\r\n        var itemKindFilter = SuggestModel._createItemKindFilter(this._editor);\r\n        var wordDistance = WordDistance.create(this._editorWorker, this._editor);\r\n        var items = provideSuggestionItems(model, this._editor.getPosition(), new CompletionOptions(snippetSortOrder, itemKindFilter, onlyFrom), suggestCtx, this._requestToken.token);\r\n        Promise.all([items, wordDistance]).then(function (_a) {\r\n            var items = _a[0], wordDistance = _a[1];\r\n            dispose(_this._requestToken);\r\n            if (_this._state === 0 /* Idle */) {\r\n                return;\r\n            }\r\n            if (!_this._editor.hasModel()) {\r\n                return;\r\n            }\r\n            var model = _this._editor.getModel();\r\n            if (isNonEmptyArray(existingItems)) {\r\n                var cmpFn = getSuggestionComparator(snippetSortOrder);\r\n                items = items.concat(existingItems).sort(cmpFn);\r\n            }\r\n            var ctx = new LineContext(model, _this._editor.getPosition(), auto, context.shy);\r\n            _this._completionModel = new CompletionModel(items, _this._context.column, {\r\n                leadingLineContent: ctx.leadingLineContent,\r\n                characterCountDelta: ctx.column - _this._context.column\r\n            }, wordDistance, _this._editor.getOption(85 /* suggest */), _this._editor.getOption(82 /* snippetSuggestions */));\r\n            // store containers so that they can be disposed later\r\n            for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\r\n                var item = items_1[_i];\r\n                if (isDisposable(item.container)) {\r\n                    _this._completionDisposables.add(item.container);\r\n                }\r\n            }\r\n            _this._onNewContext(ctx);\r\n        }).catch(onUnexpectedError);\r\n    };\r\n    SuggestModel._createItemKindFilter = function (editor) {\r\n        // kind filter and snippet sort rules\r\n        var result = new Set();\r\n        // snippet setting\r\n        var snippetSuggestions = editor.getOption(82 /* snippetSuggestions */);\r\n        if (snippetSuggestions === 'none') {\r\n            result.add(25 /* Snippet */);\r\n        }\r\n        // type setting\r\n        var suggestOptions = editor.getOption(85 /* suggest */);\r\n        if (!suggestOptions.showMethods) {\r\n            result.add(0 /* Method */);\r\n        }\r\n        if (!suggestOptions.showFunctions) {\r\n            result.add(1 /* Function */);\r\n        }\r\n        if (!suggestOptions.showConstructors) {\r\n            result.add(2 /* Constructor */);\r\n        }\r\n        if (!suggestOptions.showFields) {\r\n            result.add(3 /* Field */);\r\n        }\r\n        if (!suggestOptions.showVariables) {\r\n            result.add(4 /* Variable */);\r\n        }\r\n        if (!suggestOptions.showClasses) {\r\n            result.add(5 /* Class */);\r\n        }\r\n        if (!suggestOptions.showStructs) {\r\n            result.add(6 /* Struct */);\r\n        }\r\n        if (!suggestOptions.showInterfaces) {\r\n            result.add(7 /* Interface */);\r\n        }\r\n        if (!suggestOptions.showModules) {\r\n            result.add(8 /* Module */);\r\n        }\r\n        if (!suggestOptions.showProperties) {\r\n            result.add(9 /* Property */);\r\n        }\r\n        if (!suggestOptions.showEvents) {\r\n            result.add(10 /* Event */);\r\n        }\r\n        if (!suggestOptions.showOperators) {\r\n            result.add(11 /* Operator */);\r\n        }\r\n        if (!suggestOptions.showUnits) {\r\n            result.add(12 /* Unit */);\r\n        }\r\n        if (!suggestOptions.showValues) {\r\n            result.add(13 /* Value */);\r\n        }\r\n        if (!suggestOptions.showConstants) {\r\n            result.add(14 /* Constant */);\r\n        }\r\n        if (!suggestOptions.showEnums) {\r\n            result.add(15 /* Enum */);\r\n        }\r\n        if (!suggestOptions.showEnumMembers) {\r\n            result.add(16 /* EnumMember */);\r\n        }\r\n        if (!suggestOptions.showKeywords) {\r\n            result.add(17 /* Keyword */);\r\n        }\r\n        if (!suggestOptions.showWords) {\r\n            result.add(18 /* Text */);\r\n        }\r\n        if (!suggestOptions.showColors) {\r\n            result.add(19 /* Color */);\r\n        }\r\n        if (!suggestOptions.showFiles) {\r\n            result.add(20 /* File */);\r\n        }\r\n        if (!suggestOptions.showReferences) {\r\n            result.add(21 /* Reference */);\r\n        }\r\n        if (!suggestOptions.showColors) {\r\n            result.add(22 /* Customcolor */);\r\n        }\r\n        if (!suggestOptions.showFolders) {\r\n            result.add(23 /* Folder */);\r\n        }\r\n        if (!suggestOptions.showTypeParameters) {\r\n            result.add(24 /* TypeParameter */);\r\n        }\r\n        if (!suggestOptions.showSnippets) {\r\n            result.add(25 /* Snippet */);\r\n        }\r\n        return result;\r\n    };\r\n    SuggestModel.prototype._onNewContext = function (ctx) {\r\n        if (!this._context) {\r\n            // happens when 24x7 IntelliSense is enabled and still in its delay\r\n            return;\r\n        }\r\n        if (ctx.lineNumber !== this._context.lineNumber) {\r\n            // e.g. happens when pressing Enter while IntelliSense is computed\r\n            this.cancel();\r\n            return;\r\n        }\r\n        if (ctx.leadingWord.startColumn < this._context.leadingWord.startColumn) {\r\n            // happens when the current word gets outdented\r\n            this.cancel();\r\n            return;\r\n        }\r\n        if (ctx.column < this._context.column) {\r\n            // typed -> moved cursor LEFT -> retrigger if still on a word\r\n            if (ctx.leadingWord.word) {\r\n                this.trigger({ auto: this._context.auto, shy: false }, true);\r\n            }\r\n            else {\r\n                this.cancel();\r\n            }\r\n            return;\r\n        }\r\n        if (!this._completionModel) {\r\n            // happens when IntelliSense is not yet computed\r\n            return;\r\n        }\r\n        if (ctx.column > this._context.column && this._completionModel.incomplete.size > 0 && ctx.leadingWord.word.length !== 0) {\r\n            // typed -> moved cursor RIGHT & incomple model & still on a word -> retrigger\r\n            var incomplete = this._completionModel.incomplete;\r\n            var adopted = this._completionModel.adopt(incomplete);\r\n            this.trigger({ auto: this._state === 2 /* Auto */, shy: false }, true, incomplete, adopted);\r\n        }\r\n        else {\r\n            // typed -> moved cursor RIGHT -> update UI\r\n            var oldLineContext = this._completionModel.lineContext;\r\n            var isFrozen = false;\r\n            this._completionModel.lineContext = {\r\n                leadingLineContent: ctx.leadingLineContent,\r\n                characterCountDelta: ctx.column - this._context.column\r\n            };\r\n            if (this._completionModel.items.length === 0) {\r\n                if (LineContext.shouldAutoTrigger(this._editor) && this._context.leadingWord.endColumn < ctx.leadingWord.startColumn) {\r\n                    // retrigger when heading into a new word\r\n                    this.trigger({ auto: this._context.auto, shy: false }, true);\r\n                    return;\r\n                }\r\n                if (!this._context.auto) {\r\n                    // freeze when IntelliSense was manually requested\r\n                    this._completionModel.lineContext = oldLineContext;\r\n                    isFrozen = this._completionModel.items.length > 0;\r\n                    if (isFrozen && ctx.leadingWord.word.length === 0) {\r\n                        // there were results before but now there aren't\r\n                        // and also we are not on a word anymore -> cancel\r\n                        this.cancel();\r\n                        return;\r\n                    }\r\n                }\r\n                else {\r\n                    // nothing left\r\n                    this.cancel();\r\n                    return;\r\n                }\r\n            }\r\n            this._onDidSuggest.fire({\r\n                completionModel: this._completionModel,\r\n                auto: this._context.auto,\r\n                shy: this._context.shy,\r\n                isFrozen: isFrozen,\r\n            });\r\n        }\r\n    };\r\n    return SuggestModel;\r\n}());\r\nexport { SuggestModel };\r\n","import './media/outlineTree.css';\r\nimport './media/symbol-icons.css';\r\nimport { localize } from '../../../nls.js';\r\nimport { registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\r\nimport { registerColor, foreground } from '../../../platform/theme/common/colorRegistry.js';\r\nexport var SYMBOL_ICON_ARRAY_FOREGROUND = registerColor('symbolIcon.arrayForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hc: foreground\r\n}, localize('symbolIcon.arrayForeground', 'The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport var SYMBOL_ICON_BOOLEAN_FOREGROUND = registerColor('symbolIcon.booleanForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hc: foreground\r\n}, localize('symbolIcon.booleanForeground', 'The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport var SYMBOL_ICON_CLASS_FOREGROUND = registerColor('symbolIcon.classForeground', {\r\n    dark: '#EE9D28',\r\n    light: '#D67E00',\r\n    hc: '#EE9D28'\r\n}, localize('symbolIcon.classForeground', 'The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport var SYMBOL_ICON_COLOR_FOREGROUND = registerColor('symbolIcon.colorForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hc: foreground\r\n}, localize('symbolIcon.colorForeground', 'The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport var SYMBOL_ICON_CONSTANT_FOREGROUND = registerColor('symbolIcon.constantForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hc: foreground\r\n}, localize('symbolIcon.constantForeground', 'The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport var SYMBOL_ICON_CONSTRUCTOR_FOREGROUND = registerColor('symbolIcon.constructorForeground', {\r\n    dark: '#B180D7',\r\n    light: '#652D90',\r\n    hc: '#B180D7'\r\n}, localize('symbolIcon.constructorForeground', 'The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport var SYMBOL_ICON_ENUMERATOR_FOREGROUND = registerColor('symbolIcon.enumeratorForeground', {\r\n    dark: '#EE9D28',\r\n    light: '#D67E00',\r\n    hc: '#EE9D28'\r\n}, localize('symbolIcon.enumeratorForeground', 'The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport var SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND = registerColor('symbolIcon.enumeratorMemberForeground', {\r\n    dark: '#75BEFF',\r\n    light: '#007ACC',\r\n    hc: '#75BEFF'\r\n}, localize('symbolIcon.enumeratorMemberForeground', 'The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport var SYMBOL_ICON_EVENT_FOREGROUND = registerColor('symbolIcon.eventForeground', {\r\n    dark: '#EE9D28',\r\n    light: '#D67E00',\r\n    hc: '#EE9D28'\r\n}, localize('symbolIcon.eventForeground', 'The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport var SYMBOL_ICON_FIELD_FOREGROUND = registerColor('symbolIcon.fieldForeground', {\r\n    dark: '#75BEFF',\r\n    light: '#007ACC',\r\n    hc: '#75BEFF'\r\n}, localize('symbolIcon.fieldForeground', 'The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport var SYMBOL_ICON_FILE_FOREGROUND = registerColor('symbolIcon.fileForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hc: foreground\r\n}, localize('symbolIcon.fileForeground', 'The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport var SYMBOL_ICON_FOLDER_FOREGROUND = registerColor('symbolIcon.folderForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hc: foreground\r\n}, localize('symbolIcon.folderForeground', 'The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport var SYMBOL_ICON_FUNCTION_FOREGROUND = registerColor('symbolIcon.functionForeground', {\r\n    dark: '#B180D7',\r\n    light: '#652D90',\r\n    hc: '#B180D7'\r\n}, localize('symbolIcon.functionForeground', 'The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport var SYMBOL_ICON_INTERFACE_FOREGROUND = registerColor('symbolIcon.interfaceForeground', {\r\n    dark: '#75BEFF',\r\n    light: '#007ACC',\r\n    hc: '#75BEFF'\r\n}, localize('symbolIcon.interfaceForeground', 'The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport var SYMBOL_ICON_KEY_FOREGROUND = registerColor('symbolIcon.keyForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hc: foreground\r\n}, localize('symbolIcon.keyForeground', 'The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport var SYMBOL_ICON_KEYWORD_FOREGROUND = registerColor('symbolIcon.keywordForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hc: foreground\r\n}, localize('symbolIcon.keywordForeground', 'The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport var SYMBOL_ICON_METHOD_FOREGROUND = registerColor('symbolIcon.methodForeground', {\r\n    dark: '#B180D7',\r\n    light: '#652D90',\r\n    hc: '#B180D7'\r\n}, localize('symbolIcon.methodForeground', 'The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport var SYMBOL_ICON_MODULE_FOREGROUND = registerColor('symbolIcon.moduleForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hc: foreground\r\n}, localize('symbolIcon.moduleForeground', 'The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport var SYMBOL_ICON_NAMESPACE_FOREGROUND = registerColor('symbolIcon.namespaceForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hc: foreground\r\n}, localize('symbolIcon.namespaceForeground', 'The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport var SYMBOL_ICON_NULL_FOREGROUND = registerColor('symbolIcon.nullForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hc: foreground\r\n}, localize('symbolIcon.nullForeground', 'The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport var SYMBOL_ICON_NUMBER_FOREGROUND = registerColor('symbolIcon.numberForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hc: foreground\r\n}, localize('symbolIcon.numberForeground', 'The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport var SYMBOL_ICON_OBJECT_FOREGROUND = registerColor('symbolIcon.objectForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hc: foreground\r\n}, localize('symbolIcon.objectForeground', 'The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport var SYMBOL_ICON_OPERATOR_FOREGROUND = registerColor('symbolIcon.operatorForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hc: foreground\r\n}, localize('symbolIcon.operatorForeground', 'The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport var SYMBOL_ICON_PACKAGE_FOREGROUND = registerColor('symbolIcon.packageForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hc: foreground\r\n}, localize('symbolIcon.packageForeground', 'The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport var SYMBOL_ICON_PROPERTY_FOREGROUND = registerColor('symbolIcon.propertyForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hc: foreground\r\n}, localize('symbolIcon.propertyForeground', 'The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport var SYMBOL_ICON_REFERENCE_FOREGROUND = registerColor('symbolIcon.referenceForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hc: foreground\r\n}, localize('symbolIcon.referenceForeground', 'The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport var SYMBOL_ICON_SNIPPET_FOREGROUND = registerColor('symbolIcon.snippetForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hc: foreground\r\n}, localize('symbolIcon.snippetForeground', 'The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport var SYMBOL_ICON_STRING_FOREGROUND = registerColor('symbolIcon.stringForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hc: foreground\r\n}, localize('symbolIcon.stringForeground', 'The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport var SYMBOL_ICON_STRUCT_FOREGROUND = registerColor('symbolIcon.structForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hc: foreground\r\n}, localize('symbolIcon.structForeground', 'The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport var SYMBOL_ICON_TEXT_FOREGROUND = registerColor('symbolIcon.textForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hc: foreground\r\n}, localize('symbolIcon.textForeground', 'The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport var SYMBOL_ICON_TYPEPARAMETER_FOREGROUND = registerColor('symbolIcon.typeParameterForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hc: foreground\r\n}, localize('symbolIcon.typeParameterForeground', 'The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport var SYMBOL_ICON_UNIT_FOREGROUND = registerColor('symbolIcon.unitForeground', {\r\n    dark: foreground,\r\n    light: foreground,\r\n    hc: foreground\r\n}, localize('symbolIcon.unitForeground', 'The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nexport var SYMBOL_ICON_VARIABLE_FOREGROUND = registerColor('symbolIcon.variableForeground', {\r\n    dark: '#75BEFF',\r\n    light: '#007ACC',\r\n    hc: '#75BEFF'\r\n}, localize('symbolIcon.variableForeground', 'The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\r\nregisterThemingParticipant(function (theme, collector) {\r\n    var symbolIconArrayColor = theme.getColor(SYMBOL_ICON_ARRAY_FOREGROUND);\r\n    if (symbolIconArrayColor) {\r\n        collector.addRule(\".codicon-symbol-array { color: \" + symbolIconArrayColor + \" !important; }\");\r\n    }\r\n    var symbolIconBooleanColor = theme.getColor(SYMBOL_ICON_BOOLEAN_FOREGROUND);\r\n    if (symbolIconBooleanColor) {\r\n        collector.addRule(\".codicon-symbol-boolean { color: \" + symbolIconBooleanColor + \" !important; }\");\r\n    }\r\n    var symbolIconClassColor = theme.getColor(SYMBOL_ICON_CLASS_FOREGROUND);\r\n    if (symbolIconClassColor) {\r\n        collector.addRule(\".codicon-symbol-class { color: \" + symbolIconClassColor + \" !important; }\");\r\n    }\r\n    var symbolIconMethodColor = theme.getColor(SYMBOL_ICON_METHOD_FOREGROUND);\r\n    if (symbolIconMethodColor) {\r\n        collector.addRule(\".codicon-symbol-method { color: \" + symbolIconMethodColor + \" !important; }\");\r\n    }\r\n    var symbolIconColorColor = theme.getColor(SYMBOL_ICON_COLOR_FOREGROUND);\r\n    if (symbolIconColorColor) {\r\n        collector.addRule(\".codicon-symbol-color { color: \" + symbolIconColorColor + \" !important; }\");\r\n    }\r\n    var symbolIconConstantColor = theme.getColor(SYMBOL_ICON_CONSTANT_FOREGROUND);\r\n    if (symbolIconConstantColor) {\r\n        collector.addRule(\".codicon-symbol-constant { color: \" + symbolIconConstantColor + \" !important; }\");\r\n    }\r\n    var symbolIconConstructorColor = theme.getColor(SYMBOL_ICON_CONSTRUCTOR_FOREGROUND);\r\n    if (symbolIconConstructorColor) {\r\n        collector.addRule(\".codicon-symbol-constructor { color: \" + symbolIconConstructorColor + \" !important; }\");\r\n    }\r\n    var symbolIconEnumeratorColor = theme.getColor(SYMBOL_ICON_ENUMERATOR_FOREGROUND);\r\n    if (symbolIconEnumeratorColor) {\r\n        collector.addRule(\"\\n\\t\\t\\t.codicon-symbol-value,.codicon-symbol-enum { color: \" + symbolIconEnumeratorColor + \" !important; }\");\r\n    }\r\n    var symbolIconEnumeratorMemberColor = theme.getColor(SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND);\r\n    if (symbolIconEnumeratorMemberColor) {\r\n        collector.addRule(\".codicon-symbol-enum-member { color: \" + symbolIconEnumeratorMemberColor + \" !important; }\");\r\n    }\r\n    var symbolIconEventColor = theme.getColor(SYMBOL_ICON_EVENT_FOREGROUND);\r\n    if (symbolIconEventColor) {\r\n        collector.addRule(\".codicon-symbol-event { color: \" + symbolIconEventColor + \" !important; }\");\r\n    }\r\n    var symbolIconFieldColor = theme.getColor(SYMBOL_ICON_FIELD_FOREGROUND);\r\n    if (symbolIconFieldColor) {\r\n        collector.addRule(\".codicon-symbol-field { color: \" + symbolIconFieldColor + \" !important; }\");\r\n    }\r\n    var symbolIconFileColor = theme.getColor(SYMBOL_ICON_FILE_FOREGROUND);\r\n    if (symbolIconFileColor) {\r\n        collector.addRule(\".codicon-symbol-file { color: \" + symbolIconFileColor + \" !important; }\");\r\n    }\r\n    var symbolIconFolderColor = theme.getColor(SYMBOL_ICON_FOLDER_FOREGROUND);\r\n    if (symbolIconFolderColor) {\r\n        collector.addRule(\".codicon-symbol-folder { color: \" + symbolIconFolderColor + \" !important; }\");\r\n    }\r\n    var symbolIconFunctionColor = theme.getColor(SYMBOL_ICON_FUNCTION_FOREGROUND);\r\n    if (symbolIconFunctionColor) {\r\n        collector.addRule(\".codicon-symbol-function { color: \" + symbolIconFunctionColor + \" !important; }\");\r\n    }\r\n    var symbolIconInterfaceColor = theme.getColor(SYMBOL_ICON_INTERFACE_FOREGROUND);\r\n    if (symbolIconInterfaceColor) {\r\n        collector.addRule(\".codicon-symbol-interface { color: \" + symbolIconInterfaceColor + \" !important; }\");\r\n    }\r\n    var symbolIconKeyColor = theme.getColor(SYMBOL_ICON_KEY_FOREGROUND);\r\n    if (symbolIconKeyColor) {\r\n        collector.addRule(\".codicon-symbol-key { color: \" + symbolIconKeyColor + \" !important; }\");\r\n    }\r\n    var symbolIconKeywordColor = theme.getColor(SYMBOL_ICON_KEYWORD_FOREGROUND);\r\n    if (symbolIconKeywordColor) {\r\n        collector.addRule(\".codicon-symbol-keyword { color: \" + symbolIconKeywordColor + \" !important; }\");\r\n    }\r\n    var symbolIconModuleColor = theme.getColor(SYMBOL_ICON_MODULE_FOREGROUND);\r\n    if (symbolIconModuleColor) {\r\n        collector.addRule(\".codicon-symbol-module { color: \" + symbolIconModuleColor + \" !important; }\");\r\n    }\r\n    var outlineNamespaceColor = theme.getColor(SYMBOL_ICON_NAMESPACE_FOREGROUND);\r\n    if (outlineNamespaceColor) {\r\n        collector.addRule(\".codicon-symbol-namespace { color: \" + outlineNamespaceColor + \" !important; }\");\r\n    }\r\n    var symbolIconNullColor = theme.getColor(SYMBOL_ICON_NULL_FOREGROUND);\r\n    if (symbolIconNullColor) {\r\n        collector.addRule(\".codicon-symbol-null { color: \" + symbolIconNullColor + \" !important; }\");\r\n    }\r\n    var symbolIconNumberColor = theme.getColor(SYMBOL_ICON_NUMBER_FOREGROUND);\r\n    if (symbolIconNumberColor) {\r\n        collector.addRule(\".codicon-symbol-number { color: \" + symbolIconNumberColor + \" !important; }\");\r\n    }\r\n    var symbolIconObjectColor = theme.getColor(SYMBOL_ICON_OBJECT_FOREGROUND);\r\n    if (symbolIconObjectColor) {\r\n        collector.addRule(\".codicon-symbol-object { color: \" + symbolIconObjectColor + \" !important; }\");\r\n    }\r\n    var symbolIconOperatorColor = theme.getColor(SYMBOL_ICON_OPERATOR_FOREGROUND);\r\n    if (symbolIconOperatorColor) {\r\n        collector.addRule(\".codicon-symbol-operator { color: \" + symbolIconOperatorColor + \" !important; }\");\r\n    }\r\n    var symbolIconPackageColor = theme.getColor(SYMBOL_ICON_PACKAGE_FOREGROUND);\r\n    if (symbolIconPackageColor) {\r\n        collector.addRule(\".codicon-symbol-package { color: \" + symbolIconPackageColor + \" !important; }\");\r\n    }\r\n    var symbolIconPropertyColor = theme.getColor(SYMBOL_ICON_PROPERTY_FOREGROUND);\r\n    if (symbolIconPropertyColor) {\r\n        collector.addRule(\".codicon-symbol-property { color: \" + symbolIconPropertyColor + \" !important; }\");\r\n    }\r\n    var symbolIconReferenceColor = theme.getColor(SYMBOL_ICON_REFERENCE_FOREGROUND);\r\n    if (symbolIconReferenceColor) {\r\n        collector.addRule(\".codicon-symbol-reference { color: \" + symbolIconReferenceColor + \" !important; }\");\r\n    }\r\n    var symbolIconSnippetColor = theme.getColor(SYMBOL_ICON_SNIPPET_FOREGROUND);\r\n    if (symbolIconSnippetColor) {\r\n        collector.addRule(\".codicon-symbol-snippet { color: \" + symbolIconSnippetColor + \" !important; }\");\r\n    }\r\n    var symbolIconStringColor = theme.getColor(SYMBOL_ICON_STRING_FOREGROUND);\r\n    if (symbolIconStringColor) {\r\n        collector.addRule(\".codicon-symbol-string { color: \" + symbolIconStringColor + \" !important; }\");\r\n    }\r\n    var symbolIconStructColor = theme.getColor(SYMBOL_ICON_STRUCT_FOREGROUND);\r\n    if (symbolIconStructColor) {\r\n        collector.addRule(\".codicon-symbol-struct { color: \" + symbolIconStructColor + \" !important; }\");\r\n    }\r\n    var symbolIconTextColor = theme.getColor(SYMBOL_ICON_TEXT_FOREGROUND);\r\n    if (symbolIconTextColor) {\r\n        collector.addRule(\".codicon-symbol-text { color: \" + symbolIconTextColor + \" !important; }\");\r\n    }\r\n    var symbolIconTypeParameterColor = theme.getColor(SYMBOL_ICON_TYPEPARAMETER_FOREGROUND);\r\n    if (symbolIconTypeParameterColor) {\r\n        collector.addRule(\".codicon-symbol-type-parameter { color: \" + symbolIconTypeParameterColor + \" !important; }\");\r\n    }\r\n    var symbolIconUnitColor = theme.getColor(SYMBOL_ICON_UNIT_FOREGROUND);\r\n    if (symbolIconUnitColor) {\r\n        collector.addRule(\".codicon-symbol-unit { color: \" + symbolIconUnitColor + \" !important; }\");\r\n    }\r\n    var symbolIconVariableColor = theme.getColor(SYMBOL_ICON_VARIABLE_FOREGROUND);\r\n    if (symbolIconVariableColor) {\r\n        collector.addRule(\".codicon-symbol-variable { color: \" + symbolIconVariableColor + \" !important; }\");\r\n    }\r\n});\r\n","export var FileKind;\r\n(function (FileKind) {\r\n    FileKind[FileKind[\"FILE\"] = 0] = \"FILE\";\r\n    FileKind[FileKind[\"FOLDER\"] = 1] = \"FOLDER\";\r\n    FileKind[FileKind[\"ROOT_FOLDER\"] = 2] = \"ROOT_FOLDER\";\r\n})(FileKind || (FileKind = {}));\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Schemas } from '../../../base/common/network.js';\r\nimport { DataUri, basenameOrAuthority } from '../../../base/common/resources.js';\r\nimport { PLAINTEXT_MODE_ID } from '../modes/modesRegistry.js';\r\nimport { FileKind } from '../../../platform/files/common/files.js';\r\nexport function getIconClasses(modelService, modeService, resource, fileKind) {\r\n    // we always set these base classes even if we do not have a path\r\n    var classes = fileKind === FileKind.ROOT_FOLDER ? ['rootfolder-icon'] : fileKind === FileKind.FOLDER ? ['folder-icon'] : ['file-icon'];\r\n    if (resource) {\r\n        // Get the path and name of the resource. For data-URIs, we need to parse specially\r\n        var name_1;\r\n        if (resource.scheme === Schemas.data) {\r\n            var metadata = DataUri.parseMetaData(resource);\r\n            name_1 = metadata.get(DataUri.META_DATA_LABEL);\r\n        }\r\n        else {\r\n            name_1 = cssEscape(basenameOrAuthority(resource).toLowerCase());\r\n        }\r\n        // Folders\r\n        if (fileKind === FileKind.FOLDER) {\r\n            classes.push(name_1 + \"-name-folder-icon\");\r\n        }\r\n        // Files\r\n        else {\r\n            // Name & Extension(s)\r\n            if (name_1) {\r\n                classes.push(name_1 + \"-name-file-icon\");\r\n                var dotSegments = name_1.split('.');\r\n                for (var i = 1; i < dotSegments.length; i++) {\r\n                    classes.push(dotSegments.slice(i).join('.') + \"-ext-file-icon\"); // add each combination of all found extensions if more than one\r\n                }\r\n                classes.push(\"ext-file-icon\"); // extra segment to increase file-ext score\r\n            }\r\n            // Detected Mode\r\n            var detectedModeId = detectModeId(modelService, modeService, resource);\r\n            if (detectedModeId) {\r\n                classes.push(cssEscape(detectedModeId) + \"-lang-file-icon\");\r\n            }\r\n        }\r\n    }\r\n    return classes;\r\n}\r\nexport function detectModeId(modelService, modeService, resource) {\r\n    if (!resource) {\r\n        return null; // we need a resource at least\r\n    }\r\n    var modeId = null;\r\n    // Data URI: check for encoded metadata\r\n    if (resource.scheme === Schemas.data) {\r\n        var metadata = DataUri.parseMetaData(resource);\r\n        var mime = metadata.get(DataUri.META_DATA_MIME);\r\n        if (mime) {\r\n            modeId = modeService.getModeId(mime);\r\n        }\r\n    }\r\n    // Any other URI: check for model if existing\r\n    else {\r\n        var model = modelService.getModel(resource);\r\n        if (model) {\r\n            modeId = model.getModeId();\r\n        }\r\n    }\r\n    // only take if the mode is specific (aka no just plain text)\r\n    if (modeId && modeId !== PLAINTEXT_MODE_ID) {\r\n        return modeId;\r\n    }\r\n    // otherwise fallback to path based detection\r\n    return modeService.getModeIdByFilepathOrFirstLine(resource);\r\n}\r\nexport function cssEscape(val) {\r\n    return val.replace(/\\s/g, '\\\\$&'); // make sure to not introduce CSS classes from files that contain whitespace\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nimport './media/suggest.css';\r\nimport '../../../base/browser/ui/codiconLabel/codiconLabel.js'; // The codicon symbol styles are defined here and must be loaded\r\nimport '../documentSymbols/outlineTree.js'; // The codicon symbol colors are defined here and must be loaded\r\nimport * as nls from '../../../nls.js';\r\nimport { createMatches } from '../../../base/common/filters.js';\r\nimport * as strings from '../../../base/common/strings.js';\r\nimport { Event, Emitter } from '../../../base/common/event.js';\r\nimport { onUnexpectedError } from '../../../base/common/errors.js';\r\nimport { dispose, toDisposable, DisposableStore, Disposable } from '../../../base/common/lifecycle.js';\r\nimport { addClass, append, $, hide, removeClass, show, toggleClass, getDomNodePagePosition, hasClass, addDisposableListener, addStandardDisposableListener, addClasses } from '../../../base/browser/dom.js';\r\nimport { List } from '../../../base/browser/ui/list/listWidget.js';\r\nimport { DomScrollableElement } from '../../../base/browser/ui/scrollbar/scrollableElement.js';\r\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\r\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { Context as SuggestContext } from './suggest.js';\r\nimport { alert } from '../../../base/browser/ui/aria/aria.js';\r\nimport { ITelemetryService } from '../../../platform/telemetry/common/telemetry.js';\r\nimport { attachListStyler } from '../../../platform/theme/common/styler.js';\r\nimport { IThemeService, registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\r\nimport { registerColor, editorWidgetBackground, listFocusBackground, activeContrastBorder, listHighlightForeground, editorForeground, editorWidgetBorder, focusBorder, textLinkForeground, textCodeBlockBackground } from '../../../platform/theme/common/colorRegistry.js';\r\nimport { IStorageService } from '../../../platform/storage/common/storage.js';\r\nimport { MarkdownRenderer } from '../markdown/markdownRenderer.js';\r\nimport { IModeService } from '../../common/services/modeService.js';\r\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\r\nimport { TimeoutTimer, createCancelablePromise, disposableTimeout } from '../../../base/common/async.js';\r\nimport { completionKindToCssClass } from '../../common/modes.js';\r\nimport { IconLabel } from '../../../base/browser/ui/iconLabel/iconLabel.js';\r\nimport { getIconClasses } from '../../common/services/getIconClasses.js';\r\nimport { IModelService } from '../../common/services/modelService.js';\r\nimport { URI } from '../../../base/common/uri.js';\r\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { FileKind } from '../../../platform/files/common/files.js';\r\nimport { MarkdownString } from '../../../base/common/htmlContent.js';\r\nimport { flatten } from '../../../base/common/arrays.js';\r\nvar expandSuggestionDocsByDefault = false;\r\n/**\r\n * Suggest widget colors\r\n */\r\nexport var editorSuggestWidgetBackground = registerColor('editorSuggestWidget.background', { dark: editorWidgetBackground, light: editorWidgetBackground, hc: editorWidgetBackground }, nls.localize('editorSuggestWidgetBackground', 'Background color of the suggest widget.'));\r\nexport var editorSuggestWidgetBorder = registerColor('editorSuggestWidget.border', { dark: editorWidgetBorder, light: editorWidgetBorder, hc: editorWidgetBorder }, nls.localize('editorSuggestWidgetBorder', 'Border color of the suggest widget.'));\r\nexport var editorSuggestWidgetForeground = registerColor('editorSuggestWidget.foreground', { dark: editorForeground, light: editorForeground, hc: editorForeground }, nls.localize('editorSuggestWidgetForeground', 'Foreground color of the suggest widget.'));\r\nexport var editorSuggestWidgetSelectedBackground = registerColor('editorSuggestWidget.selectedBackground', { dark: listFocusBackground, light: listFocusBackground, hc: listFocusBackground }, nls.localize('editorSuggestWidgetSelectedBackground', 'Background color of the selected entry in the suggest widget.'));\r\nexport var editorSuggestWidgetHighlightForeground = registerColor('editorSuggestWidget.highlightForeground', { dark: listHighlightForeground, light: listHighlightForeground, hc: listHighlightForeground }, nls.localize('editorSuggestWidgetHighlightForeground', 'Color of the match highlights in the suggest widget.'));\r\nvar colorRegExp = /^(#([\\da-f]{3}){1,2}|(rgb|hsl)a\\(\\s*(\\d{1,3}%?\\s*,\\s*){3}(1|0?\\.\\d+)\\)|(rgb|hsl)\\(\\s*\\d{1,3}%?(\\s*,\\s*\\d{1,3}%?){2}\\s*\\))$/i;\r\nfunction extractColor(item, out) {\r\n    if (item.completion.label.match(colorRegExp)) {\r\n        out[0] = item.completion.label;\r\n        return true;\r\n    }\r\n    if (typeof item.completion.documentation === 'string' && item.completion.documentation.match(colorRegExp)) {\r\n        out[0] = item.completion.documentation;\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction canExpandCompletionItem(item) {\r\n    if (!item) {\r\n        return false;\r\n    }\r\n    var suggestion = item.completion;\r\n    if (suggestion.documentation) {\r\n        return true;\r\n    }\r\n    return (suggestion.detail && suggestion.detail !== suggestion.label);\r\n}\r\nvar Renderer = /** @class */ (function () {\r\n    function Renderer(widget, editor, triggerKeybindingLabel, _modelService, _modeService, _themeService) {\r\n        this.widget = widget;\r\n        this.editor = editor;\r\n        this.triggerKeybindingLabel = triggerKeybindingLabel;\r\n        this._modelService = _modelService;\r\n        this._modeService = _modeService;\r\n        this._themeService = _themeService;\r\n    }\r\n    Object.defineProperty(Renderer.prototype, \"templateId\", {\r\n        get: function () {\r\n            return 'suggestion';\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Renderer.prototype.renderTemplate = function (container) {\r\n        var _this = this;\r\n        var data = Object.create(null);\r\n        data.disposables = new DisposableStore();\r\n        data.root = container;\r\n        addClass(data.root, 'show-file-icons');\r\n        data.icon = append(container, $('.icon'));\r\n        data.colorspan = append(data.icon, $('span.colorspan'));\r\n        var text = append(container, $('.contents'));\r\n        var main = append(text, $('.main'));\r\n        data.iconContainer = append(main, $('.icon-label.codicon'));\r\n        data.iconLabel = new IconLabel(main, { supportHighlights: true, supportCodicons: true });\r\n        data.disposables.add(data.iconLabel);\r\n        data.typeLabel = append(main, $('span.type-label'));\r\n        data.readMore = append(main, $('span.readMore.codicon.codicon-info'));\r\n        data.readMore.title = nls.localize('readMore', \"Read More...{0}\", this.triggerKeybindingLabel);\r\n        var configureFont = function () {\r\n            var options = _this.editor.getOptions();\r\n            var fontInfo = options.get(32 /* fontInfo */);\r\n            var fontFamily = fontInfo.fontFamily;\r\n            var fontSize = options.get(86 /* suggestFontSize */) || fontInfo.fontSize;\r\n            var lineHeight = options.get(87 /* suggestLineHeight */) || fontInfo.lineHeight;\r\n            var fontWeight = fontInfo.fontWeight;\r\n            var fontSizePx = fontSize + \"px\";\r\n            var lineHeightPx = lineHeight + \"px\";\r\n            data.root.style.fontSize = fontSizePx;\r\n            data.root.style.fontWeight = fontWeight;\r\n            main.style.fontFamily = fontFamily;\r\n            main.style.lineHeight = lineHeightPx;\r\n            data.icon.style.height = lineHeightPx;\r\n            data.icon.style.width = lineHeightPx;\r\n            data.readMore.style.height = lineHeightPx;\r\n            data.readMore.style.width = lineHeightPx;\r\n        };\r\n        configureFont();\r\n        data.disposables.add(Event.chain(this.editor.onDidChangeConfiguration.bind(this.editor))\r\n            .filter(function (e) { return e.hasChanged(32 /* fontInfo */) || e.hasChanged(86 /* suggestFontSize */) || e.hasChanged(87 /* suggestLineHeight */); })\r\n            .on(configureFont, null));\r\n        return data;\r\n    };\r\n    Renderer.prototype.renderElement = function (element, _index, templateData) {\r\n        var _this = this;\r\n        var data = templateData;\r\n        var suggestion = element.completion;\r\n        data.icon.className = 'icon ' + completionKindToCssClass(suggestion.kind);\r\n        data.colorspan.style.backgroundColor = '';\r\n        var labelOptions = {\r\n            labelEscapeNewLines: true,\r\n            matches: createMatches(element.score)\r\n        };\r\n        var color = [];\r\n        if (suggestion.kind === 19 /* Color */ && extractColor(element, color)) {\r\n            // special logic for 'color' completion items\r\n            data.icon.className = 'icon customcolor';\r\n            data.iconContainer.className = 'icon hide';\r\n            data.colorspan.style.backgroundColor = color[0];\r\n        }\r\n        else if (suggestion.kind === 20 /* File */ && this._themeService.getIconTheme().hasFileIcons) {\r\n            // special logic for 'file' completion items\r\n            data.icon.className = 'icon hide';\r\n            data.iconContainer.className = 'icon hide';\r\n            var labelClasses = getIconClasses(this._modelService, this._modeService, URI.from({ scheme: 'fake', path: suggestion.label }), FileKind.FILE);\r\n            var detailClasses = getIconClasses(this._modelService, this._modeService, URI.from({ scheme: 'fake', path: suggestion.detail }), FileKind.FILE);\r\n            labelOptions.extraClasses = labelClasses.length > detailClasses.length ? labelClasses : detailClasses;\r\n        }\r\n        else if (suggestion.kind === 23 /* Folder */ && this._themeService.getIconTheme().hasFolderIcons) {\r\n            // special logic for 'folder' completion items\r\n            data.icon.className = 'icon hide';\r\n            data.iconContainer.className = 'icon hide';\r\n            labelOptions.extraClasses = flatten([\r\n                getIconClasses(this._modelService, this._modeService, URI.from({ scheme: 'fake', path: suggestion.label }), FileKind.FOLDER),\r\n                getIconClasses(this._modelService, this._modeService, URI.from({ scheme: 'fake', path: suggestion.detail }), FileKind.FOLDER)\r\n            ]);\r\n        }\r\n        else {\r\n            // normal icon\r\n            data.icon.className = 'icon hide';\r\n            data.iconContainer.className = '';\r\n            addClasses(data.iconContainer, \"suggest-icon codicon codicon-symbol-\" + completionKindToCssClass(suggestion.kind));\r\n        }\r\n        if (suggestion.tags && suggestion.tags.indexOf(1 /* Deprecated */) >= 0) {\r\n            labelOptions.extraClasses = (labelOptions.extraClasses || []).concat(['deprecated']);\r\n            labelOptions.matches = [];\r\n        }\r\n        data.iconLabel.setLabel(suggestion.label, undefined, labelOptions);\r\n        data.typeLabel.textContent = (suggestion.detail || '').replace(/\\n.*$/m, '');\r\n        if (canExpandCompletionItem(element)) {\r\n            show(data.readMore);\r\n            data.readMore.onmousedown = function (e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n            };\r\n            data.readMore.onclick = function (e) {\r\n                e.stopPropagation();\r\n                e.preventDefault();\r\n                _this.widget.toggleDetails();\r\n            };\r\n        }\r\n        else {\r\n            hide(data.readMore);\r\n            data.readMore.onmousedown = null;\r\n            data.readMore.onclick = null;\r\n        }\r\n    };\r\n    Renderer.prototype.disposeTemplate = function (templateData) {\r\n        templateData.disposables.dispose();\r\n    };\r\n    Renderer = __decorate([\r\n        __param(3, IModelService),\r\n        __param(4, IModeService),\r\n        __param(5, IThemeService)\r\n    ], Renderer);\r\n    return Renderer;\r\n}());\r\nvar SuggestionDetails = /** @class */ (function () {\r\n    function SuggestionDetails(container, widget, editor, markdownRenderer, triggerKeybindingLabel) {\r\n        var _this = this;\r\n        this.widget = widget;\r\n        this.editor = editor;\r\n        this.markdownRenderer = markdownRenderer;\r\n        this.triggerKeybindingLabel = triggerKeybindingLabel;\r\n        this.borderWidth = 1;\r\n        this.disposables = new DisposableStore();\r\n        this.el = append(container, $('.details'));\r\n        this.disposables.add(toDisposable(function () { return container.removeChild(_this.el); }));\r\n        this.body = $('.body');\r\n        this.scrollbar = new DomScrollableElement(this.body, {});\r\n        append(this.el, this.scrollbar.getDomNode());\r\n        this.disposables.add(this.scrollbar);\r\n        this.header = append(this.body, $('.header'));\r\n        this.close = append(this.header, $('span.codicon.codicon-close'));\r\n        this.close.title = nls.localize('readLess', \"Read less...{0}\", this.triggerKeybindingLabel);\r\n        this.type = append(this.header, $('p.type'));\r\n        this.docs = append(this.body, $('p.docs'));\r\n        this.ariaLabel = null;\r\n        this.configureFont();\r\n        Event.chain(this.editor.onDidChangeConfiguration.bind(this.editor))\r\n            .filter(function (e) { return e.hasChanged(32 /* fontInfo */); })\r\n            .on(this.configureFont, this, this.disposables);\r\n        markdownRenderer.onDidRenderCodeBlock(function () { return _this.scrollbar.scanDomNode(); }, this, this.disposables);\r\n    }\r\n    Object.defineProperty(SuggestionDetails.prototype, \"element\", {\r\n        get: function () {\r\n            return this.el;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    SuggestionDetails.prototype.renderLoading = function () {\r\n        this.type.textContent = nls.localize('loading', \"Loading...\");\r\n        this.docs.textContent = '';\r\n    };\r\n    SuggestionDetails.prototype.renderItem = function (item, explainMode) {\r\n        var _this = this;\r\n        this.renderDisposeable = dispose(this.renderDisposeable);\r\n        var _a = item.completion, documentation = _a.documentation, detail = _a.detail;\r\n        // --- documentation\r\n        if (explainMode) {\r\n            var md = '';\r\n            md += \"score: \" + item.score[0] + (item.word ? \", compared '\" + (item.completion.filterText && (item.completion.filterText + ' (filterText)') || item.completion.label) + \"' with '\" + item.word + \"'\" : ' (no prefix)') + \"\\n\";\r\n            md += \"distance: \" + item.distance + \", see localityBonus-setting\\n\";\r\n            md += \"index: \" + item.idx + \", based on \" + (item.completion.sortText && \"sortText: \\\"\" + item.completion.sortText + \"\\\"\" || 'label') + \"\\n\";\r\n            documentation = new MarkdownString().appendCodeblock('empty', md);\r\n            detail = \"Provider: \" + item.provider._debugDisplayName;\r\n        }\r\n        if (!explainMode && !canExpandCompletionItem(item)) {\r\n            this.type.textContent = '';\r\n            this.docs.textContent = '';\r\n            addClass(this.el, 'no-docs');\r\n            this.ariaLabel = null;\r\n            return;\r\n        }\r\n        removeClass(this.el, 'no-docs');\r\n        if (typeof documentation === 'string') {\r\n            removeClass(this.docs, 'markdown-docs');\r\n            this.docs.textContent = documentation;\r\n        }\r\n        else {\r\n            addClass(this.docs, 'markdown-docs');\r\n            this.docs.innerHTML = '';\r\n            var renderedContents = this.markdownRenderer.render(documentation);\r\n            this.renderDisposeable = renderedContents;\r\n            this.docs.appendChild(renderedContents.element);\r\n        }\r\n        // --- details\r\n        if (detail) {\r\n            this.type.innerText = detail;\r\n            show(this.type);\r\n        }\r\n        else {\r\n            this.type.innerText = '';\r\n            hide(this.type);\r\n        }\r\n        this.el.style.height = this.header.offsetHeight + this.docs.offsetHeight + (this.borderWidth * 2) + 'px';\r\n        this.el.style.userSelect = 'text';\r\n        this.el.tabIndex = -1;\r\n        this.close.onmousedown = function (e) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n        };\r\n        this.close.onclick = function (e) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            _this.widget.toggleDetails();\r\n        };\r\n        this.body.scrollTop = 0;\r\n        this.scrollbar.scanDomNode();\r\n        this.ariaLabel = strings.format('{0}{1}', detail || '', documentation ? (typeof documentation === 'string' ? documentation : documentation.value) : '');\r\n    };\r\n    SuggestionDetails.prototype.getAriaLabel = function () {\r\n        return this.ariaLabel;\r\n    };\r\n    SuggestionDetails.prototype.scrollDown = function (much) {\r\n        if (much === void 0) { much = 8; }\r\n        this.body.scrollTop += much;\r\n    };\r\n    SuggestionDetails.prototype.scrollUp = function (much) {\r\n        if (much === void 0) { much = 8; }\r\n        this.body.scrollTop -= much;\r\n    };\r\n    SuggestionDetails.prototype.scrollTop = function () {\r\n        this.body.scrollTop = 0;\r\n    };\r\n    SuggestionDetails.prototype.scrollBottom = function () {\r\n        this.body.scrollTop = this.body.scrollHeight;\r\n    };\r\n    SuggestionDetails.prototype.pageDown = function () {\r\n        this.scrollDown(80);\r\n    };\r\n    SuggestionDetails.prototype.pageUp = function () {\r\n        this.scrollUp(80);\r\n    };\r\n    SuggestionDetails.prototype.setBorderWidth = function (width) {\r\n        this.borderWidth = width;\r\n    };\r\n    SuggestionDetails.prototype.configureFont = function () {\r\n        var options = this.editor.getOptions();\r\n        var fontInfo = options.get(32 /* fontInfo */);\r\n        var fontFamily = fontInfo.fontFamily;\r\n        var fontSize = options.get(86 /* suggestFontSize */) || fontInfo.fontSize;\r\n        var lineHeight = options.get(87 /* suggestLineHeight */) || fontInfo.lineHeight;\r\n        var fontWeight = fontInfo.fontWeight;\r\n        var fontSizePx = fontSize + \"px\";\r\n        var lineHeightPx = lineHeight + \"px\";\r\n        this.el.style.fontSize = fontSizePx;\r\n        this.el.style.fontWeight = fontWeight;\r\n        this.type.style.fontFamily = fontFamily;\r\n        this.close.style.height = lineHeightPx;\r\n        this.close.style.width = lineHeightPx;\r\n    };\r\n    SuggestionDetails.prototype.dispose = function () {\r\n        this.disposables.dispose();\r\n        this.renderDisposeable = dispose(this.renderDisposeable);\r\n    };\r\n    return SuggestionDetails;\r\n}());\r\nvar SuggestWidget = /** @class */ (function () {\r\n    function SuggestWidget(editor, telemetryService, contextKeyService, themeService, storageService, keybindingService, modeService, openerService, instantiationService) {\r\n        var _this = this;\r\n        this.editor = editor;\r\n        this.telemetryService = telemetryService;\r\n        // Editor.IContentWidget.allowEditorOverflow\r\n        this.allowEditorOverflow = true;\r\n        this.suppressMouseDown = false;\r\n        this.state = null;\r\n        this.isAuto = false;\r\n        this.loadingTimeout = Disposable.None;\r\n        this.currentSuggestionDetails = null;\r\n        this.ignoreFocusEvents = false;\r\n        this.completionModel = null;\r\n        this.showTimeout = new TimeoutTimer();\r\n        this.toDispose = new DisposableStore();\r\n        this.onDidSelectEmitter = new Emitter();\r\n        this.onDidFocusEmitter = new Emitter();\r\n        this.onDidHideEmitter = new Emitter();\r\n        this.onDidShowEmitter = new Emitter();\r\n        this.onDidSelect = this.onDidSelectEmitter.event;\r\n        this.onDidFocus = this.onDidFocusEmitter.event;\r\n        this.onDidHide = this.onDidHideEmitter.event;\r\n        this.onDidShow = this.onDidShowEmitter.event;\r\n        this.maxWidgetWidth = 660;\r\n        this.listWidth = 330;\r\n        this.firstFocusInCurrentList = false;\r\n        this.preferDocPositionTop = false;\r\n        this.docsPositionPreviousWidgetY = null;\r\n        this.explainMode = false;\r\n        this._onDetailsKeydown = new Emitter();\r\n        this.onDetailsKeyDown = this._onDetailsKeydown.event;\r\n        this._lastAriaAlertLabel = null;\r\n        var kb = keybindingService.lookupKeybinding('editor.action.triggerSuggest');\r\n        var triggerKeybindingLabel = !kb ? '' : \" (\" + kb.getLabel() + \")\";\r\n        var markdownRenderer = this.toDispose.add(new MarkdownRenderer(editor, modeService, openerService));\r\n        this.isAuto = false;\r\n        this.focusedItem = null;\r\n        this.storageService = storageService;\r\n        this.element = $('.editor-widget.suggest-widget');\r\n        this.toDispose.add(addDisposableListener(this.element, 'click', function (e) {\r\n            if (e.target === _this.element) {\r\n                _this.hideWidget();\r\n            }\r\n        }));\r\n        this.messageElement = append(this.element, $('.message'));\r\n        this.listElement = append(this.element, $('.tree'));\r\n        this.details = instantiationService.createInstance(SuggestionDetails, this.element, this, this.editor, markdownRenderer, triggerKeybindingLabel);\r\n        var applyIconStyle = function () { return toggleClass(_this.element, 'no-icons', !_this.editor.getOption(85 /* suggest */).showIcons); };\r\n        applyIconStyle();\r\n        var renderer = instantiationService.createInstance(Renderer, this, this.editor, triggerKeybindingLabel);\r\n        this.list = new List('SuggestWidget', this.listElement, this, [renderer], {\r\n            useShadows: false,\r\n            openController: { shouldOpen: function () { return false; } },\r\n            mouseSupport: false\r\n        });\r\n        this.toDispose.add(attachListStyler(this.list, themeService, {\r\n            listInactiveFocusBackground: editorSuggestWidgetSelectedBackground,\r\n            listInactiveFocusOutline: activeContrastBorder\r\n        }));\r\n        this.toDispose.add(themeService.onThemeChange(function (t) { return _this.onThemeChange(t); }));\r\n        this.toDispose.add(editor.onDidLayoutChange(function () { return _this.onEditorLayoutChange(); }));\r\n        this.toDispose.add(this.list.onMouseDown(function (e) { return _this.onListMouseDownOrTap(e); }));\r\n        this.toDispose.add(this.list.onTap(function (e) { return _this.onListMouseDownOrTap(e); }));\r\n        this.toDispose.add(this.list.onSelectionChange(function (e) { return _this.onListSelection(e); }));\r\n        this.toDispose.add(this.list.onFocusChange(function (e) { return _this.onListFocus(e); }));\r\n        this.toDispose.add(this.editor.onDidChangeCursorSelection(function () { return _this.onCursorSelectionChanged(); }));\r\n        this.toDispose.add(this.editor.onDidChangeConfiguration(function (e) { return e.hasChanged(85 /* suggest */) && applyIconStyle(); }));\r\n        this.suggestWidgetVisible = SuggestContext.Visible.bindTo(contextKeyService);\r\n        this.suggestWidgetMultipleSuggestions = SuggestContext.MultipleSuggestions.bindTo(contextKeyService);\r\n        this.editor.addContentWidget(this);\r\n        this.setState(0 /* Hidden */);\r\n        this.onThemeChange(themeService.getTheme());\r\n        this.toDispose.add(addStandardDisposableListener(this.details.element, 'keydown', function (e) {\r\n            _this._onDetailsKeydown.fire(e);\r\n        }));\r\n        this.toDispose.add(this.editor.onMouseDown(function (e) { return _this.onEditorMouseDown(e); }));\r\n    }\r\n    SuggestWidget.prototype.onEditorMouseDown = function (mouseEvent) {\r\n        // Clicking inside details\r\n        if (this.details.element.contains(mouseEvent.target.element)) {\r\n            this.details.element.focus();\r\n        }\r\n        // Clicking outside details and inside suggest\r\n        else {\r\n            if (this.element.contains(mouseEvent.target.element)) {\r\n                this.editor.focus();\r\n            }\r\n        }\r\n    };\r\n    SuggestWidget.prototype.onCursorSelectionChanged = function () {\r\n        if (this.state === 0 /* Hidden */) {\r\n            return;\r\n        }\r\n        this.editor.layoutContentWidget(this);\r\n    };\r\n    SuggestWidget.prototype.onEditorLayoutChange = function () {\r\n        if ((this.state === 3 /* Open */ || this.state === 5 /* Details */) && this.expandDocsSettingFromStorage()) {\r\n            this.expandSideOrBelow();\r\n        }\r\n    };\r\n    SuggestWidget.prototype.onListMouseDownOrTap = function (e) {\r\n        if (typeof e.element === 'undefined' || typeof e.index === 'undefined') {\r\n            return;\r\n        }\r\n        // prevent stealing browser focus from the editor\r\n        e.browserEvent.preventDefault();\r\n        e.browserEvent.stopPropagation();\r\n        this.select(e.element, e.index);\r\n    };\r\n    SuggestWidget.prototype.onListSelection = function (e) {\r\n        if (!e.elements.length) {\r\n            return;\r\n        }\r\n        this.select(e.elements[0], e.indexes[0]);\r\n    };\r\n    SuggestWidget.prototype.select = function (item, index) {\r\n        var completionModel = this.completionModel;\r\n        if (!completionModel) {\r\n            return;\r\n        }\r\n        this.onDidSelectEmitter.fire({ item: item, index: index, model: completionModel });\r\n        this.editor.focus();\r\n    };\r\n    SuggestWidget.prototype._getSuggestionAriaAlertLabel = function (item) {\r\n        if (this.expandDocsSettingFromStorage()) {\r\n            return nls.localize('ariaCurrenttSuggestionReadDetails', \"Item {0}, docs: {1}\", item.completion.label, this.details.getAriaLabel());\r\n        }\r\n        else {\r\n            return item.completion.label;\r\n        }\r\n    };\r\n    SuggestWidget.prototype._ariaAlert = function (newAriaAlertLabel) {\r\n        if (this._lastAriaAlertLabel === newAriaAlertLabel) {\r\n            return;\r\n        }\r\n        this._lastAriaAlertLabel = newAriaAlertLabel;\r\n        if (this._lastAriaAlertLabel) {\r\n            alert(this._lastAriaAlertLabel, true);\r\n        }\r\n    };\r\n    SuggestWidget.prototype.onThemeChange = function (theme) {\r\n        var backgroundColor = theme.getColor(editorSuggestWidgetBackground);\r\n        if (backgroundColor) {\r\n            this.listElement.style.backgroundColor = backgroundColor.toString();\r\n            this.details.element.style.backgroundColor = backgroundColor.toString();\r\n            this.messageElement.style.backgroundColor = backgroundColor.toString();\r\n        }\r\n        var borderColor = theme.getColor(editorSuggestWidgetBorder);\r\n        if (borderColor) {\r\n            this.listElement.style.borderColor = borderColor.toString();\r\n            this.details.element.style.borderColor = borderColor.toString();\r\n            this.messageElement.style.borderColor = borderColor.toString();\r\n            this.detailsBorderColor = borderColor.toString();\r\n        }\r\n        var focusBorderColor = theme.getColor(focusBorder);\r\n        if (focusBorderColor) {\r\n            this.detailsFocusBorderColor = focusBorderColor.toString();\r\n        }\r\n        this.details.setBorderWidth(theme.type === 'hc' ? 2 : 1);\r\n    };\r\n    SuggestWidget.prototype.onListFocus = function (e) {\r\n        var _this = this;\r\n        if (this.ignoreFocusEvents) {\r\n            return;\r\n        }\r\n        if (!e.elements.length) {\r\n            if (this.currentSuggestionDetails) {\r\n                this.currentSuggestionDetails.cancel();\r\n                this.currentSuggestionDetails = null;\r\n                this.focusedItem = null;\r\n            }\r\n            this._ariaAlert(null);\r\n            return;\r\n        }\r\n        if (!this.completionModel) {\r\n            return;\r\n        }\r\n        var item = e.elements[0];\r\n        var index = e.indexes[0];\r\n        this.firstFocusInCurrentList = !this.focusedItem;\r\n        if (item !== this.focusedItem) {\r\n            if (this.currentSuggestionDetails) {\r\n                this.currentSuggestionDetails.cancel();\r\n                this.currentSuggestionDetails = null;\r\n            }\r\n            this.focusedItem = item;\r\n            this.list.reveal(index);\r\n            this.currentSuggestionDetails = createCancelablePromise(function (token) { return __awaiter(_this, void 0, void 0, function () {\r\n                var loading, result;\r\n                var _this = this;\r\n                return __generator(this, function (_a) {\r\n                    switch (_a.label) {\r\n                        case 0:\r\n                            loading = disposableTimeout(function () { return _this.showDetails(true); }, 250);\r\n                            token.onCancellationRequested(function () { return loading.dispose(); });\r\n                            return [4 /*yield*/, item.resolve(token)];\r\n                        case 1:\r\n                            result = _a.sent();\r\n                            loading.dispose();\r\n                            return [2 /*return*/, result];\r\n                    }\r\n                });\r\n            }); });\r\n            this.currentSuggestionDetails.then(function () {\r\n                if (index >= _this.list.length || item !== _this.list.element(index)) {\r\n                    return;\r\n                }\r\n                // item can have extra information, so re-render\r\n                _this.ignoreFocusEvents = true;\r\n                _this.list.splice(index, 1, [item]);\r\n                _this.list.setFocus([index]);\r\n                _this.ignoreFocusEvents = false;\r\n                if (_this.expandDocsSettingFromStorage()) {\r\n                    _this.showDetails(false);\r\n                }\r\n                else {\r\n                    removeClass(_this.element, 'docs-side');\r\n                }\r\n                _this._ariaAlert(_this._getSuggestionAriaAlertLabel(item));\r\n            }).catch(onUnexpectedError);\r\n        }\r\n        // emit an event\r\n        this.onDidFocusEmitter.fire({ item: item, index: index, model: this.completionModel });\r\n    };\r\n    SuggestWidget.prototype.setState = function (state) {\r\n        if (!this.element) {\r\n            return;\r\n        }\r\n        var stateChanged = this.state !== state;\r\n        this.state = state;\r\n        toggleClass(this.element, 'frozen', state === 4 /* Frozen */);\r\n        switch (state) {\r\n            case 0 /* Hidden */:\r\n                hide(this.messageElement, this.details.element, this.listElement);\r\n                this.hide();\r\n                this.listHeight = 0;\r\n                if (stateChanged) {\r\n                    this.list.splice(0, this.list.length);\r\n                }\r\n                this.focusedItem = null;\r\n                break;\r\n            case 1 /* Loading */:\r\n                this.messageElement.textContent = SuggestWidget.LOADING_MESSAGE;\r\n                hide(this.listElement, this.details.element);\r\n                show(this.messageElement);\r\n                removeClass(this.element, 'docs-side');\r\n                this.show();\r\n                this.focusedItem = null;\r\n                break;\r\n            case 2 /* Empty */:\r\n                this.messageElement.textContent = SuggestWidget.NO_SUGGESTIONS_MESSAGE;\r\n                hide(this.listElement, this.details.element);\r\n                show(this.messageElement);\r\n                removeClass(this.element, 'docs-side');\r\n                this.show();\r\n                this.focusedItem = null;\r\n                break;\r\n            case 3 /* Open */:\r\n                hide(this.messageElement);\r\n                show(this.listElement);\r\n                this.show();\r\n                break;\r\n            case 4 /* Frozen */:\r\n                hide(this.messageElement);\r\n                show(this.listElement);\r\n                this.show();\r\n                break;\r\n            case 5 /* Details */:\r\n                hide(this.messageElement);\r\n                show(this.details.element, this.listElement);\r\n                this.show();\r\n                this._ariaAlert(this.details.getAriaLabel());\r\n                break;\r\n        }\r\n    };\r\n    SuggestWidget.prototype.showTriggered = function (auto, delay) {\r\n        var _this = this;\r\n        if (this.state !== 0 /* Hidden */) {\r\n            return;\r\n        }\r\n        this.isAuto = !!auto;\r\n        if (!this.isAuto) {\r\n            this.loadingTimeout = disposableTimeout(function () { return _this.setState(1 /* Loading */); }, delay);\r\n        }\r\n    };\r\n    SuggestWidget.prototype.showSuggestions = function (completionModel, selectionIndex, isFrozen, isAuto) {\r\n        this.preferDocPositionTop = false;\r\n        this.docsPositionPreviousWidgetY = null;\r\n        this.loadingTimeout.dispose();\r\n        if (this.currentSuggestionDetails) {\r\n            this.currentSuggestionDetails.cancel();\r\n            this.currentSuggestionDetails = null;\r\n        }\r\n        if (this.completionModel !== completionModel) {\r\n            this.completionModel = completionModel;\r\n        }\r\n        if (isFrozen && this.state !== 2 /* Empty */ && this.state !== 0 /* Hidden */) {\r\n            this.setState(4 /* Frozen */);\r\n            return;\r\n        }\r\n        var visibleCount = this.completionModel.items.length;\r\n        var isEmpty = visibleCount === 0;\r\n        this.suggestWidgetMultipleSuggestions.set(visibleCount > 1);\r\n        if (isEmpty) {\r\n            if (isAuto) {\r\n                this.setState(0 /* Hidden */);\r\n            }\r\n            else {\r\n                this.setState(2 /* Empty */);\r\n            }\r\n            this.completionModel = null;\r\n        }\r\n        else {\r\n            if (this.state !== 3 /* Open */) {\r\n                var stats = this.completionModel.stats;\r\n                stats['wasAutomaticallyTriggered'] = !!isAuto;\r\n                /* __GDPR__\r\n                    \"suggestWidget\" : {\r\n                        \"wasAutomaticallyTriggered\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\", \"isMeasurement\": true },\r\n                        \"${include}\": [\r\n                            \"${ICompletionStats}\"\r\n                        ]\r\n                    }\r\n                */\r\n                this.telemetryService.publicLog('suggestWidget', __assign({}, stats));\r\n            }\r\n            this.focusedItem = null;\r\n            this.list.splice(0, this.list.length, this.completionModel.items);\r\n            if (isFrozen) {\r\n                this.setState(4 /* Frozen */);\r\n            }\r\n            else {\r\n                this.setState(3 /* Open */);\r\n            }\r\n            this.list.reveal(selectionIndex, 0);\r\n            this.list.setFocus([selectionIndex]);\r\n            // Reset focus border\r\n            if (this.detailsBorderColor) {\r\n                this.details.element.style.borderColor = this.detailsBorderColor;\r\n            }\r\n        }\r\n    };\r\n    SuggestWidget.prototype.selectNextPage = function () {\r\n        switch (this.state) {\r\n            case 0 /* Hidden */:\r\n                return false;\r\n            case 5 /* Details */:\r\n                this.details.pageDown();\r\n                return true;\r\n            case 1 /* Loading */:\r\n                return !this.isAuto;\r\n            default:\r\n                this.list.focusNextPage();\r\n                return true;\r\n        }\r\n    };\r\n    SuggestWidget.prototype.selectNext = function () {\r\n        switch (this.state) {\r\n            case 0 /* Hidden */:\r\n                return false;\r\n            case 1 /* Loading */:\r\n                return !this.isAuto;\r\n            default:\r\n                this.list.focusNext(1, true);\r\n                return true;\r\n        }\r\n    };\r\n    SuggestWidget.prototype.selectLast = function () {\r\n        switch (this.state) {\r\n            case 0 /* Hidden */:\r\n                return false;\r\n            case 5 /* Details */:\r\n                this.details.scrollBottom();\r\n                return true;\r\n            case 1 /* Loading */:\r\n                return !this.isAuto;\r\n            default:\r\n                this.list.focusLast();\r\n                return true;\r\n        }\r\n    };\r\n    SuggestWidget.prototype.selectPreviousPage = function () {\r\n        switch (this.state) {\r\n            case 0 /* Hidden */:\r\n                return false;\r\n            case 5 /* Details */:\r\n                this.details.pageUp();\r\n                return true;\r\n            case 1 /* Loading */:\r\n                return !this.isAuto;\r\n            default:\r\n                this.list.focusPreviousPage();\r\n                return true;\r\n        }\r\n    };\r\n    SuggestWidget.prototype.selectPrevious = function () {\r\n        switch (this.state) {\r\n            case 0 /* Hidden */:\r\n                return false;\r\n            case 1 /* Loading */:\r\n                return !this.isAuto;\r\n            default:\r\n                this.list.focusPrevious(1, true);\r\n                return false;\r\n        }\r\n    };\r\n    SuggestWidget.prototype.selectFirst = function () {\r\n        switch (this.state) {\r\n            case 0 /* Hidden */:\r\n                return false;\r\n            case 5 /* Details */:\r\n                this.details.scrollTop();\r\n                return true;\r\n            case 1 /* Loading */:\r\n                return !this.isAuto;\r\n            default:\r\n                this.list.focusFirst();\r\n                return true;\r\n        }\r\n    };\r\n    SuggestWidget.prototype.getFocusedItem = function () {\r\n        if (this.state !== 0 /* Hidden */\r\n            && this.state !== 2 /* Empty */\r\n            && this.state !== 1 /* Loading */\r\n            && this.completionModel) {\r\n            return {\r\n                item: this.list.getFocusedElements()[0],\r\n                index: this.list.getFocus()[0],\r\n                model: this.completionModel\r\n            };\r\n        }\r\n        return undefined;\r\n    };\r\n    SuggestWidget.prototype.toggleDetailsFocus = function () {\r\n        if (this.state === 5 /* Details */) {\r\n            this.setState(3 /* Open */);\r\n            if (this.detailsBorderColor) {\r\n                this.details.element.style.borderColor = this.detailsBorderColor;\r\n            }\r\n        }\r\n        else if (this.state === 3 /* Open */ && this.expandDocsSettingFromStorage()) {\r\n            this.setState(5 /* Details */);\r\n            if (this.detailsFocusBorderColor) {\r\n                this.details.element.style.borderColor = this.detailsFocusBorderColor;\r\n            }\r\n        }\r\n        this.telemetryService.publicLog2('suggestWidget:toggleDetailsFocus');\r\n    };\r\n    SuggestWidget.prototype.toggleDetails = function () {\r\n        if (!canExpandCompletionItem(this.list.getFocusedElements()[0])) {\r\n            return;\r\n        }\r\n        if (this.expandDocsSettingFromStorage()) {\r\n            this.updateExpandDocsSetting(false);\r\n            hide(this.details.element);\r\n            removeClass(this.element, 'docs-side');\r\n            removeClass(this.element, 'docs-below');\r\n            this.editor.layoutContentWidget(this);\r\n            this.telemetryService.publicLog2('suggestWidget:collapseDetails');\r\n        }\r\n        else {\r\n            if (this.state !== 3 /* Open */ && this.state !== 5 /* Details */ && this.state !== 4 /* Frozen */) {\r\n                return;\r\n            }\r\n            this.updateExpandDocsSetting(true);\r\n            this.showDetails(false);\r\n            this._ariaAlert(this.details.getAriaLabel());\r\n            this.telemetryService.publicLog2('suggestWidget:expandDetails');\r\n        }\r\n    };\r\n    SuggestWidget.prototype.showDetails = function (loading) {\r\n        this.expandSideOrBelow();\r\n        show(this.details.element);\r\n        this.details.element.style.maxHeight = this.maxWidgetHeight + 'px';\r\n        if (loading) {\r\n            this.details.renderLoading();\r\n        }\r\n        else {\r\n            this.details.renderItem(this.list.getFocusedElements()[0], this.explainMode);\r\n        }\r\n        // Reset margin-top that was set as Fix for #26416\r\n        this.listElement.style.marginTop = '0px';\r\n        // with docs showing up widget width/height may change, so reposition the widget\r\n        this.editor.layoutContentWidget(this);\r\n        this.adjustDocsPosition();\r\n        this.editor.focus();\r\n    };\r\n    SuggestWidget.prototype.toggleExplainMode = function () {\r\n        if (this.list.getFocusedElements()[0] && this.expandDocsSettingFromStorage()) {\r\n            this.explainMode = !this.explainMode;\r\n            this.showDetails(false);\r\n        }\r\n    };\r\n    SuggestWidget.prototype.show = function () {\r\n        var _this = this;\r\n        var newHeight = this.updateListHeight();\r\n        if (newHeight !== this.listHeight) {\r\n            this.editor.layoutContentWidget(this);\r\n            this.listHeight = newHeight;\r\n        }\r\n        this.suggestWidgetVisible.set(true);\r\n        this.showTimeout.cancelAndSet(function () {\r\n            addClass(_this.element, 'visible');\r\n            _this.onDidShowEmitter.fire(_this);\r\n        }, 100);\r\n    };\r\n    SuggestWidget.prototype.hide = function () {\r\n        this.suggestWidgetVisible.reset();\r\n        this.suggestWidgetMultipleSuggestions.reset();\r\n        removeClass(this.element, 'visible');\r\n    };\r\n    SuggestWidget.prototype.hideWidget = function () {\r\n        this.loadingTimeout.dispose();\r\n        this.setState(0 /* Hidden */);\r\n        this.onDidHideEmitter.fire(this);\r\n    };\r\n    SuggestWidget.prototype.getPosition = function () {\r\n        if (this.state === 0 /* Hidden */) {\r\n            return null;\r\n        }\r\n        var preference = [2 /* BELOW */, 1 /* ABOVE */];\r\n        if (this.preferDocPositionTop) {\r\n            preference = [1 /* ABOVE */];\r\n        }\r\n        return {\r\n            position: this.editor.getPosition(),\r\n            preference: preference\r\n        };\r\n    };\r\n    SuggestWidget.prototype.getDomNode = function () {\r\n        return this.element;\r\n    };\r\n    SuggestWidget.prototype.getId = function () {\r\n        return SuggestWidget.ID;\r\n    };\r\n    SuggestWidget.prototype.isFrozen = function () {\r\n        return this.state === 4 /* Frozen */;\r\n    };\r\n    SuggestWidget.prototype.updateListHeight = function () {\r\n        var height = 0;\r\n        if (this.state === 2 /* Empty */ || this.state === 1 /* Loading */) {\r\n            height = this.unfocusedHeight;\r\n        }\r\n        else {\r\n            var suggestionCount = this.list.contentHeight / this.unfocusedHeight;\r\n            var maxVisibleSuggestions = this.editor.getOption(85 /* suggest */).maxVisibleSuggestions;\r\n            height = Math.min(suggestionCount, maxVisibleSuggestions) * this.unfocusedHeight;\r\n        }\r\n        this.element.style.lineHeight = this.unfocusedHeight + \"px\";\r\n        this.listElement.style.height = height + \"px\";\r\n        this.list.layout(height);\r\n        return height;\r\n    };\r\n    /**\r\n     * Adds the propert classes, margins when positioning the docs to the side\r\n     */\r\n    SuggestWidget.prototype.adjustDocsPosition = function () {\r\n        if (!this.editor.hasModel()) {\r\n            return;\r\n        }\r\n        var lineHeight = this.editor.getOption(47 /* lineHeight */);\r\n        var cursorCoords = this.editor.getScrolledVisiblePosition(this.editor.getPosition());\r\n        var editorCoords = getDomNodePagePosition(this.editor.getDomNode());\r\n        var cursorX = editorCoords.left + cursorCoords.left;\r\n        var cursorY = editorCoords.top + cursorCoords.top + cursorCoords.height;\r\n        var widgetCoords = getDomNodePagePosition(this.element);\r\n        var widgetX = widgetCoords.left;\r\n        var widgetY = widgetCoords.top;\r\n        // Fixes #27649\r\n        // Check if the Y changed to the top of the cursor and keep the widget flagged to prefer top\r\n        if (this.docsPositionPreviousWidgetY &&\r\n            this.docsPositionPreviousWidgetY < widgetY &&\r\n            !this.preferDocPositionTop) {\r\n            this.preferDocPositionTop = true;\r\n            this.adjustDocsPosition();\r\n            return;\r\n        }\r\n        this.docsPositionPreviousWidgetY = widgetY;\r\n        if (widgetX < cursorX - this.listWidth) {\r\n            // Widget is too far to the left of cursor, swap list and docs\r\n            addClass(this.element, 'list-right');\r\n        }\r\n        else {\r\n            removeClass(this.element, 'list-right');\r\n        }\r\n        // Compare top of the cursor (cursorY - lineheight) with widgetTop to determine if\r\n        // margin-top needs to be applied on list to make it appear right above the cursor\r\n        // Cannot compare cursorY directly as it may be a few decimals off due to zoooming\r\n        if (hasClass(this.element, 'docs-side')\r\n            && cursorY - lineHeight > widgetY\r\n            && this.details.element.offsetHeight > this.listElement.offsetHeight) {\r\n            // Fix for #26416\r\n            // Docs is bigger than list and widget is above cursor, apply margin-top so that list appears right above cursor\r\n            this.listElement.style.marginTop = this.details.element.offsetHeight - this.listElement.offsetHeight + \"px\";\r\n        }\r\n    };\r\n    /**\r\n     * Adds the proper classes for positioning the docs to the side or below\r\n     */\r\n    SuggestWidget.prototype.expandSideOrBelow = function () {\r\n        if (!canExpandCompletionItem(this.focusedItem) && this.firstFocusInCurrentList) {\r\n            removeClass(this.element, 'docs-side');\r\n            removeClass(this.element, 'docs-below');\r\n            return;\r\n        }\r\n        var matches = this.element.style.maxWidth.match(/(\\d+)px/);\r\n        if (!matches || Number(matches[1]) < this.maxWidgetWidth) {\r\n            addClass(this.element, 'docs-below');\r\n            removeClass(this.element, 'docs-side');\r\n        }\r\n        else if (canExpandCompletionItem(this.focusedItem)) {\r\n            addClass(this.element, 'docs-side');\r\n            removeClass(this.element, 'docs-below');\r\n        }\r\n    };\r\n    Object.defineProperty(SuggestWidget.prototype, \"maxWidgetHeight\", {\r\n        // Heights\r\n        get: function () {\r\n            return this.unfocusedHeight * this.editor.getOption(85 /* suggest */).maxVisibleSuggestions;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(SuggestWidget.prototype, \"unfocusedHeight\", {\r\n        get: function () {\r\n            var options = this.editor.getOptions();\r\n            return options.get(87 /* suggestLineHeight */) || options.get(32 /* fontInfo */).lineHeight;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    // IDelegate\r\n    SuggestWidget.prototype.getHeight = function (element) {\r\n        return this.unfocusedHeight;\r\n    };\r\n    SuggestWidget.prototype.getTemplateId = function (element) {\r\n        return 'suggestion';\r\n    };\r\n    SuggestWidget.prototype.expandDocsSettingFromStorage = function () {\r\n        return this.storageService.getBoolean('expandSuggestionDocs', 0 /* GLOBAL */, expandSuggestionDocsByDefault);\r\n    };\r\n    SuggestWidget.prototype.updateExpandDocsSetting = function (value) {\r\n        this.storageService.store('expandSuggestionDocs', value, 0 /* GLOBAL */);\r\n    };\r\n    SuggestWidget.prototype.dispose = function () {\r\n        this.details.dispose();\r\n        this.list.dispose();\r\n        this.toDispose.dispose();\r\n        this.loadingTimeout.dispose();\r\n        this.showTimeout.dispose();\r\n    };\r\n    SuggestWidget.ID = 'editor.widget.suggestWidget';\r\n    SuggestWidget.LOADING_MESSAGE = nls.localize('suggestWidget.loading', \"Loading...\");\r\n    SuggestWidget.NO_SUGGESTIONS_MESSAGE = nls.localize('suggestWidget.noSuggestions', \"No suggestions.\");\r\n    SuggestWidget = __decorate([\r\n        __param(1, ITelemetryService),\r\n        __param(2, IContextKeyService),\r\n        __param(3, IThemeService),\r\n        __param(4, IStorageService),\r\n        __param(5, IKeybindingService),\r\n        __param(6, IModeService),\r\n        __param(7, IOpenerService),\r\n        __param(8, IInstantiationService)\r\n    ], SuggestWidget);\r\n    return SuggestWidget;\r\n}());\r\nexport { SuggestWidget };\r\nregisterThemingParticipant(function (theme, collector) {\r\n    var matchHighlight = theme.getColor(editorSuggestWidgetHighlightForeground);\r\n    if (matchHighlight) {\r\n        collector.addRule(\".monaco-editor .suggest-widget .monaco-list .monaco-list-row .monaco-highlighted-label .highlight { color: \" + matchHighlight + \"; }\");\r\n    }\r\n    var foreground = theme.getColor(editorSuggestWidgetForeground);\r\n    if (foreground) {\r\n        collector.addRule(\".monaco-editor .suggest-widget { color: \" + foreground + \"; }\");\r\n    }\r\n    var link = theme.getColor(textLinkForeground);\r\n    if (link) {\r\n        collector.addRule(\".monaco-editor .suggest-widget a { color: \" + link + \"; }\");\r\n    }\r\n    var codeBackground = theme.getColor(textCodeBlockBackground);\r\n    if (codeBackground) {\r\n        collector.addRule(\".monaco-editor .suggest-widget code { background-color: \" + codeBackground + \"; }\");\r\n    }\r\n});\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nimport { RawContextKey, IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { dispose, Disposable } from '../../../base/common/lifecycle.js';\r\nvar WordContextKey = /** @class */ (function (_super) {\r\n    __extends(WordContextKey, _super);\r\n    function WordContextKey(_editor, contextKeyService) {\r\n        var _this = _super.call(this) || this;\r\n        _this._editor = _editor;\r\n        _this._enabled = false;\r\n        _this._ckAtEnd = WordContextKey.AtEnd.bindTo(contextKeyService);\r\n        _this._register(_this._editor.onDidChangeConfiguration(function (e) { return e.hasChanged(90 /* tabCompletion */) && _this._update(); }));\r\n        _this._update();\r\n        return _this;\r\n    }\r\n    WordContextKey.prototype.dispose = function () {\r\n        _super.prototype.dispose.call(this);\r\n        dispose(this._selectionListener);\r\n        this._ckAtEnd.reset();\r\n    };\r\n    WordContextKey.prototype._update = function () {\r\n        var _this = this;\r\n        // only update this when tab completions are enabled\r\n        var enabled = this._editor.getOption(90 /* tabCompletion */) === 'on';\r\n        if (this._enabled === enabled) {\r\n            return;\r\n        }\r\n        this._enabled = enabled;\r\n        if (this._enabled) {\r\n            var checkForWordEnd = function () {\r\n                if (!_this._editor.hasModel()) {\r\n                    _this._ckAtEnd.set(false);\r\n                    return;\r\n                }\r\n                var model = _this._editor.getModel();\r\n                var selection = _this._editor.getSelection();\r\n                var word = model.getWordAtPosition(selection.getStartPosition());\r\n                if (!word) {\r\n                    _this._ckAtEnd.set(false);\r\n                    return;\r\n                }\r\n                _this._ckAtEnd.set(word.endColumn === selection.getStartPosition().column);\r\n            };\r\n            this._selectionListener = this._editor.onDidChangeCursorSelection(checkForWordEnd);\r\n            checkForWordEnd();\r\n        }\r\n        else if (this._selectionListener) {\r\n            this._ckAtEnd.reset();\r\n            this._selectionListener.dispose();\r\n            this._selectionListener = undefined;\r\n        }\r\n    };\r\n    WordContextKey.AtEnd = new RawContextKey('atEndOfWord', false);\r\n    WordContextKey = __decorate([\r\n        __param(1, IContextKeyService)\r\n    ], WordContextKey);\r\n    return WordContextKey;\r\n}(Disposable));\r\nexport { WordContextKey };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { isNonEmptyArray } from '../../../base/common/arrays.js';\r\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\r\nimport { CharacterSet } from '../../common/core/characterClassifier.js';\r\nvar CommitCharacterController = /** @class */ (function () {\r\n    function CommitCharacterController(editor, widget, accept) {\r\n        var _this = this;\r\n        this._disposables = new DisposableStore();\r\n        this._disposables.add(widget.onDidShow(function () { return _this._onItem(widget.getFocusedItem()); }));\r\n        this._disposables.add(widget.onDidFocus(this._onItem, this));\r\n        this._disposables.add(widget.onDidHide(this.reset, this));\r\n        this._disposables.add(editor.onWillType(function (text) {\r\n            if (_this._active && !widget.isFrozen()) {\r\n                var ch = text.charCodeAt(text.length - 1);\r\n                if (_this._active.acceptCharacters.has(ch) && editor.getOption(0 /* acceptSuggestionOnCommitCharacter */)) {\r\n                    accept(_this._active.item);\r\n                }\r\n            }\r\n        }));\r\n    }\r\n    CommitCharacterController.prototype._onItem = function (selected) {\r\n        if (!selected || !isNonEmptyArray(selected.item.completion.commitCharacters)) {\r\n            // no item or no commit characters\r\n            this.reset();\r\n            return;\r\n        }\r\n        if (this._active && this._active.item.item === selected.item) {\r\n            // still the same item\r\n            return;\r\n        }\r\n        // keep item and its commit characters\r\n        var acceptCharacters = new CharacterSet();\r\n        for (var _i = 0, _a = selected.item.completion.commitCharacters; _i < _a.length; _i++) {\r\n            var ch = _a[_i];\r\n            if (ch.length > 0) {\r\n                acceptCharacters.add(ch.charCodeAt(0));\r\n            }\r\n        }\r\n        this._active = { acceptCharacters: acceptCharacters, item: selected };\r\n    };\r\n    CommitCharacterController.prototype.reset = function () {\r\n        this._active = undefined;\r\n    };\r\n    CommitCharacterController.prototype.dispose = function () {\r\n        this._disposables.dispose();\r\n    };\r\n    return CommitCharacterController;\r\n}());\r\nexport { CommitCharacterController };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { DisposableStore, dispose } from '../../../base/common/lifecycle.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { Emitter } from '../../../base/common/event.js';\r\nimport { domEvent } from '../../../base/browser/event.js';\r\nvar SuggestRangeHighlighter = /** @class */ (function () {\r\n    function SuggestRangeHighlighter(_controller) {\r\n        var _this = this;\r\n        this._controller = _controller;\r\n        this._disposables = new DisposableStore();\r\n        this._decorations = [];\r\n        this._disposables.add(_controller.model.onDidSuggest(function (e) {\r\n            if (!e.shy) {\r\n                var widget = _this._controller.widget.getValue();\r\n                var focused = widget.getFocusedItem();\r\n                if (focused) {\r\n                    _this._highlight(focused.item);\r\n                }\r\n                if (!_this._widgetListener) {\r\n                    _this._widgetListener = widget.onDidFocus(function (e) { return _this._highlight(e.item); });\r\n                }\r\n            }\r\n        }));\r\n        this._disposables.add(_controller.model.onDidCancel(function () {\r\n            _this._reset();\r\n        }));\r\n    }\r\n    SuggestRangeHighlighter.prototype.dispose = function () {\r\n        this._reset();\r\n        this._disposables.dispose();\r\n        dispose(this._widgetListener);\r\n        dispose(this._shiftKeyListener);\r\n    };\r\n    SuggestRangeHighlighter.prototype._reset = function () {\r\n        this._decorations = this._controller.editor.deltaDecorations(this._decorations, []);\r\n        if (this._shiftKeyListener) {\r\n            this._shiftKeyListener.dispose();\r\n            this._shiftKeyListener = undefined;\r\n        }\r\n    };\r\n    SuggestRangeHighlighter.prototype._highlight = function (item) {\r\n        var _this = this;\r\n        var _a;\r\n        this._currentItem = item;\r\n        var opts = this._controller.editor.getOption(85 /* suggest */);\r\n        var newDeco = [];\r\n        if (opts.insertHighlight) {\r\n            if (!this._shiftKeyListener) {\r\n                this._shiftKeyListener = shiftKey.event(function () { return _this._highlight(_this._currentItem); });\r\n            }\r\n            var info = this._controller.getOverwriteInfo(item, shiftKey.isPressed);\r\n            var position = this._controller.editor.getPosition();\r\n            if (opts.insertMode === 'insert' && info.overwriteAfter > 0) {\r\n                // wants inserts but got replace-mode -> highlight AFTER range\r\n                newDeco = [{\r\n                        range: new Range(position.lineNumber, position.column, position.lineNumber, position.column + info.overwriteAfter),\r\n                        options: { inlineClassName: 'suggest-insert-unexpected' }\r\n                    }];\r\n            }\r\n            else if (opts.insertMode === 'replace' && info.overwriteAfter === 0) {\r\n                // want replace but likely got insert -> highlight AFTER range\r\n                var wordInfo = (_a = this._controller.editor.getModel()) === null || _a === void 0 ? void 0 : _a.getWordAtPosition(position);\r\n                if (wordInfo && wordInfo.endColumn > position.column) {\r\n                    newDeco = [{\r\n                            range: new Range(position.lineNumber, position.column, position.lineNumber, wordInfo.endColumn),\r\n                            options: { inlineClassName: 'suggest-insert-unexpected' }\r\n                        }];\r\n                }\r\n            }\r\n        }\r\n        // update editor decorations\r\n        this._decorations = this._controller.editor.deltaDecorations(this._decorations, newDeco);\r\n    };\r\n    return SuggestRangeHighlighter;\r\n}());\r\nexport { SuggestRangeHighlighter };\r\nvar shiftKey = new /** @class */ (function (_super) {\r\n    __extends(ShiftKey, _super);\r\n    function ShiftKey() {\r\n        var _this = _super.call(this) || this;\r\n        _this._subscriptions = new DisposableStore();\r\n        _this._isPressed = false;\r\n        _this._subscriptions.add(domEvent(document.body, 'keydown')(function (e) { return _this.isPressed = e.shiftKey; }));\r\n        _this._subscriptions.add(domEvent(document.body, 'keyup')(function () { return _this.isPressed = false; }));\r\n        _this._subscriptions.add(domEvent(document.body, 'mouseleave')(function () { return _this.isPressed = false; }));\r\n        _this._subscriptions.add(domEvent(document.body, 'blur')(function () { return _this.isPressed = false; }));\r\n        return _this;\r\n    }\r\n    Object.defineProperty(ShiftKey.prototype, \"isPressed\", {\r\n        get: function () {\r\n            return this._isPressed;\r\n        },\r\n        set: function (value) {\r\n            if (this._isPressed !== value) {\r\n                this._isPressed = value;\r\n                this.fire(value);\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ShiftKey.prototype.dispose = function () {\r\n        this._subscriptions.dispose();\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    return ShiftKey;\r\n}(Emitter));\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n};\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nimport { alert } from '../../../base/browser/ui/aria/aria.js';\r\nimport { isNonEmptyArray } from '../../../base/common/arrays.js';\r\nimport { onUnexpectedError } from '../../../base/common/errors.js';\r\nimport { SimpleKeybinding } from '../../../base/common/keyCodes.js';\r\nimport { dispose, DisposableStore, toDisposable, MutableDisposable } from '../../../base/common/lifecycle.js';\r\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../browser/editorExtensions.js';\r\nimport { EditOperation } from '../../common/core/editOperation.js';\r\nimport { Range } from '../../common/core/range.js';\r\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\r\nimport { SnippetController2 } from '../snippet/snippetController2.js';\r\nimport { SnippetParser } from '../snippet/snippetParser.js';\r\nimport { ISuggestMemoryService } from './suggestMemory.js';\r\nimport * as nls from '../../../nls.js';\r\nimport { ICommandService, CommandsRegistry } from '../../../platform/commands/common/commands.js';\r\nimport { ContextKeyExpr, IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\r\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\r\nimport { KeybindingsRegistry } from '../../../platform/keybinding/common/keybindingsRegistry.js';\r\nimport { Context as SuggestContext } from './suggest.js';\r\nimport { SuggestAlternatives } from './suggestAlternatives.js';\r\nimport { SuggestModel } from './suggestModel.js';\r\nimport { SuggestWidget } from './suggestWidget.js';\r\nimport { WordContextKey } from './wordContextKey.js';\r\nimport { Event } from '../../../base/common/event.js';\r\nimport { IEditorWorkerService } from '../../common/services/editorWorkerService.js';\r\nimport { IdleValue } from '../../../base/common/async.js';\r\nimport { isObject, assertType } from '../../../base/common/types.js';\r\nimport { CommitCharacterController } from './suggestCommitCharacters.js';\r\nimport * as platform from '../../../base/common/platform.js';\r\nimport { SuggestRangeHighlighter } from './suggestRangeHighlighter.js';\r\n/**\r\n * Stop suggest widget from disappearing when clicking into other areas\r\n * For development purpose only\r\n */\r\nvar _sticky = false;\r\nvar LineSuffix = /** @class */ (function () {\r\n    function LineSuffix(_model, _position) {\r\n        this._model = _model;\r\n        this._position = _position;\r\n        // spy on what's happening right of the cursor. two cases:\r\n        // 1. end of line -> check that it's still end of line\r\n        // 2. mid of line -> add a marker and compute the delta\r\n        var maxColumn = _model.getLineMaxColumn(_position.lineNumber);\r\n        if (maxColumn !== _position.column) {\r\n            var offset = _model.getOffsetAt(_position);\r\n            var end = _model.getPositionAt(offset + 1);\r\n            this._marker = _model.deltaDecorations([], [{\r\n                    range: Range.fromPositions(_position, end),\r\n                    options: { stickiness: 1 /* NeverGrowsWhenTypingAtEdges */ }\r\n                }]);\r\n        }\r\n    }\r\n    LineSuffix.prototype.dispose = function () {\r\n        if (this._marker && !this._model.isDisposed()) {\r\n            this._model.deltaDecorations(this._marker, []);\r\n        }\r\n    };\r\n    LineSuffix.prototype.delta = function (position) {\r\n        if (this._model.isDisposed() || this._position.lineNumber !== position.lineNumber) {\r\n            // bail out early if things seems fishy\r\n            return 0;\r\n        }\r\n        // read the marker (in case suggest was triggered at line end) or compare\r\n        // the cursor to the line end.\r\n        if (this._marker) {\r\n            var range = this._model.getDecorationRange(this._marker[0]);\r\n            var end = this._model.getOffsetAt(range.getStartPosition());\r\n            return end - this._model.getOffsetAt(position);\r\n        }\r\n        else {\r\n            return this._model.getLineMaxColumn(position.lineNumber) - position.column;\r\n        }\r\n    };\r\n    return LineSuffix;\r\n}());\r\nvar SuggestController = /** @class */ (function () {\r\n    function SuggestController(editor, editorWorker, _memoryService, _commandService, _contextKeyService, _instantiationService) {\r\n        var _this = this;\r\n        this._memoryService = _memoryService;\r\n        this._commandService = _commandService;\r\n        this._contextKeyService = _contextKeyService;\r\n        this._instantiationService = _instantiationService;\r\n        this._lineSuffix = new MutableDisposable();\r\n        this._toDispose = new DisposableStore();\r\n        this.editor = editor;\r\n        this.model = new SuggestModel(this.editor, editorWorker);\r\n        this.widget = new IdleValue(function () {\r\n            var widget = _this._instantiationService.createInstance(SuggestWidget, _this.editor);\r\n            _this._toDispose.add(widget);\r\n            _this._toDispose.add(widget.onDidSelect(function (item) { return _this._insertSuggestion(item, 0); }, _this));\r\n            // Wire up logic to accept a suggestion on certain characters\r\n            var commitCharacterController = new CommitCharacterController(_this.editor, widget, function (item) { return _this._insertSuggestion(item, 2 /* NoAfterUndoStop */); });\r\n            _this._toDispose.add(commitCharacterController);\r\n            _this._toDispose.add(_this.model.onDidSuggest(function (e) {\r\n                if (e.completionModel.items.length === 0) {\r\n                    commitCharacterController.reset();\r\n                }\r\n            }));\r\n            // Wire up makes text edit context key\r\n            var makesTextEdit = SuggestContext.MakesTextEdit.bindTo(_this._contextKeyService);\r\n            _this._toDispose.add(widget.onDidFocus(function (_a) {\r\n                var item = _a.item;\r\n                var position = _this.editor.getPosition();\r\n                var startColumn = item.editStart.column;\r\n                var endColumn = position.column;\r\n                var value = true;\r\n                if (_this.editor.getOption(1 /* acceptSuggestionOnEnter */) === 'smart'\r\n                    && _this.model.state === 2 /* Auto */\r\n                    && !item.completion.command\r\n                    && !item.completion.additionalTextEdits\r\n                    && !(item.completion.insertTextRules & 4 /* InsertAsSnippet */)\r\n                    && endColumn - startColumn === item.completion.insertText.length) {\r\n                    var oldText = _this.editor.getModel().getValueInRange({\r\n                        startLineNumber: position.lineNumber,\r\n                        startColumn: startColumn,\r\n                        endLineNumber: position.lineNumber,\r\n                        endColumn: endColumn\r\n                    });\r\n                    value = oldText !== item.completion.insertText;\r\n                }\r\n                makesTextEdit.set(value);\r\n            }));\r\n            _this._toDispose.add(toDisposable(function () { return makesTextEdit.reset(); }));\r\n            return widget;\r\n        });\r\n        this._alternatives = new IdleValue(function () {\r\n            return _this._toDispose.add(new SuggestAlternatives(_this.editor, _this._contextKeyService));\r\n        });\r\n        this._toDispose.add(_instantiationService.createInstance(WordContextKey, editor));\r\n        this._toDispose.add(this.model.onDidTrigger(function (e) {\r\n            _this.widget.getValue().showTriggered(e.auto, e.shy ? 250 : 50);\r\n            _this._lineSuffix.value = new LineSuffix(_this.editor.getModel(), e.position);\r\n        }));\r\n        this._toDispose.add(this.model.onDidSuggest(function (e) {\r\n            if (!e.shy) {\r\n                var index = _this._memoryService.select(_this.editor.getModel(), _this.editor.getPosition(), e.completionModel.items);\r\n                _this.widget.getValue().showSuggestions(e.completionModel, index, e.isFrozen, e.auto);\r\n            }\r\n        }));\r\n        this._toDispose.add(this.model.onDidCancel(function (e) {\r\n            if (!e.retrigger) {\r\n                _this.widget.getValue().hideWidget();\r\n            }\r\n        }));\r\n        this._toDispose.add(this.editor.onDidBlurEditorWidget(function () {\r\n            if (!_sticky) {\r\n                _this.model.cancel();\r\n                _this.model.clear();\r\n            }\r\n        }));\r\n        this._toDispose.add(this.widget.getValue().onDetailsKeyDown(function (e) {\r\n            // cmd + c on macOS, ctrl + c on Win / Linux\r\n            if (e.toKeybinding().equals(new SimpleKeybinding(true, false, false, false, 33 /* KEY_C */)) ||\r\n                (platform.isMacintosh && e.toKeybinding().equals(new SimpleKeybinding(false, false, false, true, 33 /* KEY_C */)))) {\r\n                e.stopPropagation();\r\n                return;\r\n            }\r\n            if (!e.toKeybinding().isModifierKey()) {\r\n                _this.editor.focus();\r\n            }\r\n        }));\r\n        // Manage the acceptSuggestionsOnEnter context key\r\n        var acceptSuggestionsOnEnter = SuggestContext.AcceptSuggestionsOnEnter.bindTo(_contextKeyService);\r\n        var updateFromConfig = function () {\r\n            var acceptSuggestionOnEnter = _this.editor.getOption(1 /* acceptSuggestionOnEnter */);\r\n            acceptSuggestionsOnEnter.set(acceptSuggestionOnEnter === 'on' || acceptSuggestionOnEnter === 'smart');\r\n        };\r\n        this._toDispose.add(this.editor.onDidChangeConfiguration(function () { return updateFromConfig(); }));\r\n        updateFromConfig();\r\n        // create range highlighter\r\n        this._toDispose.add(new SuggestRangeHighlighter(this));\r\n    }\r\n    SuggestController.get = function (editor) {\r\n        return editor.getContribution(SuggestController.ID);\r\n    };\r\n    SuggestController.prototype.dispose = function () {\r\n        this._alternatives.dispose();\r\n        this._toDispose.dispose();\r\n        this.widget.dispose();\r\n        this.model.dispose();\r\n        this._lineSuffix.dispose();\r\n    };\r\n    SuggestController.prototype._insertSuggestion = function (event, flags) {\r\n        var _a;\r\n        var _this = this;\r\n        if (!event || !event.item) {\r\n            this._alternatives.getValue().reset();\r\n            this.model.cancel();\r\n            this.model.clear();\r\n            return;\r\n        }\r\n        if (!this.editor.hasModel()) {\r\n            return;\r\n        }\r\n        var model = this.editor.getModel();\r\n        var modelVersionNow = model.getAlternativeVersionId();\r\n        var item = event.item;\r\n        var suggestion = item.completion;\r\n        // pushing undo stops *before* additional text edits and\r\n        // *after* the main edit\r\n        if (!(flags & 1 /* NoBeforeUndoStop */)) {\r\n            this.editor.pushUndoStop();\r\n        }\r\n        // compute overwrite[Before|After] deltas BEFORE applying extra edits\r\n        var info = this.getOverwriteInfo(item, Boolean(flags & 8 /* AlternativeOverwriteConfig */));\r\n        // keep item in memory\r\n        this._memoryService.memorize(model, this.editor.getPosition(), item);\r\n        if (Array.isArray(suggestion.additionalTextEdits)) {\r\n            this.editor.executeEdits('suggestController.additionalTextEdits', suggestion.additionalTextEdits.map(function (edit) { return EditOperation.replace(Range.lift(edit.range), edit.text); }));\r\n        }\r\n        var insertText = suggestion.insertText;\r\n        if (!(suggestion.insertTextRules & 4 /* InsertAsSnippet */)) {\r\n            insertText = SnippetParser.escape(insertText);\r\n        }\r\n        SnippetController2.get(this.editor).insert(insertText, {\r\n            overwriteBefore: info.overwriteBefore,\r\n            overwriteAfter: info.overwriteAfter,\r\n            undoStopBefore: false,\r\n            undoStopAfter: false,\r\n            adjustWhitespace: !(suggestion.insertTextRules & 1 /* KeepWhitespace */)\r\n        });\r\n        if (!(flags & 2 /* NoAfterUndoStop */)) {\r\n            this.editor.pushUndoStop();\r\n        }\r\n        if (!suggestion.command) {\r\n            // done\r\n            this.model.cancel();\r\n            this.model.clear();\r\n        }\r\n        else if (suggestion.command.id === TriggerSuggestAction.id) {\r\n            // retigger\r\n            this.model.trigger({ auto: true, shy: false }, true);\r\n        }\r\n        else {\r\n            // exec command, done\r\n            (_a = this._commandService).executeCommand.apply(_a, __spreadArrays([suggestion.command.id], (suggestion.command.arguments ? __spreadArrays(suggestion.command.arguments) : []))).catch(onUnexpectedError)\r\n                .finally(function () { return _this.model.clear(); }); // <- clear only now, keep commands alive\r\n            this.model.cancel();\r\n        }\r\n        if (flags & 4 /* KeepAlternativeSuggestions */) {\r\n            this._alternatives.getValue().set(event, function (next) {\r\n                // this is not so pretty. when inserting the 'next'\r\n                // suggestion we undo until we are at the state at\r\n                // which we were before inserting the previous suggestion...\r\n                while (model.canUndo()) {\r\n                    if (modelVersionNow !== model.getAlternativeVersionId()) {\r\n                        model.undo();\r\n                    }\r\n                    _this._insertSuggestion(next, 1 /* NoBeforeUndoStop */ | 2 /* NoAfterUndoStop */ | (flags & 8 /* AlternativeOverwriteConfig */ ? 8 /* AlternativeOverwriteConfig */ : 0));\r\n                    break;\r\n                }\r\n            });\r\n        }\r\n        this._alertCompletionItem(event.item);\r\n    };\r\n    SuggestController.prototype.getOverwriteInfo = function (item, toggleMode) {\r\n        assertType(this.editor.hasModel());\r\n        var replace = this.editor.getOption(85 /* suggest */).insertMode === 'replace';\r\n        if (toggleMode) {\r\n            replace = !replace;\r\n        }\r\n        var overwriteBefore = item.position.column - item.editStart.column;\r\n        var overwriteAfter = (replace ? item.editReplaceEnd.column : item.editInsertEnd.column) - item.position.column;\r\n        var columnDelta = this.editor.getPosition().column - item.position.column;\r\n        var suffixDelta = this._lineSuffix.value ? this._lineSuffix.value.delta(this.editor.getPosition()) : 0;\r\n        return {\r\n            overwriteBefore: overwriteBefore + columnDelta,\r\n            overwriteAfter: overwriteAfter + suffixDelta\r\n        };\r\n    };\r\n    SuggestController.prototype._alertCompletionItem = function (_a) {\r\n        var suggestion = _a.completion;\r\n        if (isNonEmptyArray(suggestion.additionalTextEdits)) {\r\n            var msg = nls.localize('arai.alert.snippet', \"Accepting '{0}' made {1} additional edits\", suggestion.label, suggestion.additionalTextEdits.length);\r\n            alert(msg);\r\n        }\r\n    };\r\n    SuggestController.prototype.triggerSuggest = function (onlyFrom) {\r\n        if (this.editor.hasModel()) {\r\n            this.model.trigger({ auto: false, shy: false }, false, onlyFrom);\r\n            this.editor.revealLine(this.editor.getPosition().lineNumber, 0 /* Smooth */);\r\n            this.editor.focus();\r\n        }\r\n    };\r\n    SuggestController.prototype.triggerSuggestAndAcceptBest = function (arg) {\r\n        var _this = this;\r\n        if (!this.editor.hasModel()) {\r\n            return;\r\n        }\r\n        var positionNow = this.editor.getPosition();\r\n        var fallback = function () {\r\n            if (positionNow.equals(_this.editor.getPosition())) {\r\n                _this._commandService.executeCommand(arg.fallback);\r\n            }\r\n        };\r\n        var makesTextEdit = function (item) {\r\n            if (item.completion.insertTextRules & 4 /* InsertAsSnippet */ || item.completion.additionalTextEdits) {\r\n                // snippet, other editor -> makes edit\r\n                return true;\r\n            }\r\n            var position = _this.editor.getPosition();\r\n            var startColumn = item.editStart.column;\r\n            var endColumn = position.column;\r\n            if (endColumn - startColumn !== item.completion.insertText.length) {\r\n                // unequal lengths -> makes edit\r\n                return true;\r\n            }\r\n            var textNow = _this.editor.getModel().getValueInRange({\r\n                startLineNumber: position.lineNumber,\r\n                startColumn: startColumn,\r\n                endLineNumber: position.lineNumber,\r\n                endColumn: endColumn\r\n            });\r\n            // unequal text -> makes edit\r\n            return textNow !== item.completion.insertText;\r\n        };\r\n        Event.once(this.model.onDidTrigger)(function (_) {\r\n            // wait for trigger because only then the cancel-event is trustworthy\r\n            var listener = [];\r\n            Event.any(_this.model.onDidTrigger, _this.model.onDidCancel)(function () {\r\n                // retrigger or cancel -> try to type default text\r\n                dispose(listener);\r\n                fallback();\r\n            }, undefined, listener);\r\n            _this.model.onDidSuggest(function (_a) {\r\n                var completionModel = _a.completionModel;\r\n                dispose(listener);\r\n                if (completionModel.items.length === 0) {\r\n                    fallback();\r\n                    return;\r\n                }\r\n                var index = _this._memoryService.select(_this.editor.getModel(), _this.editor.getPosition(), completionModel.items);\r\n                var item = completionModel.items[index];\r\n                if (!makesTextEdit(item)) {\r\n                    fallback();\r\n                    return;\r\n                }\r\n                _this.editor.pushUndoStop();\r\n                _this._insertSuggestion({ index: index, item: item, model: completionModel }, 4 /* KeepAlternativeSuggestions */ | 1 /* NoBeforeUndoStop */ | 2 /* NoAfterUndoStop */);\r\n            }, undefined, listener);\r\n        });\r\n        this.model.trigger({ auto: false, shy: true });\r\n        this.editor.revealLine(positionNow.lineNumber, 0 /* Smooth */);\r\n        this.editor.focus();\r\n    };\r\n    SuggestController.prototype.acceptSelectedSuggestion = function (keepAlternativeSuggestions, alternativeOverwriteConfig) {\r\n        var item = this.widget.getValue().getFocusedItem();\r\n        var flags = 0;\r\n        if (keepAlternativeSuggestions) {\r\n            flags |= 4 /* KeepAlternativeSuggestions */;\r\n        }\r\n        if (alternativeOverwriteConfig) {\r\n            flags |= 8 /* AlternativeOverwriteConfig */;\r\n        }\r\n        this._insertSuggestion(item, flags);\r\n    };\r\n    SuggestController.prototype.acceptNextSuggestion = function () {\r\n        this._alternatives.getValue().next();\r\n    };\r\n    SuggestController.prototype.acceptPrevSuggestion = function () {\r\n        this._alternatives.getValue().prev();\r\n    };\r\n    SuggestController.prototype.cancelSuggestWidget = function () {\r\n        this.model.cancel();\r\n        this.model.clear();\r\n        this.widget.getValue().hideWidget();\r\n    };\r\n    SuggestController.prototype.selectNextSuggestion = function () {\r\n        this.widget.getValue().selectNext();\r\n    };\r\n    SuggestController.prototype.selectNextPageSuggestion = function () {\r\n        this.widget.getValue().selectNextPage();\r\n    };\r\n    SuggestController.prototype.selectLastSuggestion = function () {\r\n        this.widget.getValue().selectLast();\r\n    };\r\n    SuggestController.prototype.selectPrevSuggestion = function () {\r\n        this.widget.getValue().selectPrevious();\r\n    };\r\n    SuggestController.prototype.selectPrevPageSuggestion = function () {\r\n        this.widget.getValue().selectPreviousPage();\r\n    };\r\n    SuggestController.prototype.selectFirstSuggestion = function () {\r\n        this.widget.getValue().selectFirst();\r\n    };\r\n    SuggestController.prototype.toggleSuggestionDetails = function () {\r\n        this.widget.getValue().toggleDetails();\r\n    };\r\n    SuggestController.prototype.toggleExplainMode = function () {\r\n        this.widget.getValue().toggleExplainMode();\r\n    };\r\n    SuggestController.prototype.toggleSuggestionFocus = function () {\r\n        this.widget.getValue().toggleDetailsFocus();\r\n    };\r\n    SuggestController.ID = 'editor.contrib.suggestController';\r\n    SuggestController = __decorate([\r\n        __param(1, IEditorWorkerService),\r\n        __param(2, ISuggestMemoryService),\r\n        __param(3, ICommandService),\r\n        __param(4, IContextKeyService),\r\n        __param(5, IInstantiationService)\r\n    ], SuggestController);\r\n    return SuggestController;\r\n}());\r\nexport { SuggestController };\r\nvar TriggerSuggestAction = /** @class */ (function (_super) {\r\n    __extends(TriggerSuggestAction, _super);\r\n    function TriggerSuggestAction() {\r\n        return _super.call(this, {\r\n            id: TriggerSuggestAction.id,\r\n            label: nls.localize('suggest.trigger.label', \"Trigger Suggest\"),\r\n            alias: 'Trigger Suggest',\r\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCompletionItemProvider),\r\n            kbOpts: {\r\n                kbExpr: EditorContextKeys.textInputFocus,\r\n                primary: 2048 /* CtrlCmd */ | 10 /* Space */,\r\n                mac: { primary: 256 /* WinCtrl */ | 10 /* Space */, secondary: [512 /* Alt */ | 9 /* Escape */] },\r\n                weight: 100 /* EditorContrib */\r\n            }\r\n        }) || this;\r\n    }\r\n    TriggerSuggestAction.prototype.run = function (accessor, editor) {\r\n        var controller = SuggestController.get(editor);\r\n        if (!controller) {\r\n            return;\r\n        }\r\n        controller.triggerSuggest();\r\n    };\r\n    TriggerSuggestAction.id = 'editor.action.triggerSuggest';\r\n    return TriggerSuggestAction;\r\n}(EditorAction));\r\nexport { TriggerSuggestAction };\r\nregisterEditorContribution(SuggestController.ID, SuggestController);\r\nregisterEditorAction(TriggerSuggestAction);\r\nvar weight = 100 /* EditorContrib */ + 90;\r\nvar SuggestCommand = EditorCommand.bindToContribution(SuggestController.get);\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'acceptSelectedSuggestion',\r\n    precondition: SuggestContext.Visible,\r\n    handler: function (x, args) {\r\n        var alternative = typeof args === 'object' && typeof args.alternative === 'boolean'\r\n            ? args.alternative\r\n            : false;\r\n        x.acceptSelectedSuggestion(true, alternative);\r\n    }\r\n}));\r\n// normal tab\r\nKeybindingsRegistry.registerKeybindingRule({\r\n    id: 'acceptSelectedSuggestion',\r\n    when: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus),\r\n    primary: 2 /* Tab */,\r\n    weight: weight\r\n});\r\n// accept on enter has special rules\r\nKeybindingsRegistry.registerKeybindingRule({\r\n    id: 'acceptSelectedSuggestion',\r\n    when: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus, SuggestContext.AcceptSuggestionsOnEnter, SuggestContext.MakesTextEdit),\r\n    primary: 3 /* Enter */,\r\n    weight: weight\r\n});\r\n// shift+enter and shift+tab use the alternative-flag so that the suggest controller\r\n// is doing the opposite of the editor.suggest.overwriteOnAccept-configuration\r\nKeybindingsRegistry.registerKeybindingRule({\r\n    id: 'acceptSelectedSuggestion',\r\n    when: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus),\r\n    primary: 1024 /* Shift */ | 2 /* Tab */,\r\n    secondary: [1024 /* Shift */ | 3 /* Enter */],\r\n    args: { alternative: true },\r\n    weight: weight\r\n});\r\n// continue to support the old command\r\nCommandsRegistry.registerCommandAlias('acceptSelectedSuggestionOnEnter', 'acceptSelectedSuggestion');\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'hideSuggestWidget',\r\n    precondition: SuggestContext.Visible,\r\n    handler: function (x) { return x.cancelSuggestWidget(); },\r\n    kbOpts: {\r\n        weight: weight,\r\n        kbExpr: EditorContextKeys.textInputFocus,\r\n        primary: 9 /* Escape */,\r\n        secondary: [1024 /* Shift */ | 9 /* Escape */]\r\n    }\r\n}));\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'selectNextSuggestion',\r\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\r\n    handler: function (c) { return c.selectNextSuggestion(); },\r\n    kbOpts: {\r\n        weight: weight,\r\n        kbExpr: EditorContextKeys.textInputFocus,\r\n        primary: 18 /* DownArrow */,\r\n        secondary: [2048 /* CtrlCmd */ | 18 /* DownArrow */],\r\n        mac: { primary: 18 /* DownArrow */, secondary: [2048 /* CtrlCmd */ | 18 /* DownArrow */, 256 /* WinCtrl */ | 44 /* KEY_N */] }\r\n    }\r\n}));\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'selectNextPageSuggestion',\r\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\r\n    handler: function (c) { return c.selectNextPageSuggestion(); },\r\n    kbOpts: {\r\n        weight: weight,\r\n        kbExpr: EditorContextKeys.textInputFocus,\r\n        primary: 12 /* PageDown */,\r\n        secondary: [2048 /* CtrlCmd */ | 12 /* PageDown */]\r\n    }\r\n}));\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'selectLastSuggestion',\r\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\r\n    handler: function (c) { return c.selectLastSuggestion(); }\r\n}));\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'selectPrevSuggestion',\r\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\r\n    handler: function (c) { return c.selectPrevSuggestion(); },\r\n    kbOpts: {\r\n        weight: weight,\r\n        kbExpr: EditorContextKeys.textInputFocus,\r\n        primary: 16 /* UpArrow */,\r\n        secondary: [2048 /* CtrlCmd */ | 16 /* UpArrow */],\r\n        mac: { primary: 16 /* UpArrow */, secondary: [2048 /* CtrlCmd */ | 16 /* UpArrow */, 256 /* WinCtrl */ | 46 /* KEY_P */] }\r\n    }\r\n}));\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'selectPrevPageSuggestion',\r\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\r\n    handler: function (c) { return c.selectPrevPageSuggestion(); },\r\n    kbOpts: {\r\n        weight: weight,\r\n        kbExpr: EditorContextKeys.textInputFocus,\r\n        primary: 11 /* PageUp */,\r\n        secondary: [2048 /* CtrlCmd */ | 11 /* PageUp */]\r\n    }\r\n}));\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'selectFirstSuggestion',\r\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\r\n    handler: function (c) { return c.selectFirstSuggestion(); }\r\n}));\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'toggleSuggestionDetails',\r\n    precondition: SuggestContext.Visible,\r\n    handler: function (x) { return x.toggleSuggestionDetails(); },\r\n    kbOpts: {\r\n        weight: weight,\r\n        kbExpr: EditorContextKeys.textInputFocus,\r\n        primary: 2048 /* CtrlCmd */ | 10 /* Space */,\r\n        mac: { primary: 256 /* WinCtrl */ | 10 /* Space */ }\r\n    }\r\n}));\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'toggleExplainMode',\r\n    precondition: SuggestContext.Visible,\r\n    handler: function (x) { return x.toggleExplainMode(); },\r\n    kbOpts: {\r\n        weight: 100 /* EditorContrib */,\r\n        primary: 2048 /* CtrlCmd */ | 85 /* US_SLASH */,\r\n    }\r\n}));\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'toggleSuggestionFocus',\r\n    precondition: SuggestContext.Visible,\r\n    handler: function (x) { return x.toggleSuggestionFocus(); },\r\n    kbOpts: {\r\n        weight: weight,\r\n        kbExpr: EditorContextKeys.textInputFocus,\r\n        primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 10 /* Space */,\r\n        mac: { primary: 256 /* WinCtrl */ | 512 /* Alt */ | 10 /* Space */ }\r\n    }\r\n}));\r\n//#region tab completions\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'insertBestCompletion',\r\n    precondition: ContextKeyExpr.and(ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), WordContextKey.AtEnd, SuggestContext.Visible.toNegated(), SuggestAlternatives.OtherSuggestions.toNegated(), SnippetController2.InSnippetMode.toNegated()),\r\n    handler: function (x, arg) {\r\n        x.triggerSuggestAndAcceptBest(isObject(arg) ? __assign({ fallback: 'tab' }, arg) : { fallback: 'tab' });\r\n    },\r\n    kbOpts: {\r\n        weight: weight,\r\n        primary: 2 /* Tab */\r\n    }\r\n}));\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'insertNextSuggestion',\r\n    precondition: ContextKeyExpr.and(ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), SuggestAlternatives.OtherSuggestions, SuggestContext.Visible.toNegated(), SnippetController2.InSnippetMode.toNegated()),\r\n    handler: function (x) { return x.acceptNextSuggestion(); },\r\n    kbOpts: {\r\n        weight: weight,\r\n        kbExpr: EditorContextKeys.textInputFocus,\r\n        primary: 2 /* Tab */\r\n    }\r\n}));\r\nregisterEditorCommand(new SuggestCommand({\r\n    id: 'insertPrevSuggestion',\r\n    precondition: ContextKeyExpr.and(ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), SuggestAlternatives.OtherSuggestions, SuggestContext.Visible.toNegated(), SnippetController2.InSnippetMode.toNegated()),\r\n    handler: function (x) { return x.acceptPrevSuggestion(); },\r\n    kbOpts: {\r\n        weight: weight,\r\n        kbExpr: EditorContextKeys.textInputFocus,\r\n        primary: 1024 /* Shift */ | 2 /* Tab */\r\n    }\r\n}));\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport './iPadShowKeyboard.css';\r\nimport * as browser from '../../../../base/browser/browser.js';\r\nimport * as dom from '../../../../base/browser/dom.js';\r\nimport { Disposable } from '../../../../base/common/lifecycle.js';\r\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\r\nvar IPadShowKeyboard = /** @class */ (function (_super) {\r\n    __extends(IPadShowKeyboard, _super);\r\n    function IPadShowKeyboard(editor) {\r\n        var _this = _super.call(this) || this;\r\n        _this.editor = editor;\r\n        _this.widget = null;\r\n        if (browser.isIPad) {\r\n            _this._register(editor.onDidChangeConfiguration(function () { return _this.update(); }));\r\n            _this.update();\r\n        }\r\n        return _this;\r\n    }\r\n    IPadShowKeyboard.prototype.update = function () {\r\n        var shouldHaveWidget = (!this.editor.getOption(65 /* readOnly */));\r\n        if (!this.widget && shouldHaveWidget) {\r\n            this.widget = new ShowKeyboardWidget(this.editor);\r\n        }\r\n        else if (this.widget && !shouldHaveWidget) {\r\n            this.widget.dispose();\r\n            this.widget = null;\r\n        }\r\n    };\r\n    IPadShowKeyboard.prototype.dispose = function () {\r\n        _super.prototype.dispose.call(this);\r\n        if (this.widget) {\r\n            this.widget.dispose();\r\n            this.widget = null;\r\n        }\r\n    };\r\n    IPadShowKeyboard.ID = 'editor.contrib.iPadShowKeyboard';\r\n    return IPadShowKeyboard;\r\n}(Disposable));\r\nexport { IPadShowKeyboard };\r\nvar ShowKeyboardWidget = /** @class */ (function (_super) {\r\n    __extends(ShowKeyboardWidget, _super);\r\n    function ShowKeyboardWidget(editor) {\r\n        var _this = _super.call(this) || this;\r\n        _this.editor = editor;\r\n        _this._domNode = document.createElement('textarea');\r\n        _this._domNode.className = 'iPadShowKeyboard';\r\n        _this._register(dom.addDisposableListener(_this._domNode, 'touchstart', function (e) {\r\n            _this.editor.focus();\r\n        }));\r\n        _this._register(dom.addDisposableListener(_this._domNode, 'focus', function (e) {\r\n            _this.editor.focus();\r\n        }));\r\n        _this.editor.addOverlayWidget(_this);\r\n        return _this;\r\n    }\r\n    ShowKeyboardWidget.prototype.dispose = function () {\r\n        this.editor.removeOverlayWidget(this);\r\n        _super.prototype.dispose.call(this);\r\n    };\r\n    // ----- IOverlayWidget API\r\n    ShowKeyboardWidget.prototype.getId = function () {\r\n        return ShowKeyboardWidget.ID;\r\n    };\r\n    ShowKeyboardWidget.prototype.getDomNode = function () {\r\n        return this._domNode;\r\n    };\r\n    ShowKeyboardWidget.prototype.getPosition = function () {\r\n        return {\r\n            preference: 1 /* BOTTOM_RIGHT_CORNER */\r\n        };\r\n    };\r\n    ShowKeyboardWidget.ID = 'editor.contrib.ShowKeyboardWidget';\r\n    return ShowKeyboardWidget;\r\n}(Disposable));\r\nregisterEditorContribution(IPadShowKeyboard.ID, IPadShowKeyboard);\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\n// Allow for running under nodejs/requirejs in tests\r\nvar _monaco = (typeof monaco === 'undefined' ? self.monaco : monaco);\r\nvar languageDefinitions = {};\r\nvar lazyLanguageLoaders = {};\r\nvar LazyLanguageLoader = /** @class */ (function () {\r\n    function LazyLanguageLoader(languageId) {\r\n        var _this = this;\r\n        this._languageId = languageId;\r\n        this._loadingTriggered = false;\r\n        this._lazyLoadPromise = new Promise(function (resolve, reject) {\r\n            _this._lazyLoadPromiseResolve = resolve;\r\n            _this._lazyLoadPromiseReject = reject;\r\n        });\r\n    }\r\n    LazyLanguageLoader.getOrCreate = function (languageId) {\r\n        if (!lazyLanguageLoaders[languageId]) {\r\n            lazyLanguageLoaders[languageId] = new LazyLanguageLoader(languageId);\r\n        }\r\n        return lazyLanguageLoaders[languageId];\r\n    };\r\n    LazyLanguageLoader.prototype.whenLoaded = function () {\r\n        return this._lazyLoadPromise;\r\n    };\r\n    LazyLanguageLoader.prototype.load = function () {\r\n        var _this = this;\r\n        if (!this._loadingTriggered) {\r\n            this._loadingTriggered = true;\r\n            languageDefinitions[this._languageId].loader().then(function (mod) { return _this._lazyLoadPromiseResolve(mod); }, function (err) { return _this._lazyLoadPromiseReject(err); });\r\n        }\r\n        return this._lazyLoadPromise;\r\n    };\r\n    return LazyLanguageLoader;\r\n}());\r\nexport function loadLanguage(languageId) {\r\n    return LazyLanguageLoader.getOrCreate(languageId).load();\r\n}\r\nexport function registerLanguage(def) {\r\n    var languageId = def.id;\r\n    languageDefinitions[languageId] = def;\r\n    _monaco.languages.register(def);\r\n    var lazyLanguageLoader = LazyLanguageLoader.getOrCreate(languageId);\r\n    _monaco.languages.setMonarchTokensProvider(languageId, lazyLanguageLoader.whenLoaded().then(function (mod) { return mod.language; }));\r\n    _monaco.languages.onLanguage(languageId, function () {\r\n        lazyLanguageLoader.load().then(function (mod) {\r\n            _monaco.languages.setLanguageConfiguration(languageId, mod.conf);\r\n        });\r\n    });\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nimport { registerLanguage } from '../_.contribution.js';\r\nregisterLanguage({\r\n    id: 'yaml',\r\n    extensions: ['.yaml', '.yml'],\r\n    aliases: ['YAML', 'yaml', 'YML', 'yml'],\r\n    mimetypes: ['application/x-yaml'],\r\n    loader: function () { return import('./yaml.js'); }\r\n});\r\n","import React, { useCallback, useEffect } from 'react';\nimport { useField } from 'formik';\nimport { useTheme } from '@material-ui/core';\nimport MonacoEditor from 'react-monaco-editor';\nimport { languages } from 'monaco-editor/esm/vs/editor/editor.api';\nimport './monaco';\n/* eslint-disable import/no-webpack-loader-syntax */\n// NOTE: using loader syntax becuase Yaml worker imports editor.worker directly and that\n// import shouldn't go through loader syntax.\nimport EditorWorker from 'worker-loader!monaco-editor/esm/vs/editor/editor.worker';\nimport YamlWorker from 'worker-loader!monaco-yaml/esm/yaml.worker';\nwindow.MonacoEnvironment = {\n    getWorker(_, label) {\n        if (label === 'yaml') {\n            return new YamlWorker();\n        }\n        return new EditorWorker();\n    },\n};\nconst { yaml } = (languages ?? {});\nconst Editor = ({ name, schemas }) => {\n    const options = {\n        selectOnLineNumbers: true,\n        minimap: {\n            enabled: false,\n        },\n        scrollBeyondLastLine: false,\n        tabSize: 2,\n    };\n    const theme = useTheme();\n    const [{ value }, , { setValue }] = useField(name);\n    useEffect(() => {\n        yaml?.yamlDefaults.setDiagnosticsOptions({\n            validate: true,\n            schemas,\n            enableSchemaRequest: true,\n            hover: true,\n            completion: true,\n        });\n    }, [schemas]);\n    const handleChange = useCallback((v) => setValue(v), [setValue]);\n    return (<MonacoEditor language=\"yaml\" theme={theme.palette.type} options={options} value={value} onChange={handleChange}/>);\n};\nexport default Editor;\n","import React, { useEffect } from 'react';\nimport { useFormikContext } from 'formik';\nimport { Button } from '@material-ui/core';\nconst SubmitButton = ({ loading, children, ...props }) => {\n    const { submitForm, isSubmitting, setSubmitting } = useFormikContext();\n    useEffect(() => {\n        setSubmitting(loading);\n    }, [loading, setSubmitting]);\n    return (<Button {...props} variant=\"contained\" color=\"primary\" onClick={submitForm} disabled={isSubmitting} type=\"submit\">\n      {children}\n    </Button>);\n};\nexport default SubmitButton;\n","import { useEffect } from 'react';\nimport { useFormikContext } from 'formik';\nconst ResetForm = ({ initialValues }) => {\n    const { resetForm } = useFormikContext();\n    useEffect(() => {\n        resetForm({ values: initialValues });\n    }, [initialValues, resetForm]);\n    return null;\n};\nexport default ResetForm;\n","import React, { useState, useCallback, useMemo } from 'react';\nimport { hot } from 'react-hot-loader/root';\nimport { Formik } from 'formik';\nimport { useInjectPageTitle } from 'core/layout/AppBar/hooks';\nimport { Button, Link } from '@material-ui/core';\nimport { Alert } from '@material-ui/lab';\nimport { useGlobalStatus } from 'core/status/hooks';\nimport { NoPaddingWrapper } from 'common/styles';\nimport { css } from '@emotion/core';\nimport { useGetConfig, useGetVariables, useGetSchema } from './hooks';\nimport Editor from './Editor';\nimport SubmitButton from './SubmitButton';\nimport ResetForm from './ResetForm';\nconst toolbar = (theme) => css `\n  display: flex;\n  align-items: center;\n  padding: ${theme.typography.pxToRem(theme.spacing(2))}\n    ${theme.typography.pxToRem(theme.spacing(4))};\n`;\nconst varDescription = (theme) => css `\n  margin: ${theme.typography.pxToRem(theme.spacing(2))}\n    ${theme.typography.pxToRem(theme.spacing(4))};\n  margin-bottom: 0;\n`;\nconst button = (theme) => css `\n  margin-right: ${theme.typography.pxToRem(theme.spacing(2))};\n`;\nconst alert = css `\n  flex: 1;\n`;\nconst Config = () => {\n    useInjectPageTitle('Config Editor');\n    const [mode, setMode] = useState('config');\n    const [{ config, state: configState }, saveConfig] = useGetConfig();\n    const [{ variables, state: variablesState }, saveVariables] = useGetVariables();\n    const { schemas } = useGetSchema();\n    const toggleMode = useCallback(() => setMode(m => (m === 'config' ? 'variables' : 'config')), []);\n    const { yaml, save, loadText, submitText, getState, saveState } = mode === 'config'\n        ? {\n            loadText: 'Load Variables',\n            submitText: 'Save Config',\n            yaml: config,\n            save: saveConfig,\n            getState: configState.get,\n            saveState: configState.post,\n        }\n        : {\n            loadText: 'Load Config',\n            submitText: 'Save Variables',\n            yaml: variables,\n            save: saveVariables,\n            getState: variablesState.get,\n            saveState: variablesState.post,\n        };\n    useGlobalStatus(getState.loading, getState.error ?? saveState.error);\n    const initialValues = useMemo(() => ({\n        yaml,\n    }), [yaml]);\n    const handleSubmit = useCallback((v) => save(v.yaml), [save]);\n    const schemaValues = useMemo(() => (mode === 'config' ? schemas : undefined), [mode, schemas]);\n    return (<Formik initialValues={initialValues} onSubmit={handleSubmit}>\n      <NoPaddingWrapper>\n        <ResetForm initialValues={initialValues}/>\n        <p css={varDescription}>\n          Variables allow you reuse sections of your config file. They are also useful for hiding\n          sensitive information like passwords.\n          <br /> Any variables you create in the WebUI are saved in the DB and not to a file. You\n          can find out more <Link href=\"https://flexget.com/Plugins/variables\">here</Link>.\n        </p>\n        <div css={toolbar}>\n          <div>\n            <Button css={button} variant=\"contained\" onClick={toggleMode} disabled={getState.loading} type=\"button\">\n              {loadText}\n            </Button>\n            <SubmitButton loading={saveState.loading} css={button}>\n              {submitText}\n            </SubmitButton>\n          </div>\n          <Alert severity=\"warning\" css={alert}>\n            Taking a backup is recommended before saving a new config.\n          </Alert>\n        </div>\n        <Editor name=\"yaml\" schemas={schemaValues}/>\n      </NoPaddingWrapper>\n    </Formik>);\n};\nexport default hot(Config);\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\n/**\r\n * The Position namespace provides helper functions to work with\r\n * [Position](#Position) literals.\r\n */\r\nexport var Position;\r\n(function (Position) {\r\n    /**\r\n     * Creates a new Position literal from the given line and character.\r\n     * @param line The position's line.\r\n     * @param character The position's character.\r\n     */\r\n    function create(line, character) {\r\n        return { line: line, character: character };\r\n    }\r\n    Position.create = create;\r\n    /**\r\n     * Checks whether the given liternal conforms to the [Position](#Position) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Is.number(candidate.line) && Is.number(candidate.character);\r\n    }\r\n    Position.is = is;\r\n})(Position || (Position = {}));\r\n/**\r\n * The Range namespace provides helper functions to work with\r\n * [Range](#Range) literals.\r\n */\r\nexport var Range;\r\n(function (Range) {\r\n    function create(one, two, three, four) {\r\n        if (Is.number(one) && Is.number(two) && Is.number(three) && Is.number(four)) {\r\n            return { start: Position.create(one, two), end: Position.create(three, four) };\r\n        }\r\n        else if (Position.is(one) && Position.is(two)) {\r\n            return { start: one, end: two };\r\n        }\r\n        else {\r\n            throw new Error(\"Range#create called with invalid arguments[\" + one + \", \" + two + \", \" + three + \", \" + four + \"]\");\r\n        }\r\n    }\r\n    Range.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Range](#Range) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Position.is(candidate.start) && Position.is(candidate.end);\r\n    }\r\n    Range.is = is;\r\n})(Range || (Range = {}));\r\n/**\r\n * The Location namespace provides helper functions to work with\r\n * [Location](#Location) literals.\r\n */\r\nexport var Location;\r\n(function (Location) {\r\n    /**\r\n     * Creates a Location literal.\r\n     * @param uri The location's uri.\r\n     * @param range The location's range.\r\n     */\r\n    function create(uri, range) {\r\n        return { uri: uri, range: range };\r\n    }\r\n    Location.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Location](#Location) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.string(candidate.uri) || Is.undefined(candidate.uri));\r\n    }\r\n    Location.is = is;\r\n})(Location || (Location = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [Color](#Color) literals.\r\n */\r\nexport var Color;\r\n(function (Color) {\r\n    /**\r\n     * Creates a new Color literal.\r\n     */\r\n    function create(red, green, blue, alpha) {\r\n        return {\r\n            red: red,\r\n            green: green,\r\n            blue: blue,\r\n            alpha: alpha,\r\n        };\r\n    }\r\n    Color.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Color](#Color) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.red)\r\n            && Is.number(candidate.green)\r\n            && Is.number(candidate.blue)\r\n            && Is.number(candidate.alpha);\r\n    }\r\n    Color.is = is;\r\n})(Color || (Color = {}));\r\n/**\r\n * The ColorInformation namespace provides helper functions to work with\r\n * [ColorInformation](#ColorInformation) literals.\r\n */\r\nexport var ColorInformation;\r\n(function (ColorInformation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(range, color) {\r\n        return {\r\n            range: range,\r\n            color: color,\r\n        };\r\n    }\r\n    ColorInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Range.is(candidate.range) && Color.is(candidate.color);\r\n    }\r\n    ColorInformation.is = is;\r\n})(ColorInformation || (ColorInformation = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [ColorPresentation](#ColorPresentation) literals.\r\n */\r\nexport var ColorPresentation;\r\n(function (ColorPresentation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(label, textEdit, additionalTextEdits) {\r\n        return {\r\n            label: label,\r\n            textEdit: textEdit,\r\n            additionalTextEdits: additionalTextEdits,\r\n        };\r\n    }\r\n    ColorPresentation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate.label)\r\n            && (Is.undefined(candidate.textEdit) || TextEdit.is(candidate))\r\n            && (Is.undefined(candidate.additionalTextEdits) || Is.typedArray(candidate.additionalTextEdits, TextEdit.is));\r\n    }\r\n    ColorPresentation.is = is;\r\n})(ColorPresentation || (ColorPresentation = {}));\r\n/**\r\n * Enum of known range kinds\r\n */\r\nexport var FoldingRangeKind;\r\n(function (FoldingRangeKind) {\r\n    /**\r\n     * Folding range for a comment\r\n     */\r\n    FoldingRangeKind[\"Comment\"] = \"comment\";\r\n    /**\r\n     * Folding range for a imports or includes\r\n     */\r\n    FoldingRangeKind[\"Imports\"] = \"imports\";\r\n    /**\r\n     * Folding range for a region (e.g. `#region`)\r\n     */\r\n    FoldingRangeKind[\"Region\"] = \"region\";\r\n})(FoldingRangeKind || (FoldingRangeKind = {}));\r\n/**\r\n * The folding range namespace provides helper functions to work with\r\n * [FoldingRange](#FoldingRange) literals.\r\n */\r\nexport var FoldingRange;\r\n(function (FoldingRange) {\r\n    /**\r\n     * Creates a new FoldingRange literal.\r\n     */\r\n    function create(startLine, endLine, startCharacter, endCharacter, kind) {\r\n        var result = {\r\n            startLine: startLine,\r\n            endLine: endLine\r\n        };\r\n        if (Is.defined(startCharacter)) {\r\n            result.startCharacter = startCharacter;\r\n        }\r\n        if (Is.defined(endCharacter)) {\r\n            result.endCharacter = endCharacter;\r\n        }\r\n        if (Is.defined(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    FoldingRange.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FoldingRange](#FoldingRange) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.startLine) && Is.number(candidate.startLine)\r\n            && (Is.undefined(candidate.startCharacter) || Is.number(candidate.startCharacter))\r\n            && (Is.undefined(candidate.endCharacter) || Is.number(candidate.endCharacter))\r\n            && (Is.undefined(candidate.kind) || Is.string(candidate.kind));\r\n    }\r\n    FoldingRange.is = is;\r\n})(FoldingRange || (FoldingRange = {}));\r\n/**\r\n * The DiagnosticRelatedInformation namespace provides helper functions to work with\r\n * [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) literals.\r\n */\r\nexport var DiagnosticRelatedInformation;\r\n(function (DiagnosticRelatedInformation) {\r\n    /**\r\n     * Creates a new DiagnosticRelatedInformation literal.\r\n     */\r\n    function create(location, message) {\r\n        return {\r\n            location: location,\r\n            message: message\r\n        };\r\n    }\r\n    DiagnosticRelatedInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Location.is(candidate.location) && Is.string(candidate.message);\r\n    }\r\n    DiagnosticRelatedInformation.is = is;\r\n})(DiagnosticRelatedInformation || (DiagnosticRelatedInformation = {}));\r\n/**\r\n * The diagnostic's severity.\r\n */\r\nexport var DiagnosticSeverity;\r\n(function (DiagnosticSeverity) {\r\n    /**\r\n     * Reports an error.\r\n     */\r\n    DiagnosticSeverity.Error = 1;\r\n    /**\r\n     * Reports a warning.\r\n     */\r\n    DiagnosticSeverity.Warning = 2;\r\n    /**\r\n     * Reports an information.\r\n     */\r\n    DiagnosticSeverity.Information = 3;\r\n    /**\r\n     * Reports a hint.\r\n     */\r\n    DiagnosticSeverity.Hint = 4;\r\n})(DiagnosticSeverity || (DiagnosticSeverity = {}));\r\n/**\r\n * The Diagnostic namespace provides helper functions to work with\r\n * [Diagnostic](#Diagnostic) literals.\r\n */\r\nexport var Diagnostic;\r\n(function (Diagnostic) {\r\n    /**\r\n     * Creates a new Diagnostic literal.\r\n     */\r\n    function create(range, message, severity, code, source, relatedInformation) {\r\n        var result = { range: range, message: message };\r\n        if (Is.defined(severity)) {\r\n            result.severity = severity;\r\n        }\r\n        if (Is.defined(code)) {\r\n            result.code = code;\r\n        }\r\n        if (Is.defined(source)) {\r\n            result.source = source;\r\n        }\r\n        if (Is.defined(relatedInformation)) {\r\n            result.relatedInformation = relatedInformation;\r\n        }\r\n        return result;\r\n    }\r\n    Diagnostic.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Diagnostic](#Diagnostic) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && Range.is(candidate.range)\r\n            && Is.string(candidate.message)\r\n            && (Is.number(candidate.severity) || Is.undefined(candidate.severity))\r\n            && (Is.number(candidate.code) || Is.string(candidate.code) || Is.undefined(candidate.code))\r\n            && (Is.string(candidate.source) || Is.undefined(candidate.source))\r\n            && (Is.undefined(candidate.relatedInformation) || Is.typedArray(candidate.relatedInformation, DiagnosticRelatedInformation.is));\r\n    }\r\n    Diagnostic.is = is;\r\n})(Diagnostic || (Diagnostic = {}));\r\n/**\r\n * The Command namespace provides helper functions to work with\r\n * [Command](#Command) literals.\r\n */\r\nexport var Command;\r\n(function (Command) {\r\n    /**\r\n     * Creates a new Command literal.\r\n     */\r\n    function create(title, command) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { title: title, command: command };\r\n        if (Is.defined(args) && args.length > 0) {\r\n            result.arguments = args;\r\n        }\r\n        return result;\r\n    }\r\n    Command.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Command](#Command) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.title) && Is.string(candidate.command);\r\n    }\r\n    Command.is = is;\r\n})(Command || (Command = {}));\r\n/**\r\n * The TextEdit namespace provides helper function to create replace,\r\n * insert and delete edits more easily.\r\n */\r\nexport var TextEdit;\r\n(function (TextEdit) {\r\n    /**\r\n     * Creates a replace text edit.\r\n     * @param range The range of text to be replaced.\r\n     * @param newText The new text.\r\n     */\r\n    function replace(range, newText) {\r\n        return { range: range, newText: newText };\r\n    }\r\n    TextEdit.replace = replace;\r\n    /**\r\n     * Creates a insert text edit.\r\n     * @param position The position to insert the text at.\r\n     * @param newText The text to be inserted.\r\n     */\r\n    function insert(position, newText) {\r\n        return { range: { start: position, end: position }, newText: newText };\r\n    }\r\n    TextEdit.insert = insert;\r\n    /**\r\n     * Creates a delete text edit.\r\n     * @param range The range of text to be deleted.\r\n     */\r\n    function del(range) {\r\n        return { range: range, newText: '' };\r\n    }\r\n    TextEdit.del = del;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate)\r\n            && Is.string(candidate.newText)\r\n            && Range.is(candidate.range);\r\n    }\r\n    TextEdit.is = is;\r\n})(TextEdit || (TextEdit = {}));\r\n/**\r\n * The TextDocumentEdit namespace provides helper function to create\r\n * an edit that manipulates a text document.\r\n */\r\nexport var TextDocumentEdit;\r\n(function (TextDocumentEdit) {\r\n    /**\r\n     * Creates a new `TextDocumentEdit`\r\n     */\r\n    function create(textDocument, edits) {\r\n        return { textDocument: textDocument, edits: edits };\r\n    }\r\n    TextDocumentEdit.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && VersionedTextDocumentIdentifier.is(candidate.textDocument)\r\n            && Array.isArray(candidate.edits);\r\n    }\r\n    TextDocumentEdit.is = is;\r\n})(TextDocumentEdit || (TextDocumentEdit = {}));\r\nexport var WorkspaceEdit;\r\n(function (WorkspaceEdit) {\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            (candidate.changes !== void 0 || candidate.documentChanges !== void 0) &&\r\n            (candidate.documentChanges === void 0 || Is.typedArray(candidate.documentChanges, TextDocumentEdit.is));\r\n    }\r\n    WorkspaceEdit.is = is;\r\n})(WorkspaceEdit || (WorkspaceEdit = {}));\r\nvar TextEditChangeImpl = /** @class */ (function () {\r\n    function TextEditChangeImpl(edits) {\r\n        this.edits = edits;\r\n    }\r\n    TextEditChangeImpl.prototype.insert = function (position, newText) {\r\n        this.edits.push(TextEdit.insert(position, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.replace = function (range, newText) {\r\n        this.edits.push(TextEdit.replace(range, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.delete = function (range) {\r\n        this.edits.push(TextEdit.del(range));\r\n    };\r\n    TextEditChangeImpl.prototype.add = function (edit) {\r\n        this.edits.push(edit);\r\n    };\r\n    TextEditChangeImpl.prototype.all = function () {\r\n        return this.edits;\r\n    };\r\n    TextEditChangeImpl.prototype.clear = function () {\r\n        this.edits.splice(0, this.edits.length);\r\n    };\r\n    return TextEditChangeImpl;\r\n}());\r\n/**\r\n * A workspace change helps constructing changes to a workspace.\r\n */\r\nvar WorkspaceChange = /** @class */ (function () {\r\n    function WorkspaceChange(workspaceEdit) {\r\n        var _this = this;\r\n        this._textEditChanges = Object.create(null);\r\n        if (workspaceEdit) {\r\n            this._workspaceEdit = workspaceEdit;\r\n            if (workspaceEdit.documentChanges) {\r\n                workspaceEdit.documentChanges.forEach(function (textDocumentEdit) {\r\n                    var textEditChange = new TextEditChangeImpl(textDocumentEdit.edits);\r\n                    _this._textEditChanges[textDocumentEdit.textDocument.uri] = textEditChange;\r\n                });\r\n            }\r\n            else if (workspaceEdit.changes) {\r\n                Object.keys(workspaceEdit.changes).forEach(function (key) {\r\n                    var textEditChange = new TextEditChangeImpl(workspaceEdit.changes[key]);\r\n                    _this._textEditChanges[key] = textEditChange;\r\n                });\r\n            }\r\n        }\r\n    }\r\n    Object.defineProperty(WorkspaceChange.prototype, \"edit\", {\r\n        /**\r\n         * Returns the underlying [WorkspaceEdit](#WorkspaceEdit) literal\r\n         * use to be returned from a workspace edit operation like rename.\r\n         */\r\n        get: function () {\r\n            return this._workspaceEdit;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    WorkspaceChange.prototype.getTextEditChange = function (key) {\r\n        if (VersionedTextDocumentIdentifier.is(key)) {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    documentChanges: []\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.documentChanges) {\r\n                throw new Error('Workspace edit is not configured for versioned document changes.');\r\n            }\r\n            var textDocument = key;\r\n            var result = this._textEditChanges[textDocument.uri];\r\n            if (!result) {\r\n                var edits = [];\r\n                var textDocumentEdit = {\r\n                    textDocument: textDocument,\r\n                    edits: edits\r\n                };\r\n                this._workspaceEdit.documentChanges.push(textDocumentEdit);\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[textDocument.uri] = result;\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    changes: Object.create(null)\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.changes) {\r\n                throw new Error('Workspace edit is not configured for normal text edit changes.');\r\n            }\r\n            var result = this._textEditChanges[key];\r\n            if (!result) {\r\n                var edits = [];\r\n                this._workspaceEdit.changes[key] = edits;\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[key] = result;\r\n            }\r\n            return result;\r\n        }\r\n    };\r\n    return WorkspaceChange;\r\n}());\r\nexport { WorkspaceChange };\r\n/**\r\n * The TextDocumentIdentifier namespace provides helper functions to work with\r\n * [TextDocumentIdentifier](#TextDocumentIdentifier) literals.\r\n */\r\nexport var TextDocumentIdentifier;\r\n(function (TextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new TextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     */\r\n    function create(uri) {\r\n        return { uri: uri };\r\n    }\r\n    TextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentIdentifier](#TextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri);\r\n    }\r\n    TextDocumentIdentifier.is = is;\r\n})(TextDocumentIdentifier || (TextDocumentIdentifier = {}));\r\n/**\r\n * The VersionedTextDocumentIdentifier namespace provides helper functions to work with\r\n * [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) literals.\r\n */\r\nexport var VersionedTextDocumentIdentifier;\r\n(function (VersionedTextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new VersionedTextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     * @param uri The document's text.\r\n     */\r\n    function create(uri, version) {\r\n        return { uri: uri, version: version };\r\n    }\r\n    VersionedTextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.number(candidate.version);\r\n    }\r\n    VersionedTextDocumentIdentifier.is = is;\r\n})(VersionedTextDocumentIdentifier || (VersionedTextDocumentIdentifier = {}));\r\n/**\r\n * The TextDocumentItem namespace provides helper functions to work with\r\n * [TextDocumentItem](#TextDocumentItem) literals.\r\n */\r\nexport var TextDocumentItem;\r\n(function (TextDocumentItem) {\r\n    /**\r\n     * Creates a new TextDocumentItem literal.\r\n     * @param uri The document's uri.\r\n     * @param languageId The document's language identifier.\r\n     * @param version The document's version number.\r\n     * @param text The document's text.\r\n     */\r\n    function create(uri, languageId, version, text) {\r\n        return { uri: uri, languageId: languageId, version: version, text: text };\r\n    }\r\n    TextDocumentItem.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentItem](#TextDocumentItem) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.string(candidate.languageId) && Is.number(candidate.version) && Is.string(candidate.text);\r\n    }\r\n    TextDocumentItem.is = is;\r\n})(TextDocumentItem || (TextDocumentItem = {}));\r\n/**\r\n * Describes the content type that a client supports in various\r\n * result literals like `Hover`, `ParameterInfo` or `CompletionItem`.\r\n *\r\n * Please note that `MarkupKinds` must not start with a `$`. This kinds\r\n * are reserved for internal usage.\r\n */\r\nexport var MarkupKind;\r\n(function (MarkupKind) {\r\n    /**\r\n     * Plain text is supported as a content format\r\n     */\r\n    MarkupKind.PlainText = 'plaintext';\r\n    /**\r\n     * Markdown is supported as a content format\r\n     */\r\n    MarkupKind.Markdown = 'markdown';\r\n})(MarkupKind || (MarkupKind = {}));\r\n(function (MarkupKind) {\r\n    /**\r\n     * Checks whether the given value is a value of the [MarkupKind](#MarkupKind) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate === MarkupKind.PlainText || candidate === MarkupKind.Markdown;\r\n    }\r\n    MarkupKind.is = is;\r\n})(MarkupKind || (MarkupKind = {}));\r\nexport var MarkupContent;\r\n(function (MarkupContent) {\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkupContent](#MarkupContent) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(value) && MarkupKind.is(candidate.kind) && Is.string(candidate.value);\r\n    }\r\n    MarkupContent.is = is;\r\n})(MarkupContent || (MarkupContent = {}));\r\n/**\r\n * The kind of a completion entry.\r\n */\r\nexport var CompletionItemKind;\r\n(function (CompletionItemKind) {\r\n    CompletionItemKind.Text = 1;\r\n    CompletionItemKind.Method = 2;\r\n    CompletionItemKind.Function = 3;\r\n    CompletionItemKind.Constructor = 4;\r\n    CompletionItemKind.Field = 5;\r\n    CompletionItemKind.Variable = 6;\r\n    CompletionItemKind.Class = 7;\r\n    CompletionItemKind.Interface = 8;\r\n    CompletionItemKind.Module = 9;\r\n    CompletionItemKind.Property = 10;\r\n    CompletionItemKind.Unit = 11;\r\n    CompletionItemKind.Value = 12;\r\n    CompletionItemKind.Enum = 13;\r\n    CompletionItemKind.Keyword = 14;\r\n    CompletionItemKind.Snippet = 15;\r\n    CompletionItemKind.Color = 16;\r\n    CompletionItemKind.File = 17;\r\n    CompletionItemKind.Reference = 18;\r\n    CompletionItemKind.Folder = 19;\r\n    CompletionItemKind.EnumMember = 20;\r\n    CompletionItemKind.Constant = 21;\r\n    CompletionItemKind.Struct = 22;\r\n    CompletionItemKind.Event = 23;\r\n    CompletionItemKind.Operator = 24;\r\n    CompletionItemKind.TypeParameter = 25;\r\n})(CompletionItemKind || (CompletionItemKind = {}));\r\n/**\r\n * Defines whether the insert text in a completion item should be interpreted as\r\n * plain text or a snippet.\r\n */\r\nexport var InsertTextFormat;\r\n(function (InsertTextFormat) {\r\n    /**\r\n     * The primary text to be inserted is treated as a plain string.\r\n     */\r\n    InsertTextFormat.PlainText = 1;\r\n    /**\r\n     * The primary text to be inserted is treated as a snippet.\r\n     *\r\n     * A snippet can define tab stops and placeholders with `$1`, `$2`\r\n     * and `${3:foo}`. `$0` defines the final tab stop, it defaults to\r\n     * the end of the snippet. Placeholders with equal identifiers are linked,\r\n     * that is typing in one will update others too.\r\n     *\r\n     * See also: https://github.com/Microsoft/vscode/blob/master/src/vs/editor/contrib/snippet/common/snippet.md\r\n     */\r\n    InsertTextFormat.Snippet = 2;\r\n})(InsertTextFormat || (InsertTextFormat = {}));\r\n/**\r\n * The CompletionItem namespace provides functions to deal with\r\n * completion items.\r\n */\r\nexport var CompletionItem;\r\n(function (CompletionItem) {\r\n    /**\r\n     * Create a completion item and seed it with a label.\r\n     * @param label The completion item's label\r\n     */\r\n    function create(label) {\r\n        return { label: label };\r\n    }\r\n    CompletionItem.create = create;\r\n})(CompletionItem || (CompletionItem = {}));\r\n/**\r\n * The CompletionList namespace provides functions to deal with\r\n * completion lists.\r\n */\r\nexport var CompletionList;\r\n(function (CompletionList) {\r\n    /**\r\n     * Creates a new completion list.\r\n     *\r\n     * @param items The completion items.\r\n     * @param isIncomplete The list is not complete.\r\n     */\r\n    function create(items, isIncomplete) {\r\n        return { items: items ? items : [], isIncomplete: !!isIncomplete };\r\n    }\r\n    CompletionList.create = create;\r\n})(CompletionList || (CompletionList = {}));\r\nexport var MarkedString;\r\n(function (MarkedString) {\r\n    /**\r\n     * Creates a marked string from plain text.\r\n     *\r\n     * @param plainText The plain text.\r\n     */\r\n    function fromPlainText(plainText) {\r\n        return plainText.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, \"\\\\$&\"); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\r\n    }\r\n    MarkedString.fromPlainText = fromPlainText;\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkedString](#MarkedString) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate) || (Is.objectLiteral(candidate) && Is.string(candidate.language) && Is.string(candidate.value));\r\n    }\r\n    MarkedString.is = is;\r\n})(MarkedString || (MarkedString = {}));\r\nexport var Hover;\r\n(function (Hover) {\r\n    /**\r\n     * Checks whether the given value conforms to the [Hover](#Hover) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && (MarkupContent.is(candidate.contents) ||\r\n            MarkedString.is(candidate.contents) ||\r\n            Is.typedArray(candidate.contents, MarkedString.is)) && (value.range === void 0 || Range.is(value.range));\r\n    }\r\n    Hover.is = is;\r\n})(Hover || (Hover = {}));\r\n/**\r\n * The ParameterInformation namespace provides helper functions to work with\r\n * [ParameterInformation](#ParameterInformation) literals.\r\n */\r\nexport var ParameterInformation;\r\n(function (ParameterInformation) {\r\n    /**\r\n     * Creates a new parameter information literal.\r\n     *\r\n     * @param label A label string.\r\n     * @param documentation A doc string.\r\n     */\r\n    function create(label, documentation) {\r\n        return documentation ? { label: label, documentation: documentation } : { label: label };\r\n    }\r\n    ParameterInformation.create = create;\r\n    ;\r\n})(ParameterInformation || (ParameterInformation = {}));\r\n/**\r\n * The SignatureInformation namespace provides helper functions to work with\r\n * [SignatureInformation](#SignatureInformation) literals.\r\n */\r\nexport var SignatureInformation;\r\n(function (SignatureInformation) {\r\n    function create(label, documentation) {\r\n        var parameters = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            parameters[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { label: label };\r\n        if (Is.defined(documentation)) {\r\n            result.documentation = documentation;\r\n        }\r\n        if (Is.defined(parameters)) {\r\n            result.parameters = parameters;\r\n        }\r\n        else {\r\n            result.parameters = [];\r\n        }\r\n        return result;\r\n    }\r\n    SignatureInformation.create = create;\r\n})(SignatureInformation || (SignatureInformation = {}));\r\n/**\r\n * A document highlight kind.\r\n */\r\nexport var DocumentHighlightKind;\r\n(function (DocumentHighlightKind) {\r\n    /**\r\n     * A textual occurrence.\r\n     */\r\n    DocumentHighlightKind.Text = 1;\r\n    /**\r\n     * Read-access of a symbol, like reading a variable.\r\n     */\r\n    DocumentHighlightKind.Read = 2;\r\n    /**\r\n     * Write-access of a symbol, like writing to a variable.\r\n     */\r\n    DocumentHighlightKind.Write = 3;\r\n})(DocumentHighlightKind || (DocumentHighlightKind = {}));\r\n/**\r\n * DocumentHighlight namespace to provide helper functions to work with\r\n * [DocumentHighlight](#DocumentHighlight) literals.\r\n */\r\nexport var DocumentHighlight;\r\n(function (DocumentHighlight) {\r\n    /**\r\n     * Create a DocumentHighlight object.\r\n     * @param range The range the highlight applies to.\r\n     */\r\n    function create(range, kind) {\r\n        var result = { range: range };\r\n        if (Is.number(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentHighlight.create = create;\r\n})(DocumentHighlight || (DocumentHighlight = {}));\r\n/**\r\n * A symbol kind.\r\n */\r\nexport var SymbolKind;\r\n(function (SymbolKind) {\r\n    SymbolKind.File = 1;\r\n    SymbolKind.Module = 2;\r\n    SymbolKind.Namespace = 3;\r\n    SymbolKind.Package = 4;\r\n    SymbolKind.Class = 5;\r\n    SymbolKind.Method = 6;\r\n    SymbolKind.Property = 7;\r\n    SymbolKind.Field = 8;\r\n    SymbolKind.Constructor = 9;\r\n    SymbolKind.Enum = 10;\r\n    SymbolKind.Interface = 11;\r\n    SymbolKind.Function = 12;\r\n    SymbolKind.Variable = 13;\r\n    SymbolKind.Constant = 14;\r\n    SymbolKind.String = 15;\r\n    SymbolKind.Number = 16;\r\n    SymbolKind.Boolean = 17;\r\n    SymbolKind.Array = 18;\r\n    SymbolKind.Object = 19;\r\n    SymbolKind.Key = 20;\r\n    SymbolKind.Null = 21;\r\n    SymbolKind.EnumMember = 22;\r\n    SymbolKind.Struct = 23;\r\n    SymbolKind.Event = 24;\r\n    SymbolKind.Operator = 25;\r\n    SymbolKind.TypeParameter = 26;\r\n})(SymbolKind || (SymbolKind = {}));\r\nexport var SymbolInformation;\r\n(function (SymbolInformation) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the location of the symbol.\r\n     * @param uri The resource of the location of symbol, defaults to the current document.\r\n     * @param containerName The name of the symbol containing the symbol.\r\n     */\r\n    function create(name, kind, range, uri, containerName) {\r\n        var result = {\r\n            name: name,\r\n            kind: kind,\r\n            location: { uri: uri, range: range }\r\n        };\r\n        if (containerName) {\r\n            result.containerName = containerName;\r\n        }\r\n        return result;\r\n    }\r\n    SymbolInformation.create = create;\r\n})(SymbolInformation || (SymbolInformation = {}));\r\n/**\r\n * Represents programming constructs like variables, classes, interfaces etc.\r\n * that appear in a document. Document symbols can be hierarchical and they\r\n * have two ranges: one that encloses its definition and one that points to\r\n * its most interesting range, e.g. the range of an identifier.\r\n */\r\nvar DocumentSymbol = /** @class */ (function () {\r\n    function DocumentSymbol() {\r\n    }\r\n    return DocumentSymbol;\r\n}());\r\nexport { DocumentSymbol };\r\n(function (DocumentSymbol) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param detail The detail of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the symbol.\r\n     * @param selectionRange The selectionRange of the symbol.\r\n     * @param children Children of the symbol.\r\n     */\r\n    function create(name, detail, kind, range, selectionRange, children) {\r\n        var result = {\r\n            name: name,\r\n            detail: detail,\r\n            kind: kind,\r\n            range: range,\r\n            selectionRange: selectionRange\r\n        };\r\n        if (children !== void 0) {\r\n            result.children = children;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentSymbol.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentSymbol](#DocumentSymbol) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            Is.string(candidate.name) && Is.number(candidate.kind) &&\r\n            Range.is(candidate.range) && Range.is(candidate.selectionRange) &&\r\n            (candidate.detail === void 0 || Is.string(candidate.detail)) &&\r\n            (candidate.deprecated === void 0 || Is.boolean(candidate.deprecated)) &&\r\n            (candidate.children === void 0 || Array.isArray(candidate.children));\r\n    }\r\n    DocumentSymbol.is = is;\r\n})(DocumentSymbol || (DocumentSymbol = {}));\r\n/**\r\n * A set of predefined code action kinds\r\n */\r\nexport var CodeActionKind;\r\n(function (CodeActionKind) {\r\n    /**\r\n     * Base kind for quickfix actions: 'quickfix'\r\n     */\r\n    CodeActionKind.QuickFix = 'quickfix';\r\n    /**\r\n     * Base kind for refactoring actions: 'refactor'\r\n     */\r\n    CodeActionKind.Refactor = 'refactor';\r\n    /**\r\n     * Base kind for refactoring extraction actions: 'refactor.extract'\r\n     *\r\n     * Example extract actions:\r\n     *\r\n     * - Extract method\r\n     * - Extract function\r\n     * - Extract variable\r\n     * - Extract interface from class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorExtract = 'refactor.extract';\r\n    /**\r\n     * Base kind for refactoring inline actions: 'refactor.inline'\r\n     *\r\n     * Example inline actions:\r\n     *\r\n     * - Inline function\r\n     * - Inline variable\r\n     * - Inline constant\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorInline = 'refactor.inline';\r\n    /**\r\n     * Base kind for refactoring rewrite actions: 'refactor.rewrite'\r\n     *\r\n     * Example rewrite actions:\r\n     *\r\n     * - Convert JavaScript function to class\r\n     * - Add or remove parameter\r\n     * - Encapsulate field\r\n     * - Make method static\r\n     * - Move method to base class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorRewrite = 'refactor.rewrite';\r\n    /**\r\n     * Base kind for source actions: `source`\r\n     *\r\n     * Source code actions apply to the entire file.\r\n     */\r\n    CodeActionKind.Source = 'source';\r\n    /**\r\n     * Base kind for an organize imports source action: `source.organizeImports`\r\n     */\r\n    CodeActionKind.SourceOrganizeImports = 'source.organizeImports';\r\n})(CodeActionKind || (CodeActionKind = {}));\r\n/**\r\n * The CodeActionContext namespace provides helper functions to work with\r\n * [CodeActionContext](#CodeActionContext) literals.\r\n */\r\nexport var CodeActionContext;\r\n(function (CodeActionContext) {\r\n    /**\r\n     * Creates a new CodeActionContext literal.\r\n     */\r\n    function create(diagnostics, only) {\r\n        var result = { diagnostics: diagnostics };\r\n        if (only !== void 0 && only !== null) {\r\n            result.only = only;\r\n        }\r\n        return result;\r\n    }\r\n    CodeActionContext.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeActionContext](#CodeActionContext) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.typedArray(candidate.diagnostics, Diagnostic.is) && (candidate.only === void 0 || Is.typedArray(candidate.only, Is.string));\r\n    }\r\n    CodeActionContext.is = is;\r\n})(CodeActionContext || (CodeActionContext = {}));\r\nexport var CodeAction;\r\n(function (CodeAction) {\r\n    function create(title, commandOrEdit, kind) {\r\n        var result = { title: title };\r\n        if (Command.is(commandOrEdit)) {\r\n            result.command = commandOrEdit;\r\n        }\r\n        else {\r\n            result.edit = commandOrEdit;\r\n        }\r\n        if (kind !== void null) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    CodeAction.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && Is.string(candidate.title) &&\r\n            (candidate.diagnostics === void 0 || Is.typedArray(candidate.diagnostics, Diagnostic.is)) &&\r\n            (candidate.kind === void 0 || Is.string(candidate.kind)) &&\r\n            (candidate.edit !== void 0 || candidate.command !== void 0) &&\r\n            (candidate.command === void 0 || Command.is(candidate.command)) &&\r\n            (candidate.edit === void 0 || WorkspaceEdit.is(candidate.edit));\r\n    }\r\n    CodeAction.is = is;\r\n})(CodeAction || (CodeAction = {}));\r\n/**\r\n * The CodeLens namespace provides helper functions to work with\r\n * [CodeLens](#CodeLens) literals.\r\n */\r\nexport var CodeLens;\r\n(function (CodeLens) {\r\n    /**\r\n     * Creates a new CodeLens literal.\r\n     */\r\n    function create(range, data) {\r\n        var result = { range: range };\r\n        if (Is.defined(data))\r\n            result.data = data;\r\n        return result;\r\n    }\r\n    CodeLens.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeLens](#CodeLens) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.command) || Command.is(candidate.command));\r\n    }\r\n    CodeLens.is = is;\r\n})(CodeLens || (CodeLens = {}));\r\n/**\r\n * The FormattingOptions namespace provides helper functions to work with\r\n * [FormattingOptions](#FormattingOptions) literals.\r\n */\r\nexport var FormattingOptions;\r\n(function (FormattingOptions) {\r\n    /**\r\n     * Creates a new FormattingOptions literal.\r\n     */\r\n    function create(tabSize, insertSpaces) {\r\n        return { tabSize: tabSize, insertSpaces: insertSpaces };\r\n    }\r\n    FormattingOptions.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FormattingOptions](#FormattingOptions) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.number(candidate.tabSize) && Is.boolean(candidate.insertSpaces);\r\n    }\r\n    FormattingOptions.is = is;\r\n})(FormattingOptions || (FormattingOptions = {}));\r\n/**\r\n * A document link is a range in a text document that links to an internal or external resource, like another\r\n * text document or a web site.\r\n */\r\nvar DocumentLink = /** @class */ (function () {\r\n    function DocumentLink() {\r\n    }\r\n    return DocumentLink;\r\n}());\r\nexport { DocumentLink };\r\n/**\r\n * The DocumentLink namespace provides helper functions to work with\r\n * [DocumentLink](#DocumentLink) literals.\r\n */\r\n(function (DocumentLink) {\r\n    /**\r\n     * Creates a new DocumentLink literal.\r\n     */\r\n    function create(range, target, data) {\r\n        return { range: range, target: target, data: data };\r\n    }\r\n    DocumentLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentLink](#DocumentLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.target) || Is.string(candidate.target));\r\n    }\r\n    DocumentLink.is = is;\r\n})(DocumentLink || (DocumentLink = {}));\r\nexport var EOL = ['\\n', '\\r\\n', '\\r'];\r\nexport var TextDocument;\r\n(function (TextDocument) {\r\n    /**\r\n     * Creates a new ITextDocument literal from the given uri and content.\r\n     * @param uri The document's uri.\r\n     * @param languageId  The document's language Id.\r\n     * @param content The document's content.\r\n     */\r\n    function create(uri, languageId, version, content) {\r\n        return new FullTextDocument(uri, languageId, version, content);\r\n    }\r\n    TextDocument.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ITextDocument](#ITextDocument) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (Is.undefined(candidate.languageId) || Is.string(candidate.languageId)) && Is.number(candidate.lineCount)\r\n            && Is.func(candidate.getText) && Is.func(candidate.positionAt) && Is.func(candidate.offsetAt) ? true : false;\r\n    }\r\n    TextDocument.is = is;\r\n    function applyEdits(document, edits) {\r\n        var text = document.getText();\r\n        var sortedEdits = mergeSort(edits, function (a, b) {\r\n            var diff = a.range.start.line - b.range.start.line;\r\n            if (diff === 0) {\r\n                return a.range.start.character - b.range.start.character;\r\n            }\r\n            return diff;\r\n        });\r\n        var lastModifiedOffset = text.length;\r\n        for (var i = sortedEdits.length - 1; i >= 0; i--) {\r\n            var e = sortedEdits[i];\r\n            var startOffset = document.offsetAt(e.range.start);\r\n            var endOffset = document.offsetAt(e.range.end);\r\n            if (endOffset <= lastModifiedOffset) {\r\n                text = text.substring(0, startOffset) + e.newText + text.substring(endOffset, text.length);\r\n            }\r\n            else {\r\n                throw new Error('Ovelapping edit');\r\n            }\r\n            lastModifiedOffset = startOffset;\r\n        }\r\n        return text;\r\n    }\r\n    TextDocument.applyEdits = applyEdits;\r\n    function mergeSort(data, compare) {\r\n        if (data.length <= 1) {\r\n            // sorted\r\n            return data;\r\n        }\r\n        var p = (data.length / 2) | 0;\r\n        var left = data.slice(0, p);\r\n        var right = data.slice(p);\r\n        mergeSort(left, compare);\r\n        mergeSort(right, compare);\r\n        var leftIdx = 0;\r\n        var rightIdx = 0;\r\n        var i = 0;\r\n        while (leftIdx < left.length && rightIdx < right.length) {\r\n            var ret = compare(left[leftIdx], right[rightIdx]);\r\n            if (ret <= 0) {\r\n                // smaller_equal -> take left to preserve order\r\n                data[i++] = left[leftIdx++];\r\n            }\r\n            else {\r\n                // greater -> take right\r\n                data[i++] = right[rightIdx++];\r\n            }\r\n        }\r\n        while (leftIdx < left.length) {\r\n            data[i++] = left[leftIdx++];\r\n        }\r\n        while (rightIdx < right.length) {\r\n            data[i++] = right[rightIdx++];\r\n        }\r\n        return data;\r\n    }\r\n})(TextDocument || (TextDocument = {}));\r\n/**\r\n * Represents reasons why a text document is saved.\r\n */\r\nexport var TextDocumentSaveReason;\r\n(function (TextDocumentSaveReason) {\r\n    /**\r\n     * Manually triggered, e.g. by the user pressing save, by starting debugging,\r\n     * or by an API call.\r\n     */\r\n    TextDocumentSaveReason.Manual = 1;\r\n    /**\r\n     * Automatic after a delay.\r\n     */\r\n    TextDocumentSaveReason.AfterDelay = 2;\r\n    /**\r\n     * When the editor lost focus.\r\n     */\r\n    TextDocumentSaveReason.FocusOut = 3;\r\n})(TextDocumentSaveReason || (TextDocumentSaveReason = {}));\r\nvar FullTextDocument = /** @class */ (function () {\r\n    function FullTextDocument(uri, languageId, version, content) {\r\n        this._uri = uri;\r\n        this._languageId = languageId;\r\n        this._version = version;\r\n        this._content = content;\r\n        this._lineOffsets = null;\r\n    }\r\n    Object.defineProperty(FullTextDocument.prototype, \"uri\", {\r\n        get: function () {\r\n            return this._uri;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\r\n        get: function () {\r\n            return this._languageId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"version\", {\r\n        get: function () {\r\n            return this._version;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    FullTextDocument.prototype.getText = function (range) {\r\n        if (range) {\r\n            var start = this.offsetAt(range.start);\r\n            var end = this.offsetAt(range.end);\r\n            return this._content.substring(start, end);\r\n        }\r\n        return this._content;\r\n    };\r\n    FullTextDocument.prototype.update = function (event, version) {\r\n        this._content = event.text;\r\n        this._version = version;\r\n        this._lineOffsets = null;\r\n    };\r\n    FullTextDocument.prototype.getLineOffsets = function () {\r\n        if (this._lineOffsets === null) {\r\n            var lineOffsets = [];\r\n            var text = this._content;\r\n            var isLineStart = true;\r\n            for (var i = 0; i < text.length; i++) {\r\n                if (isLineStart) {\r\n                    lineOffsets.push(i);\r\n                    isLineStart = false;\r\n                }\r\n                var ch = text.charAt(i);\r\n                isLineStart = (ch === '\\r' || ch === '\\n');\r\n                if (ch === '\\r' && i + 1 < text.length && text.charAt(i + 1) === '\\n') {\r\n                    i++;\r\n                }\r\n            }\r\n            if (isLineStart && text.length > 0) {\r\n                lineOffsets.push(text.length);\r\n            }\r\n            this._lineOffsets = lineOffsets;\r\n        }\r\n        return this._lineOffsets;\r\n    };\r\n    FullTextDocument.prototype.positionAt = function (offset) {\r\n        offset = Math.max(Math.min(offset, this._content.length), 0);\r\n        var lineOffsets = this.getLineOffsets();\r\n        var low = 0, high = lineOffsets.length;\r\n        if (high === 0) {\r\n            return Position.create(0, offset);\r\n        }\r\n        while (low < high) {\r\n            var mid = Math.floor((low + high) / 2);\r\n            if (lineOffsets[mid] > offset) {\r\n                high = mid;\r\n            }\r\n            else {\r\n                low = mid + 1;\r\n            }\r\n        }\r\n        // low is the least x for which the line offset is larger than the current offset\r\n        // or array.length if no line offset is larger than the current offset\r\n        var line = low - 1;\r\n        return Position.create(line, offset - lineOffsets[line]);\r\n    };\r\n    FullTextDocument.prototype.offsetAt = function (position) {\r\n        var lineOffsets = this.getLineOffsets();\r\n        if (position.line >= lineOffsets.length) {\r\n            return this._content.length;\r\n        }\r\n        else if (position.line < 0) {\r\n            return 0;\r\n        }\r\n        var lineOffset = lineOffsets[position.line];\r\n        var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\r\n        return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\r\n    };\r\n    Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\r\n        get: function () {\r\n            return this.getLineOffsets().length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FullTextDocument;\r\n}());\r\nvar Is;\r\n(function (Is) {\r\n    var toString = Object.prototype.toString;\r\n    function defined(value) {\r\n        return typeof value !== 'undefined';\r\n    }\r\n    Is.defined = defined;\r\n    function undefined(value) {\r\n        return typeof value === 'undefined';\r\n    }\r\n    Is.undefined = undefined;\r\n    function boolean(value) {\r\n        return value === true || value === false;\r\n    }\r\n    Is.boolean = boolean;\r\n    function string(value) {\r\n        return toString.call(value) === '[object String]';\r\n    }\r\n    Is.string = string;\r\n    function number(value) {\r\n        return toString.call(value) === '[object Number]';\r\n    }\r\n    Is.number = number;\r\n    function func(value) {\r\n        return toString.call(value) === '[object Function]';\r\n    }\r\n    Is.func = func;\r\n    function objectLiteral(value) {\r\n        // Strictly speaking class instances pass this check as well. Since the LSP\r\n        // doesn't use classes we ignore this for now. If we do we need to add something\r\n        // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\r\n        return value !== null && typeof value === 'object';\r\n    }\r\n    Is.objectLiteral = objectLiteral;\r\n    function typedArray(value, check) {\r\n        return Array.isArray(value) && value.every(check);\r\n    }\r\n    Is.typedArray = typedArray;\r\n})(Is || (Is = {}));\r\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport * as ls from './_deps/vscode-languageserver-types/main';\nvar Range = monaco.Range;\n// --- diagnostics --- ---\nvar DiagnosticsAdapter = /** @class */ (function () {\n    function DiagnosticsAdapter(_languageId, _worker, defaults) {\n        var _this = this;\n        this._languageId = _languageId;\n        this._worker = _worker;\n        this._disposables = [];\n        this._listener = Object.create(null);\n        var onModelAdd = function (model) {\n            var modeId = model.getModeId();\n            if (modeId !== _this._languageId) {\n                return;\n            }\n            var handle;\n            _this._listener[model.uri.toString()] = model.onDidChangeContent(function () {\n                clearTimeout(handle);\n                handle = setTimeout(function () { return _this._doValidate(model.uri, modeId); }, 500);\n            });\n            _this._doValidate(model.uri, modeId);\n        };\n        var onModelRemoved = function (model) {\n            monaco.editor.setModelMarkers(model, _this._languageId, []);\n            var uriStr = model.uri.toString();\n            var listener = _this._listener[uriStr];\n            if (listener) {\n                listener.dispose();\n                delete _this._listener[uriStr];\n            }\n        };\n        this._disposables.push(monaco.editor.onDidCreateModel(onModelAdd));\n        this._disposables.push(monaco.editor.onWillDisposeModel(function (model) {\n            onModelRemoved(model);\n            _this._resetSchema(model.uri);\n        }));\n        this._disposables.push(monaco.editor.onDidChangeModelLanguage(function (event) {\n            onModelRemoved(event.model);\n            onModelAdd(event.model);\n            _this._resetSchema(event.model.uri);\n        }));\n        this._disposables.push(defaults.onDidChange(function (_) {\n            monaco.editor.getModels().forEach(function (model) {\n                if (model.getModeId() === _this._languageId) {\n                    onModelRemoved(model);\n                    onModelAdd(model);\n                }\n            });\n        }));\n        this._disposables.push({\n            dispose: function () {\n                monaco.editor.getModels().forEach(onModelRemoved);\n                for (var key in _this._listener) {\n                    _this._listener[key].dispose();\n                }\n            },\n        });\n        monaco.editor.getModels().forEach(onModelAdd);\n    }\n    DiagnosticsAdapter.prototype.dispose = function () {\n        this._disposables.forEach(function (d) { return d && d.dispose(); });\n        this._disposables = [];\n    };\n    DiagnosticsAdapter.prototype._resetSchema = function (resource) {\n        this._worker().then(function (worker) {\n            worker.resetSchema(resource.toString());\n        });\n    };\n    DiagnosticsAdapter.prototype._doValidate = function (resource, languageId) {\n        this._worker(resource)\n            .then(function (worker) {\n            return worker.doValidation(resource.toString()).then(function (diagnostics) {\n                var markers = diagnostics.map(function (d) { return toDiagnostics(resource, d); });\n                var model = monaco.editor.getModel(resource);\n                if (model.getModeId() === languageId) {\n                    monaco.editor.setModelMarkers(model, languageId, markers);\n                }\n            });\n        })\n            .then(undefined, function (err) {\n            console.error(err);\n        });\n    };\n    return DiagnosticsAdapter;\n}());\nexport { DiagnosticsAdapter };\nfunction toSeverity(lsSeverity) {\n    switch (lsSeverity) {\n        case ls.DiagnosticSeverity.Error:\n            return monaco.MarkerSeverity.Error;\n        case ls.DiagnosticSeverity.Warning:\n            return monaco.MarkerSeverity.Warning;\n        case ls.DiagnosticSeverity.Information:\n            return monaco.MarkerSeverity.Info;\n        case ls.DiagnosticSeverity.Hint:\n            return monaco.MarkerSeverity.Hint;\n        default:\n            return monaco.MarkerSeverity.Info;\n    }\n}\nfunction toDiagnostics(resource, diag) {\n    var code = typeof diag.code === 'number' ? String(diag.code) : diag.code;\n    return {\n        severity: toSeverity(diag.severity),\n        startLineNumber: diag.range.start.line + 1,\n        startColumn: diag.range.start.character + 1,\n        endLineNumber: diag.range.end.line + 1,\n        endColumn: diag.range.end.character + 1,\n        message: diag.message,\n        code: code,\n        source: diag.source,\n    };\n}\n// --- completion ------\nfunction fromPosition(position) {\n    if (!position) {\n        return void 0;\n    }\n    return { character: position.column - 1, line: position.lineNumber - 1 };\n}\nfunction fromRange(range) {\n    if (!range) {\n        return void 0;\n    }\n    return {\n        start: {\n            line: range.startLineNumber - 1,\n            character: range.startColumn - 1,\n        },\n        end: { line: range.endLineNumber - 1, character: range.endColumn - 1 },\n    };\n}\nfunction toRange(range) {\n    if (!range) {\n        return void 0;\n    }\n    return new Range(range.start.line + 1, range.start.character + 1, range.end.line + 1, range.end.character + 1);\n}\nfunction toCompletionItemKind(kind) {\n    var mItemKind = monaco.languages.CompletionItemKind;\n    switch (kind) {\n        case ls.CompletionItemKind.Text:\n            return mItemKind.Text;\n        case ls.CompletionItemKind.Method:\n            return mItemKind.Method;\n        case ls.CompletionItemKind.Function:\n            return mItemKind.Function;\n        case ls.CompletionItemKind.Constructor:\n            return mItemKind.Constructor;\n        case ls.CompletionItemKind.Field:\n            return mItemKind.Field;\n        case ls.CompletionItemKind.Variable:\n            return mItemKind.Variable;\n        case ls.CompletionItemKind.Class:\n            return mItemKind.Class;\n        case ls.CompletionItemKind.Interface:\n            return mItemKind.Interface;\n        case ls.CompletionItemKind.Module:\n            return mItemKind.Module;\n        case ls.CompletionItemKind.Property:\n            return mItemKind.Property;\n        case ls.CompletionItemKind.Unit:\n            return mItemKind.Unit;\n        case ls.CompletionItemKind.Value:\n            return mItemKind.Value;\n        case ls.CompletionItemKind.Enum:\n            return mItemKind.Enum;\n        case ls.CompletionItemKind.Keyword:\n            return mItemKind.Keyword;\n        case ls.CompletionItemKind.Snippet:\n            return mItemKind.Snippet;\n        case ls.CompletionItemKind.Color:\n            return mItemKind.Color;\n        case ls.CompletionItemKind.File:\n            return mItemKind.File;\n        case ls.CompletionItemKind.Reference:\n            return mItemKind.Reference;\n    }\n    return mItemKind.Property;\n}\nfunction fromCompletionItemKind(kind) {\n    var mItemKind = monaco.languages.CompletionItemKind;\n    switch (kind) {\n        case mItemKind.Text:\n            return ls.CompletionItemKind.Text;\n        case mItemKind.Method:\n            return ls.CompletionItemKind.Method;\n        case mItemKind.Function:\n            return ls.CompletionItemKind.Function;\n        case mItemKind.Constructor:\n            return ls.CompletionItemKind.Constructor;\n        case mItemKind.Field:\n            return ls.CompletionItemKind.Field;\n        case mItemKind.Variable:\n            return ls.CompletionItemKind.Variable;\n        case mItemKind.Class:\n            return ls.CompletionItemKind.Class;\n        case mItemKind.Interface:\n            return ls.CompletionItemKind.Interface;\n        case mItemKind.Module:\n            return ls.CompletionItemKind.Module;\n        case mItemKind.Property:\n            return ls.CompletionItemKind.Property;\n        case mItemKind.Unit:\n            return ls.CompletionItemKind.Unit;\n        case mItemKind.Value:\n            return ls.CompletionItemKind.Value;\n        case mItemKind.Enum:\n            return ls.CompletionItemKind.Enum;\n        case mItemKind.Keyword:\n            return ls.CompletionItemKind.Keyword;\n        case mItemKind.Snippet:\n            return ls.CompletionItemKind.Snippet;\n        case mItemKind.Color:\n            return ls.CompletionItemKind.Color;\n        case mItemKind.File:\n            return ls.CompletionItemKind.File;\n        case mItemKind.Reference:\n            return ls.CompletionItemKind.Reference;\n    }\n    return ls.CompletionItemKind.Property;\n}\nfunction toTextEdit(textEdit) {\n    if (!textEdit) {\n        return void 0;\n    }\n    return {\n        range: toRange(textEdit.range),\n        text: textEdit.newText,\n    };\n}\nvar CompletionAdapter = /** @class */ (function () {\n    function CompletionAdapter(_worker) {\n        this._worker = _worker;\n    }\n    Object.defineProperty(CompletionAdapter.prototype, \"triggerCharacters\", {\n        get: function () {\n            return [' ', ':'];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CompletionAdapter.prototype.provideCompletionItems = function (model, position, context, token) {\n        var wordInfo = model.getWordUntilPosition(position);\n        var resource = model.uri;\n        return this._worker(resource)\n            .then(function (worker) {\n            return worker.doComplete(resource.toString(), fromPosition(position));\n        })\n            .then(function (info) {\n            if (!info) {\n                return;\n            }\n            var items = info.items.map(function (entry) {\n                var item = {\n                    label: entry.label,\n                    insertText: entry.insertText || entry.label,\n                    sortText: entry.sortText,\n                    filterText: entry.filterText,\n                    documentation: entry.documentation,\n                    detail: entry.detail,\n                    kind: toCompletionItemKind(entry.kind),\n                };\n                if (entry.textEdit) {\n                    item.range = toRange(entry.textEdit.range);\n                    item.insertText = entry.textEdit.newText;\n                }\n                if (entry.additionalTextEdits) {\n                    item.additionalTextEdits = entry.additionalTextEdits.map(toTextEdit);\n                }\n                if (entry.insertTextFormat === ls.InsertTextFormat.Snippet) {\n                    item.insertTextRules =\n                        monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet;\n                }\n                return item;\n            });\n            return {\n                isIncomplete: info.isIncomplete,\n                suggestions: items,\n            };\n        });\n    };\n    return CompletionAdapter;\n}());\nexport { CompletionAdapter };\nfunction isMarkupContent(thing) {\n    return (thing &&\n        typeof thing === 'object' &&\n        typeof thing.kind === 'string');\n}\nfunction toMarkdownString(entry) {\n    if (typeof entry === 'string') {\n        return {\n            value: entry,\n        };\n    }\n    if (isMarkupContent(entry)) {\n        if (entry.kind === 'plaintext') {\n            return {\n                value: entry.value.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&'),\n            };\n        }\n        return {\n            value: entry.value,\n        };\n    }\n    return { value: '```' + entry.language + '\\n' + entry.value + '\\n```\\n' };\n}\nfunction toMarkedStringArray(contents) {\n    if (!contents) {\n        return void 0;\n    }\n    if (Array.isArray(contents)) {\n        return contents.map(toMarkdownString);\n    }\n    return [toMarkdownString(contents)];\n}\n// --- hover ------\nvar HoverAdapter = /** @class */ (function () {\n    function HoverAdapter(_worker) {\n        this._worker = _worker;\n    }\n    HoverAdapter.prototype.provideHover = function (model, position, token) {\n        var resource = model.uri;\n        return this._worker(resource)\n            .then(function (worker) {\n            return worker.doHover(resource.toString(), fromPosition(position));\n        })\n            .then(function (info) {\n            if (!info) {\n                return;\n            }\n            return {\n                range: toRange(info.range),\n                contents: toMarkedStringArray(info.contents),\n            };\n        });\n    };\n    return HoverAdapter;\n}());\nexport { HoverAdapter };\n// --- document symbols ------\nfunction toSymbolKind(kind) {\n    var mKind = monaco.languages.SymbolKind;\n    switch (kind) {\n        case ls.SymbolKind.File:\n            return mKind.Array;\n        case ls.SymbolKind.Module:\n            return mKind.Module;\n        case ls.SymbolKind.Namespace:\n            return mKind.Namespace;\n        case ls.SymbolKind.Package:\n            return mKind.Package;\n        case ls.SymbolKind.Class:\n            return mKind.Class;\n        case ls.SymbolKind.Method:\n            return mKind.Method;\n        case ls.SymbolKind.Property:\n            return mKind.Property;\n        case ls.SymbolKind.Field:\n            return mKind.Field;\n        case ls.SymbolKind.Constructor:\n            return mKind.Constructor;\n        case ls.SymbolKind.Enum:\n            return mKind.Enum;\n        case ls.SymbolKind.Interface:\n            return mKind.Interface;\n        case ls.SymbolKind.Function:\n            return mKind.Function;\n        case ls.SymbolKind.Variable:\n            return mKind.Variable;\n        case ls.SymbolKind.Constant:\n            return mKind.Constant;\n        case ls.SymbolKind.String:\n            return mKind.String;\n        case ls.SymbolKind.Number:\n            return mKind.Number;\n        case ls.SymbolKind.Boolean:\n            return mKind.Boolean;\n        case ls.SymbolKind.Array:\n            return mKind.Array;\n    }\n    return mKind.Function;\n}\nvar DocumentSymbolAdapter = /** @class */ (function () {\n    function DocumentSymbolAdapter(_worker) {\n        this._worker = _worker;\n    }\n    DocumentSymbolAdapter.prototype.provideDocumentSymbols = function (model, token) {\n        var resource = model.uri;\n        return this._worker(resource)\n            .then(function (worker) { return worker.findDocumentSymbols(resource.toString()); })\n            .then(function (items) {\n            if (!items) {\n                return;\n            }\n            return items.map(function (item) { return toDocumentSymbol(item); });\n        });\n    };\n    return DocumentSymbolAdapter;\n}());\nexport { DocumentSymbolAdapter };\nfunction toDocumentSymbol(item) {\n    return {\n        detail: '',\n        range: toRange(item.range),\n        name: item.name,\n        kind: toSymbolKind(item.kind),\n        selectionRange: toRange(item.selectionRange),\n        children: item.children.map(function (child) { return toDocumentSymbol(child); }),\n    };\n}\nfunction fromFormattingOptions(options) {\n    return __assign({ tabSize: options.tabSize, insertSpaces: options.insertSpaces }, options);\n}\nvar DocumentFormattingEditProvider = /** @class */ (function () {\n    function DocumentFormattingEditProvider(_worker) {\n        this._worker = _worker;\n    }\n    DocumentFormattingEditProvider.prototype.provideDocumentFormattingEdits = function (model, options, token) {\n        var resource = model.uri;\n        return this._worker(resource).then(function (worker) {\n            return worker\n                .format(resource.toString(), null, fromFormattingOptions(options))\n                .then(function (edits) {\n                if (!edits || edits.length === 0) {\n                    return;\n                }\n                return edits.map(toTextEdit);\n            });\n        });\n    };\n    return DocumentFormattingEditProvider;\n}());\nexport { DocumentFormattingEditProvider };\nvar DocumentRangeFormattingEditProvider = /** @class */ (function () {\n    function DocumentRangeFormattingEditProvider(_worker) {\n        this._worker = _worker;\n    }\n    DocumentRangeFormattingEditProvider.prototype.provideDocumentRangeFormattingEdits = function (model, range, options, token) {\n        var resource = model.uri;\n        return this._worker(resource).then(function (worker) {\n            return worker\n                .format(resource.toString(), fromRange(range), fromFormattingOptions(options))\n                .then(function (edits) {\n                if (!edits || edits.length === 0) {\n                    return;\n                }\n                return edits.map(toTextEdit);\n            });\n        });\n    };\n    return DocumentRangeFormattingEditProvider;\n}());\nexport { DocumentRangeFormattingEditProvider };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nvar STOP_WHEN_IDLE_FOR = 2 * 60 * 1000; // 2min\nvar WorkerManager = /** @class */ (function () {\n    function WorkerManager(defaults) {\n        var _this = this;\n        this._defaults = defaults;\n        this._worker = null;\n        this._idleCheckInterval = setInterval(function () { return _this._checkIfIdle(); }, 30 * 1000);\n        this._lastUsedTime = 0;\n        this._configChangeListener = this._defaults.onDidChange(function () {\n            return _this._stopWorker();\n        });\n    }\n    WorkerManager.prototype.dispose = function () {\n        clearInterval(this._idleCheckInterval);\n        this._configChangeListener.dispose();\n        this._stopWorker();\n    };\n    WorkerManager.prototype.getLanguageServiceWorker = function () {\n        var _this = this;\n        var resources = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            resources[_i] = arguments[_i];\n        }\n        var _client;\n        return this._getClient()\n            .then(function (client) {\n            _client = client;\n        })\n            .then(function (_) {\n            return _this._worker.withSyncedResources(resources);\n        })\n            .then(function (_) { return _client; });\n    };\n    WorkerManager.prototype._stopWorker = function () {\n        if (this._worker) {\n            this._worker.dispose();\n            this._worker = null;\n        }\n        this._client = null;\n    };\n    WorkerManager.prototype._checkIfIdle = function () {\n        if (!this._worker) {\n            return;\n        }\n        var timePassedSinceLastUsed = Date.now() - this._lastUsedTime;\n        if (timePassedSinceLastUsed > STOP_WHEN_IDLE_FOR) {\n            this._stopWorker();\n        }\n    };\n    WorkerManager.prototype._getClient = function () {\n        this._lastUsedTime = Date.now();\n        if (!this._client) {\n            this._worker = monaco.editor.createWebWorker({\n                // module that exports the create() method and returns a `YAMLWorker` instance\n                moduleId: 'vs/language/yaml/yamlWorker',\n                label: this._defaults.languageId,\n                // passed in to the create() method\n                createData: {\n                    languageSettings: this._defaults.diagnosticsOptions,\n                    languageId: this._defaults.languageId,\n                    enableSchemaRequest: this._defaults.diagnosticsOptions\n                        .enableSchemaRequest,\n                    prefix: this._defaults.diagnosticsOptions.prefix,\n                    isKubernetes: this._defaults.diagnosticsOptions.isKubernetes,\n                },\n            });\n            this._client = this._worker.getProxy();\n        }\n        return this._client;\n    };\n    return WorkerManager;\n}());\nexport { WorkerManager };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nimport * as languageFeatures from './languageFeatures';\nimport { WorkerManager } from './workerManager';\nexport function setupMode(defaults) {\n    var disposables = [];\n    var client = new WorkerManager(defaults);\n    disposables.push(client);\n    var worker = function () {\n        var uris = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            uris[_i] = arguments[_i];\n        }\n        return client.getLanguageServiceWorker.apply(client, __spread(uris));\n    };\n    var languageId = defaults.languageId;\n    disposables.push(monaco.languages.registerCompletionItemProvider(languageId, new languageFeatures.CompletionAdapter(worker)));\n    disposables.push(monaco.languages.registerHoverProvider(languageId, new languageFeatures.HoverAdapter(worker)));\n    disposables.push(monaco.languages.registerDocumentSymbolProvider(languageId, new languageFeatures.DocumentSymbolAdapter(worker)));\n    disposables.push(monaco.languages.registerDocumentFormattingEditProvider(languageId, new languageFeatures.DocumentFormattingEditProvider(worker)));\n    disposables.push(monaco.languages.registerDocumentRangeFormattingEditProvider(languageId, new languageFeatures.DocumentRangeFormattingEditProvider(worker)));\n    disposables.push(new languageFeatures.DiagnosticsAdapter(languageId, worker, defaults));\n    disposables.push(monaco.languages.setLanguageConfiguration(languageId, richEditConfiguration));\n    // Color adapter should be necessary most of the time:\n    // disposables.push(monaco.languages.registerColorProvider(languageId, new languageFeatures.DocumentColorAdapter(worker)));\n}\nvar richEditConfiguration = {\n    comments: {\n        lineComment: '#',\n    },\n    brackets: [\n        ['{', '}'],\n        ['[', ']'],\n        ['(', ')'],\n    ],\n    autoClosingPairs: [\n        { open: '{', close: '}' },\n        { open: '[', close: ']' },\n        { open: '(', close: ')' },\n        { open: '\"', close: '\"' },\n        { open: \"'\", close: \"'\" },\n    ],\n    surroundingPairs: [\n        { open: '{', close: '}' },\n        { open: '[', close: ']' },\n        { open: '(', close: ')' },\n        { open: '\"', close: '\"' },\n        { open: \"'\", close: \"'\" },\n    ],\n    onEnterRules: [\n        {\n            beforeText: /:\\s*$/,\n            action: { indentAction: monaco.languages.IndentAction.Indent },\n        },\n    ],\n};\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport { setupMode } from './yamlMode';\nvar Emitter = monaco.Emitter;\n// --- YAML configuration and defaults ---------\nvar LanguageServiceDefaultsImpl = /** @class */ (function () {\n    function LanguageServiceDefaultsImpl(languageId, diagnosticsOptions) {\n        this._onDidChange = new Emitter();\n        this._languageId = languageId;\n        this.setDiagnosticsOptions(diagnosticsOptions);\n    }\n    Object.defineProperty(LanguageServiceDefaultsImpl.prototype, \"onDidChange\", {\n        get: function () {\n            return this._onDidChange.event;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(LanguageServiceDefaultsImpl.prototype, \"languageId\", {\n        get: function () {\n            return this._languageId;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(LanguageServiceDefaultsImpl.prototype, \"diagnosticsOptions\", {\n        get: function () {\n            return this._diagnosticsOptions;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    LanguageServiceDefaultsImpl.prototype.setDiagnosticsOptions = function (options) {\n        this._diagnosticsOptions = options || Object.create(null);\n        this._onDidChange.fire(this);\n    };\n    return LanguageServiceDefaultsImpl;\n}());\nexport { LanguageServiceDefaultsImpl };\nvar diagnosticDefault = {\n    validate: true,\n    schemas: [],\n    enableSchemaRequest: false,\n};\nvar yamlDefaults = new LanguageServiceDefaultsImpl('yaml', diagnosticDefault);\n// Export API\nfunction createAPI() {\n    return {\n        yamlDefaults: yamlDefaults,\n    };\n}\nmonaco.languages.yaml = createAPI();\n// --- Registration to monaco editor ---\nmonaco.languages.register({\n    id: 'yaml',\n    extensions: ['.yaml', '.yml'],\n    aliases: ['YAML', 'yaml', 'YML', 'yml'],\n    mimetypes: ['application/x-yaml'],\n});\nmonaco.languages.onLanguage('yaml', function () {\n    setupMode(yamlDefaults);\n});\n","import React from 'react';\nimport createSvgIcon from './createSvgIcon';\n/**\n * @ignore - internal component.\n */\n\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n}), 'Close');"],"sourceRoot":""}