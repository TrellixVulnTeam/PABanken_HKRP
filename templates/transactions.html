{% extends "basetemplate.html" %}

{% block title %}
Transcations
{% endblock %}


{% block content %}

<div class="card">
    <div class="card-header">
        <h1>Transactions for {{ account.Account_nr }}</h1>
    </div>
    <div class="card-body">
        <table class="table" id="posts-table">
            <tr>
                <th>Transaction No
                </th>
                <th>Amount
                </th>
                <th>Date
                </th>
            </tr>
            <tbody>
            {% for transaction in  transactions%}                    
                <tr>
                    <td>{{ transaction.id }}</td>
                    <!-- <td>{{ theAccount.PersonID }}</td> -->
                    <td>{{ transaction.Amount }}</td>
                    <td>{{ transaction.Datum }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
        


            <a class="btn" href="javascript:fetchMore();">Show 10 more</a>

    </div>
</div>


<script>
    pageNo = 2;
    function fetchMore(){
        url = "/api/{{ account.id }}/transactions?page=" + pageNo;
        fetch(url)
            .then((response)=>response.json())            
            .then((json)=>{
                pageNo = pageNo + 1;
                json.forEach(tableElement);
            });
        
    }
    function tableElement(element) {
            document.querySelector('#posts-table tbody').innerHTML +=
                `<tr>
        <td>${element.id}</td>
        <td>${element.Amount}</td>
        <td>${element.Datum}</td>
    </tr>`;
        }

</script>




{% endblock %}